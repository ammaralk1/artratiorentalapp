import{s}from"./utils-C0DqWSLe.js";const a=Object.freeze({usernameHash:"4183ac4c8fe6969855d033d804ab4f4e8f2c095a06edb1a903626c6d468d9094",passwordHash:"306c7a94b7ba9d5e467d6bf75bb631ff88a44f7c1ae613717643ccee353ed6d1"}),c="❌ بيانات الدخول غير صحيحة";function f(){s(c,3e3);const e=document.getElementById("login-error");e&&(e.innerText=c)}function l(e){return Array.from(new Uint8Array(e)).map(n=>n.toString(16).padStart(2,"0")).join("")}async function i(e){var o;const n=(e||"").trim();if(!n)return"";if(typeof window<"u"&&((o=window.crypto)!=null&&o.subtle)){const t=new TextEncoder().encode(n),d=await window.crypto.subtle.digest("SHA-256",t);return l(d)}return console.warn("⚠️ Web Crypto غير متاح، تتم المقارنة بنص عادي"),n}function u(e,n){return e&&n&&e===a.usernameHash&&n===a.passwordHash}async function h(e,n){try{const[o,r]=await Promise.all([i(e),i(n)]);if(u(o,r)){const t=(e||"").trim();localStorage.setItem("loggedInUser",JSON.stringify({username:t})),window.location.href="dashboard.html";return}}catch(o){console.error("❌ فشل تسجيل الدخول",o)}f()}function w(){localStorage.removeItem("loggedInUser"),s("🚪 تم تسجيل الخروج"),window.location.href="login.html"}function m(){localStorage.getItem("loggedInUser")||(window.location.href="login.html")}export{h as a,m as c,w as l};
