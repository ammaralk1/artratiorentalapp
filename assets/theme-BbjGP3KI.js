import{t as r}from"./utils-BcYEmFqz.js";const i="app-theme",n="dark-mode";function d(){try{const e=localStorage.getItem(i);if(e==="dark"||e==="light")return e}catch(e){console.warn("⚠️ تعذر قراءة تفضيل السمة من localStorage",e)}return null}function g(){const e=d();return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function m(e){try{localStorage.setItem(i,e)}catch(t){console.warn("⚠️ تعذر حفظ تفضيل السمة في localStorage",t)}}function l(e){const t=document.documentElement,o=document.body;e==="dark"?(t.classList.add(n),o&&o.classList.add(n)):(t.classList.remove(n),o&&o.classList.remove(n)),m(e)}function c(){const e=document.body;return e&&e.classList.contains(n)||document.documentElement.classList.contains(n)?"dark":"light"}function u(e,t){if(!e)return;const o=t==="dark",s=o?r("theme.toggle.toLight","☀️ الوضع العادي"):r("theme.toggle.toDark","🌙 الوضع الليلي");e.textContent=s,e.setAttribute("aria-pressed",String(o)),e.setAttribute("title",o?r("theme.toggle.titleLight","التبديل إلى الوضع العادي"):r("theme.toggle.titleDark","التبديل إلى الوضع الليلي")),e.setAttribute("aria-label",o?r("theme.toggle.ariaLight","الوضع العادي مفعل"):r("theme.toggle.ariaDark","الوضع الليلي مفعل"))}function a(e){document.querySelectorAll(".theme-toggle-btn").forEach(t=>u(t,e))}function f(e="theme-toggle"){const t=document.getElementById(e)||document.querySelector(".theme-toggle-btn");a(c()),!(!t||t.dataset.listenerAttached)&&(t.addEventListener("click",()=>{const o=c()==="dark"?"light":"dark";l(o),a(o)}),t.dataset.listenerAttached="true")}function k(){const e=g();l(e),a(e)}document.addEventListener("language:changed",()=>{a(c())});export{k as a,f as i};
