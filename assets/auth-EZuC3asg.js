(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const O="app-language",y="ar",B="ar",D=["Placeholder","Title","AriaLabel","AriaDescription","Value"],l={ar:Object.create(null),en:Object.create(null)};let A=!1,E=!1,s=y;function f(t){return t==="en"?"en":"ar"}function M(){var t;if(typeof window>"u")return null;try{const e=(t=window.localStorage)==null?void 0:t.getItem(O);if(e==="ar"||e==="en")return e}catch(e){A||(console.warn("⚠️ تعذر قراءة تفضيل اللغة",e),A=!0)}return null}const F=M();s=f(F??y);function G(){const t=M();return t&&(s=f(t)),s}function j(t){var n;const e=f(t);if(!(typeof window>"u"))try{(n=window.localStorage)==null||n.setItem(O,e)}catch(r){E||(console.warn("⚠️ تعذر حفظ تفضيل اللغة",r),E=!0)}}function S(t,e){if(!e)return;const n=l[t]??(l[t]=Object.create(null));Object.entries(e).forEach(([r,o])=>{typeof r=="string"&&(n[r]=o)})}function it(t={}){S("ar",t.ar),S("en",t.en);const e=W();U(e),document.dispatchEvent(new CustomEvent("language:changed",{detail:{language:e,reason:"translationsLoaded"}})),document.dispatchEvent(new CustomEvent("language:translationsReady",{detail:{language:e}}))}function c(t,e=""){if(!t)return e;const n=s||y,r=l[n];if(r&&r[t]!==void 0)return r[t];const a=l[n==="en"?"ar":"en"];return a&&a[t]!==void 0?a[t]:e}function K(t){if(t.dataset.i18nCached==="true")return;t.dataset.i18nHtml==="true"?t.dataset.arHtml===void 0&&(t.dataset.arHtml=t.innerHTML):t.dataset.ar===void 0&&(t.dataset.ar=t.textContent),D.forEach(n=>{const r=n.charAt(0).toLowerCase()+n.slice(1),o=t.getAttribute(r);o!=null&&t.dataset[`ar${n}`]===void 0&&(t.dataset[`ar${n}`]=o)}),t.dataset.i18nCached="true"}function T(t,e){if(!e)return;const n=l[t];return n?n[e]:void 0}function z(t,e){K(t);const n=t.dataset.i18nHtml==="true",r=t.dataset.i18nKey,o=T(e,r);o!==void 0?n?t.innerHTML=o:t.textContent=o:e==="en"?n?t.dataset.enHtml!==void 0&&(t.innerHTML=t.dataset.enHtml):t.dataset.en!==void 0&&(t.textContent=t.dataset.en):n?t.innerHTML=t.dataset.arHtml??t.innerHTML:t.textContent=t.dataset.ar??t.textContent,D.forEach(a=>{const i=a.charAt(0).toLowerCase()+a.slice(1),h=t.dataset[`i18n${a}Key`],g=T(e,h);if(g!==void 0){t.setAttribute(i,g);return}const p=e==="en"?`en${a}`:`ar${a}`,u=t.dataset[p];u!==void 0&&t.setAttribute(i,u)})}function U(t){document.querySelectorAll("[data-i18n]").forEach(n=>z(n,t))}function q(t){const e=document.documentElement,n=document.body,r=t===B?"rtl":"ltr";e.setAttribute("lang",t),e.setAttribute("dir",r),n&&(n.setAttribute("dir",r),n.dataset.lang=t)}function V(t){document.querySelectorAll(".language-toggle-btn").forEach(e=>{const n=e.dataset.labelAr||"🇸🇦 العربية",r=e.dataset.labelEn||"🇬🇧 English";e.textContent=t==="en"?n:r,e.setAttribute("aria-pressed",t==="en"?"true":"false")})}function $(){P(s==="ar"?"en":"ar")}function P(t){const e=f(t);s=e,j(e),q(e),U(e),V(e),document.dispatchEvent(new CustomEvent("language:changed",{detail:{language:e}}))}function v(){document.querySelectorAll(".language-toggle-btn").forEach(n=>{n.dataset.listenerAttached||(n.addEventListener("click",()=>{$()}),n.dataset.listenerAttached="true")});const e=G();P(e)}function W(){return s}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v,{once:!0}):v();const R="app-theme",d="dark-mode",C=new WeakSet,H="theme-loading";function X(){try{const t=localStorage.getItem(R);if(t==="dark"||t==="light")return t}catch(t){console.warn("⚠️ تعذر قراءة تفضيل السمة من localStorage",t)}return null}function Y(){const t=X();return t||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function J(t){try{localStorage.setItem(R,t)}catch(e){console.warn("⚠️ تعذر حفظ تفضيل السمة في localStorage",e)}}function Q(){document.documentElement.classList.remove(H);const t=document.body;t&&t.classList.remove(H)}function _(t){const e=document.documentElement,n=document.body;t==="dark"?(e.classList.add(d),n&&n.classList.add(d)):(e.classList.remove(d),n&&n.classList.remove(d)),J(t)}function L(){const t=document.body;return t&&t.classList.contains(d)||document.documentElement.classList.contains(d)?"dark":"light"}function Z(){const t=L()==="dark"?"light":"dark";_(t),m(t)}function tt(t,e){if(!t)return;const n=e==="dark",r=n?c("theme.toggle.toLight","☀️ الوضع العادي"):c("theme.toggle.toDark","🌙 الوضع الليلي");t.textContent=r,t.setAttribute("aria-pressed",String(n)),t.setAttribute("title",n?c("theme.toggle.titleLight","التبديل إلى الوضع العادي"):c("theme.toggle.titleDark","التبديل إلى الوضع الليلي")),t.setAttribute("aria-label",n?c("theme.toggle.ariaLight","الوضع العادي مفعل"):c("theme.toggle.ariaDark","الوضع الليلي مفعل"))}function m(t){document.querySelectorAll(".theme-toggle-btn").forEach(e=>tt(e,t)),Q()}function et(){const t=document.querySelectorAll(".theme-toggle-btn");m(L()),t.forEach(e=>{e&&(e.getAttribute("type")||e.setAttribute("type","button"),!C.has(e)&&(e.addEventListener("click",n=>{n.preventDefault(),Z()}),C.add(e)))})}function st(){const t=Y();_(t),m(t)}document.addEventListener("language:changed",()=>{m(L()),et()});function k(t,e=3e3){let n=document.getElementById("toast-container");n||(n=document.createElement("div"),n.id="toast-container",n.style.position="fixed",n.style.top="20px",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.zIndex="9999",document.body.appendChild(n));const r=document.createElement("div");r.className="toast-message",r.textContent=t,r.style.background="#333",r.style.color="#fff",r.style.padding="10px 20px",r.style.marginTop="10px",r.style.borderRadius="6px",r.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)",r.style.opacity="0",r.style.transition="opacity 0.3s ease",n.appendChild(r),setTimeout(()=>r.style.opacity="1",10),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>r.remove(),300)},e)}function ct(){let t=parseInt(localStorage.getItem("reservationCounter")||"0");return t++,localStorage.setItem("reservationCounter",t),"RSV-"+String(t).padStart(4,"0")}function dt(t,e={}){var u,b;if(!t)return"-";const n=new Date(t);if(Number.isNaN(n.getTime()))return"-";const r=((u=document==null?void 0:document.documentElement)==null?void 0:u.getAttribute("lang"))||((b=window==null?void 0:window.localStorage)==null?void 0:b.getItem("app-language"))||"ar",a=String(r).toLowerCase().startsWith("ar")?"ar-SA-u-ca-gregory":"en-US",h=new Intl.DateTimeFormat(a,{dateStyle:"short",timeStyle:"short",hour12:!0,calendar:"gregory",...e}).formatToParts(n),g=n.getHours()>=12?"PM":"AM",p=h.map(w=>w.type==="dayPeriod"?g:w.value).join("").replace(/\u200f/g,"");return nt(p)}function nt(t){if(t==null)return"";t=String(t);const e=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],n=["0","1","2","3","4","5","6","7","8","9"];return t.split("").map(r=>{const o=e.indexOf(r);return o>-1?n[o]:r}).join("")}const I=Object.freeze({usernameHash:"4183ac4c8fe6969855d033d804ab4f4e8f2c095a06edb1a903626c6d468d9094",passwordHash:"306c7a94b7ba9d5e467d6bf75bb631ff88a44f7c1ae613717643ccee353ed6d1"}),x="❌ بيانات الدخول غير صحيحة";function rt(){k(x,3e3);const t=document.getElementById("login-error");t&&(t.innerText=x)}function ot(t){return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")}async function N(t){var n;const e=(t||"").trim();if(!e)return"";if(typeof window<"u"&&((n=window.crypto)!=null&&n.subtle)){const o=new TextEncoder().encode(e),a=await window.crypto.subtle.digest("SHA-256",o);return ot(a)}return console.warn("⚠️ Web Crypto غير متاح، تتم المقارنة بنص عادي"),e}function at(t,e){return t&&e&&t===I.usernameHash&&e===I.passwordHash}async function ut(t,e){try{const[n,r]=await Promise.all([N(t),N(e)]);if(at(n,r)){const o=(t||"").trim();localStorage.setItem("loggedInUser",JSON.stringify({username:o})),window.location.href="home.html";return}}catch(n){console.error("❌ فشل تسجيل الدخول",n)}rt()}function lt(){localStorage.removeItem("loggedInUser"),k("🚪 تم تسجيل الخروج"),window.location.href="login.html"}function gt(){localStorage.getItem("loggedInUser")||(window.location.href="login.html")}export{st as a,ut as b,gt as c,ct as d,dt as f,W as g,et as i,lt as l,nt as n,it as r,k as s,c as t};
