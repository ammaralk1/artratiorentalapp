import{n as u}from"./auth.B4XUmSYg.js";import{n as g}from"./reservationsService.DZ-N01gk.js";function m(a){const e=new Date;if(e.setHours(0,0,0,0),a==="today")return{startDate:d(e),endDate:d(e)};if(a==="week"){const t=new Date(e),n=t.getDay(),s=n===0?6:n-1;t.setDate(t.getDate()-s);const r=new Date(t);return r.setDate(t.getDate()+6),{startDate:d(t),endDate:d(r)}}if(a==="month"){const t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);return{startDate:d(t),endDate:d(n)}}return a==="upcoming"?{startDate:d(e),endDate:""}:{startDate:"",endDate:""}}function h(){const a=document.getElementById("search-reservation"),e=document.getElementById("filter-start-date"),t=document.getElementById("filter-end-date"),n=document.getElementById("reservation-date-range"),s=document.getElementById("reservation-status-filter");let r=u(e?.value||"").trim(),l=u(t?.value||"").trim(),c=n?.value||"";if(new Set(["","today","week","month"]).has(c)||(c="",n&&(n.value=""),o(e),o(t),r="",l=""),!r&&!l&&c){const f=m(c);r=f.startDate,l=f.endDate}return{searchTerm:g(a?.value||""),startDate:r,endDate:l,status:s?.value||"",quickRange:c}}function p(a){const e=()=>{typeof a=="function"&&a()},t=document.getElementById("search-reservation");t&&!t.dataset.listenerAttached&&(t.addEventListener("input",()=>{t.value=u(t.value),e()}),t.dataset.listenerAttached="true");const n=document.getElementById("filter-start-date");n&&!n.dataset.listenerAttached&&(n.addEventListener("change",()=>{const i=document.getElementById("reservation-date-range");i&&(i.value=""),e()}),n.dataset.listenerAttached="true");const s=document.getElementById("filter-end-date");s&&!s.dataset.listenerAttached&&(s.addEventListener("change",()=>{const i=document.getElementById("reservation-date-range");i&&(i.value=""),e()}),s.dataset.listenerAttached="true");const r=document.getElementById("reservation-date-range");r&&!r.dataset.listenerAttached&&(r.addEventListener("change",()=>{v(r.value),e()}),r.dataset.listenerAttached="true");const l=document.getElementById("reservation-status-filter");l&&!l.dataset.listenerAttached&&(l.addEventListener("change",e),l.dataset.listenerAttached="true");const c=document.getElementById("clear-filters");c&&!c.dataset.listenerAttached&&(c.addEventListener("click",()=>{t&&(t.value=""),o(n),o(s),r&&(r.value=""),l&&(l.value=""),e()}),c.dataset.listenerAttached="true")}function v(a){const e=document.getElementById("filter-start-date"),t=document.getElementById("filter-end-date");if(!e||!t)return;const{startDate:n,endDate:s}=m(a);e._flatpickr?n?e._flatpickr.setDate(n,!1,"Y-m-d"):e._flatpickr.clear():e.value=n,t._flatpickr?s?t._flatpickr.setDate(s,!1,"Y-m-d"):t._flatpickr.clear():t.value=s}function d(a){if(!a)return"";const e=a.getTimezoneOffset()*6e4;return new Date(a.getTime()-e).toISOString().split("T")[0]}function o(a){a&&(a._flatpickr&&a._flatpickr.clear(),a.value="")}export{h as g,m as r,p as s};
