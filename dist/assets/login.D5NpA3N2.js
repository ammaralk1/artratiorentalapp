import{e as f,i as w,p as m,q as y,t as v}from"./auth.BgC08uKC.js";function g(){const r=document.getElementById("login-form");if(!r)return;window.__ART_RATIO_SKIP_PREF_FETCH__=!0,f({skipRemote:!0}),w(),m();const a=document.getElementById("username"),t=document.getElementById("password"),o=document.querySelector('[data-action="toggle-password"]'),i=o?.querySelector('[data-role="password-toggle-label"]')||null,d=o?.querySelector('[data-icon="show"]')||null,l=o?.querySelector('[data-icon="hide"]')||null;async function p(){if(!(!a||!t))try{if(typeof navigator>"u"||typeof window>"u"||!("credentials"in navigator)||typeof navigator.credentials.get!="function"||!window.isSecureContext)return;const e=await navigator.credentials.get({password:!0,mediation:"optional"});e&&e.type==="password"&&(!a.value&&e.id&&(a.value=e.id),!t.value&&e.password&&(t.value=e.password))}catch(e){console.warn("⚠️ [login-page] Failed to retrieve stored credentials",e)}}function s(e){if(!o||!t)return;d&&d.classList.toggle("hidden",e),l&&l.classList.toggle("hidden",!e),o.setAttribute("aria-pressed",String(e));const u=v(e?"login.form.password.toggleHide":"login.form.password.toggleShow",e?"إخفاء كلمة المرور":"إظهار كلمة المرور");o.setAttribute("aria-label",u),i&&(i.textContent=u)}o&&t&&(s(t.type==="text"),o.addEventListener("click",()=>{const e=t.type==="password";t.type=e?"text":"password",s(e),t.focus({preventScroll:!0});try{const{length:n}=t.value;t.setSelectionRange(n,n)}catch{}}),document.addEventListener("language:changed",()=>{s(t.type==="text")})),r&&r.addEventListener("submit",async e=>{e.preventDefault();const n=a?a.value.trim():"",c=t?t.value.trim():"";await y(n,c,{form:r})}),p()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g,{once:!0}):g();
