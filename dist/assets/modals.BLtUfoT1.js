import{r as Ut,d as _e,t as n,n as v,x as zt,l as fs,j as h,v as ys,w as js,u as Ct,p as Dt,b as bs,h as vs}from"./auth.Bkjy0oNg.js";import{getProjectsState as $e,deleteProjectApi as hs,refreshProjectsFromApi as Et,isApiError as dt,updateProjectApi as pt,closeProjectApi as Nt,buildProjectPayload as Wt,createProjectApi as gs,reopenProjectApi as xs}from"./projectsService.CHCbJBVs.js";import{g as D,n as Ue,f as Ss,r as It,u as Re,a as ks,D as je,c as Ge,e as it,d as Ps,b as ws,h as As}from"./reservationsService.CY6Ehgpn.js";import{g as Ts,w as Cs}from"./uiBridge.DqpPdKV_.js";import{e as Es}from"./controller.CtSc1VqZ.js";import{d as t,s as u,j as c,r as me,u as Le,a as ge,i as Xe,k as Ns,l as Yt,m as C,n as Is,f as ut,o as $t,p as $s,q as Ls,t as _s,v as qs,w as Rt,x as Mt}from"./reservationsActions.BgMg-bat.js";Ut({ar:{"projects.pageTitle":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.form.labels.expenseNote":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª","projects.form.placeholders.expenseNote":"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø©/Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.templates.placeholders.saveTitle":"Ø§Ø³Ù… Ø§Ù„Ù†Ø³Ø®Ø©","projects.nav.brand":"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.nav.projects":"Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.nav.customers":"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.nav.technicians":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.hero.title":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.hero.subtitle":"Ø£Ù†Ø´Ø¦ ÙˆÙ†Ø³Ù‘Ù‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ ÙˆÙˆØ²Ù‘Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ù‚Ù… ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ.","projects.form.title":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯","projects.form.labels.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.title":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.clientCompany":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.form.labels.startDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.startTime":"â° ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.endDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.endTime":"â° ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.description":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.technician":"Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø·Ø§Ù‚Ù…","projects.form.labels.equipment":"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø©","projects.form.labels.quantity":"Ø§Ù„ÙƒÙ…ÙŠØ©","projects.form.labels.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseLabel":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseAmount":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.form.labels.servicesClientTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.labels.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.placeholders.expenseAmount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.form.placeholders.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.expenses.table.headers.service":"Ø§Ù„Ø®Ø¯Ù…Ø©","projects.expenses.table.headers.cost":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.expenses.table.headers.sale":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)","projects.expenses.table.headers.note":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª","projects.expenses.table.headers.actions":"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.expenses.table.totalSale":"Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.placeholders.title":"Ù…Ø«Ø§Ù„: ØªØµÙˆÙŠØ± Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯","projects.form.placeholders.description":"Ù…Ù„Ø®Øµ Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª","projects.form.placeholders.type":"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.placeholders.clientCompany":"ØªØ¹Ø¨Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§","projects.form.placeholders.startDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.startTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.endDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.endTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.client":"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...","projects.form.placeholders.expenseLabel":"Ù…Ø«Ø§Ù„: Ù…ØªØ·Ù„Ø¨ Ø¥Ø¶Ø§ÙÙŠ (Ø±Ø³ÙˆÙ… Ù…ÙˆÙ‚Ø¹ØŒ Ù…Ø¹Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...)","projects.form.linkedReservation.title":"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.description":"Ø£Ù†Ø´Ø¦ Ø­Ø¬Ø²Ù‹Ø§ Ù…Ø±ØªØ¨Ø·Ù‹Ø§ Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© ØªÙØ§ØµÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.","projects.form.linkedReservation.button":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingClient":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingSchedule":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.empty":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯.","projects.form.linkedReservation.pendingItem":"Ø³ÙŠØªÙ… Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¬Ø² ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.form.linkedReservation.buttonDisabled":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø· Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¬Ø².","projects.form.linkedReservation.meta.equipment":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}","projects.form.linkedReservation.meta.crew":"Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}","projects.form.linkedReservation.meta.crewNames":"Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}","projects.form.linkedReservation.meta.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}","projects.form.labels.discount":"Ø§Ù„Ø®ØµÙ…","projects.form.labels.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.form.labels.applyTax":"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.form.discount.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.discount.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.companyShareToggle":"Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)","projects.form.selectClient":"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.selectTechnician":"Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.form.selectEquipment":"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.form.types.commercial":"ØªØµÙˆÙŠØ± Ø¥Ø¹Ù„Ø§Ù†","projects.form.types.coverage":"ØªØµÙˆÙŠØ± ØªØºØ·ÙŠØ©","projects.form.types.photography":"ØªØµÙˆÙŠØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ","projects.form.types.social":"ØªØµÙˆÙŠØ± Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ","projects.form.types.unknown":"Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯","projects.form.buttons.addTechnician":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ø§Ù‚Ù…","projects.form.buttons.addEquipment":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.form.buttons.save":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.update":"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.taxLabel":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.form.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.form.paymentProgress.label":"ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©","projects.form.paymentProgress.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.paymentProgress.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ø§ Ù…Ù† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.selected.emptyTechnicians":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹Ø¶Ùˆ Ø¨Ø¹Ø¯","projects.selected.emptyEquipment":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù…Ø¹Ø¯Ø§Øª","projects.selected.emptyExpenses":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ","projects.summary.title":"Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹","projects.summary.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.summary.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.summary.expenses":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projects.summary.budget":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.focus.title":"ğŸ“Œ Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.legend":"Ø§Ø®ØªØ± Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø§Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹.","projects.focus.today":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…","projects.focus.thisWeek":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹","projects.focus.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.focus.recent":"Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù„ÙŠÙˆÙ… Ø£Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.","projects.focus.view":"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„","projects.focus.edit":"ØªØ¹Ø¯ÙŠÙ„","projects.focus.actions.confirm":"âœ”ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.confirmed":"âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯","projects.focus.summary.project":"Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.summary.reservations":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.focus.summary.payment":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.focus.summary.range":"Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©","projects.focus.summary.time":"Ø§Ù„ÙˆÙ‚Øª","projects.focus.toastNotFound":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","projects.toast.linkReservationFailed":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§","projects.toast.companyShareRequiresTax":"âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.timeline.title":"Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.timeline.legend":"ÙŠÙØ¸Ù‡Ø± Ø§Ù„Ø´Ø±ÙŠØ· Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ØªÙÙ…Ø«Ù‘Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.timeline.legend.upcoming":"Ù‚Ø§Ø¯Ù…","projects.timeline.legend.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.timeline.legend.completed":"Ù…ÙƒØªÙ…Ù„","projects.timeline.legend.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.timeline.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø²Ù…Ù†ÙŠØ© ØµØ§Ù„Ø­Ø©.","projects.timeline.conflict":"ØªØ¹Ø§Ø±Ø¶ ÙÙŠ Ø§Ù„ØªÙˆÙ‚ÙŠØª","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹","projects.search.placeholder":"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.subtabs.create":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹","projects.subtabs.list":"Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ","projects.subtabs.reports":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.expenses":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.templates":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨","projects.templates.title":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (A4)","projects.templates.subtitle":"Ø§Ø±Ø¨Ø· Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ ÙˆØ­Ø¬Ø²Ø§Ù‹ Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨ØŒ Ø¹Ø¯Ù‘ÙÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø«Ù… Ø§Ø·Ø¨Ø¹ PDF.","projects.templates.labels.project":"ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.templates.labels.reservation":"ğŸ”— Ø§Ù„Ø­Ø¬Ø² (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)","projects.templates.labels.type":"ğŸ“„ Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ù„Ø¨","projects.templates.types.expenses":"ÙˆØ±Ù‚Ø© Ù…ØµØ§Ø±ÙŠÙ (A4 Ø¹Ù…ÙˆØ¯ÙŠ)","projects.templates.types.callsheet":"ÙƒÙˆÙ„ Ø´ÙŠØª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.types.shotlist":"Ø´ÙˆØª Ù„ÙŠØ³Øª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.actions.refresh":"ØªØ­Ø¯ÙŠØ«","projects.templates.actions.print":"ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© PDF","projects.templates.actions.toggle":"â‹¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.templates.actions.save":"ğŸ’¾ Ø­ÙØ¸","projects.templates.actions.saveCopy":"ğŸ“ Ø­ÙØ¸ ÙƒÙ†Ø³Ø®Ø©","projects.templates.actions.fromReservation":"ğŸ“… Ù…Ù† Ø§Ù„Ø­Ø¬Ø²","projects.templates.actions.rename":"âœï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØ©","projects.templates.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù","projects.templates.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.templates.actions.exportExcel":"â¬‡ï¸ ØªØµØ¯ÙŠØ± Excel","projects.templates.actions.import":"â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯","projects.templates.noReservation":"â€” Ø¨Ø¯ÙˆÙ† Ø±Ø¨Ø· â€”","projects.templates.empty":"Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ Ù„Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨.","projects.templates.expenses.title":"Expenses Sheet / Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.templates.callsheet.title":"Call Sheet / Ù‚Ø§Ù„Ø¨ ÙƒÙˆÙ„ Ø´ÙŠØª","projects.templates.callsheet.contacts":"Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©","projects.templates.callsheet.schedule":"Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…","projects.templates.shotlist.title":"Shot List / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ù‚Ø·Ø§Øª","projects.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.table.count":"{count} Ù…Ø´Ø±ÙˆØ¹","projects.table.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.table.headers.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.table.headers.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.table.headers.period":"Ø§Ù„ÙØªØ±Ø©","projects.table.headers.crew":"Ø§Ù„Ø·Ø§Ù‚Ù…","projects.table.headers.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.table.headers.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.table.headers.expenses":"Ù…ØµØ±ÙˆÙØ§Øª (SR)","projects.table.emptyInitial":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¹Ø¯.","projects.table.emptyFiltered":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø©.","projects.modal.title":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.overview.heading":"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.pageTitle":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.reports.title":"Ù„ÙˆØ­Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.subtitle":"ØªØ­Ù„ÙŠÙ„Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©ØŒ ÙˆÙ†Ø³Ø¨ Ø§Ù„ØªÙ†ÙÙŠØ°.","projects.reports.filters.search":"Ø¨Ø­Ø«","projects.reports.filters.searchPlaceholder":"Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.filters.status":"Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.filters.payment":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.reports.filters.paymentAll":"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.filters.paymentPaid":"Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.paymentPartial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.reports.filters.paymentUnpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.dateRange":"Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®","projects.reports.filters.range.all":"ÙƒÙ„ Ø§Ù„ÙˆÙ‚Øª","projects.reports.filters.range.30":"Ø¢Ø®Ø± 30 ÙŠÙˆÙ…","projects.reports.filters.range.90":"Ø¢Ø®Ø± 90 ÙŠÙˆÙ…","projects.reports.filters.range.365":"Ø¢Ø®Ø± Ø³Ù†Ø©","projects.reports.filters.range.custom":"ØªØ§Ø±ÙŠØ® Ù…Ø®ØµØµ","projects.reports.filters.start":"Ù…Ù†","projects.reports.filters.end":"Ø¥Ù„Ù‰","projects.reports.filters.refresh":"ØªØ­Ø¯ÙŠØ«","projects.reports.charts.status":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.charts.statusHint":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ°","projects.reports.charts.timeline":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù†","projects.reports.charts.timelineHint":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø´Ù‡Ø±ÙŠÙ‹Ø§","projects.reports.charts.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.charts.expensesHint":"Ù…Ù‚Ø§Ø±Ù†Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ø¹ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.charts.clients":"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.reports.charts.clientsHint":"Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.noData":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©","projects.reports.loading.chart":"Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù…...","projects.reports.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.table.columns.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.reports.table.columns.period":"Ø§Ù„ÙØªØ±Ø©","projects.reports.table.columns.value":"Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.table.columns.payment":"Ø§Ù„Ø¯ÙØ¹","projects.reports.table.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø§Ù„ÙŠ.","projects.reports.table.meta":"Ø¹Ø±Ø¶ {count} Ù…Ù† Ø£ØµÙ„ {total} Ù…Ø´Ø±ÙˆØ¹","projects.reports.kpi.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.kpi.totalProjectsMeta":"Ø¨Ø¹Ø¯ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.totalValueMeta":"ÙŠØ´Ù…Ù„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.unpaidValueMeta":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù… ØªÙØ³Ø¯Ù‘ÙØ¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¹Ø¯","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.expensesMeta":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.datasets.value":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©","projects.reports.datasets.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.projectExpenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.expenses.pageTitle":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.expenses.title":"Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.expenses.subtitle":"ØªØ§Ø¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.","projects.expenses.placeholder":"Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ù…Ø®ØµØµØ© Ù„Ø±Ø¨Ø· Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹.","projects.expenses.placeholderHint":"Ø¬Ù‡Ø² Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¢Ù† Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¯Ù….","projects.expenses.actions.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.expenses.actions.importInvoice":"ğŸ§¾ Ø±ÙØ¹ ÙØ§ØªÙˆØ±Ø©","projects.expenses.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.expenses.kpi.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.expenses.kpi.total.meta":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.expenses.kpi.pending":"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.pending.meta":"Ù…ØµØ§Ø±ÙŠÙ ØªØ­ØªØ§Ø¬ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.expenses.kpi.approved":"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.approved.meta":"Ø¢Ø®Ø± Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§","projects.expenses.kpi.average":"Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ Ù„ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹","projects.expenses.kpi.average.meta":"Ù‚ÙŠÙ…Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø§Ø³ØªÙ†Ø§Ø¯Ø§Ù‹ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù†Ø´Ø·Ø©","projects.expenses.breakdown.title":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.breakdown.hint":"Ø±Ø§Ù‚Ø¨ Ø§Ù„ØµØ±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ ÙˆØ§Ù„ØªÙ†Ù‚Ù„Ø§Øª.","projects.expenses.breakdown.empty":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ§Ø±ÙŠÙ Ù…ØµÙ†ÙØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.","projects.expenses.timeline.title":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø¹Ø¨Ø± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ","projects.expenses.timeline.hint":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠØ© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª.","projects.expenses.timeline.empty":"Ø£Ø¶Ù Ù…ØµØ±ÙˆÙØ§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ.","projects.expenses.table.title":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ","projects.expenses.table.hint":"Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª.","projects.expenses.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.expenses.table.columns.category":"Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.table.columns.description":"Ø§Ù„ÙˆØµÙ","projects.expenses.table.columns.amount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.expenses.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.expenses.table.columns.date":"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„","projects.expenses.table.empty":"Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§.","projects.toast.selectTechnician":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.technicianAlreadyAdded":"âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„","projects.toast.technicianAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.selectEquipment":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.toast.equipmentAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.missingExpenseLabel":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.toast.invalidExpenseAmount":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­","projects.toast.customerNotFound":"âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„","projects.toast.missingRequiredFields":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©","projects.toast.invalidDateRange":"âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.toast.saved":"âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editReady":"âœï¸ ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„. Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.toast.updated":"âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editMissing":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡","projects.toast.confirmed":"âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.alreadyConfirmed":"â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§","projects.toast.deleted":"ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.confirm.delete":"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ","projects.fallback.unknownClient":"Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ","projects.fallback.unknownEquipment":"Ù…Ø¹Ø¯Ø©","projects.fallback.noDescription":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ","projects.fallback.untitled":"Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…","projects.fallback.emptyList":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.fallback.technicianName":"Ø¹Ø¶Ùˆ {id}","projects.status.upcoming":"Ù‚Ø§Ø¯Ù…","projects.status.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.status.completed":"Ù…ÙƒØªÙ…Ù„","projects.status.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.status.cancelled":"Ù…Ù„ØºÙŠ","projects.tag.closed":"Ù…ØºÙ„Ù‚","projects.form.labels.cancelled":"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.hints.cancelled":"Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ.","projects.close.noteLabel":"Ù…Ù„Ø§Ø­Ø¸Ø© Ø¥ØºÙ„Ø§Ù‚","projectCards.filters.search":"ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„ÙˆØµÙ...","projectCards.filters.status.all":"âš™ï¸ ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projectCards.filters.status.upcoming":"ğŸ“… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projectCards.filters.status.ongoing":"âš™ï¸ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projectCards.filters.status.completed":"âœ… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù†ØªÙ‡ÙŠØ©","projectCards.stats.crew":"ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…: {count}","projectCards.stats.reservations":"ğŸ”— Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: {count}","projectCards.stats.client":"ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: {name}","projectCards.stats.type":"ğŸ·ï¸ Ø§Ù„Ù†ÙˆØ¹: {label}","projectCards.stats.budget":"ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©): {amount}","projectCards.stats.expenses":"ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: {amount}","projectCards.stats.crewShort":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projectCards.stats.reservationsShort":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.budgetShort":"Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.stats.expensesShort":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projectCards.stats.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projectCards.stats.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projectCards.stats.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projectCards.stats.reservationValue":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.servicesClientPrice":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projectCards.stats.expensesTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projectCards.stats.reservationTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²","projectCards.stats.taxTotal":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projectCards.stats.overallTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ","projectCards.groups.meta":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.groups.reservations":"Ù…ÙˆØ¬Ø² Ø§Ù„Ø­Ø¬Ø²","projectCards.groups.payment":"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯ÙØ¹","projectCards.meta.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.startDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projectCards.meta.endDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.labels.clientPhone":"Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.labels.clientEmail":"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ","projects.details.client.noPhone":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­","projects.details.client.noEmail":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­","projects.details.crew":"Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„ÙÙ†ÙŠ ({count})","projects.details.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ({count})","projects.details.expenses":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})","projects.details.subtotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.tax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (15Ùª):","projects.details.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.labels.projectTitle":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.projectSubtotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.details.summary.projectTax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (15Ùª)","projects.details.summary.projectTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.summary.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª / Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.details.summary.combinedTax":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (15Ùª)","projects.details.summary.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø©","projects.details.summary.overallTotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.summary.equipmentTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.summary.crewTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.crewCostTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.servicesClientPrice":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.gross":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ","projects.details.summary.discount":"Ø§Ù„Ø®ØµÙ…","projects.details.summary.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©","projects.details.summary.tax":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.details.summary.grossAfterDiscount":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…","projects.details.summary.netProfit":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­","projects.details.summary.finalTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ","projects.details.labels.start":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.details.labels.end":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.summary.title":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.details.description":"ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.paymentOverview.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.paymentOverview.paid":"Ø§Ù„Ù…Ø¯ÙÙˆØ¹","projects.details.paymentOverview.percent":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹","projects.details.paymentOverview.remaining":"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ","projects.closeModal.title":"ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.closeModal.subtitle":"ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ).","projects.closeModal.noteLabel":"ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ØºÙ„Ø§Ù‚","projects.closeModal.notePlaceholder":"Ù…Ø«Ø§Ù„: ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­...","projects.closeModal.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.closeModal.confirm":"ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.days":"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…","projects.details.labels.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.labels.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.labels.reservationsCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.labels.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.chips.vatOn":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.details.chips.vatOff":"ØºÙŠØ± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.chips.reservations":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.chips.linkedReservation":"Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.chips.notLinkedReservation":"ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.noItems":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.details.quantity":"{qty} Ù‚Ø·Ø¹Ø©","projects.details.reservations.title":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.details.reservations.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯.","projects.details.reservations.create":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.details.actions.edit":"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.exportExpenses":"ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Excel","projects.details.actions.exportShotList":"ğŸ¬ ØªØµØ¯ÙŠØ± Ø§Ù„Ø´ÙˆØª Ù„ÙŠØ³Øª","projects.details.actions.exportCallSheet":"ğŸ“ ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙˆÙ„ Ø´ÙŠØª","projects.details.actions.exportPdf":"Ø¹Ø±Ø¶ Ø³Ø¹Ø±","projects.details.reservations.view":"Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¬Ø²","projects.details.reservations.count":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.reservations.itemsCount":"{count} Ù…Ø¹Ø¯Ø©","projects.details.reservations.crewCount":"{count} Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.edit.heading":"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.edit.subheading":"Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.details.edit.save":"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª","projects.details.edit.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.quote.sections.customer":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.quote.sections.project":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.quote.sections.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.quote.sections.crew":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.quote.sections.financial":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.quote.sections.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.quote.sections.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"},en:{"projects.pageTitle":"Project Management - Rental System","projects.form.labels.expenseNote":"Notes","projects.form.placeholders.expenseNote":"Additional details for this service/expense","projects.templates.placeholders.saveTitle":"Template name","projects.nav.brand":"Rental System","projects.nav.projects":"Projects","projects.nav.customers":"Clients","projects.nav.technicians":"Crew","projects.hero.title":"Projects Management","projects.hero.subtitle":"Create and coordinate projects, assign crew and equipment, and track expenses.","projects.form.title":"Create New Project","projects.form.labels.type":"Project Type","projects.form.labels.title":"Project Name","projects.form.labels.client":"Client","projects.form.labels.clientCompany":"Client Company","projects.form.labels.paymentStatus":"Payment Status","projects.form.labels.startDate":"ğŸ“… Start Date","projects.form.labels.startTime":"â° Start Time","projects.form.labels.endDate":"ğŸ“… End Date","projects.form.labels.endTime":"â° End Time","projects.form.labels.description":"Project Details","projects.form.labels.technician":"Add Crew Member","projects.form.labels.equipment":"Add Equipment","projects.form.labels.quantity":"Quantity","projects.form.labels.expenses":"Production services","projects.form.labels.expenseLabel":"Expense Name","projects.form.labels.expenseAmount":"Amount (SR)","projects.form.labels.servicesClientTotal":"Sales total","projects.form.labels.salePrice":"Sale price","projects.form.placeholders.expenseAmount":"Amount","projects.form.placeholders.salePrice":"Sale price","projects.expenses.table.headers.service":"Service","projects.expenses.table.headers.cost":"Cost (SR)","projects.expenses.table.headers.sale":"Sale price (SR)","projects.expenses.table.headers.note":"Notes","projects.expenses.table.headers.actions":"Actions","projects.expenses.table.totalSale":"Sales total","projects.form.placeholders.title":"Example: New product shoot","projects.form.placeholders.description":"Project brief and requirements","projects.form.placeholders.type":"Choose a project type","projects.form.placeholders.clientCompany":"Auto-filled from client record","projects.form.placeholders.startDate":"Select the start date","projects.form.placeholders.startTime":"Select the start time","projects.form.placeholders.endDate":"Select the end date (optional)","projects.form.placeholders.endTime":"Select the end time (optional)","projects.form.placeholders.client":"Type the client name...","projects.form.placeholders.expenseLabel":"Example: Location permit or extra gear","projects.form.linkedReservation.title":"Create Linked Reservation","projects.form.linkedReservation.description":"Create a reservation for this project and we'll pre-fill the matching details.","projects.form.linkedReservation.button":"â• Create Linked Reservation","projects.form.linkedReservation.missingClient":"âš ï¸ Please select the client before creating the linked reservation.","projects.form.linkedReservation.missingSchedule":"âš ï¸ Please provide both start and end date/time before creating the linked reservation.","projects.form.linkedReservation.empty":"No linked reservations yet.","projects.form.linkedReservation.pendingItem":"This reservation will be linked automatically once the project is saved.","projects.form.linkedReservation.buttonDisabled":"A linked reservation was created. Manage further changes from the reservation itself.","projects.form.linkedReservation.meta.equipment":"Equipment count: {count}","projects.form.linkedReservation.meta.crew":"Crew count: {count}","projects.form.linkedReservation.meta.crewNames":"Crew names: {names}","projects.form.linkedReservation.meta.total":"Reservation total: {amount}","projects.form.labels.discount":"Discount","projects.form.labels.companyShare":"Company share & VAT","projects.form.labels.applyTax":"Apply VAT 15%","projects.form.discount.percent":"% Percent","projects.form.discount.amount":"ğŸ’µ Amount","projects.form.companyShareToggle":"Include company share (10%)","projects.form.selectClient":"Select client","projects.form.selectTechnician":"Select crew member","projects.form.selectEquipment":"Select equipment","projects.form.types.commercial":"Commercial shoot","projects.form.types.coverage":"Event coverage","projects.form.types.photography":"Photography","projects.form.types.social":"Social media content","projects.form.types.unknown":"Unspecified type","projects.form.buttons.addTechnician":"â• Add to Crew","projects.form.buttons.addEquipment":"â• Add to Project","projects.form.buttons.addExpense":"â• Add Expense","projects.form.buttons.save":"ğŸ†• Create Project","projects.form.buttons.update":"ğŸ” Update Project","projects.form.taxLabel":"Include VAT (15%)","projects.form.paymentStatus.paid":"Paid","projects.form.paymentStatus.unpaid":"Unpaid","projects.form.paymentStatus.partial":"Partially Paid","projects.form.paymentProgress.label":"ğŸ’° Received Payment","projects.form.paymentProgress.amount":"ğŸ’µ Amount","projects.form.paymentProgress.percent":"% Percent","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Enter the amount or percentage received from the project total","projects.paymentStatus.paid":"Paid","projects.paymentStatus.unpaid":"Unpaid","projects.paymentStatus.partial":"Partially Paid","projects.selected.emptyTechnicians":"No crew members selected yet","projects.selected.emptyEquipment":"No equipment selected","projects.selected.emptyExpenses":"No expenses recorded","projects.summary.title":"Quick Overview","projects.summary.totalProjects":"Total Projects","projects.summary.upcoming":"Upcoming Projects","projects.summary.expenses":"Total Expenses","projects.summary.budget":"Estimated Value (with VAT)","projects.focus.title":"ğŸ“Œ Focus Projects","projects.focus.legend":"Tap a card to review details or jump to editing.","projects.focus.today":"Today's Projects","projects.focus.thisWeek":"This Week","projects.focus.upcoming":"Upcoming Projects","projects.focus.recent":"Latest Projects","projects.focus.empty":"No projects scheduled for today or this week.","projects.focus.view":"View details","projects.focus.edit":"Edit","projects.focus.actions.confirm":"âœ”ï¸ Confirm project","projects.focus.confirmed":"âœ… Project confirmed","projects.focus.summary.project":"Project summary","projects.focus.summary.reservations":"Linked reservations","projects.focus.summary.payment":"Financial summary","projects.focus.summary.range":"Date range","projects.focus.summary.time":"Time","projects.focus.toastNotFound":"âš ï¸ Could not find this project in the list","projects.toast.linkReservationFailed":"âš ï¸ Unable to link some reservations to the project. Please review them manually.","projects.toast.companyShareRequiresTax":"âš ï¸ Company share requires VAT to be enabled first.","projects.timeline.title":"Projects Timeline","projects.timeline.legend":"The bar shows project start and end, with colors reflecting status.","projects.timeline.legend.upcoming":"Upcoming","projects.timeline.legend.ongoing":"In Progress","projects.timeline.legend.completed":"Completed","projects.timeline.legend.conflict":"Conflict","projects.timeline.empty":"No projects with valid schedule to display.","projects.timeline.conflict":"Scheduling conflict","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Quick Search","projects.search.placeholder":"Search by project name or client","projects.subtabs.create":"Create Project","projects.subtabs.list":"My Projects","projects.subtabs.reports":"Project Reports","projects.subtabs.expenses":"Project Expenses","projects.subtabs.templates":"Templates","projects.templates.title":"Templates (A4)","projects.templates.subtitle":"Bind a project/reservation, edit fields, and print PDF.","projects.templates.labels.project":"ğŸ“ Project","projects.templates.labels.reservation":"ğŸ”— Reservation (optional)","projects.templates.labels.type":"ğŸ“„ Template type","projects.templates.types.expenses":"Expenses Sheet (A4 Portrait)","projects.templates.types.callsheet":"Call Sheet (A4 Landscape)","projects.templates.types.shotlist":"Shot List (A4 Landscape)","projects.templates.actions.refresh":"Refresh","projects.templates.actions.print":"ğŸ–¨ï¸ Print PDF","projects.templates.actions.toggle":"â‹¯ Actions","projects.templates.actions.save":"ğŸ’¾ Save","projects.templates.actions.saveCopy":"ğŸ“ Save as copy","projects.templates.actions.fromReservation":"ğŸ“… From reservation","projects.templates.actions.rename":"âœï¸ Rename","projects.templates.actions.delete":"ğŸ—‘ï¸ Delete","projects.templates.actions.export":"â¬‡ï¸ Export","projects.templates.actions.exportExcel":"â¬‡ï¸ Export Excel","projects.templates.actions.import":"â¬†ï¸ Import","projects.templates.noReservation":"â€” None â€”","projects.templates.empty":"Select a project to start building templates.","projects.templates.expenses.title":"Expenses Sheet","projects.templates.callsheet.title":"Call Sheet","projects.templates.callsheet.contacts":"Key Contacts","projects.templates.callsheet.schedule":"Day Schedule","projects.templates.shotlist.title":"Shot List","projects.table.title":"Projects List","projects.table.count":"{count} project","projects.table.reservationsCount":"{count} reservations","projects.table.headers.project":"Project","projects.table.headers.client":"Client","projects.table.headers.period":"Schedule","projects.table.headers.crew":"Crew","projects.table.headers.equipment":"Equipment","projects.table.headers.total":"Total (with VAT)","projects.table.headers.expenses":"Expenses (SR)","projects.table.emptyInitial":"No projects have been created yet.","projects.table.emptyFiltered":"No matching projects found.","projects.modal.title":"Project Details","projects.details.overview.heading":"Project Information","projects.details.labels.clientPhone":"Client phone","projects.details.labels.clientEmail":"Email","projects.details.client.noPhone":"No phone available","projects.details.client.noEmail":"No email available","projects.reports.pageTitle":"Project Reports - Rental System","projects.reports.title":"Project Reporting Dashboard","projects.reports.subtitle":"Detailed analytics for project performance, deadlines, and completion rates.","projects.reports.filters.search":"Search","projects.reports.filters.searchPlaceholder":"Search by project or client name","projects.reports.filters.status":"Project status","projects.reports.filters.payment":"Payment status","projects.reports.filters.paymentAll":"All payments","projects.reports.filters.paymentPaid":"Paid","projects.reports.filters.paymentPartial":"Partially paid","projects.reports.filters.paymentUnpaid":"Unpaid","projects.reports.filters.dateRange":"Date range","projects.reports.filters.range.all":"All time","projects.reports.filters.range.30":"Last 30 days","projects.reports.filters.range.90":"Last 90 days","projects.reports.filters.range.365":"Last year","projects.reports.filters.range.custom":"Custom range","projects.reports.filters.start":"From","projects.reports.filters.end":"To","projects.reports.filters.refresh":"Refresh","projects.reports.charts.status":"Status distribution","projects.reports.charts.statusHint":"Share of projects per execution status","projects.reports.charts.timeline":"Revenue over time","projects.reports.charts.timelineHint":"Total project value by month","projects.reports.charts.expenses":"Expenses vs. value","projects.reports.charts.expensesHint":"Compare spend against total project value","projects.reports.charts.clients":"Top clients","projects.reports.charts.clientsHint":"Highest clients by project value","projects.reports.noData":"No data available","projects.reports.loading.chart":"Refreshing chartâ€¦","projects.reports.table.title":"Project list","projects.reports.table.columns.project":"Project","projects.reports.table.columns.client":"Client","projects.reports.table.columns.status":"Status","projects.reports.table.columns.period":"Period","projects.reports.table.columns.value":"Value","projects.reports.table.columns.payment":"Payment","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.reports.filters.confirmed.label":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯","projects.reports.filters.confirmed.all":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯: Ø§Ù„ÙƒÙ„","projects.reports.filters.confirmed.yes":"Ù…Ø¤ÙƒØ¯","projects.reports.filters.confirmed.closed":"Ù…ØºÙ„Ù‚","projects.reports.table.columns.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.actions.exportExcel":"ØªØµØ¯ÙŠØ± Excel","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.table.empty":"No projects match the current filters.","projects.reports.table.meta":"Showing {count} of {total} projects","projects.reports.kpi.totalProjects":"Total projects","projects.reports.kpi.totalProjectsMeta":"After applying the current filters","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.totalValueMeta":"Includes projects, linked reservations, and VAT","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.unpaidValueMeta":"Projects not fully paid yet","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.expensesMeta":"Expenses for included projects","projects.reports.datasets.value":"Total value","projects.reports.datasets.expenses":"Expenses","projects.expenses.pageTitle":"Project Expenses - Rental System","projects.expenses.title":"Manage Project Expenses","projects.expenses.subtitle":"Track expenses linked to bookings and projects with full invoicing visibility.","projects.expenses.placeholder":"A dedicated board for linking project expenses to bookings is coming soon.","projects.expenses.placeholderHint":"Prepare invoices and categories now to accelerate the upcoming release.","projects.expenses.actions.addExpense":"â• Add expense","projects.expenses.actions.importInvoice":"ğŸ§¾ Upload invoice","projects.expenses.actions.export":"â¬‡ï¸ Export","projects.expenses.kpi.total":"Total expenses","projects.expenses.kpi.total.meta":"Expenses recorded during the current period","projects.expenses.kpi.pending":"Pending approval","projects.expenses.kpi.pending.meta":"Expenses awaiting financial manager approval","projects.expenses.kpi.approved":"Approved","projects.expenses.kpi.approved.meta":"Latest expenses that were approved","projects.expenses.kpi.average":"Average per project","projects.expenses.kpi.average.meta":"Estimated value based on active projects","projects.expenses.breakdown.title":"Expenses by category","projects.expenses.breakdown.hint":"Track spend on equipment, crew, and logistics.","projects.expenses.breakdown.empty":"No categorized expenses recorded yet.","projects.expenses.timeline.title":"Expenses over time","projects.expenses.timeline.hint":"Review spend across recent months to spot trends.","projects.expenses.timeline.empty":"Add expenses to unlock the interactive timeline.","projects.expenses.table.title":"Detailed expense ledger","projects.expenses.table.hint":"Review project expenses together with approval status.","projects.expenses.table.columns.project":"Project","projects.expenses.table.columns.category":"Category","projects.expenses.table.columns.description":"Description","projects.expenses.table.columns.amount":"Amount","projects.expenses.table.columns.status":"Status","projects.expenses.table.columns.date":"Logged on","projects.expenses.table.empty":"Registered expenses will appear here as soon as you add them.","projects.toast.selectTechnician":"âš ï¸ Please select a crew member","projects.toast.technicianAlreadyAdded":"âš ï¸ Crew member already added","projects.toast.technicianAdded":"âœ… Crew member added","projects.toast.selectEquipment":"âš ï¸ Please select equipment","projects.toast.equipmentAdded":"âœ… Equipment added to project","projects.toast.missingExpenseLabel":"âš ï¸ Please enter an expense description","projects.toast.invalidExpenseAmount":"âš ï¸ Please enter a valid amount","projects.toast.customerNotFound":"âš ï¸ Client name not found. Please select an existing client.","projects.toast.missingRequiredFields":"âš ï¸ Please fill in the required fields","projects.toast.invalidDateRange":"âš ï¸ End date must be after the start date","projects.toast.saved":"âœ… Project saved successfully","projects.toast.editReady":"âœï¸ Project loaded for editing. Update the fields, then save.","projects.toast.updated":"âœ… Project updated successfully","projects.toast.editMissing":"âš ï¸ Unable to find the project you tried to edit","projects.toast.confirmed":"âœ… Project confirmed","projects.toast.alreadyConfirmed":"â„¹ï¸ Project already confirmed","projects.toast.deleted":"ğŸ—‘ï¸ Project deleted","projects.confirm.delete":"Are you sure you want to delete this project?","projects.fallback.unknownClient":"Unknown client","projects.fallback.unknownEquipment":"Equipment","projects.fallback.noDescription":"No description","projects.fallback.untitled":"Untitled project","projects.fallback.emptyList":"None","projects.fallback.technicianName":"Member {id}","projects.status.upcoming":"Upcoming","projects.status.ongoing":"In Progress","projects.status.completed":"Completed","projects.status.conflict":"Conflict","projects.status.cancelled":"Cancelled","projects.tag.closed":"Closed","projects.form.labels.cancelled":"Cancel project","projects.form.hints.cancelled":"Marks the project as cancelled and updates all linked reservations to cancelled.","projects.close.noteLabel":"Close note","projectCards.filters.search":"ğŸ” Search by project name or description...","projectCards.filters.status.all":"âš™ï¸ All statuses","projectCards.filters.status.upcoming":"ğŸ“… Upcoming projects","projectCards.filters.status.ongoing":"âš™ï¸ In-progress projects","projectCards.filters.status.completed":"âœ… Completed projects","projectCards.stats.crew":"ğŸ‘¥ Crew members: {count}","projectCards.stats.reservations":"ğŸ”— Reservations: {count}","projectCards.stats.client":"ğŸ‘¤ Client: {name}","projectCards.stats.type":"ğŸ·ï¸ Type: {label}","projectCards.stats.budget":"ğŸ’° Estimated budget (with VAT): {amount}","projectCards.stats.expenses":"ğŸ’¸ Expenses: {amount}","projectCards.stats.crewShort":"Crew","projectCards.stats.reservationsShort":"Reservations","projectCards.stats.budgetShort":"Project budget","projectCards.stats.expensesShort":"Total expenses","projectCards.stats.paymentStatus":"Payment status","projectCards.stats.equipmentCount":"Equipment count","projectCards.stats.crewCount":"Crew count","projectCards.stats.reservationValue":"Reservation total","projectCards.stats.servicesClientPrice":"Production services","projectCards.stats.expensesTotal":"Expenses total","projectCards.stats.reservationTotal":"Linked reservation total","projectCards.stats.taxTotal":"VAT","projectCards.stats.overallTotal":"Grand total","projectCards.groups.meta":"Project info","projectCards.groups.reservations":"Reservation snapshot","projectCards.groups.payment":"Payment summary","projectCards.meta.code":"Project ID","projectCards.meta.client":"Client","projectCards.meta.company":"Client company","projectCards.meta.type":"Project type","projectCards.meta.startDate":"Start date","projectCards.meta.endDate":"End date","projects.details.type":"Project type","projects.details.company":"Client company","projects.details.client":"Client","projects.details.crew":"Crew ({count})","projects.details.equipment":"Equipment ({count})","projects.details.expenses":"Expenses ({amount})","projects.details.subtotal":"Subtotal before tax:","projects.details.tax":"VAT 15%:","projects.details.total":"Total with VAT:","projects.details.labels.projectTitle":"Project Name","projects.details.labels.code":"Project ID","projects.details.summary.projectSubtotal":"Project total","projects.details.summary.paymentStatus":"Payment status","projects.details.summary.projectTax":"Project VAT (15%)","projects.details.summary.projectTotal":"Project total (after VAT)","projects.details.summary.reservationsTotal":"Equipment / crew total","projects.details.summary.combinedTax":"Total VAT on combined amount (15%)","projects.details.summary.reservationsCount":"{count} linked reservations","projects.details.summary.overallTotal":"Overall total","projects.details.expensesTotal":"Production services cost","projects.details.reservationsTotal":"Total reservations","projects.details.summary.equipmentTotal":"Equipment total","projects.details.summary.crewTotal":"Crew total","projects.details.summary.crewCostTotal":"Crew cost","projects.details.summary.expensesTotal":"Production services cost","projects.details.summary.servicesClientPrice":"Production services","projects.details.summary.gross":"Gross","projects.details.summary.discount":"Discount","projects.details.summary.companyShare":"Company share","projects.details.summary.tax":"VAT (15%)","projects.details.summary.grossAfterDiscount":"Total after discount","projects.details.summary.netProfit":"Net profit","projects.details.summary.finalTotal":"Final total","projects.details.labels.start":"Start date","projects.details.labels.end":"End date","projects.details.summary.title":"Financial summary","projects.details.description":"Project description","projects.details.paymentOverview.total":"Overall total","projects.details.paymentOverview.paid":"Paid","projects.details.paymentOverview.percent":"Paid %","projects.details.paymentOverview.remaining":"Remaining","projects.closeModal.title":"ğŸ”’ Close Project","projects.closeModal.subtitle":"Please add a closing note (optional).","projects.closeModal.noteLabel":"ğŸ“ Closing notes","projects.closeModal.notePlaceholder":"e.g., Project successfully completed...","projects.closeModal.cancel":"Cancel","projects.closeModal.confirm":"ğŸ”’ Close Project","projects.details.labels.days":"Days","projects.details.labels.crewCount":"Crew count","projects.details.labels.equipmentCount":"Equipment quantity","projects.details.labels.reservationsCount":"Reservations count","projects.details.labels.notes":"Project notes","projects.details.chips.vatOn":"VAT enabled 15%","projects.details.chips.vatOff":"VAT disabled","projects.details.chips.reservations":"{count} reservations","projects.details.chips.linkedReservation":"Linked to reservation","projects.details.chips.notLinkedReservation":"Not linked to reservation","projects.details.noItems":"None","projects.details.quantity":"{qty} pcs","projects.details.reservations.title":"Linked reservations","projects.details.reservations.empty":"No reservations linked to this project yet.","projects.details.reservations.create":"â• Create linked reservation","projects.details.reservations.view":"View reservation","projects.details.actions.edit":"âœï¸ Edit Project","projects.details.actions.delete":"ğŸ—‘ï¸ Delete Project","projects.details.actions.exportExpenses":"ğŸ“Š Export Expenses (Excel)","projects.details.actions.exportShotList":"ğŸ¬ Export Shot List","projects.details.actions.exportCallSheet":"ğŸ“ Export Call Sheet","projects.details.actions.exportPdf":"Quote","projects.details.reservations.count":"{count} reservations","projects.details.reservations.itemsCount":"{count} item(s)","projects.details.reservations.crewCount":"{count} crew member(s)","projects.details.edit.heading":"Edit Project","projects.details.edit.subheading":"Update the project details, then save your changes.","projects.details.edit.save":"ğŸ’¾ Save Changes","projects.details.edit.cancel":"Cancel","projects.quote.sections.customer":"Customer info","projects.quote.sections.project":"Project info","projects.quote.sections.expenses":"Production services","projects.quote.sections.crew":"Crew","projects.quote.sections.financial":"Financial summary","projects.quote.sections.equipment":"Equipment","projects.quote.sections.notes":"Project notes"}});Ut({en:{"projects.reports.filters.confirmed.label":"Confirmation","projects.reports.filters.confirmed.all":"Confirmation: All","projects.reports.filters.confirmed.yes":"Confirmed","projects.reports.filters.confirmed.closed":"Closed","projects.reports.table.columns.margin":"Profit margin","projects.reports.actions.exportExcel":"Export Excel","projects.reports.kpi.margin":"Profit margin","projects.reports.kpi.marginMeta":"Net profit Ã· revenue (excl. VAT)","projects.reports.kpi.netProfitMeta":"Sum of net profit for selected projects","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.margin":"Profit margin","projects.reports.kpi.revenue.details.projectExpenses":"Project expenses","projects.reports.table.sortable":"Sortable","projects.reports.table.sort.asc":"Ascending","projects.reports.table.sort.desc":"Descending"}});function Ds(){if(!Array.isArray(u.projects)||u.projects.length===0)return;let e=!1;const s=u.projects.map(a=>{if(a.projectCode)return a;const r=zt();return e=!0,{...a,projectCode:r}});e&&(u.projects=s)}function $a(){const{customers:e,technicians:s,equipment:a}=_e();u.customers=Array.isArray(e)?e:[],u.technicians=Array.isArray(s)?s:[],u.equipment=Array.isArray(a)?a:[],u.reservations=D(),u.projects=$e(),Ds()}function La(){if(Rs(),t.technicianSelect){const e=t.technicianSelect.value,s=c(n("projects.form.selectTechnician","Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));t.technicianSelect.innerHTML=`<option value="">${s}</option>`+u.technicians.map(a=>{const r=n("projects.fallback.technicianName","Ø¹Ø¶Ùˆ {id}"),i=a.name||r.replace("{id}",v(String(a.id||"")));return`<option value="${a.id}">${c(i)}</option>`}).join(""),e&&(t.technicianSelect.value=e)}if(t.equipmentSelect){const e=t.equipmentSelect.value,s=c(n("projects.form.selectEquipment","Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©"));t.equipmentSelect.innerHTML=`<option value="">${s}</option>`+u.equipment.map(a=>{const r=a.desc||a.description||a.name||n("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©");return`<option value="${c(a.barcode||"")}">${c(r)}</option>`}).join(""),e&&(t.equipmentSelect.value=e)}}function Ve(e){if(!t.clientCompany)return;const s=e?.companyName||e?.company||"";t.clientCompany.value=s}function Rs(){if(!t.client)return;Ms();const e=t.client.dataset?.customerId;if(e){const s=u.customers.find(a=>String(a.id)===String(e));s?Ve(s):(t.client.dataset.customerId="",Ve(null))}else Ve(null);document.activeElement===t.client&&At()}function Ms(){!t.client||!t.clientSuggestions||t.client.dataset.autocompleteAttached!=="true"&&(t.client.addEventListener("input",()=>{t.client.dataset.customerId="",At(),Ve(null)}),t.client.addEventListener("focus",()=>{At()}),t.client.addEventListener("blur",()=>{window.setTimeout(()=>tt(),150)}),t.client.dataset.autocompleteAttached="true")}function tt(){t.clientSuggestions&&(t.clientSuggestions.classList.remove("is-visible"),t.clientSuggestions.hidden=!0,t.clientSuggestions.innerHTML="")}function At(){if(!t.client||!t.clientSuggestions)return;if(!Array.isArray(u.customers)||u.customers.length===0){const r=_e();Array.isArray(r?.customers)&&r.customers.length&&(u.customers=r.customers)}const e=Fs(),s=Ue(t.client.value||""),a=s?e.filter(r=>{const i=Ue(r.name).includes(s),o=Ue(r.company||"").includes(s);return i||o}).slice(0,10):e.slice(0,10);if(!a.length){tt();return}t.clientSuggestions.innerHTML=a.map(r=>{const i=r.company?`<div class="suggestion-item__meta">${c(r.company)}</div>`:"";return`
        <div class="suggestion-item" data-id="${c(String(r.id))}" data-name="${c(r.name)}" data-company="${c(r.company||"")}">
          <div class="suggestion-item__primary">${c(r.name)}</div>
          ${i}
        </div>
      `}).join(""),t.clientSuggestions.hidden=!1,t.clientSuggestions.classList.add("is-visible"),t.clientSuggestions.scrollTop=0,t.clientSuggestions.querySelectorAll(".suggestion-item").forEach(r=>{r.addEventListener("mousedown",i=>{i.preventDefault();const{id:o,name:d}=i.currentTarget.dataset;t.client&&(t.client.value=d||"",t.client.dataset.customerId=o||"");const l=i.currentTarget.dataset.company||"";Ve({companyName:l}),tt()})})}function Fs(){return Array.isArray(u.customers)?u.customers.map(e=>{const s=(e.customerName||e.name||"").trim();return s?{id:e.id,name:s,company:(e.companyName||e.company||"").trim()}:null}).filter(Boolean):[]}function Bs(e,s=""){if(!Array.isArray(u.customers)||u.customers.length===0)return null;if(s){const i=u.customers.find(o=>String(o.id)===String(s));if(i)return i}const a=Ue(e||"");if(!a)return null;const r=u.customers.find(i=>Ue(i.customerName||i.name||"")===a);return r||u.customers.find(i=>Ue(i.customerName||i.name||"").includes(a))||null}function Vs(){return typeof window<"u"&&typeof window.flatpickr=="function"?window.flatpickr.bind(window):typeof globalThis<"u"&&typeof globalThis.flatpickr=="function"?globalThis.flatpickr.bind(globalThis):null}function _a(){t.form=document.getElementById("project-form"),t.title=document.getElementById("project-title"),t.type=document.getElementById("project-type"),t.client=document.getElementById("project-client"),t.clientSuggestions=document.getElementById("project-customer-suggestions"),t.clientCompany=document.getElementById("project-client-company"),t.paymentStatus=document.getElementById("project-payment-status"),t.startDate=document.getElementById("project-start-date"),t.startTime=document.getElementById("project-start-time"),t.endDate=document.getElementById("project-end-date"),t.endTime=document.getElementById("project-end-time"),t.description=document.getElementById("project-description"),t.technicianSelect=document.getElementById("project-technician-select"),t.addTechnicianBtn=document.getElementById("add-technician-btn"),t.technicianList=document.getElementById("project-technician-list"),t.equipmentSelect=document.getElementById("project-equipment-select"),t.equipmentQty=document.getElementById("project-equipment-qty"),t.addEquipmentBtn=document.getElementById("add-equipment-btn"),t.equipmentList=document.getElementById("project-equipment-list"),t.expenseLabel=document.getElementById("project-expense-label"),t.expenseAmount=document.getElementById("project-expense-amount"),t.expenseNote=document.getElementById("project-expense-note"),t.addExpenseBtn=document.getElementById("add-expense-btn"),t.expenseList=document.getElementById("project-expense-list"),t.servicesClientTotalIndicator=document.getElementById("project-services-client-total-indicator"),t.servicesClientTotalValue=document.getElementById("project-services-client-total-value"),t.discountType=document.getElementById("project-discount-type"),t.discountValue=document.getElementById("project-discount"),t.servicesClientPrice=document.getElementById("project-services-client-price"),t.paymentAddButton=document.getElementById("project-payment-add"),t.paymentHistory=document.getElementById("project-payment-history"),t.companyShare=document.getElementById("project-company-share"),t.paymentProgressType=document.getElementById("project-payment-progress-type"),t.paymentProgressValue=document.getElementById("project-payment-progress-value"),t.taxCheckbox=document.getElementById("project-tax"),t.linkedReservationBtn=document.getElementById("project-linked-reservation-btn"),t.submitBtn=t.form?.querySelector('[type="submit"]'),t.projectsTableBody=document.getElementById("project-table-body"),t.projectsCount=document.getElementById("projects-count"),t.projectsUpcoming=document.getElementById("projects-upcoming"),t.projectsExpenses=document.getElementById("projects-expenses"),t.projectsBudget=document.getElementById("projects-budget"),t.tableCount=document.getElementById("project-table-count"),t.search=document.getElementById("project-search"),t.filterStatus=document.getElementById("project-filter-status"),t.filterPayment=document.getElementById("project-filter-payment"),t.filterType=document.getElementById("project-filter-type"),t.filterConfirmed=document.getElementById("project-filter-confirmed"),t.filterRange=document.getElementById("project-filter-range"),t.filterStart=document.getElementById("project-filter-start-date"),t.filterEnd=document.getElementById("project-filter-end-date"),t.filterReset=document.getElementById("project-filter-reset"),t.detailsModalEl=document.getElementById("projectDetailsModal"),t.detailsBody=document.getElementById("project-details-body"),t.tabButtons=Array.from(document.querySelectorAll(".tab-button[data-tab-target]")),t.tabPanes=Array.from(document.querySelectorAll("[data-tab-pane]")),t.projectSubTabButtons=Array.from(document.querySelectorAll(".sub-tab-button[data-project-subtab-target]")),t.projectSubTabPanes=Array.from(document.querySelectorAll("[data-project-subtab]")),t.timeline=document.getElementById("project-timeline"),t.focusCards=document.getElementById("project-focus-cards"),t.focusPagination=document.getElementById("project-focus-pagination"),t.tablePagination=document.getElementById("project-table-pagination"),t.detailsModalEl&&!t.detailsModalEl.dataset.projectListenerAttached&&(t.detailsModalEl.addEventListener("hidden.bs.modal",()=>{t.detailsBody&&(t.detailsBody.dataset.projectId="")}),t.detailsModalEl.dataset.projectListenerAttached="true")}function qa(){const e=Vs();if(!e)return;["#project-start-date","#project-end-date","#project-start-time","#project-end-time"].forEach(l=>{const p=document.querySelector(l);if(p){try{p.setAttribute("autocomplete","off")}catch{}try{p.setAttribute("autocapitalize","off")}catch{}try{p.setAttribute("autocorrect","off")}catch{}try{p.setAttribute("spellcheck","false")}catch{}}});const s=[["#project-start-date",{dateFormat:"Y-m-d",allowInput:!0}],["#project-end-date",{dateFormat:"Y-m-d",allowInput:!0}]],a=[["#project-filter-start-date",{dateFormat:"Y-m-d",allowInput:!0,altInput:!0,altFormat:"d/m/Y",disableMobile:!0}],["#project-filter-end-date",{dateFormat:"Y-m-d",allowInput:!0,altInput:!0,altFormat:"d/m/Y",disableMobile:!0}]],r=[["#project-start-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}],["#project-end-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}]];[...s,...r].forEach(([l,p])=>{const y=document.querySelector(l);y&&e(y,p)}),a.forEach(([l,p])=>{const y=document.querySelector(l);y&&e(y,p)});const i=l=>{if(l==null)return"";const p=["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"],y=["Û°","Û±","Û²","Û³","Û´","Ûµ","Û¶","Û·","Û¸","Û¹"],m=["0","1","2","3","4","5","6","7","8","9"];return String(l).split("").map(j=>{const g=p.indexOf(j);if(g>-1)return m[g];const A=y.indexOf(j);return A>-1?m[A]:j}).join("")},o=l=>{if(!l||l.dataset.normalizedDigits==="true")return;const p=()=>{const y=l.value||"",m=i(y);if(m!==y){const j=l.selectionStart,g=l.selectionEnd;l.value=m;try{if(typeof j=="number"&&typeof g=="number"){const A=m.length-y.length;l.setSelectionRange(Math.max(0,j+A),Math.max(0,g+A))}}catch{}}};l.addEventListener("input",p),l.addEventListener("blur",p);try{l.setAttribute("inputmode","numeric")}catch{}l.dataset.normalizedDigits="true"};o(t.startDate),o(t.endDate),o(t.startTime),o(t.endTime),t.startTime&&t.startTime._flatpickr?.altInput&&o(t.startTime._flatpickr.altInput),t.endTime&&t.endTime._flatpickr?.altInput&&o(t.endTime._flatpickr.altInput);const d=l=>{if(!l)return;const p=l._flatpickr,y=()=>{try{if(!p)return;const m=p.altInput&&typeof p.altInput.value=="string"?p.altInput.value.trim():"",j=typeof l.value=="string"?l.value.trim():"",g=m||j;if(!g)return;const A=m?p.config.altFormat:p.config.dateFormat,I=p.parseDate(g,A)||p.parseDate(g);I&&p.setDate(I,!0)}catch{}};l.addEventListener("blur",y),p?.altInput&&p.altInput.addEventListener("blur",y)};d(t.startTime),d(t.endTime)}function Kt(){["startDate","startTime","endDate","endTime"].forEach(e=>{const s=t[e];s&&(s._flatpickr?s._flatpickr.clear():s.value="")})}function Da(){const e=document.getElementById("logout-btn");e&&!e.dataset.listenerAttached&&(e.addEventListener("click",()=>fs()),e.dataset.listenerAttached="true")}async function Jt(e){if(u.projects.findIndex(i=>String(i.id)===String(e))===-1)return;let a=0;try{a=(D()||[]).filter(o=>String(o.projectId)===String(e)).length}catch{}const r=a>0?n("projects.confirm.deleteCascade",`âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡ (${a}). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`):n("projects.confirm.delete","Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ");if(window.confirm(r))try{try{const o=(D()||[]).filter(d=>String(d.projectId)===String(e));for(const d of o){const l=d.id??d.reservationId??d.reservation_code;if(l)try{await Ss(l)}catch(p){console.warn("âš ï¸ failed to delete linked reservation",l,p)}}}catch{}await hs(e),await Et(),await It(),u.projects=$e(),u.reservations=D(),me(),Le(),ge(),document.dispatchEvent(new CustomEvent("projects:changed")),document.dispatchEvent(new CustomEvent("reservations:changed")),h(n("projects.toast.deleted","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡"))}catch(i){console.error("âŒ [projects] removeProject failed",i);const o=dt(i)?i.message:n("projects.toast.deleteFailed","ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");h(o,"error")}}async function Hs(e,{start:s=null,end:a=null}={}){if(!e)return!1;const i=D().filter(l=>String(l.projectId)===String(e));if(!i.length)return!1;let o=!1,d=0;for(const l of i){const p=l.id??l.reservationId;if(!p)continue;const y=String(l.status||"").toLowerCase();if(y==="completed"||y==="cancelled"||y==="canceled")continue;const m={};if(s&&(m.start_datetime=s),a&&(m.end_datetime=a),Object.keys(m).length!==0)try{await Re(p,m),o=!0,d+=1}catch(j){console.warn("[projects] failed to update linked reservation schedule",p,j)}}if(o){u.reservations=D();try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const l=n("projects.toast.linkedReservationsScheduleUpdated","ØªÙ… ØªØ­Ø¯ÙŠØ« ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© ({count})","Updated linked reservations timing ({count})").replace("{count}",String(d));h(l)}catch{}}return o}async function Os(e,s){if(!e)return!1;const r=D().filter(p=>String(p.projectId)===String(e));if(!r.length)return!1;const i=typeof s=="string"?s.toLowerCase():"unpaid",o=i==="paid",d=o?"paid":i==="partial"?"partial":"unpaid";let l=!1;for(const p of r){const y=p.id??p.reservationId;if(!y)continue;const m=p.paid===!0||p.paid==="paid",j=p.paidStatus||p.paymentStatus||(m?"paid":"unpaid");m===o&&j===d||(await Re(y,{paid_status:d,paid:o}),l=!0)}return l&&(u.reservations=D()),l}async function Qt(e){if(!e)return!1;const s=D(),a=u.projects.find(o=>String(o.id)===String(e))||(_e().projects||[]).find?.(o=>String(o.id)===String(e))||null,r=s.filter(o=>String(o.projectId)===String(e));if(!r.length)return!1;let i=!1;for(const o of r){const d=o.id??o.reservationId;if(!d)continue;const l=ks({...o,projectId:e},a);if(l.effectiveConfirmed)continue;const p=a?.status??l.projectStatus??"confirmed";await Re(d,{confirmed:!0,status:p}),i=!0}return i&&(u.reservations=D()),i}async function Us(e){if(!e)return!1;const a=D().filter(i=>String(i.projectId)===String(e));if(!a.length)return!1;let r=!1;for(const i of a){const o=i.id??i.reservationId;if(!o)continue;const d=String(i.status||"").toLowerCase();d==="completed"||d==="cancelled"||d==="canceled"||(i.confirmed===!1||i.confirmed==="false")&&(d==="pending"||d==="")||(await Re(o,{confirmed:!1,status:"pending"}),r=!0)}return r&&(u.reservations=D()),r}async function Tt(e,s){if(!e)return!1;const a=await Os(e,s);return a&&document.dispatchEvent(new CustomEvent("reservations:changed")),a}async function Lt(e){if(!e)return!1;const a=D().filter(i=>String(i.projectId)===String(e));if(!a.length)return!1;let r=!1;for(const i of a){const o=i.id??i.reservationId;if(o)try{await Re(o,{status:"cancelled",cancelled:!0}),r=!0}catch(d){console.warn("[projects] failed to cancel linked reservation",o,d)}}return r&&(u.reservations=D(),document.dispatchEvent(new CustomEvent("reservations:changed"))),r}async function mt(e){if(!e)return!1;const a=D().filter(i=>String(i.projectId)===String(e));if(!a.length)return!1;let r=!1;for(const i of a){const o=i.id??i.reservationId;if(o)try{await Re(o,{status:"completed",confirmed:!0}),r=!0}catch(d){console.warn("[projects] failed to close linked reservation",o,d)}}return r&&(u.reservations=D(),document.dispatchEvent(new CustomEvent("reservations:changed"))),r}async function Gt(e){if(!e)return!1;const a=D().filter(i=>String(i.projectId)===String(e));if(!a.length)return!1;let r=!1;for(const i of a){const o=i.id??i.reservationId;if(o)try{const d=String(i.status||"").toLowerCase();if(d==="cancelled"||d==="canceled")continue;await Re(o,{status:"confirmed",confirmed:!0}),r=!0}catch(d){console.warn("[projects] failed to reopen linked reservation",o,d)}}return r&&(u.reservations=D(),document.dispatchEvent(new CustomEvent("reservations:changed"))),r}async function zs(e){if(!e)return!1;const s=e.projectId??e.id;if(!s)return!1;const a=String(e.status||"").toLowerCase(),r=a==="cancelled"||a==="canceled",i=a==="completed"||a==="closed",o=e.confirmed===!0||e.confirmed==="true";if(r)return Lt(s);if(i)return mt(s);if(o){const d=await Gt(s);return d||Qt(s)}return Us(s)}async function Ra(){const e=$e();if(!Array.isArray(e)||e.length===0)return!1;const s=new Date;let a=!1,r=0,i=0;for(const o of e)try{const d=String(o?.status||"").toLowerCase();if(d==="completed"||d==="closed"||d==="cancelled"||d==="canceled")continue;const l=o?.end?new Date(o.end):null;if(!l||Number.isNaN(l.getTime())||l>=s)continue;if(!(o.confirmed===!0||o.confirmed==="true")){const g=await pt(o.projectId??o.id,{status:"cancelled",cancelled:!0,confirmed:!1}),A=g?.projectId??g?.id??o.id;await Lt(A),a=!0,i+=1;continue}const y=n("projects.autoClose.note","Ø¥ØºÙ„Ø§Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),m=await Nt(o.projectId??o.id,y),j=m?.projectId??m?.id??o.id;await mt(j),a=!0,r+=1}catch(d){console.warn("[projects] autoCloseExpiredProjects failed for",o?.id,d)}if(a){try{await Et()}catch{}try{await It()}catch{}try{document.dispatchEvent(new CustomEvent("projects:changed"))}catch{}try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const o=[];if(r>0&&o.push(n("projects.toast.autoClosed","ØªÙ… Ø¥ØºÙ„Ø§Ù‚ {count} Ù…Ø´Ø±ÙˆØ¹ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª").replace("{count}",String(r))),i>0){const l=n("projects.toast.autoCancelled","ØªÙ… Ø¥Ù„ØºØ§Ø¡ {count} Ù…Ø´Ø±ÙˆØ¹ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø¨Ø¯ÙˆÙ† ØªØ£ÙƒÙŠØ¯").replace("{count}",String(i));o.push(l)}const d=o.join(" â€¢ ");h(d)}catch{}}return a}let Pt=!1;const ft="projects:create:draft",Ws="projects.html#projects-section";let nt=!1,Ie=[];const Ys=()=>{u.filters.search="",u.filters.status="",u.filters.payment="",u.filters.type="",u.filters.confirmed="",u.filters.range="",u.filters.startDate="",u.filters.endDate=""};function Xt(e){return e?e instanceof HTMLElement?e:typeof e=="string"?document.getElementById(e):null:null}function Ks(e=t.companyShare){const s=Xt(e);if(!s||s.checked!==!0)return null;const a=s.dataset.companyShare??s.value??je,r=v(String(a).replace("%","").trim()),i=Number.parseFloat(r);return!Number.isFinite(i)||i<=0?je:i}function Ze(e=t.companyShare,s=je){const a=Xt(e);if(!a)return;const r=a.dataset.companyShare??a.value??s,i=v(String(r).replace("%","").trim());let o=Number.parseFloat(i);(!Number.isFinite(o)||o<=0)&&(o=s),a.dataset.companyShare=String(o),a.checked=!0}function et(e){const s=t.taxCheckbox,a=t.companyShare;if(!s||!a||nt)return;nt=!0;const r=()=>{h(n("projects.toast.companyShareRequiresTax","âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©"))};if(e==="share")if(a.checked){if(s.disabled){a.checked=!1,r(),nt=!1;return}s.checked||(s.checked=!0),Ze(a)}else s.checked&&!s.disabled&&(s.checked=!1);else e==="tax"&&(s.checked?Ze(a):a.checked&&(a.checked=!1));nt=!1}function Zt({equipmentEstimate:e=0,expensesTotal:s=0,servicesClientPrice:a=0,discountValue:r=0,discountType:i="percent",applyTax:o=!1,companyShareEnabled:d=!1,companySharePercent:l=null}={}){const p=Number(e)+Number(a),y=Number.isFinite(Number(r))?Number(r):0;let m=0;i==="amount"?m=y:m=p*(y/100),(!Number.isFinite(m)||m<0)&&(m=0),m>p&&(m=p);const j=Math.max(0,p-m),g=d&&o&&Number.isFinite(Number(l))&&Number(l)>0?Number(l):0,A=g>0?Number((j*(g/100)).toFixed(2)):0,I=j+A;let P=o?I*Xe:0;(!Number.isFinite(P)||P<0)&&(P=0),P=Number(P.toFixed(2));const $=Number((I+P).toFixed(2));return{baseSubtotal:p,discountAmount:m,subtotalAfterDiscount:j,companyShareAmount:A,taxableAmount:I,taxAmount:P,totalWithTax:$}}function Ma(){t.form&&!t.form.dataset.listenerAttached&&(t.form.addEventListener("submit",ra),t.form.dataset.listenerAttached="true"),t.form&&!t.form.dataset.resetListenerAttached&&(t.form.addEventListener("reset",()=>{t.client&&(t.client.dataset.customerId=""),tt(),Kt(),t.type&&(t.type.value=""),Ve(null),os(),es()}),t.form.dataset.resetListenerAttached="true"),Js(),Qs(),t.search&&!t.search.dataset.listenerAttached&&(t.search.addEventListener("input",()=>{u.filters.search=v(t.search.value||"").trim().toLowerCase(),me(),ge()}),t.search.dataset.listenerAttached="true");const e=()=>{me(),ge()},s=o=>{if(!(o instanceof Date)||Number.isNaN(o.getTime()))return"";const d=String(o.getDate()).padStart(2,"0"),l=String(o.getMonth()+1).padStart(2,"0");return`${String(o.getFullYear())}-${l}-${d}`},a=o=>{const d=new Date;let l="",p="";if(o==="today")l=s(d),p=l;else if(o==="week"){const y=new Date(d),m=y.getDay(),j=m===0?6:m-1;y.setDate(y.getDate()-j);const g=new Date(y);g.setDate(g.getDate()+6),l=s(y),p=s(g)}else if(o==="month"){const y=new Date(d.getFullYear(),d.getMonth(),1),m=new Date(d.getFullYear(),d.getMonth()+1,0);l=s(y),p=s(m)}else o===""?(l="",p=""):o==="custom"&&(l=t.filterStart?.value||u.filters.startDate||"",p=t.filterEnd?.value||u.filters.endDate||"");t.filterStart&&(t.filterStart.value=l),t.filterEnd&&(t.filterEnd.value=p),u.filters.range=o,u.filters.startDate=v(l),u.filters.endDate=v(p),e()},r=(o,d)=>{!o||o.dataset.listenerAttached||(o.addEventListener("change",()=>{u.filters[d]=v(o.value||"").trim().toLowerCase(),e()}),o.dataset.listenerAttached="true")};r(t.filterStatus,"status"),r(t.filterPayment,"payment"),r(t.filterType,"type"),r(t.filterConfirmed,"confirmed"),t.filterRange&&!t.filterRange.dataset.listenerAttached&&(t.filterRange.addEventListener("change",()=>a(t.filterRange.value||"")),t.filterRange.dataset.listenerAttached="true");const i=(o,d)=>{if(!o||o.dataset.listenerAttached)return;const l=()=>{const p=v(o.value||"").trim();u.filters[d]=p,p&&(u.filters.range="custom",t.filterRange&&(t.filterRange.value="custom")),e()};o.addEventListener("change",l),o.addEventListener("input",l),o.dataset.listenerAttached="true"};i(t.filterStart,"startDate"),i(t.filterEnd,"endDate"),t.filterReset&&!t.filterReset.dataset.listenerAttached&&(t.filterReset.addEventListener("click",()=>{Ys(),t.search&&(t.search.value=""),t.filterStatus&&(t.filterStatus.value=""),t.filterPayment&&(t.filterPayment.value=""),t.filterType&&(t.filterType.value=""),t.filterConfirmed&&(t.filterConfirmed.value=""),t.filterRange&&(t.filterRange.value=""),t.filterStart&&(t.filterStart.value=""),t.filterEnd&&(t.filterEnd.value=""),e()}),t.filterReset.dataset.listenerAttached="true")}function es(){Ns(),u.editingProjectId=null,t.form&&(delete t.form.dataset.editingId,t.form.dataset.mode="create"),ze(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=""),u.servicesClientPriceTotal=0,t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.taxCheckbox&&(t.taxCheckbox.checked=!1),t.discountType&&(t.discountType.value="percent"),t.discountValue&&(t.discountValue.value=""),t.companyShare&&(t.companyShare.checked=!1,t.companyShare.dataset.companyShare=String(je)),t.paymentStatus&&(t.paymentStatus.value="unpaid"),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected,t.paymentProgressType&&(t.paymentProgressType.value="percent"),t.paymentProgressValue&&(t.paymentProgressValue.value=""),Ie=[],t.paymentHistory&&(t.paymentHistory.innerHTML=""),ns(),st(),et("tax"),We()}function Fa(){t.addTechnicianBtn&&t.addTechnicianBtn.dataset.listenerAttached!=="true"&&(t.addTechnicianBtn.addEventListener("click",Gs),t.addTechnicianBtn.dataset.listenerAttached="true"),t.addEquipmentBtn&&t.addEquipmentBtn.dataset.listenerAttached!=="true"&&(t.addEquipmentBtn.addEventListener("click",Xs),t.addEquipmentBtn.dataset.listenerAttached="true")}function Ba(){wt(t.technicianList,e=>{if(e.matches('[data-action="remove-technician"]')){const s=e.dataset.id;u.selectedTechnicians=u.selectedTechnicians.filter(a=>a!==s),ts()}}),wt(t.equipmentList,e=>{if(e.matches('[data-action="remove-equipment"]')){const s=e.dataset.id;u.selectedEquipment=u.selectedEquipment.filter(a=>a.barcode!==s),ss()}}),wt(t.expenseList,e=>{if(e.matches('[data-action="remove-expense"]')){const s=e.dataset.id;u.expenses=u.expenses.filter(a=>String(a.id)!==String(s)),as(),Le(),is(),We()}})}function Js(){t.discountValue&&t.discountValue.dataset.listenerAttached!=="true"&&(t.discountValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=v(s.value||""))}),t.discountValue.dataset.listenerAttached="true"),t.companyShare&&t.companyShare.dataset.listenerAttached!=="true"&&(t.companyShare.addEventListener("change",()=>{et("share")}),t.companyShare.dataset.listenerAttached="true"),t.taxCheckbox&&t.taxCheckbox.dataset.projectListenerAttached!=="true"&&(t.taxCheckbox.addEventListener("change",()=>{et("tax")}),t.taxCheckbox.dataset.projectListenerAttached="true"),t.paymentStatus&&t.paymentStatus.dataset.billingListenerAttached!=="true"&&(t.paymentStatus.addEventListener("change",()=>{t.paymentStatus.dataset.userSelected="true"}),t.paymentStatus.dataset.billingListenerAttached="true"),t.paymentProgressValue&&t.paymentProgressValue.dataset.listenerAttached!=="true"&&(t.paymentProgressValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=v(s.value||""))}),t.paymentProgressValue.dataset.listenerAttached="true"),t.servicesClientPrice&&t.servicesClientPrice.dataset.normalizeAttached!=="true"&&(t.servicesClientPrice.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const a=s.selectionStart,r=v(s.value||"");if(s.value=r,a!=null){const i=Math.min(r.length,a);s.setSelectionRange(i,i)}}),t.servicesClientPrice.dataset.normalizeAttached="true"),et(t.companyShare?.checked?"share":"tax"),We()}function Ft(){const e=t.paymentHistory;if(!e)return;const s=Array.isArray(Ie)?Ie:[];if(!s.length){e.innerHTML=`<div class="reservation-payment-history__empty">${c(n("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;return}const a=s.map((r,i)=>{const o=Number.isFinite(Number(r?.amount))&&Number(r.amount)>0?C(Number(r.amount)):"â€”",d=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?`${v(Number(r.percentage).toFixed(2))}%`:"â€”",l=r?.recordedAt?v(ut(r.recordedAt)):"â€”",p=r?.type==="percent"?n("reservations.paymentHistory.type.percent","Ùª Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):n("reservations.paymentHistory.type.amount","ğŸ’µ Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©");return`
      <tr>
        <td>${c(p)}</td>
        <td>${c(o)}</td>
        <td>${c(d)}</td>
        <td>${c(l)}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${i}" aria-label="${c(n("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}">ğŸ—‘ï¸</button>
        </td>
      </tr>`}).join("");e.innerHTML=`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${c(n("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${a}</tbody>
      </table>
    </div>`}function Qs(){t.paymentAddButton&&t.paymentAddButton.dataset.listenerAttached!=="true"&&(t.paymentAddButton.addEventListener("click",e=>{e.preventDefault();const s=t.paymentProgressType?.value==="amount"?"amount":"percent",a=v(t.paymentProgressValue?.value||"").replace("%","").trim(),r=Number.parseFloat(a);if(!Number.isFinite(r)||r<=0){h(n("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©"));return}Ie.push({type:s,value:r,recordedAt:new Date().toISOString()}),t.paymentProgressValue&&(t.paymentProgressValue.value=""),Ft()}),t.paymentAddButton.dataset.listenerAttached="true"),t.paymentHistory&&t.paymentHistory.dataset.listenerAttached!=="true"&&(t.paymentHistory.addEventListener("click",e=>{const s=e.target.closest('[data-action="remove-payment"]');if(!s)return;const a=Number.parseInt(s.dataset.index||"-1",10);!Number.isInteger(a)||a<0||(Ie.splice(a,1),Ft())}),t.paymentHistory.dataset.listenerAttached="true")}function Va(){t.addExpenseBtn&&t.addExpenseBtn.dataset.listenerAttached!=="true"&&(t.addExpenseBtn.addEventListener("click",Zs),t.addExpenseBtn.dataset.listenerAttached="true"),t.expenseAmount&&t.expenseAmount.dataset.normalizeAttached!=="true"&&(t.expenseAmount.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const a=s.selectionStart,r=v(s.value||"");if(s.value=r,a!=null){const i=Math.min(r.length,a);s.setSelectionRange(i,i)}}),t.expenseAmount.dataset.normalizeAttached="true")}function wt(e,s){!e||e.dataset.listenerAttached==="true"||(e.addEventListener("click",a=>{const r=a.target;r instanceof HTMLElement&&s(r)}),e.dataset.listenerAttached="true")}function Ha({onViewDetails:e}){!t.projectsTableBody||t.projectsTableBody.dataset.listenerAttached==="true"||(t.projectsTableBody.addEventListener("click",s=>{const a=s.target;if(a instanceof HTMLElement){if(a.matches('[data-action="view-details"]')){const r=a.dataset.id;e?.(r);return}if(a.matches('[data-action="delete-project"]')){if(!ys()){js();return}const r=a.dataset.id;Jt(r)}}}),t.projectsTableBody.dataset.listenerAttached="true")}function Oa(){const{customers:e}=_e();u.customers=Array.isArray(e)?e:[],ze(),me(),ge()}function Ua(){const{technicians:e}=_e();u.technicians=Array.isArray(e)?e:[],ze(),me(),ge()}function za(e){const{reservations:s}=_e();u.reservations=Array.isArray(s)?s:[],me();const a=t.detailsModalEl&&t.detailsModalEl.classList.contains("show"),r=t.detailsBody?.dataset.projectId;a&&r&&u.projects.find(o=>String(o.id)===String(r))&&e?.(r)}function Gs(){const e=t.technicianSelect?.value;if(!e){h(n("projects.toast.selectTechnician","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));return}if(u.selectedTechnicians.includes(e)){h(n("projects.toast.technicianAlreadyAdded","âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„"));return}u.selectedTechnicians.push(e),ze(),h(n("projects.toast.technicianAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"))}function Xs(){const e=t.equipmentSelect?.value;if(!e){h(n("projects.toast.selectEquipment","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©"));return}const s=Math.max(1,parseInt(t.equipmentQty?.value||"1",10)||1),a=u.selectedEquipment.find(r=>r.barcode===e);a?a.qty+=s:u.selectedEquipment.push({barcode:e,qty:s}),ze(),h(n("projects.toast.equipmentAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹"))}function Zs(){const e=(t.expenseLabel?.value||"").trim(),s=v(t.expenseAmount?.value||"0"),a=Number(s),r=v(t.servicesClientPrice?.value||"0"),i=Number.parseFloat(r)||0,o=(t.expenseNote?.value||"").trim();if(!e){h(n("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ"));return}if(!Number.isFinite(a)||a<0){h(n("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­"));return}u.expenses.push({id:Date.now(),label:e,amount:a,salePrice:i,note:o}),is(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=v(String(s))),t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.expenseNote&&(t.expenseNote.value=""),ze(),Le(),We()}function ze(){ts(),ss(),as(),ns(),We()}function ts(){t.technicianList&&rs(t.technicianList,u.selectedTechnicians,e=>{const a=u.technicians.find(r=>String(r.id)===String(e))?.name||n("projects.fallback.technicianName","Ø¹Ø¶Ùˆ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…");return`
      <span class="chip">
        ${c(a)}
        <button type="button" class="chip__remove" data-action="remove-technician" data-id="${c(String(e))}" aria-label="${c(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function ss(){t.equipmentList&&rs(t.equipmentList,u.selectedEquipment,e=>{const s=u.equipment.find(i=>String(i.barcode||"")===String(e.barcode)),a=s?.desc||s?.description||s?.name||n("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©"),r=v(String(e.qty||1));return`
      <span class="chip">
        ${c(a)} (x${r})
        <button type="button" class="chip__remove" data-action="remove-equipment" data-id="${c(String(e.barcode))}" aria-label="${c(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function as(){if(!t.expenseList)return;const e=Array.isArray(u.expenses)?u.expenses:[];if(!e.length){const a=c(Yt(t.expenseList));t.expenseList.innerHTML=`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${c(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${c(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${c(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${c(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${c(n("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${a}</td></tr>
          </tbody>
        </table>
      </div>`;return}const s=e.map(a=>{const r=c(a.label||""),i=C(Number(a.amount)||0),o=C(Number(a.salePrice)||0),d=c(a.note||""),l=c(String(a.id)),p=c(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©"));return`
      <tr>
        <td>${r}</td>
        <td>${c(i)}</td>
        <td>${c(o)}</td>
        <td>${d||c(n("common.placeholder.empty","â€”"))}</td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${l}" aria-label="${p}">âœ–</button>
        </td>
      </tr>`}).join("");t.expenseList.innerHTML=`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
            <tr>
              <th>${c(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${c(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${c(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${c(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${c(n("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
        </thead>
        <tbody>${s}</tbody>
      </table>
    </div>`}function rs(e,s,a){if(e){if(!s||s.length===0){const r=c(Yt(e));e.innerHTML=`<span class="text-muted">${r}</span>`;return}e.innerHTML=s.map(r=>a(r)).join("")}}function ns(){if(!t.submitBtn)return;const e=!!u.editingProjectId,s=e?"projects.form.buttons.update":"projects.form.buttons.save",a=e?"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹";t.submitBtn.textContent=n(s,a)}function ea(){return u.expenses.reduce((e,s)=>e+(Number(s.amount)||0),0)}function Bt(e){return v(String(e||"")).trim().toLowerCase()}function ta(){if(!Array.isArray(u.selectedEquipment)||u.selectedEquipment.length===0)return{items:[],missing:[]};const e=new Map((u.equipment||[]).map(r=>[Bt(r?.barcode),r])),s=[],a=[];return u.selectedEquipment.forEach(r=>{const i=Bt(r?.barcode);if(!i){s.push(r?.barcode||"");return}const o=e.get(i);if(!o||o.id==null){s.push(r?.barcode||i);return}const d=Number.parseInt(String(r?.qty??0),10);a.push({equipmentId:o.id,qty:Number.isInteger(d)&&d>0?d:1})}),{items:a,missing:s}}function sa(e){return!e||!Array.isArray(e.equipment)?[]:e.equipment.map(s=>{const a=s?.equipmentId??s?.equipment_id??s?.id??null,r=Number.parseInt(String(s?.qty??s?.quantity??0),10);return a?{equipmentId:a,qty:Number.isInteger(r)&&r>0?r:1}:null}).filter(Boolean)}function aa(){return u.selectedEquipment.reduce((e,s)=>{const a=u.equipment.find(i=>String(i.barcode||"")===String(s.barcode)),r=Number(a?.price||a?.daily_rate||a?.dailyRate||0);return e+r*(s.qty||1)},0)}async function ra(e){if(e.preventDefault(),Pt)return;const s=t.title?.value.trim(),a=t.type?.value||"",r=t.client?.value?.trim()||"",i=t.client?.dataset?.customerId||"",o=t.startDate?.value?.trim()||"",d=t.startTime?.value?.trim()||"";if(!s||!a||!o){h(n("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"));return}const l=Bs(r,i);if(!l){h(n("projects.toast.customerNotFound","âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„")),t.client?.focus();return}const p=String(l.id);t.client&&(t.client.dataset.customerId=p,t.client.value=l.customerName||l.name||t.client.value),Ve(l);const y=t.endDate?.value?.trim()||"",m=t.endTime?.value?.trim()||"",j=ct(o,d),g=y?ct(y,m):"",A=new Date(j),I=g?new Date(g):null;if(I&&A>I){h(n("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"));return}t.expenseAmount&&(t.expenseAmount.value=v(t.expenseAmount.value||""));const P=ea(),$=aa(),K=v(t.servicesClientPrice?.value||"");let U=u.servicesClientPriceTotal||Number.parseFloat(K);(!Number.isFinite(U)||U<0)&&(U=0);const X=t.taxCheckbox?.checked===!0,_=t.discountType?.value==="amount"?"amount":"percent",se=v(t.discountValue?.value||"0");let z=Number.parseFloat(se);(!Number.isFinite(z)||z<0)&&(z=0);const xe=t.companyShare,Se=xe?.checked===!0;let be=Se?Number.parseFloat(v(String(xe.dataset.companyShare??xe.value??je))):null;(!Number.isFinite(be)||be<=0)&&(be=Se?je:null);const Z=Zt({equipmentEstimate:$,expensesTotal:P,servicesClientPrice:U,discountValue:z,discountType:_,applyTax:X,companyShareEnabled:Se,companySharePercent:be}),ae=t.paymentProgressType?.value==="amount"?"amount":"percent",ke=v(t.paymentProgressValue?.value||""),Ye=ke?Number.parseFloat(ke):null,ce=Ge({totalAmount:Z.totalWithTax,progressType:ae,progressValue:Ye,history:Array.isArray(Ie)?[...Ie]:[]}),Ke=t.paymentStatus?.dataset?.userSelected==="true",fe=(t.paymentStatus?.value||"unpaid").toLowerCase(),Pe=["paid","partial"].includes(fe)?fe:"unpaid",He=it({manualStatus:Ke?Pe:null,paidAmount:ce.paidAmount,paidPercent:ce.paidPercent,totalAmount:Z.totalWithTax}),we=Ke?Pe:He;!Ke&&t.paymentStatus&&(t.paymentStatus.value=we),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected;const{items:ye,missing:Me}=ta();if(Me.length){h(n("projects.toast.equipmentMissing","âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),"error");return}const J=!!u.editingProjectId,W=J?u.projects.find(q=>String(q.id)===String(u.editingProjectId)):null;if(J&&!W){h(n("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const re=l.companyName||l.company||"",ne=t.description?.value.trim()||"",le=Wt({projectCode:W?.projectCode||(J?null:zt()),title:s,type:a,clientId:p,clientCompany:re,description:ne,start:j,end:g||null,applyTax:X,paymentStatus:we,equipmentEstimate:$,expenses:u.expenses.map(q=>({id:q.id,label:q.label,amount:q.amount,salePrice:q.salePrice,note:q.note||void 0})),servicesClientPrice:U,discount:z,discountType:_,companyShareEnabled:Se&&X,companySharePercent:Se&&X?be:null,companyShareAmount:Z.companyShareAmount,taxAmount:Z.taxAmount,totalWithTax:Z.totalWithTax,confirmed:W?.confirmed??!1,technicians:u.selectedTechnicians,equipment:ye,paidAmount:ce.paidAmount,paidPercentage:ce.paidPercent,paymentProgressType:ce.paymentProgressType,paymentProgressValue:ce.paymentProgressValue,payments:Array.isArray(Ie)?Ie:[]});Pt=!0;try{let q=W?.projectId??W?.id??null;if(J){const Y=await pt(q??u.editingProjectId,le);q=Y?.projectId??Y?.id??q,await Tt(q,we),h(n("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"))}else{const Y=await gs(le);q=Y?.projectId??Y?.id??null,await Tt(q,we),h(n("projects.toast.saved","âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"));try{Ct({projectsTab:"projects-section",projectsSubTab:"projects-list-tab"}).catch(()=>{});const oe=document.querySelector('.tab-button[data-tab-target="projects-section"]');oe&&typeof oe.click=="function"&&oe.click();const Te=document.querySelector('.sub-tab-button[data-project-subtab-target="projects-list-tab"]');Te&&typeof Te.click=="function"&&setTimeout(()=>Te.click(),0)}catch{}}await ca(q)||os(),u.editingProjectId=null,t.form.reset(),es(),Kt(),tt(),t.client&&(t.client.dataset.customerId=""),t.type&&(t.type.value="");try{await Et()}catch{}u.projects=$e(),u.reservations=D(),me(),Le(),document.dispatchEvent(new CustomEvent("projects:changed"))}catch(q){console.error("âŒ [projects] handleSubmitProject failed",q);const Ae=dt(q)?q.message:n("projects.toast.saveFailed","ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");h(Ae,"error")}finally{Pt=!1}}function ct(e,s){if(!e)return"";const a=s&&/\d{1,2}:\d{2}/.test(s)?s:"00:00",[r="00",i="00"]=a.split(":"),o=r.padStart(2,"0"),d=i.padStart(2,"0");return`${e}T${o}:${d}`}function yt(){if(typeof window>"u"||!window.sessionStorage)return null;const e=window.sessionStorage.getItem(ft);if(!e)return null;try{const s=JSON.parse(e);return s&&typeof s=="object"?s:null}catch(s){return console.warn("âš ï¸ [projects] Failed to parse project form draft",s),null}}function _t(e){if(!(typeof window>"u"||!window.sessionStorage))try{window.sessionStorage.setItem(ft,JSON.stringify(e))}catch(s){console.warn("âš ï¸ [projects] Unable to persist project form draft",s)}}function os(){typeof window>"u"||!window.sessionStorage||(window.sessionStorage.removeItem(ft),st())}function na(){const e=yt()||{};return{...e,type:t.type?.value||"",title:t.title?.value||"",client:t.client?.value||"",customerId:t.client?.dataset.customerId||"",clientCompany:t.clientCompany?.value||"",paymentStatus:t.paymentStatus?.value||"unpaid",taxChecked:t.taxCheckbox?.checked===!0,discountType:t.discountType?.value||"percent",discountValue:t.discountValue?.value||"",companyShareEnabled:t.companyShare?.checked===!0,companySharePercent:t.companyShare?.dataset.companyShare||t.companyShare?.value||String(je),paymentProgressType:t.paymentProgressType?.value||"percent",paymentProgressValue:t.paymentProgressValue?.value||"",startDate:t.startDate?.value||"",startTime:t.startTime?.value||"",endDate:t.endDate?.value||"",endTime:t.endTime?.value||"",description:t.description?.value||"",expenses:Array.isArray(u.expenses)?u.expenses.map(s=>({...s})):[],servicesClientPriceTotal:Number.isFinite(Number(u.servicesClientPriceTotal))?u.servicesClientPriceTotal:0,technicians:Array.isArray(u.selectedTechnicians)?[...u.selectedTechnicians]:[],equipment:Array.isArray(u.selectedEquipment)?u.selectedEquipment.map(s=>({...s})):[],linkedReservationIds:Array.isArray(e.linkedReservationIds)?[...e.linkedReservationIds]:[],savedAt:Date.now()}}function Wa(){const e=yt();return e?(t.type&&(t.type.value=e.type||""),t.title&&(t.title.value=e.title||""),t.client&&(t.client.value=e.client||"",t.client.dataset.customerId=e.customerId||""),t.clientCompany&&(t.clientCompany.value=e.clientCompany||""),t.paymentStatus&&e.paymentStatus&&(t.paymentStatus.value=e.paymentStatus),t.taxCheckbox&&(t.taxCheckbox.checked=e.taxChecked===!0),t.discountType&&e.discountType&&(t.discountType.value=e.discountType),t.discountValue&&(t.discountValue.value=e.discountValue||""),t.companyShare&&(e.companySharePercent?t.companyShare.dataset.companyShare=String(e.companySharePercent):t.companyShare.dataset.companyShare=String(je),t.companyShare.checked=e.companyShareEnabled===!0),t.paymentProgressType&&e.paymentProgressType&&(t.paymentProgressType.value=e.paymentProgressType),t.paymentProgressValue&&(t.paymentProgressValue.value=e.paymentProgressValue||""),u.servicesClientPriceTotal=Number.isFinite(Number(e.servicesClientPriceTotal))?Number(e.servicesClientPriceTotal):0,t.startDate&&(t.startDate.value=e.startDate||""),t.startTime&&(t.startTime.value=e.startTime||""),t.endDate&&(t.endDate.value=e.endDate||""),t.endTime&&(t.endTime.value=e.endTime||""),t.description&&(t.description.value=e.description||""),u.expenses=Array.isArray(e.expenses)?e.expenses.map(s=>({...s})):[],u.selectedTechnicians=Array.isArray(e.technicians)?[...e.technicians]:[],u.selectedEquipment=Array.isArray(e.equipment)?e.equipment.map(s=>({...s})):[],et("tax"),st(),We(),!0):(st(),!1)}function Ya(){!t.linkedReservationBtn||t.linkedReservationBtn.dataset.listenerAttached==="true"||(t.linkedReservationBtn.addEventListener("click",oa),t.linkedReservationBtn.dataset.listenerAttached="true")}function oa(e){e.preventDefault();const s=e.currentTarget;if(s?.classList?.contains("btn-disabled")||s?.getAttribute("aria-disabled")==="true"){h(n("projects.form.linkedReservation.buttonDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"));return}const r=na();if(!(r.customerId&&r.customerId!==""||r.client&&r.client.trim())){h(n("projects.form.linkedReservation.missingClient","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}const o=r.startDate&&r.startTime,d=r.endDate&&r.endTime;if(!o||!d){h(n("projects.form.linkedReservation.missingSchedule","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}_t(r);const l=ia(r);let p="";try{p=encodeURIComponent(JSON.stringify(l))}catch(m){console.warn("âš ï¸ [projects] Unable to encode reservation context",m)}Ct({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(m=>{console.warn("âš ï¸ [projects] Failed to persist dashboard preference before redirect",m)});const y=p?`?reservationProjectContext=${p}`:"";window.location.href=`dashboard.html${y}#reservations`}function ia(e){const s=ct(e.startDate,e.startTime)||null,a=ct(e.endDate,e.endTime)||null;return{fromProjectForm:!0,draftStorageKey:ft,returnUrl:Ws,start:s,end:a,customerId:e.customerId||null,customerName:e.client||"",clientCompany:e.clientCompany||"",projectTitle:e.title||"",projectType:e.type||"",description:e.description||""}}async function ca(e){if(!e)return;const s=yt(),a=Array.isArray(s?.linkedReservationIds)?s.linkedReservationIds:[];if(!a.length)return;const r=[];let i=!1;for(const d of a){const l=d!=null?String(d):"";if(l)try{await Re(l,{project_id:e}),i=!0}catch(p){console.error("âŒ [projects] Failed to link reservation to project",l,p),r.push(l)}}if(i)try{await It(),u.reservations=D(),document.dispatchEvent(new CustomEvent("reservations:changed"))}catch(d){console.warn("âš ï¸ [projects] Failed to refresh reservations after linking",d)}const o={linkedReservationIds:r,savedAt:Date.now()};return _t(o),r.length&&h(n("projects.toast.linkReservationFailed","âš ï¸ ØªØ¹Ø°Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§"),"error"),st(),r.length}function la(){const e=new Map,s=r=>{if(!r)return;[r.id,r.reservationId,r.reservation_id,r.reservation_code].map(o=>o!=null?String(o):"").filter(Boolean).forEach(o=>{e.has(o)||e.set(o,r)})};Array.isArray(u.reservations)&&u.reservations.forEach(s);const a=_e();return Array.isArray(a?.reservations)&&a.reservations.forEach(s),e}function da(e){if(!e||typeof e!="object")return"";const s=[e.name,e.full_name,e.fullName,e.technician_name,e.technicianName,e.label,e.displayName];for(const a of s)if(typeof a=="string"&&a.trim())return a.trim();return""}function pa(e){if(!e)return[];const s=new Set;(Array.isArray(e.techniciansDetails)?e.techniciansDetails:[]).forEach(i=>{const o=da(i);o&&s.add(o)});const r=Array.isArray(e.technicians)?e.technicians:[];if(r.length){const i=Array.isArray(u.technicians)?u.technicians:[];r.forEach(o=>{const d=i.find(p=>String(p?.id)===String(o)),l=d?.name||d?.full_name||"";l&&s.add(String(l).trim())})}return Array.from(s)}function st(){const e=document.getElementById("project-linked-reservation-summary");if(!e)return;const s=yt(),a=t.linkedReservationBtn;let r=Array.isArray(s?.linkedReservationIds)?Array.from(new Set(s.linkedReservationIds.map(l=>String(l)).filter(Boolean))):[];const i=la(),o=r.filter(l=>i.has(l));if(o.length!==r.length){r=o;const l={...s||{},linkedReservationIds:r,savedAt:Date.now()};_t(l)}if(!r.length){e.dataset.state="empty",e.innerHTML=`<p class="project-linked-reservation__summary-empty">${c(n("projects.form.linkedReservation.empty","Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯."))}</p>`,a&&(a.disabled=!1,a.classList.remove("btn-disabled"),a.removeAttribute("aria-disabled"),a.title="");return}const d=r.map(l=>{const p=i.get(l);if(!p)return`
        <li class="project-linked-reservation__summary-item">
          <div class="project-linked-reservation__summary-item-title">#${c(v(l))}</div>
          <div class="project-linked-reservation__summary-item-meta">
            <span>${c(n("projects.form.linkedReservation.pendingItem","ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ ÙˆØ³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."))}</span>
          </div>
        </li>`;const y=p.reservation_code||p.reservationId||p.id||l,m=`#${v(String(y))}`,j=Array.isArray(p.items)?p.items:[],g=j.reduce((_,se)=>_+(Number(se?.qty)||0),0)||j.length||0,A=pa(p),P=(Array.isArray(p.technicians)?p.technicians:[]).length||A.length||0,$=Is(p),K=[],U=n("projects.form.linkedReservation.meta.equipment","Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}").replace("{count}",v(String(g)));K.push(U);const X=n("projects.form.linkedReservation.meta.crew","Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}").replace("{count}",v(String(P)));if(K.push(X),A.length){const _=typeof Dt=="function"&&Dt()==="en"?", ":"ØŒ ",se=n("projects.form.linkedReservation.meta.crewNames","Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}").replace("{names}",A.join(_));K.push(se)}if(Number.isFinite($)){const _=n("projects.form.linkedReservation.meta.total","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}").replace("{amount}",C($));K.push(_)}return`
      <li class="project-linked-reservation__summary-item">
        <div class="project-linked-reservation__summary-item-title">${c(m)}</div>
        <div class="project-linked-reservation__summary-item-meta">
          ${K.map(_=>`<span>${c(_)}</span>`).join("")}
        </div>
      </li>`}).join("");e.dataset.state="has-linked",e.innerHTML=`<ul class="project-linked-reservation__summary-list">${d}</ul>`,a&&(a.disabled=!1,a.classList.add("btn-disabled"),a.setAttribute("aria-disabled","true"),a.setAttribute("data-allow-click","true"),a.title=n("projects.form.linkedReservation.buttonDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))}function is(){const e=Array.isArray(u.expenses)?u.expenses.reduce((s,a)=>s+(Number(a?.salePrice)||0),0):0;u.servicesClientPriceTotal=Math.round(e*100)/100}function We(){t.servicesClientTotalIndicator||document.getElementById("project-services-client-total-indicator");const e=t.servicesClientTotalValue||document.getElementById("project-services-client-total-value");if(!e)return;const s=Number(u.servicesClientPriceTotal)||0;e.textContent=C(s)}function Qe(e){const s=u.projects.find(E=>String(E.id)===String(e));if(!s||!t.detailsBody)return;t.detailsBody.dataset.mode="view",t.detailsBody.dataset.projectId=String(s.id);const r=(u.customers.length?u.customers:_e().customers||[]).find(E=>String(E.id)===String(s.clientId)),i=ds(s.type),d=s.description?.trim()||n("projects.fallback.noDescription","Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ"),l=r?.customerName||n("projects.fallback.unknownClient","Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"),p=r?.phone??r?.customerPhone??s.clientPhone??s.customerPhone??"",y=p?v(String(p).trim()):n("projects.details.client.noPhone","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­"),m=r?.email??s.clientEmail??s.customerEmail??"",j=m?String(m).trim():n("projects.details.client.noEmail","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­"),g=(s.clientCompany||r?.companyName||"").trim(),A=s.projectCode||`PRJ-${v(String(s.id))}`,I=v(A),P=$t(s.id),$=P.reduce((E,N)=>E+ps(N),0),K=Number($.toFixed(2)),U=P.length,{subtotal:X,applyTax:_,expensesTotal:se}=$s(s),z=Number(s?.servicesClientPrice??s?.services_client_price??0),xe=X,Se=_?Number(((xe+K)*Xe).toFixed(2)):0,be=Number((xe+K+Se).toFixed(2)),Z=Ls(s),ae=s?.cancelled===!0||s?.status==="cancelled"||s?.status==="canceled"?"cancelled":Z,ke=n(`projects.status.${ae}`,_s[ae]||ae),ce=(()=>{try{const E=s.start?new Date(s.start):null,N=s.end?new Date(s.end):E?new Date(E.getTime()+3600*1e3):null;return!E||!N||Number.isNaN(E.getTime())||Number.isNaN(N.getTime())?!1:u.projects.some(B=>{if(!B||String(B.id)===String(s.id))return!1;const ee=B.start?new Date(B.start):null,M=B.end?new Date(B.end):ee?new Date(ee.getTime()+3600*1e3):null;if(!ee||!M||Number.isNaN(ee.getTime())||Number.isNaN(M.getTime()))return!1;const L=Math.max(E.getTime(),ee.getTime()),G=Math.min(N.getTime(),M.getTime());return L<G})}catch{return!1}})()&&(ae==="upcoming"||ae==="ongoing")?"conflict":ae,fe={upcoming:n("projects.status.upcoming","Ù‚Ø§Ø¯Ù…"),ongoing:n("projects.status.ongoing","Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"),completed:n("projects.status.completed","Ù…ÙƒØªÙ…Ù„"),conflict:n("projects.status.conflict","ØªØ¹Ø§Ø±Ø¶")}[ce]||ke,He={upcoming:"timeline-status-badge timeline-status-badge--upcoming",ongoing:"timeline-status-badge timeline-status-badge--ongoing",completed:"timeline-status-badge timeline-status-badge--completed",conflict:"timeline-status-badge timeline-status-badge--conflict",cancelled:"timeline-status-badge timeline-status-badge--cancelled"}[ce]||"timeline-status-badge timeline-status-badge--upcoming",we=typeof s.paymentStatus=="string"?s.paymentStatus.toLowerCase():"",ye=xa(s),Me=ye.length>0,J=Me?0:Number(s.paidAmount)||0,W=Me?0:Number(s.paidPercent)||0;let re=be,ne,le,q,Ae,Y,oe,Te,at,f,b,x="";const S=n("projects.focus.confirmed","âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯"),T=n("projects.focus.pending","â³ ØºÙŠØ± Ù…Ø¤ÙƒØ¯"),w=s.confirmed===!0||s.confirmed==="true"?`<span class="reservation-chip status-confirmed">${c(S)}</span>`:`<span class="reservation-chip status-pending">${c(T)}</span>`;let k=[];if(U>0){const E=P.reduce((V,te)=>{const Ne=Array.isArray(te.items)?te.items:[],Oe=Array.isArray(te.crewAssignments)?te.crewAssignments:[],De=Oe.length?Oe:Array.isArray(te.technicians)?te.technicians:[],us=Array.isArray(De)&&De.length&&typeof De[0]=="object",ms=Array.isArray(De)&&De.length&&typeof De[0]!="object",kt=Ps({items:Ne,technicianIds:ms?De:[],crewAssignments:us?De:[],discount:te.discount??0,discountType:te.discountType||"percent",applyTax:!1,start:te.start,end:te.end,companySharePercent:null,groupingSource:te});return V.equipment+=Number(kt.equipmentTotal||0),V.crew+=Number(kt.crewTotal||0),V.crewCost+=Number(kt.crewCostTotal||0),V},{equipment:0,crew:0,crewCost:0}),N=Number(se||0),B=Number((E.equipment+E.crew+z).toFixed(2)),ee=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let L=(s?.discountType==="amount"?"amount":"percent")==="amount"?ee:B*(ee/100);(!Number.isFinite(L)||L<0)&&(L=0),L>B&&(L=B);const G=_===!0,ve=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",Ee=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,Be=ve&&G&&Ee>0?Ee:0,pe=Math.max(0,B-L),ie=Number((pe*(Be/100)).toFixed(2)),ue=G?Number(((pe+ie)*Xe).toFixed(2)):0,O=Number((pe+ie+ue).toFixed(2)),he=Number((O-ie-ue-N-E.crewCost).toFixed(2));E.equipment>0&&k.push({icon:"ğŸ›ï¸",label:n("projects.details.summary.equipmentTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),value:C(E.equipment)}),E.crew>0&&k.push({icon:"ğŸ˜",label:n("projects.details.summary.crewTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚"),value:C(E.crew)}),E.crewCost>0&&k.push({icon:"ğŸ§¾",label:n("projects.details.summary.crewCostTotal","ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚"),value:C(E.crewCost)}),z>0&&k.push({icon:"ğŸ’¼",label:n("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:C(z)}),N>0&&k.push({icon:"ğŸ§¾",label:n("projects.details.summary.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:C(N)}),L>0&&k.push({icon:"ğŸ·ï¸",label:n("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${C(L)}`}),k.push({icon:"ğŸ§®",label:n("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:C(pe)}),ie>0&&k.push({icon:"ğŸ¦",label:n("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${C(ie)}`}),ue>0&&k.push({icon:"ğŸ’¸",label:n("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${C(ue)}`}),k.push({icon:"ğŸ’µ",label:n("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:C(he)}),k.push({icon:"ğŸ’°",label:n("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:C(O)}),re=O}else{const E=Number(se||0),N=Math.max(0,Number(z)||0),B=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let M=(s?.discountType==="amount"?"amount":"percent")==="amount"?B:N*(B/100);(!Number.isFinite(M)||M<0)&&(M=0),M>N&&(M=N);const L=Math.max(0,N-M),G=_===!0,ve=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",Ee=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,Be=ve&&G&&Ee>0?Ee:0,pe=Number((L*(Be/100)).toFixed(2)),ie=G?Number(((L+pe)*Xe).toFixed(2)):0,ue=Number((L+pe+ie).toFixed(2)),O=Number((ue-pe-ie-E).toFixed(2));k=[],k.push({icon:"ğŸ’¼",label:n("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:C(N)}),M>0&&k.push({icon:"ğŸ·ï¸",label:n("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${C(M)}`}),k.push({icon:"ğŸ§®",label:n("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:C(L)}),pe>0&&k.push({icon:"ğŸ¦",label:n("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${C(pe)}`}),ie>0&&k.push({icon:"ğŸ’¸",label:n("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${C(ie)}`}),k.push({icon:"ğŸ’µ",label:n("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:C(O)}),k.push({icon:"ğŸ’°",label:n("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:C(ue)}),re=ue}ne=Ge({totalAmount:re,paidAmount:J,paidPercent:W,history:ye}),le=it({manualStatus:Me?"unpaid":we||"unpaid",paidAmount:ne.paidAmount,paidPercent:ne.paidPercent,totalAmount:re}),q=n(`projects.paymentStatus.${le}`,le==="paid"?"Paid":le==="partial"?"Partial":"Unpaid"),Ae=le==="paid"?"status-paid":le==="partial"?"status-partial":"status-unpaid",Y=Number.isFinite(Number(ne.paidAmount))?Number(ne.paidAmount):0,oe=Number.isFinite(Number(ne.paidPercent))?Number(ne.paidPercent):0,Te=Math.max(0,Number((re-Y).toFixed(2))),at=C(Y),f=`${v(oe.toFixed(2))}%`,b=C(Te);try{x=Ht(ye,{total:re})}catch{x=Ht(ye,{total:be})}const F=k.map(({icon:E,label:N,value:B})=>`
    <div class="summary-details-row">
      <span class="summary-details-label">${E} ${c(N)}</span>
      <span class="summary-details-value">${c(B)}</span>
    </div>
  `).join(""),Q=n("projects.details.labels.code","Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),H=`
    <div class="project-details-code-badge" title="${c(Q)}">
      <span class="project-details-code-badge__label">
        <span class="project-details-code-badge__icon" aria-hidden="true">ğŸ—‚ï¸</span>
        ${c(Q)}
      </span>
      <span class="project-details-code-badge__value">${c(I)}</span>
    </div>
  `,de=ws(s.start,s.end),jt=Ot("start",s.start),qe=Ot("end",s.end),Fe=qe?{...qe,meta:(qe.meta?`${qe.meta} â€” `:"")+`${n("projects.details.labels.days","Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…")}: ${v(String(de))}`}:null,bt=[{icon:"ğŸ‘¤",label:n("projects.details.client","Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:l},{icon:"ğŸ“",label:n("projects.details.labels.clientPhone","Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:y},{icon:"âœ‰ï¸",label:n("projects.details.labels.clientEmail","Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"),value:j},g?{icon:"ğŸ¢",label:n("projects.details.company","Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:g}:null,{icon:"ğŸ·ï¸",label:n("projects.details.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),value:`<span class="project-type-chip project-type-chip--${s.type||"default"}">${c(i)}</span>`},jt,Fe].filter(Boolean),rt=n("projects.details.overview.heading","Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),qt=`
    <div class="project-details-outline">
      <h6 class="project-details-outline__title">${c(rt)}</h6>
      <ul class="project-details-outline__list">
        ${bt.map(({icon:E,label:N,value:B,meta:ee})=>{const M=String(B??""),G=M.trim().startsWith("<")?M:c(M),ve=String(ee??""),Ee=ve?c(ve):"";return`
          <li>
            <span class="project-details-outline__label">${c(E)} ${c(N)}</span>
            <span class="project-details-outline__value-group">
              <span class="project-details-outline__value">${G}</span>
              ${ee?`<span class="project-details-outline__meta">${Ee}</span>`:""}
            </span>
          </li>
          `}).join("")}
      </ul>
    </div>
  `,vt=U>0?n("projects.details.chips.linkedReservation","Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"):n("projects.details.chips.notLinkedReservation","ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"),ht=U>0?"reservation-chip status-confirmed":"reservation-chip status-info",gt=[`<span class="${He}">${c(fe)}</span>`,`<span class="${ht}">${c(vt)}</span>`,`<span class="reservation-chip ${Ae}">${c(q)}</span>`,w].filter(Boolean).join("");n("projects.details.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),n("projects.details.reservationsTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª");const xt=n("projects.details.expenses","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})").replace("{amount}",C(se)),St=ua(Array.isArray(s.expenses)?s.expenses:[]),Je={...s,paymentStatus:le};t.detailsBody.innerHTML=`
    <section class="project-details-primary">
      <header class="project-details-header">
        <div class="project-details-header__info">
          <div class="project-details-chips">${gt}</div>
        </div>
        <div class="project-details-header__code">
          ${H}
          <h4 class="project-details-title">${c(s.title)}</h4>
        </div>
      </header>
      <div class="project-summary">
        <div class="project-summary-left">
          ${qt}
        </div>
        <div class="project-summary-right">
          <div class="project-summary-card project-details-outline">
            <h6>${c(n("projects.details.summary.title","Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ"))}</h6>
            ${F}
          </div>
        </div>
      </div>
    </section>
    <section class="project-details-section">
      <h5>${c(n("projects.details.description","ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</h5>
      <p class="project-details-description">${c(d)}</p>
    </section>
    <section class="project-details-section">
      <h5>${c(xt)}</h5>
      ${St}
    </section>
    
    <section class="project-details-section">
      <h5>${c(n("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h5>
      <div class="project-details-grid">
        <div class="project-details-grid-item">
          <span>${c(n("projects.details.paymentOverview.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"))}</span>
          <strong>${c(C(re))}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${c(n("projects.details.paymentOverview.paid","Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${c(at)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${c(n("projects.details.paymentOverview.percent","Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${c(f)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${c(n("projects.details.paymentOverview.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"))}</span>
          <strong>${c(b)}</strong>
        </div>
      </div>
      <div class="reservation-payment-history-modal mt-3">
        ${x}
      </div>
    </section>
    ${qs(Je)}
    <div class="project-details-footer">
      <button type="button" class="modal-action-btn modal-action-btn--primary" data-action="create-reservation">
        ${c(n("projects.details.reservations.create","â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-action="edit-project">
        ${c(n("projects.details.actions.edit","âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--danger" data-action="delete-project">
        ${c(n("projects.details.actions.delete","ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" id="project-details-export-btn">
        ${c(n("projects.details.actions.exportPdf","Ø¹Ø±Ø¶ Ø³Ø¹Ø±"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-bs-dismiss="modal">
        ${c(n("actions.close","Ø¥ØºÙ„Ø§Ù‚"))}
      </button>
    </div>
  `,fa(s);const Ce=t.detailsBody.querySelector("#project-details-export-btn");Ce&&Ce.addEventListener("click",async E=>{if(E.preventDefault(),Ce.blur(),!Ce.disabled){Ce.disabled=!0;try{await Es({project:s})}catch(N){console.error("âŒ [projects/details] export project PDF failed",N),h(n("projects.details.exportFailed","âš ï¸ ØªØ¹Ø°Ø± ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¥Ù„Ù‰ PDF"),"error")}finally{Ce.disabled=!1}}}),t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl).show()}function ua(e=[]){if(!(Array.isArray(e)&&e.length>0)){const r=c(n("projects.expenses.table.empty","Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§."));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${c(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${c(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${c(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${c(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4" class="text-center text-muted">${r}</td></tr>
          </tbody>
        </table>
      </div>
    `}const a=e.map(r=>{const i=c(r?.label||""),o=C(Number(r?.amount)||0),d=C(Number(r?.sale_price??r?.salePrice??0)),l=r?.note!=null?String(r.note):r?.notes!=null?String(r.notes):"";return`
      <tr>
        <td>${i}</td>
        <td>${c(o)}</td>
        <td>${c(d)}</td>
        <td>${c(l||n("common.placeholder.empty","â€”"))}</td>
      </tr>`}).join("");return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${c(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
            <th>${c(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
            <th>${c(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
            <th>${c(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${a}</tbody>
      </table>
    </div>
  `}function Ka({onOpenProject:e}){!t.focusCards||t.focusCards.dataset.listenerAttached==="true"||(t.focusCards.addEventListener("click",async s=>{const a=s.target.closest("[data-action]");if(a){const{action:i,id:o}=a.dataset;if(i==="confirm-project"){s.preventDefault(),s.stopPropagation(),ba(o);return}if(i==="close-project"){s.preventDefault(),s.stopPropagation();try{const d=document.getElementById("closeProjectModal"),l=document.getElementById("close-project-notes"),p=document.getElementById("close-project-submit");if(l&&(l.value=""),p&&p.__tmpCloseProjectListener&&(p.removeEventListener("click",p.__tmpCloseProjectListener),p.__tmpCloseProjectListener=null),p){const y=async()=>{const m=l?.value||"";try{const j=await Nt(o,m);await mt(j?.projectId??j?.id??o),u.projects=$e(),u.reservations=D(),me(),ge(),Le(),h(n("projects.toast.closed","âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(j){console.error("âŒ [projects] close-project (card) failed",j),h(n("projects.toast.closeFailed","ØªØ¹Ø°Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),"error")}finally{try{((window.bootstrap?.Modal||bootstrap?.Modal)?.getInstance?.(d)||(window.bootstrap?.Modal||bootstrap?.Modal)?.getOrCreateInstance?.(d))?.hide?.()}catch{}}};p.__tmpCloseProjectListener=y,p.addEventListener("click",y,{once:!0})}d&&(window.bootstrap?.Modal||typeof bootstrap<"u"&&bootstrap?.Modal)&&(window.bootstrap?.Modal||bootstrap.Modal).getOrCreateInstance(d).show()}catch(d){console.warn("âš ï¸ [projects] unable to open close modal from card",d)}return}i==="view"?e?.(o):i==="highlight"&&ma(o);return}const r=s.target.closest(".project-focus-card");r?.dataset.projectId&&e?.(r.dataset.projectId)}),t.focusCards.dataset.listenerAttached="true")}function ma(e){if(!t.projectsTableBody)return;const s=`tr[data-project-id="${CSS.escape(String(e))}"]`,a=t.projectsTableBody.querySelector(s);if(!a){h(n("projects.focus.toastNotFound","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"));return}a.classList.add("project-row-highlight"),a.scrollIntoView({behavior:"smooth",block:"center"}),window.setTimeout(()=>{a.classList.remove("project-row-highlight")},2200)}function fa(e){if(!t.detailsBody)return;const s=t.detailsBody.querySelector('[data-action="create-reservation"]'),a=t.detailsBody.querySelector('[data-action="edit-project"]'),r=t.detailsBody.querySelector('[data-action="delete-project"]'),i=t.detailsBody.querySelector(".project-reservations-list");if(s&&e)try{($t(e.id)||[]).some(l=>{const p=String(l?.status||l?.reservationStatus||"").toLowerCase();return p!=="cancelled"&&p!=="canceled"})?(s.classList?.add("disabled"),s.setAttribute?.("aria-disabled","true"),s.title=n("projects.details.reservations.createDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"),s.addEventListener("click",l=>{l.preventDefault(),h(n("projects.details.reservations.createDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))})):(s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",l=>{l.preventDefault(),Vt(e)}))}catch{s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",d=>{d.preventDefault(),Vt(e)})}if(a&&e&&a.addEventListener("click",o=>{o.preventDefault(),ya(e)}),r&&e&&r.addEventListener("click",async o=>{o.preventDefault();const d=o.currentTarget;d.disabled=!0;try{await Jt(e.id),!u.projects.some(p=>String(p.id)===String(e.id))&&t.detailsModalEl&&window.bootstrap?.Modal.getInstance(t.detailsModalEl)?.hide()}finally{u.projects.some(p=>String(p.id)===String(e.id))&&(d.disabled=!1)}}),i){const o=async d=>{if(!Number.isInteger(d)||d<0)return!1;const l=Ts("showReservationDetails");if(typeof l=="function")return l(d),!0;try{const p=await Cs("showReservationDetails");if(typeof p=="function")return p(d),!0}catch(p){console.warn("âš ï¸ [projects/projectDetails] Unable to resolve reservation UI handler",p)}return!1};i.addEventListener("click",async d=>{const l=d.target.closest('[data-action="view-reservation"]');if(!l)return;const p=l.dataset.index||l.dataset.reservationIndex,y=Number.parseInt(p||"-1",10);if(!Number.isInteger(y)||y<0)return;await o(y)||(window.location.href="dashboard.html#reservations")}),i.addEventListener("keydown",d=>{if(!["Enter"," "].includes(d.key))return;const l=d.target.closest('[data-action="view-reservation"]');l&&(d.preventDefault(),l.click())})}}function ya(e){if(!e||!t.detailsBody)return;const s=u.projects.find(m=>String(m.id)===String(e.id));if(!s)return;const a=u.customers.find(m=>String(m.id)===String(s.clientId));a?.customerName||a?.name||s.clientName||s.customerName,s.clientCompany||a?.companyName||a?.company;const r=Array.isArray(s.expenses)?s.expenses.map((m,j)=>({id:m?.id||`expense-${s.id}-${j}-${Date.now()}`,label:m?.label||"",amount:Number(m?.amount)||0,salePrice:Number.isFinite(Number(m?.sale_price??m?.salePrice))?Number(m?.sale_price??m?.salePrice):0,note:m?.note!=null?String(m.note):m?.notes!=null?String(m.notes):""})):[];let i=Array.isArray(s.paymentHistory)?s.paymentHistory.map((m,j)=>({type:m?.type==="percent"?"percent":"amount",amount:Number.isFinite(Number(m?.amount))?Number(m.amount):null,percentage:Number.isFinite(Number(m?.percentage))?Number(m.percentage):null,value:Number.isFinite(Number(m?.value))?Number(m.value):null,note:m?.note??null,recordedAt:m?.recordedAt??m?.recorded_at??new Date().toISOString(),key:`payment-${s.id}-${j}`})):[],o=i.reduce((m,j)=>m+(Number(j?.amount)||0),0),d=i.reduce((m,j)=>m+(Number(j?.percentage)||0),0),l=Number.isFinite(Number(s.paidAmount))?Number(s.paidAmount):0,p=Number.isFinite(Number(s.paidPercent))?Number(s.paidPercent):0;if(!i.length&&(l>0||p>0)){const m=s.updatedAt??s.createdAt??new Date().toISOString();p>0?i=[{type:"percent",amount:Number.isFinite(l)&&l>0?l:null,percentage:p,value:p,note:null,recordedAt:m,key:`legacy-payment-${s.id}-percent`}]:l>0&&(i=[{type:"amount",amount:l,percentage:null,value:l,note:null,recordedAt:m,key:`legacy-payment-${s.id}-amount`}]),o=i.reduce((j,g)=>j+(Number(g?.amount)||0),0),d=i.reduce((j,g)=>j+(Number(g?.percentage)||0),0),l=0,p=0}o>0&&Math.abs(l-o)<.01&&(l=0),d>0&&Math.abs(p-d)<.01&&(p=0);const y={expenses:r,payments:i,basePaidAmount:l,basePaidPercent:p};t.detailsBody.dataset.mode="edit",t.detailsBody.innerHTML=va(s,y),ja(s,y)}function ja(e,s={expenses:[]}){const a=t.detailsBody?.querySelector("#project-details-edit-form");if(!a)return;const r=a.querySelector('[data-action="cancel-edit"]');r&&r.addEventListener("click",f=>{f.preventDefault(),Qe(e.id)});const i=a.querySelector("#project-edit-expense-label"),o=a.querySelector("#project-edit-expense-amount"),d=a.querySelector("#project-edit-expense-sale"),l=a.querySelector("#project-edit-expense-note"),p=a.querySelector('[data-action="add-expense"]'),y=a.querySelector("#project-edit-expense-list"),m=a.querySelector('[name="project-start-date"]'),j=a.querySelector('[name="project-start-time"]'),g=a.querySelector('[name="project-end-date"]'),A=a.querySelector('[name="project-end-time"]'),I=a.querySelector('[name="project-payment-status"]'),P=a.querySelector("#project-edit-tax"),$=a.querySelector("#project-edit-company-share"),K=a.querySelector("#project-edit-discount"),U=a.querySelector("#project-edit-discount-type"),X=a.querySelector("#project-edit-payment-progress-type"),_=a.querySelector("#project-edit-payment-progress-value"),se=a.querySelector("#project-edit-payment-add"),z=a.querySelector("#project-edit-payment-history"),xe=a.querySelector("#project-edit-payment-summary"),Se=n("reservations.create.summary.currency","SR"),be=a.querySelector("#project-cancelled"),Z=a.querySelector("#project-edit-confirm-toggle"),ae=a.querySelector("#project-edit-confirmed"),ke=a.querySelector("#project-edit-confirm-label"),Ye=a.querySelector("#project-edit-confirm-hint");e.confirmed===!0||e.confirmed;let ce=!1;(()=>{const f=(typeof window<"u"?window.flatpickr:null)||(typeof globalThis<"u"?globalThis.flatpickr:null);f&&(m&&f(m,{dateFormat:"Y-m-d",allowInput:!0}),g&&f(g,{dateFormat:"Y-m-d",allowInput:!0}),j&&f(j,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}),A&&f(A,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}))})();const fe=f=>{if(!f||f.dataset.normalizedDigits==="true")return;const b=()=>{const x=f.value||"",S=v(x);if(S!==x){const T=f.selectionStart,w=f.selectionEnd;f.value=S;try{if(typeof T=="number"&&typeof w=="number"){const k=S.length-x.length;f.setSelectionRange(Math.max(0,T+k),Math.max(0,w+k))}}catch{}}};f.addEventListener("input",b),f.addEventListener("blur",b);try{f.setAttribute("inputmode","numeric")}catch{}f.dataset.normalizedDigits="true"};fe(m),fe(j),fe(g),fe(A),j&&j._flatpickr?.altInput&&fe(j._flatpickr.altInput),A&&A._flatpickr?.altInput&&fe(A._flatpickr.altInput);const Pe=()=>(Array.isArray(s.payments)||(s.payments=[]),s.payments),He=()=>{const f=ae?.value==="true";Z&&(Z.dataset.state=f?"confirmed":"pending",Z.classList.toggle("btn-success",!f),Z.classList.toggle("btn-outline-warning",f),Z.textContent=f?n("projects.form.actions.unconfirm","â†©ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£ÙƒÙŠØ¯"):n("projects.focus.actions.confirm","âœ”ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),ke&&(ke.textContent=f?n("projects.focus.confirmed","âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯"):n("projects.focus.pending","â³ ØºÙŠØ± Ù…Ø¤ÙƒØ¯"),ke.classList.toggle("bg-success",f),ke.classList.toggle("bg-secondary",!f)),Ye&&(Ye.textContent=f?n("projects.form.hints.unconfirm","Ø§Ø¶ØºØ· Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¥Ù„Ù‰ ØºÙŠØ± Ù…Ø¤ÙƒØ¯Ø©"):n("projects.form.hints.confirm","Ø§Ø¶ØºØ· Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©"))};Z&&ae&&(Z.addEventListener("click",()=>{const f=ae.value!=="true";ae.value=f?"true":"false",He()}),He());const we=()=>{const f=Number(e.equipmentEstimate)||0,b=Array.isArray(s.expenses)?s.expenses.reduce((H,de)=>H+(Number(de.amount)||0),0):0,x=Array.isArray(s.expenses)?Math.max(0,Math.round(s.expenses.reduce((H,de)=>H+Number(de?.salePrice??0),0)*100)/100):Math.max(0,Number(e?.servicesClientPrice??0)),S=U?.value==="amount"?"amount":"percent",T=v(K?.value||"0");let w=Number.parseFloat(T);(!Number.isFinite(w)||w<0)&&(w=0);const k=P?.checked===!0,R=$?.checked===!0;let F=R?Ks($):null;(!Number.isFinite(F)||F<=0)&&(F=R?je:null);const Q=Zt({equipmentEstimate:f,expensesTotal:b,servicesClientPrice:x,discountValue:w,discountType:S,applyTax:k,companyShareEnabled:R,companySharePercent:F});return{equipmentEstimate:f,expensesTotal:b,discountValue:w,discountTypeValue:S,applyTax:k,companyShareEnabled:R,companySharePercent:F,servicesClientPrice:x,finance:Q}},ye=()=>{const f=we(),b=Pe(),S=($t(e.id)||[]).reduce((F,Q)=>F+(Number(Q?.totalAmount)||ps(Q)||0),0),T=Number(f.finance?.taxableAmount||0),w=f.applyTax?Number(((T+S)*Xe).toFixed(2)):0,k=Number((T+S+w).toFixed(2)),R=Ge({totalAmount:k,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:b});try{const Q=(new URL(window.location.href).searchParams.get("paymentDebug")||"").toLowerCase();(Q==="1"||Q==="true"||Q==="yes")&&console.debug("[PaymentDebug][modal]",{projectId:e?.id,projectTaxableBase:T,reservationsTotal:S,combinedTax:w,combinedTotalWithTax:k,paidAmount:R.paidAmount,paidPercent:R.paidPercent})}catch{}return{...f,combinedTotalWithTax:k,payments:b,progress:R}},Me=()=>{if(!z)return;const{combinedTotalWithTax:f}=ye();z.innerHTML=ga(Pe(),{total:f})},J=()=>{if(!xe)return;const{combinedTotalWithTax:f,progress:b}=ye(),x=Number.isFinite(Number(f))?Number(f):0,S=Number.isFinite(Number(b.paidAmount))?Number(b.paidAmount):0,T=Number.isFinite(Number(b.paidPercent))?Number(b.paidPercent):0,w=Math.max(0,Math.round((x-S)*100)/100),k=[{label:n("projects.form.paymentSummary.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"),value:C(x)},{label:n("projects.form.paymentSummary.paidAmount","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"),value:C(S)},{label:n("projects.form.paymentSummary.paidPercent","Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹Ø§Øª"),value:`${v(T.toFixed(2))}%`},{label:n("projects.form.paymentSummary.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"),value:C(w)}];xe.innerHTML=k.map(({label:R,value:F})=>`
        <div class="project-details-grid-item">
          <span>${c(R)}</span>
          <strong>${c(F)}</strong>
        </div>
      `).join("")},W=(f="auto")=>{if(!I)return;const b=I.dataset?.userSelected==="true";if(f==="auto"&&b)return;const{finance:x,progress:S}=ye(),T=it({manualStatus:b?I.value:e.paymentStatus||"unpaid",paidAmount:S.paidAmount,paidPercent:S.paidPercent,totalAmount:x.totalWithTax});b||(I.value=T)},re=()=>{Me(),J(),W("auto")},ne=1e-4,le=()=>{const f=X?.value==="amount"?"amount":"percent",b=v(_?.value||"").replace("%","").trim();let x=Number.parseFloat(b);if(!Number.isFinite(x)||x<=0){h(n("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©")),_?.focus();return}const S=ye(),T=Number.isFinite(Number(S.finance.totalWithTax))?Number(S.finance.totalWithTax):0;if(T<=0){h(n("projects.toast.paymentTotalMissing","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"));return}const w=Number(S.progress.paidAmount)||0,k=Number(S.progress.paidPercent)||0;let R=null,F=null;if(f==="percent"){const H=Math.max(0,100-k);if(H<=ne){h(n("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(x>H){x=H;const de=v(x.toFixed(2));h(n("projects.toast.paymentCappedPercent","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {value}% Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ 100%").replace("{value}",de))}F=Math.round(x*100)/100,T>0&&(R=Math.round(F/100*T*100)/100)}else{const H=Math.max(0,T-w);if(H<=ne){h(n("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(x>H){x=H;const de=`${v(x.toFixed(2))} ${Se}`;h(n("projects.toast.paymentCappedAmount","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {amount} Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ").replace("{amount}",de))}R=Math.round(x*100)/100,T>0&&(F=Math.round(R/T*100*100)/100)}const Q={type:f,amount:R??null,percentage:F??null,value:f==="amount"?R:F,note:null,recordedAt:new Date().toISOString()};s.payments=[...Pe(),Q],_&&(_.value=""),X&&(X.value="percent"),re(),h(n("projects.toast.paymentAdded","âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"))},q=f=>{!P||!$||ce||(ce=!0,f==="share"?$.checked?(P.checked||(P.checked=!0),Ze($)):P.checked&&(P.checked=!1):f==="tax"&&(P.checked?Ze($):$.checked&&($.checked=!1)),ce=!1)};function Ae(){y&&(y.innerHTML=cs(s.expenses))}Ae(),re();const Y=a.querySelector("#project-edit-close-btn"),oe=a.querySelector("#project-edit-reopen-btn"),Te=String(e?.status||"").toLowerCase()==="completed";Y&&(Y.disabled=Te),oe&&(oe.disabled=!Te);const at=()=>{const f=document.getElementById("closeProjectModal"),b=document.getElementById("close-project-notes"),x=document.getElementById("close-project-submit");if(b&&(b.value=""),x&&x.__tmpCloseProjectListener&&(x.removeEventListener("click",x.__tmpCloseProjectListener),x.__tmpCloseProjectListener=null),x){const S=async()=>{const T=b?.value||"";try{const w=await Nt(e.projectId??e.id,T);await mt(w?.projectId??w?.id??e.id),u.projects=$e(),u.reservations=D(),h(n("projects.toast.closed","âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),me(),ge(),Le(),Qe(w?.id??e.id)}catch(w){console.error("âŒ [projects] closeProject failed",w),h(n("projects.toast.closeFailed","ØªØ¹Ø°Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),"error")}finally{try{((window.bootstrap?.Modal||bootstrap?.Modal)?.getInstance?.(f)||(window.bootstrap?.Modal||bootstrap?.Modal)?.getOrCreateInstance?.(f))?.hide?.()}catch{}}};x.__tmpCloseProjectListener=S,x.addEventListener("click",S,{once:!0})}f&&(window.bootstrap?.Modal||typeof bootstrap<"u"&&bootstrap?.Modal)&&(window.bootstrap?.Modal||bootstrap.Modal).getOrCreateInstance(f).show()};Y&&!Y.dataset.listenerAttached&&(Y.addEventListener("click",f=>{f.preventDefault(),at()}),Y.dataset.listenerAttached="true"),oe&&!oe.dataset.listenerAttached&&(oe.addEventListener("click",async f=>{f.preventDefault();try{const b=await xs(e.projectId??e.id);await Gt(b?.projectId??b?.id??e.id),u.projects=$e(),u.reservations=D(),h(n("projects.toast.reopened","â†©ï¸ ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),me(),ge(),Le(),Qe(b?.id??e.id)}catch(b){console.error("âŒ [projects] reopenProject failed",b),h(n("projects.toast.reopenFailed","ØªØ¹Ø°Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"),"error")}}),oe.dataset.listenerAttached="true"),K&&!K.dataset.listenerAttached&&(K.addEventListener("input",f=>{const b=f.target;b instanceof HTMLInputElement&&(b.value=v(b.value||""),J(),W("auto"))}),K.dataset.listenerAttached="true"),d&&!d.dataset.listenerAttached&&(d.addEventListener("input",f=>{const b=f.target;b instanceof HTMLInputElement&&(b.value=v(b.value||""))}),d.dataset.listenerAttached="true"),U&&!U.dataset.listenerAttached&&(U.addEventListener("change",()=>{J(),W("auto")}),U.dataset.listenerAttached="true"),_&&!_.dataset.listenerAttached&&(_.addEventListener("input",f=>{const b=f.target;b instanceof HTMLInputElement&&(b.value=v(b.value||""))}),_.dataset.listenerAttached="true"),I&&!I.dataset.listenerAttached&&(I.addEventListener("change",()=>{I.dataset.userSelected="true"}),I.dataset.listenerAttached="true"),o&&!o.dataset.listenerAttached&&(o.addEventListener("input",f=>{const b=f.target;b instanceof HTMLInputElement&&(b.value=v(b.value||""))}),o.dataset.listenerAttached="true"),$&&!$.dataset.listenerAttached&&($.addEventListener("change",()=>{q("share"),J(),W("auto")}),$.dataset.listenerAttached="true"),P&&!P.dataset.listenerAttached&&(P.addEventListener("change",()=>{q("tax"),J(),W("auto")}),P.dataset.listenerAttached="true"),$?.checked&&Ze($),q($?.checked?"share":"tax"),J(),W("auto"),p&&p.addEventListener("click",f=>{f.preventDefault();const b=i?.value.trim()||"",x=v(o?.value||"0"),S=Number(x),T=v(d?.value||"0"),w=Number(T),k=(l?.value||"").trim();if(!b){h(n("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ")),i?.focus();return}if(!Number.isFinite(S)||S<=0){h(n("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­")),o?.focus();return}s.expenses.push({id:`expense-${e.id}-${Date.now()}`,label:b,amount:S,salePrice:Number.isFinite(w)&&w>0?w:0,note:k||""}),i&&(i.value=""),o&&(o.value=""),d&&(d.value=""),l&&(l.value=""),Ae(),J(),W("auto")}),y&&(y.addEventListener("click",f=>{const b=f.target.closest('[data-action="remove-expense"]');if(!b)return;const{id:x}=b.dataset;s.expenses=s.expenses.filter(S=>String(S.id)!==String(x)),Ae(),J(),W("auto")}),y.addEventListener("input",f=>{const b=f.target;if(!(b instanceof HTMLInputElement))return;const x=b.dataset.expenseId,S=b.dataset.expenseField;if(!x||!S)return;const T=s.expenses.findIndex(k=>String(k.id)===String(x));if(T===-1)return;let w=b.value;if(S==="amount"||S==="salePrice"){const k=v(w||""),R=Number.parseFloat(k);Number.isFinite(R)&&R>=0?s.expenses[T][S]=R:(w===""||k==="")&&(s.expenses[T][S]=0),J(),W("auto")}else(S==="label"||S==="note")&&(s.expenses[T][S]=w)})),se&&!se.dataset.listenerAttached&&(se.addEventListener("click",f=>{f.preventDefault(),le()}),se.dataset.listenerAttached="true"),z&&!z.dataset.listenerAttached&&(z.addEventListener("click",f=>{const b=f.target.closest('[data-action="remove-payment"]');if(!b)return;const x=Number.parseInt(b.dataset.index||"-1",10);if(!Number.isInteger(x)||x<0)return;const S=Pe();if(x>=S.length)return;const T=S.filter((w,k)=>k!==x);s.payments=T,re(),h(n("projects.toast.paymentRemoved","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}),z.dataset.listenerAttached="true"),a.addEventListener("submit",async f=>{if(f.preventDefault(),a.dataset.submitting==="true")return;const b=a.querySelector('[name="project-title"]'),x=a.querySelector('[name="project-type"]'),S=a.querySelector('[name="project-description"]'),T=b?.value.trim()||"",w=x?.value||"",k=v(m?.value.trim()||""),R=v(j?.value.trim()||""),F=S?.value.trim()||"",Q=(I?.value||"unpaid").toLowerCase(),H=["paid","partial"].includes(Q)?Q:"unpaid";if(!T||!w||!k){h(n("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")),b?.focus();return}const de=v(g?.value.trim()||""),jt=v(A?.value.trim()||""),qe=Mt(k,R),Fe=de?Mt(de,jt):"",bt=new Date(qe),rt=Fe?new Date(Fe):null;if(rt&&bt>rt){h(n("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©")),g?.focus();return}if(u.projects.findIndex(O=>String(O.id)===String(e.id))===-1){h(n("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const vt=we(),{equipmentEstimate:ht,servicesClientPrice:gt,discountValue:xt,discountTypeValue:St,applyTax:Je,companyShareEnabled:Ce,companySharePercent:E,finance:N}=vt,B=X?.value==="amount"?"amount":"percent",ee=v(_?.value||"");let M=ee?Number.parseFloat(ee):null,L=[...Pe()];if(Number.isFinite(M)&&M>0&&Number.isFinite(Number(N.totalWithTax))){const O=Ge({totalAmount:N.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:L}),he=new Date().toISOString();if(B==="percent"){const V=Math.max(0,100-(O.paidPercent||0));if(V>ne){const te=Math.min(M,V),Ne=Math.round(te*100)/100,Oe=N.totalWithTax>0?Math.round(Ne/100*N.totalWithTax*100)/100:null;L=[...L,{type:"percent",amount:Oe,percentage:Ne,value:Ne,note:null,recordedAt:he}]}}else{const V=Math.max(0,N.totalWithTax-(O.paidAmount||0));if(V>ne){const te=Math.min(M,V),Ne=Math.round(te*100)/100,Oe=N.totalWithTax>0?Math.round(Ne/N.totalWithTax*100*100)/100:null;L=[...L,{type:"amount",amount:Ne,percentage:Oe,value:Ne,note:null,recordedAt:he}]}}L!==s.payments&&(s.payments=L,re()),_&&(_.value=""),X&&(X.value="percent"),M=null}const G=Ge({totalAmount:N.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:L}),ve=I?.dataset?.userSelected==="true",Ee=it({manualStatus:ve?H:e.paymentStatus||H,paidAmount:G.paidAmount,paidPercent:G.paidPercent,totalAmount:N.totalWithTax}),Be=ve?H:Ee;!ve&&I&&(I.value=Be),I?.dataset&&delete I.dataset.userSelected,s.payments=L;const pe=ae?.value==="true",ie=Wt({projectCode:e.projectCode,title:T,type:w,clientId:e.clientId,clientCompany:e.clientCompany,description:F,start:qe,end:Fe||null,applyTax:Je,paymentStatus:Be,equipmentEstimate:ht,expenses:s.expenses,servicesClientPrice:gt,discount:xt,discountType:St,companyShareEnabled:Ce&&Je,companySharePercent:Ce&&Je?E:null,companyShareAmount:N.companyShareAmount,taxAmount:N.taxAmount,totalWithTax:N.totalWithTax,confirmed:pe,technicians:Array.isArray(e.technicians)?e.technicians:[],equipment:sa(e),paidAmount:G.paidAmount,paidPercentage:G.paidPercent,paymentProgressType:G.paymentProgressType,paymentProgressValue:G.paymentProgressValue,payments:L}),ue=be?.checked===!0;ue&&(ie.status="cancelled",ie.cancelled=!0),a.dataset.submitting="true";try{const O=await pt(e.projectId??e.id,ie),he=O?.projectId??O?.id??e.id;if(!ue)try{const V={start:qe};Fe&&(V.end=Fe),await Hs(he,V)}catch(V){console.warn("âš ï¸ failed to sync linked reservations schedule",V)}if(await Tt(he,Be),ue)try{await Lt(he)}catch(V){console.warn("âš ï¸ failed to cancel linked reservations",V)}else try{await zs(O)}catch(V){console.warn("âš ï¸ failed to sync linked reservations with project state",V)}u.projects=$e(),u.reservations=D(),h(n("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­")),me(),ge(),Le(),Qe(e.id)}catch(O){console.error("âŒ [projects] Failed to update project from details view",O);const he=dt(O)?O.message:n("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");h(he,"error")}finally{delete a.dataset.submitting}})}function Vt(e){if(!e)return;const s={projectId:e.id,customerId:e.clientId||null,start:e.start||null,end:e.end||null,forceNotes:!!e.description,fromProjectForm:!0,draftStorageKey:"projects:create:draft",returnUrl:`projects.html?project=${encodeURIComponent(e.id)}&linked=1#projects-section`};Ct({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(i=>{console.warn("âš ï¸ [projects] Failed to persist dashboard tab preference",i)});let a="";try{a=encodeURIComponent(JSON.stringify(s))}catch(i){console.warn("âš ï¸ [projects] Unable to encode reservation context",i)}t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl)?.hide();const r=a?`?reservationProjectContext=${a}`:"";window.location.href=`dashboard.html${r}#reservations`}async function ba(e){if(!e)return;const s=u.projects.find(a=>String(a.id)===String(e));if(!s){h(n("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}if(s.confirmed===!0||s.confirmed==="true"){h(n("projects.toast.alreadyConfirmed","â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§"));return}try{await pt(s.projectId??s.id,{confirmed:!0});const a=await Qt(e);u.projects=$e(),u.reservations=D(),me(),ge(),Le(),t.detailsModalEl&&t.detailsModalEl.classList.contains("show")&&t.detailsBody?.dataset.projectId===String(e)&&Qe(e),document.dispatchEvent(new CustomEvent("projects:changed")),a&&document.dispatchEvent(new CustomEvent("reservations:changed")),h(n("projects.toast.confirmed","âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(a){console.error("âŒ [projects] confirmProject failed",a);const r=dt(a)?a.message:n("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");h(r,"error")}}function va(e,s={clientName:"",clientCompany:"",expenses:[]}){const{date:a,time:r}=Rt(e.start||""),{date:i,time:o}=Rt(e.end||""),d=e.applyTax===!0||e.applyTax==="true";typeof e.paymentStatus=="string"&&e.paymentStatus.toLowerCase();const l=e.discountType==="amount"?"amount":"percent",p=v(String(e.discount??e.discountValue??0));v(String(e.servicesClientPrice??e.services_client_price??0));const y=e.companySharePercent??e.company_share_percent??e.companyShare??e.company_share??e.companyShareAmountPercent??je,m=Number.parseFloat(v(String(y))),j=Number.isFinite(m)&&m>0?m:je,g=e.companyShareEnabled===!0||e.companyShareEnabled==="true"||e.company_share_enabled===!0||e.company_share_enabled==="true"||d&&Number.isFinite(m)&&m>0,A="",I=e?.cancelled===!0||e?.cancelled==="true"||String(e?.status||"").toLowerCase()==="cancelled"||String(e?.status||"").toLowerCase()==="canceled",P=e.confirmed===!0||e.confirmed==="true";return`
    <form id="project-details-edit-form" class="project-edit-form">
      <div class="row g-3">
        <div class="col-12 col-xl-8">
          <label class="form-label">${c(n("projects.form.labels.title","Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <input type="text" class="form-control project-edit-input-wide" name="project-title" value="${c(e.title||"")}" required>
        </div>
        <div class="col-12 col-sm-6 col-xl-4 d-flex flex-column">
          <label class="form-label">${c(n("projects.form.labels.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <select class="form-select project-edit-select-lg" name="project-type" required>
            ${ha(e.type)}
          </select>
        </div>
        <div class="col-12">
          <div class="project-edit-inline-group project-edit-inline-group--dates">
            <div class="project-edit-inline-field">
              <label class="form-label">${c(n("projects.form.labels.startDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="date" class="form-control" name="project-start-date" value="${c(a)}" required>
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${c(n("projects.form.labels.endDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="date" class="form-control" name="project-end-date" value="${c(i)}">
            </div>
          </div>
          <div class="project-edit-inline-group project-edit-inline-group--times mt-2">
            <div class="project-edit-inline-field">
              <label class="form-label">${c(n("projects.form.labels.startTime","ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="time" class="form-control" name="project-start-time" value="${c(r)}">
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${c(n("projects.form.labels.endTime","ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="time" class="form-control" name="project-end-time" value="${c(o)}">
            </div>
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">${c(n("projects.form.labels.description","Ø§Ù„ÙˆØµÙ"))}</label>
          <textarea class="form-control project-edit-textarea" name="project-description" rows="5">${c(e.description||"")}</textarea>
        </div>
        <div class="col-12">
          <label class="form-label d-flex align-items-center gap-2">
            ${c(n("projects.form.labels.confirmation","Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯"))}
          </label>
          <div class="d-flex flex-wrap align-items-center gap-2">
            <input type="hidden" id="project-edit-confirmed" value="${P?"true":"false"}">
            <span id="project-edit-confirm-label" class="badge ${P?"bg-success":"bg-secondary"}">
              ${c(P?n("projects.focus.confirmed","âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯"):n("projects.focus.pending","â³ ØºÙŠØ± Ù…Ø¤ÙƒØ¯"))}
            </span>
            <button type="button" class="btn ${P?"btn-outline-warning":"btn-success"}" id="project-edit-confirm-toggle" data-state="${P?"confirmed":"pending"}">
              ${c(P?n("projects.form.actions.unconfirm","â†©ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£ÙƒÙŠØ¯"):n("projects.focus.actions.confirm","âœ”ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
            </button>
            <small id="project-edit-confirm-hint" class="text-muted">
              ${c(P?n("projects.form.hints.unconfirm","Ø§Ø¶ØºØ· Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¥Ù„Ù‰ ØºÙŠØ± Ù…Ø¤ÙƒØ¯Ø©"):n("projects.form.hints.confirm","Ø§Ø¶ØºØ· Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©"))}
            </small>
          </div>
        </div>
        <div class="col-12">
          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="project-cancelled" name="project-cancelled" ${I?"checked":""}>
            <label class="form-check-label" for="project-cancelled">${c(n("projects.form.labels.cancelled","Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          </div>
          <div class="form-text">${c(n("projects.form.hints.cancelled","Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ."))}</div>
        </div>
        <!-- Payment status select removed: status is inferred automatically from payments -->
      </div>

      <!-- Services block placed directly under project description -->
      <section class="project-edit-expenses mt-4">
        <h6 class="mb-2">${c(n("projects.form.labels.expenseLabel","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©"))}</h6>
        <div class="project-edit-expense-form">
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-label" placeholder="${c(n("projects.form.placeholders.expenseLabel","ÙˆØµÙ Ø§Ù„Ù…ØªØ·Ù„Ø¨"))}">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-amount" placeholder="${c(n("projects.form.placeholders.expenseAmount","Ø§Ù„Ù…Ø¨Ù„Øº"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-sale" placeholder="${c(n("projects.form.placeholders.salePrice","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-note" placeholder="${c(n("projects.form.placeholders.expenseNote","ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"))}">
          </div>
          <div class="project-edit-expense-action-col">
            <button type="button" class="modal-action-btn modal-action-btn--warning project-edit-add-btn" data-action="add-expense">${c(n("projects.form.buttons.addExpense","â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©"))}</button>
          </div>
        </div>
        <div id="project-edit-expense-list" class="project-edit-expense-list mt-3">
          ${cs(s.expenses)}
        </div>
      </section>

      <!-- Services block placed directly under project description -->
      
      
      <div class="row g-3 align-items-start mt-1">
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-discount">${c(n("projects.form.labels.discount","Ø§Ù„Ø®ØµÙ…"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-discount-type" name="project-discount-type" class="form-select project-edit-select-xs">
              <option value="percent" ${l==="percent"?"selected":""}>${c(n("projects.form.discount.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
              <option value="amount" ${l==="amount"?"selected":""}>${c(n("projects.form.discount.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
            </select>
            <input type="text" id="project-edit-discount" name="project-discount" class="form-control project-edit-input-xs" value="${c(p)}" placeholder="0" inputmode="decimal">
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label d-block" for="project-edit-company-share">${c(n("projects.form.labels.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©"))}</label>
          <div class="d-flex flex-column gap-2">
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-company-share" name="project-company-share" data-company-share="${c(String(j))}" ${g?"checked":""}>
              <label class="form-check-label" for="project-edit-company-share">${c(n("projects.form.companyShareToggle","Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)"))}</label>
            </div>
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-tax" name="project-apply-tax" ${d?"checked":""}>
              <label class="form-check-label" for="project-edit-tax">${c(n("projects.form.taxLabel","Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"))}</label>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-payment-progress-value">${c(n("projects.form.paymentProgress.label","ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-payment-progress-type" name="project-payment-progress-type" class="form-select project-edit-select-xs">
              <option value="amount" >${c(n("projects.form.paymentProgress.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
              <option value="percent" selected>${c(n("projects.form.paymentProgress.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
            </select>
            <input type="text" id="project-edit-payment-progress-value" name="project-payment-progress-value" class="form-control project-edit-input-xs" value="${c(A)}" placeholder="0" inputmode="decimal">
          </div>
          <button type="button" class="modal-action-btn modal-action-btn--ghost project-edit-add-btn mt-2" id="project-edit-payment-add">${c(n("reservations.paymentHistory.actions.add","â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©"))}</button>
        </div>
      </div>

      <section class="project-edit-payment-history mt-4">
        <div id="project-edit-payment-summary" class="project-details-grid mb-3"></div>
        <div class="reservation-payment-history-block">
          <div class="reservation-payment-history__header">
            <h6 class="reservation-payment-history__title">${c(n("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h6>
          </div>
          <div id="project-edit-payment-history" class="reservation-payment-history"></div>
        </div>
      </section>


      <div class="project-edit-actions mt-4 d-flex justify-content-between">
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-warning" id="project-edit-close-btn">${c(n("projects.actions.close","ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
          <button type="button" class="btn btn-outline-secondary" id="project-edit-reopen-btn">${c(n("projects.actions.reopen","â†©ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"))}</button>
        </div>
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary">${c(n("projects.form.buttons.update","ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
          <button type="button" class="btn btn-outline-secondary" data-action="cancel-edit">${c(n("actions.cancel","Ø¥Ù„ØºØ§Ø¡"))}</button>
        </div>
      </div>
    </form>
  `}function ha(e){return["commercial","coverage","photography","social"].map(a=>{const r=ds(a),i=a===e?"selected":"";return`<option value="${c(a)}" ${i}>${c(r)}</option>`}).join("")}function cs(e=[]){const s=c(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©")),a=c(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©")),r=c(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)")),i=c(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)")),o=c(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª")),d=c(n("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"));if(!Array.isArray(e)||e.length===0){const j=c(n("projects.selected.emptyExpenses","Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ"));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${a}</th>
              <th>${r}</th>
              <th>${i}</th>
              <th>${o}</th>
              <th>${d}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${j}</td></tr>
          </tbody>
        </table>
      </div>`}const l=e.map(j=>{const g=c(String(j?.id||"")),A=c(String(j?.label||"")),I=Number(j?.amount)||0,P=Number(j?.salePrice??j?.sale_price??0)||0,$=c(String((j?.note??j?.notes)||""));return`
      <tr>
        <td>
          <input type="text" class="form-control form-control-sm" value="${A}" data-expense-id="${g}" data-expense-field="label" placeholder="${c(n("projects.form.placeholders.expenseLabel","Ø§Ù„ÙˆØµÙ"))}">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${c(String(I))}" data-expense-id="${g}" data-expense-field="amount" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${c(String(P))}" data-expense-id="${g}" data-expense-field="salePrice" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${$}" data-expense-id="${g}" data-expense-field="note" placeholder="${c(n("projects.form.placeholders.expenseNote","ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"))}">
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${g}" aria-label="${s}">âœ–</button>
        </td>
      </tr>
    `}).join(""),p=e.reduce((j,g)=>j+(Number(g?.salePrice??g?.sale_price)||0),0),y=c(C(p)),m=c(n("projects.expenses.table.totalSale","Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"));return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${a}</th>
            <th>${r}</th>
            <th>${i}</th>
            <th>${o}</th>
            <th>${d}</th>
          </tr>
        </thead>
        <tbody>${l}</tbody>
        <tfoot>
          <tr>
            <th colspan="2" class="text-end">${m}</th>
            <th>${y}</th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  `}function Ht(e=[],{total:s=null}={}){return!Array.isArray(e)||e.length===0?`<div class="reservation-payment-history-empty">${c(n("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`:`<ul class="reservation-payment-history-list">${e.map(a=>{const r=a?.type==="percent"?n("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):a?.type==="amount"?n("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"):n("reservations.paymentHistory.type.unknown","Ø¯ÙØ¹Ø©"),i=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?Number(a.percentage):null,o=i!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(i/100)*100)/100:null,d=a?.type==="percent"&&o!=null?o:Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?Number(a.amount):null,l=d!=null?c(C(d)):"â€”",p=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${v(Number(a.percentage).toFixed(2))}%`:"â€”",y=a?.recordedAt?v(ut(a.recordedAt)):"â€”",m=a?.note?`<div class="payment-history-note">${c(v(a.note))}</div>`:"";return`
      <li>
        <div class="payment-history-entry">
          <span class="payment-history-entry__type">${c(r)}</span>
          <span class="payment-history-entry__amount">${l}</span>
          <span class="payment-history-entry__percent">${p}</span>
          <span class="payment-history-entry__date">${y}</span>
        </div>
        ${m}
      </li>
    `}).join("")}</ul>`}function ga(e=[],{total:s=null}={}){if(!Array.isArray(e)||e.length===0)return`<div class="reservation-payment-history__empty">${c(n("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;const a=e.map((r,i)=>{const o=r?.type==="percent"?n("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):n("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"),d=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?Number(r.percentage):null,l=d!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(d/100)*100)/100:null,p=r?.type==="percent"&&l!=null?l:Number.isFinite(Number(r?.amount))&&Number(r.amount)>0?Number(r.amount):null,y=p!=null?c(C(p)):"â€”",m=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?`${v(Number(r.percentage).toFixed(2))}%`:"â€”",j=r?.recordedAt?v(ut(r.recordedAt)):"â€”",g=r?.note?c(v(r.note)):"",A=c(n("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"));return`
      <tr>
        <td>${c(o)}</td>
        <td>${y}</td>
        <td>${m}</td>
        <td>${j}</td>
        <td>${g}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${i}" aria-label="${A}">ğŸ—‘ï¸</button>
        </td>
      </tr>
    `}).join("");return`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${c(n("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${c(n("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>${a}</tbody>
      </table>
    </div>
  `}function xa(e={}){const a=(Array.isArray(e.paymentHistory)?e.paymentHistory:Array.isArray(e.payment_history)?e.payment_history:[]).map(Sa).filter(Boolean);if(a.length>0)return a;const r=lt(e.paidPercent??e.paid_percent),i=lt(e.paidAmount??e.paid_amount),o=e.updatedAt??e.updated_at??e.createdAt??e.created_at??null,d=ls(o);return r!=null&&r>0?[{type:"percent",amount:i!=null&&i>0?i:null,percentage:r,value:r,note:null,recordedAt:d}]:i!=null&&i>0?[{type:"amount",amount:i,percentage:null,value:i,note:null,recordedAt:d}]:[]}function Sa(e){if(!e||typeof e!="object")return null;const s=e.type??e.payment_type??e.paymentType??null;let a=typeof s=="string"?s.toLowerCase().trim():null;a!=="percent"&&(a="amount");const r=lt(e.amount??(a==="amount"?e.value:null)),i=lt(e.percentage??(a==="percent"?e.value:null)),o=a==="percent"?i??null:r??null,d=e.note??e.memo??null,l=ls(e.recordedAt??e.recorded_at??e.date??e.created_at??null);return a==="amount"&&r==null||a==="percent"&&i==null?null:{type:a,amount:r??null,percentage:i??null,value:o,note:d&&String(d).trim().length?String(d).trim():null,recordedAt:l}}function lt(e){if(e==null||e==="")return null;const s=v(String(e)).replace(/%/g,"").trim();if(!s)return null;const a=Number.parseFloat(s);return Number.isFinite(a)?a:null}function ls(e){if(!e)return new Date().toISOString();const s=new Date(e);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function Ot(e,s){if(!s)return null;const{date:a,time:r}=ka(ut(s)),i=e==="start",o=i?"â±ï¸":"âŒ›",d=i?n("projects.details.labels.start","Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"):n("projects.details.labels.end","Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹");return{icon:o,label:d,value:a,meta:r}}function ka(e){if(!e||e==="â€”")return{date:"â€”",time:""};const s=e.split(" ").filter(Boolean),a=s.shift()||"â€”",r=s.join(" ");return{date:a,time:r}}function ds(e){if(!e)return n("projects.form.types.unknown","Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯");const s={commercial:"projects.form.types.commercial",coverage:"projects.form.types.coverage",photography:"projects.form.types.photography",social:"projects.form.types.social"}[e]||"projects.form.types.unknown";return n(s,e)}function ps(e){if(!e)return 0;const s=Array.isArray(e.items)?e.items:[],a=e.discount??0,r=Number(v(String(a)))||0,i=e.discountType||"percent",o=Array.isArray(e.crewAssignments)?e.crewAssignments:[],d=o.length?o:Array.isArray(e.technicians)?e.technicians:[],l=As(s,r,i,!1,d,{start:e.start,end:e.end});if(Number.isFinite(l))return l;const p=Number(v(String(e.cost??0)));return Number.isFinite(p)?Math.round(p):0}let ot=null;async function Pa(e=!1){const s=_e()||{},a=Array.isArray(s.packages)?s.packages:[];return!e&&a.length>0?a:(ot||(ot=bs("/packages/?all=1").then(r=>{const i=Array.isArray(r?.data)?r.data:Array.isArray(r)?r:[];return i.length&&(vs({packages:i}),document.dispatchEvent(new CustomEvent("packages:changed",{detail:{packages:i}}))),i.length?i:a}).catch(r=>(console.warn("[packagesCache] Failed to refresh packages from API",r),a)).finally(()=>{ot=null})),ot)}const wa={reservationDetailsModal:`
  <div class="modal fade" id="reservationDetailsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" data-i18n data-i18n-key="reservations.details.modalTitle">ğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¥ØºÙ„Ø§Ù‚" data-i18n data-i18n-aria-label-key="actions.close"></button>
        </div>
        <div class="modal-body" id="reservation-details-body"></div>
        <div class="modal-footer">
          <button type="button" class="btn modal-close-btn" data-bs-dismiss="modal" data-i18n data-i18n-key="actions.close">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
      </div>
    </div>
  </div>
  `,editReservationModal:`
  <div class="modal fade" id="editReservationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" data-i18n data-i18n-key="reservations.edit.modalTitle">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¥ØºÙ„Ø§Ù‚" data-i18n data-i18n-aria-label-key="actions.close"></button>
        </div>
        <div class="modal-body">
          <form id="edit-reservation-form" class="row g-3">
            <input type="hidden" id="edit-res-index">
            <input type="hidden" id="edit-res-confirmed" value="false">

            <div class="col-12">
              <div class="edit-reservation-field-row">
                <div class="edit-reservation-field">
                  <label class="form-label" for="edit-res-id" data-i18n data-i18n-key="reservations.edit.labels.id">ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²</label>
                  <input type="text" class="form-control" id="edit-res-id" disabled>
                </div>
                <div class="edit-reservation-field">
                  <label class="form-label" for="edit-res-customer" data-i18n data-i18n-key="reservations.edit.labels.customer">ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
                  <input type="text" class="form-control" id="edit-res-customer" disabled>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="edit-reservation-field-row">
                <div class="edit-reservation-field">
                  <label class="form-label" for="edit-res-start" data-i18n data-i18n-key="reservations.edit.labels.startDate">ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</label>
                  <input type="text" class="form-control" id="edit-res-start">
                </div>
                <div class="edit-reservation-field">
                  <label class="form-label" for="edit-res-end" data-i18n data-i18n-key="reservations.edit.labels.endDate">ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</label>
                  <input type="text" class="form-control" id="edit-res-end">
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="edit-reservation-field-row">
                <div class="edit-reservation-field">
                  <label class="form-label" for="edit-res-start-time" data-i18n data-i18n-key="reservations.edit.labels.startTime">â° ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</label>
                  <input type="text" class="form-control" id="edit-res-start-time">
                </div>
                <div class="edit-reservation-field">
                  <label class="form-label" for="edit-res-end-time" data-i18n data-i18n-key="reservations.edit.labels.endTime">â° ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©</label>
                  <input type="text" class="form-control" id="edit-res-end-time">
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="edit-reservation-field-row edit-reservation-field-row--single">
                <div class="edit-reservation-field edit-reservation-field--wide">
                  <label class="form-label edit-reservation-notes-label" for="edit-res-notes" data-i18n data-i18n-key="reservations.edit.labels.notes">ğŸ“ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                  <textarea class="form-control reservation-notes reservation-notes--compact reservation-notes--short" id="edit-res-notes" rows="2" placeholder="Ø§ÙƒØªØ¨ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª..." data-i18n data-i18n-placeholder-key="reservations.edit.placeholders.notes"></textarea>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="edit-reservation-field-row edit-reservation-field-row--single">
                <div class="edit-reservation-field edit-reservation-field--wide reservation-terms-wrapper">
                  <h5 class="reservation-terms__title" data-i18n data-i18n-key="reservations.edit.terms.title">ğŸ“„ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±</h5>
                  <p class="reservation-terms__hint" data-i18n data-i18n-key="reservations.edit.terms.hint">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±. Ø§ÙƒØªØ¨ ÙƒÙ„ Ø´Ø±Ø· ÙÙŠ Ø³Ø·Ø± Ù…Ø³ØªÙ‚Ù„.</p>
                  <textarea class="reservation-terms__textarea" id="edit-res-terms" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø´Ø±ÙˆØ· Ù‡Ù†Ø§..." data-i18n data-i18n-placeholder-key="reservations.edit.terms.placeholder"></textarea>
                </div>
              </div>
            </div>

            <div class="col-12">
              <label class="form-label" for="edit-res-project" data-i18n data-i18n-key="reservations.edit.labels.project">ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø±ØªØ¨Ø·</label>
              <select id="edit-res-project" class="form-select">
                <option value="" data-i18n data-i18n-key="reservations.create.placeholders.project">Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</option>
              </select>
            </div>

            <div class="col-12 col-xl-8">
              <div class="reservation-payment-card">
                <div class="reservation-payment-card__header">
                  <span class="reservation-payment-card__title" data-i18n data-i18n-key="reservations.edit.paymentCard.title">ğŸ’° ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙØ¹</span>
                </div>
                <div class="reservation-payment-card__body">
                  <div class="reservation-payment-card__toggles">
                    <div class="reservation-option-card">
                      <input type="checkbox" class="reservation-option-card__input" id="edit-res-company-share" data-company-share="10">
                      <label class="reservation-option-card__label" for="edit-res-company-share">
                        <span class="reservation-option-card__check" aria-hidden="true"></span>
                        <span class="reservation-option-card__text" data-i18n data-i18n-key="reservations.create.billing.companyShareToggle">Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)</span>
                      </label>
                    </div>
                    <div class="reservation-option-card">
                      <input type="checkbox" class="reservation-option-card__input" id="edit-res-tax">
                      <label class="reservation-option-card__label" for="edit-res-tax">
                        <span class="reservation-option-card__check" aria-hidden="true"></span>
                        <span class="reservation-option-card__text" data-i18n data-i18n-key="reservations.edit.labels.tax">Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15%)</span>
                      </label>
                    </div>
                  </div>
                  <div class="reservation-payment-card__field">
                    <label class="form-label" for="edit-res-discount" data-i18n data-i18n-key="reservations.edit.labels.discount">ğŸ’µ Ø§Ù„Ø®ØµÙ…</label>
                    <div class="input-group">
                      <select id="edit-res-discount-type" class="form-select">
                        <option value="percent" data-i18n data-i18n-key="reservations.edit.discount.percent">Ùª Ù†Ø³Ø¨Ø©</option>
                        <option value="amount" data-i18n data-i18n-key="reservations.edit.discount.amount">ğŸ’µ Ù…Ø¨Ù„Øº</option>
                      </select>
                      <input type="text" class="form-control" id="edit-res-discount" placeholder="Ø§Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…" data-i18n data-i18n-placeholder-key="reservations.edit.placeholders.discount">
                    </div>
                  </div>
                  <div class="reservation-payment-card__field">
                    <label class="form-label" for="edit-res-paid" data-i18n data-i18n-key="reservations.edit.labels.paymentStatus">ğŸ’³ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</label>
                    <select id="edit-res-paid" class="form-select payment-status-select">
                      <option value="paid" data-i18n data-i18n-key="reservations.edit.payment.paid">Ù…Ø¯ÙÙˆØ¹</option>
                      <option value="partial" data-i18n data-i18n-key="reservations.edit.payment.partial">Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹</option>
                      <option value="unpaid" selected data-i18n data-i18n-key="reservations.edit.payment.unpaid">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¯ÙØ¹</option>
                    </select>
                  </div>
                  <div class="reservation-payment-card__field">
                    <label class="form-label" for="edit-res-payment-progress-value" data-i18n data-i18n-key="reservations.edit.paymentProgress.label">ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©</label>
                    <div class="reservation-payment-progress reservation-payment-progress--flush">
                      <div class="reservation-payment-progress__grid">
                        <select id="edit-res-payment-progress-type" class="form-select reservation-payment-progress__select">
                          <option value="amount" data-i18n data-i18n-key="reservations.edit.paymentProgress.amount">ğŸ’µ Ù…Ø¨Ù„Øº</option>
                          <option value="percent" selected data-i18n data-i18n-key="reservations.edit.paymentProgress.percent">Ùª Ù†Ø³Ø¨Ø©</option>
                        </select>
                        <input type="text" class="form-control reservation-payment-progress__input" id="edit-res-payment-progress-value" placeholder="50" data-i18n data-i18n-placeholder-key="reservations.edit.paymentProgress.placeholder">
                      </div>
                      <div class="reservation-payment-progress__actions">
                        <button type="button" class="btn btn-outline-primary btn-sm" id="edit-res-payment-add" data-i18n data-i18n-key="reservations.paymentHistory.actions.add">â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©</button>
                        <small class="form-text reservation-payment-progress__hint" data-i18n data-i18n-key="reservations.edit.paymentProgress.hint">Ø­Ø¯Ù‘Ø¯ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„ØªÙŠ Ø§Ø³ØªÙ„Ù…ØªÙ‡Ø§ Ù…Ù† Ø§Ù„Ø­Ø¬Ø²</small>
                      </div>
                    </div>
                    <div class="reservation-payment-history-block">
                      <div class="reservation-payment-history__header">
                        <h6 class="reservation-payment-history__title" data-i18n data-i18n-key="reservations.paymentHistory.title">Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª</h6>
                      </div>
                      <div id="edit-res-payment-history" class="reservation-payment-history"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12 col-xl-4" id="edit-res-confirmed-wrapper">
              <label class="form-label" for="edit-res-confirmed-btn" data-i18n data-i18n-key="reservations.edit.confirmation.label">âœ… Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯</label>
              <button type="button" class="btn btn-outline-secondary w-100 btn-confirm-toggle" id="edit-res-confirmed-btn" aria-pressed="false" data-i18n data-i18n-key="reservations.edit.confirmation.pendingLabel">â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯</button>
              <div class="mt-2">
                <div class="d-flex gap-2">
                  <button type="button" class="btn btn-warning flex-fill" id="edit-res-close-btn" data-i18n data-i18n-key="reservations.edit.actions.close">ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø­Ø¬Ø²</button>
                  <button type="button" class="btn btn-outline-secondary flex-fill" id="edit-res-reopen-btn" data-i18n data-i18n-key="reservations.edit.actions.reopen">â†©ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚</button>
                </div>
              </div>
            </div>
            <div class="col-12 col-xl-4" id="edit-res-cancelled-wrapper">
              <label class="form-label" for="edit-res-cancelled" data-i18n data-i18n-key="reservations.edit.labels.cancelled">âŒ Ù…Ù„ØºÙŠ</label>
              <div class="form-check">
                <input type="checkbox" class="form-check-input" id="edit-res-cancelled">
                <label class="form-check-label" for="edit-res-cancelled" data-i18n data-i18n-key="reservations.edit.labels.cancelled">âŒ Ù…Ù„ØºÙŠ</label>
              </div>
            </div>

            <div class="col-12">
              <label class="form-label" data-i18n data-i18n-key="technicians.picker.selectedLabel">ğŸ˜ Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ</label>
              <div id="edit-selected-technicians-list" class="selected-technicians-list"></div>
              <button type="button" class="btn btn-outline btn-primary mt-2" id="open-edit-technician-picker" data-i18n data-i18n-key="technicians.picker.editButton">ğŸ” ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ø§Ù‚Ù…</button>
            </div>

            <div class="col-12">
              <div id="edit-res-summary" class="alert alert-info"></div>
            </div>

            <div class="col-12">
              <label class="form-label" data-i18n data-i18n-key="reservations.edit.labels.addEquipment">ğŸ¥ Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø©</label>
              <div class="reservation-equipment-inputs reservation-equipment-inputs--single mb-2" data-equipment-section="single">
                <div class="reservation-equipment-field">
                  <input type="text" class="form-control" id="edit-res-equipment-barcode" placeholder="ğŸ” Ø§Ù…Ø³Ø­ Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø«Ù… Ø§Ø¶ØºØ· Enter" data-i18n data-i18n-placeholder-key="reservations.edit.placeholders.barcode">
                </div>
                <div class="reservation-equipment-field">
                  <input type="text" class="form-control" id="edit-res-equipment-description" list="edit-res-equipment-description-options" placeholder="ğŸ¥ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø¯Ø© Ø«Ù… Ø§Ø¶ØºØ· Enter" data-i18n data-i18n-placeholder-key="reservations.edit.placeholders.description">
                  <datalist id="edit-res-equipment-description-options"></datalist>
                </div>
              </div>
              <div class="reservation-equipment-inputs reservation-equipment-inputs--package mb-2" data-equipment-section="package">
                <h6 class="reservation-equipment-subtitle" data-i18n data-i18n-key="reservations.create.equipment.subtitle.package">ğŸ“¦ Ø¥Ø¶Ø§ÙØ© Ø­Ø²Ù…Ø© Ù…Ø¹Ø¯Ø§Øª</h6>
                <div class="reservation-equipment-field reservation-equipment-field--package-select">
                  <select class="form-select" id="edit-res-package-select" data-i18n data-i18n-placeholder-key="reservations.edit.packages.placeholder">
                    <option value="" selected disabled data-i18n data-i18n-key="reservations.packages.selectOption">ğŸ“¦ Ø§Ø®ØªØ± Ø§Ù„Ø­Ø²Ù…Ø©</option>
                  </select>
                </div>
                <div class="reservation-equipment-field reservation-equipment-field--package-action">
                  <button type="button" class="btn btn-primary" id="edit-add-reservation-package" data-i18n data-i18n-key="reservations.create.packages.addButton">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø²Ù…Ø©</button>
                </div>
                <div class="reservation-equipment-hint" id="edit-res-package-hint" data-i18n data-i18n-key="reservations.edit.packages.hint">Ø­Ø¯Ø¯ Ø§Ù„Ø­Ø²Ù…Ø© Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ø­Ø¬Ø².</div>
              </div>
              <div class="table-responsive">
                <table class="table table-sm table-hover align-middle reservation-items-table">
                  <thead class="table-light">
                    <tr>
                      <th data-i18n data-i18n-key="reservations.equipment.table.item">Ø§Ù„Ù…Ø¹Ø¯Ø©</th>
                      <th data-i18n data-i18n-key="reservations.equipment.table.quantity">Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                      <th data-i18n data-i18n-key="reservations.equipment.table.days">Ø§Ù„Ø£ÙŠØ§Ù…</th>
                      <th data-i18n data-i18n-key="reservations.equipment.table.unitPrice">Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                      <th data-i18n data-i18n-key="reservations.equipment.table.unitCost">ØªÙƒÙ„ÙØ© Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                      <th data-i18n data-i18n-key="reservations.equipment.table.total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                      <th data-i18n data-i18n-key="reservations.equipment.table.actions">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                  </thead>
                  <tbody id="edit-res-items">
                    <tr><td colspan="7" class="text-center" data-i18n data-i18n-key="reservations.edit.table.empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø¯Ø§Øª</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn modal-close-btn" data-bs-dismiss="modal" data-i18n data-i18n-key="actions.cancel">Ø¥Ù„ØºØ§Ø¡</button>
          <button type="button" class="btn btn-primary" id="save-reservation-changes" data-i18n data-i18n-key="reservations.edit.actions.save">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
        </div>
      </div>
    </div>
  </div>
  `,selectTechniciansModal:`
  <div class="modal fade" id="selectTechniciansModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg crew-picker-modal__dialog">
      <div class="modal-content crew-picker-modal">
        <div class="modal-header crew-picker-modal__header">
          <h5 class="modal-title crew-picker-modal__title" data-i18n data-i18n-key="technicians.picker.modalTitle">ğŸ˜ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¥ØºÙ„Ø§Ù‚" data-i18n data-i18n-aria-label-key="actions.close"></button>
        </div>
        <div class="modal-body crew-picker-modal__body">
          <div class="row g-3 crew-picker-layout">
            <div class="col-lg-5 crew-picker-panel">
              <label for="crew-position-search" class="form-label crew-picker-label" data-i18n data-i18n-key="technicians.picker.positions.label">ğŸ·ï¸ Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø§ØµØ¨</label>
              <input type="text" class="form-control crew-picker-search" id="crew-position-search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ¨..." data-i18n data-i18n-placeholder-key="technicians.picker.positions.search">
              <div id="crew-position-list" class="mt-3 crew-picker-list"></div>
            </div>
            <div class="col-lg-7 crew-assignment-column crew-picker-panel crew-picker-panel--assignments">
              <label class="form-label crew-picker-label" data-i18n data-i18n-key="technicians.picker.assignments.label">ğŸ“‹ Ø§Ù„Ù…Ù†Ø§ØµØ¨ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</label>
              <div class="crew-assignment-table-wrapper crew-picker-table-wrapper">
                <table class="table table-hover align-middle" id="crew-assignment-table">
                  <thead class="table-light">
                    <tr>
                      <th style="width:40px;">#</th>
                      <th data-i18n data-i18n-key="technicians.picker.assignments.position">ğŸ‘” Ø§Ù„Ù…Ù†ØµØ¨</th>
                      <th data-i18n data-i18n-key="technicians.picker.assignments.price">ğŸ’¼ Ø³Ø¹Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                      <th data-i18n data-i18n-key="technicians.picker.assignments.member">ğŸ˜ Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ù…Ø¹ÙŠÙ†</th>
                      <th style="width:48px;" data-i18n data-i18n-key="technicians.picker.assignments.actions">âš™ï¸</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td colspan="5" class="text-center text-muted" data-i18n data-i18n-key="technicians.picker.noAssignments">Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†Ø§ØµØ¨ Ø¨Ø¹Ø¯</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer crew-picker-modal__footer">
          <span class="text-muted me-auto crew-picker-selection-info" id="technician-picker-selection-info" data-i18n data-i18n-key="technicians.picker.selectionInfo">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹Ø¶Ùˆ Ø¨Ø¹Ø¯</span>
          <button type="button" class="btn modal-close-btn crew-picker-cancel-btn" data-bs-dismiss="modal" data-i18n data-i18n-key="technicians.picker.actions.cancel">Ø¥Ù„ØºØ§Ø¡</button>
          <button type="button" class="btn btn-primary reservation-primary-btn crew-picker-apply-btn" id="apply-technician-selection" data-i18n data-i18n-key="technicians.picker.actions.apply">ØªÙ…</button>
        </div>
      </div>
    </div>
  </div>
  `,closeReservationModal:`
  <div class="modal fade" id="closeReservationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" data-i18n data-i18n-key="reservations.closeModal.title">ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø­Ø¬Ø²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¥ØºÙ„Ø§Ù‚" data-i18n data-i18n-aria-label-key="actions.close"></button>
        </div>
        <div class="modal-body">
          <p class="text-muted" data-i18n data-i18n-key="reservations.closeModal.subtitle">ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ).</p>
          <label class="form-label" for="close-reservation-notes" data-i18n data-i18n-key="reservations.closeModal.noteLabel">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ØºÙ„Ø§Ù‚</label>
          <textarea id="close-reservation-notes" class="form-control" rows="3" data-i18n data-i18n-placeholder-key="reservations.closeModal.notePlaceholder" placeholder="Ù…Ø«Ø§Ù„: ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ù…Ø¨ÙƒØ±Ø§Ù‹..."></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline" id="close-reservation-cancel" data-bs-dismiss="modal" data-i18n data-i18n-key="reservations.closeModal.cancel">Ø¥Ù„ØºØ§Ø¡</button>
          <button type="button" class="btn btn-primary" id="close-reservation-submit" data-i18n data-i18n-key="reservations.closeModal.confirm">ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø­Ø¬Ø²</button>
        </div>
      </div>
    </div>
  </div>
  `};function Ja(){if(!(typeof document>"u")){Object.entries(wa).forEach(([e,s])=>{if(document.getElementById(e))return;const a=document.createElement("div");a.innerHTML=s,document.body.appendChild(a)});try{Pa()}catch(e){console.warn("[reservations/modals] Failed to ensure packages cache",e)}}}export{Ma as a,Da as b,_a as c,Fa as d,Ba as e,Va as f,Ya as g,Ha as h,qa as i,Ka as j,Rs as k,za as l,Ja as m,$a as n,Qe as o,ze as p,Ra as q,ns as r,ya as s,La as t,Wa as u,Oa as v,Ua as w};
