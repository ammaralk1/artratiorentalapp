import{l as a}from"./auth.ap9rOWoi.js";const i={projects:["stat-projects","sidebar-stat-projects"],reservations:["stat-reservations","sidebar-stat-reservations"],equipment:["stat-equipment","sidebar-stat-equipment"],technicians:["stat-technicians","sidebar-stat-technicians"]};let u=!1;const d=1632,p=1776;function h(t){if(t==null)return 0;if(typeof t=="number"&&Number.isFinite(t))return t;const e=String(t).trim().replace(/[\s,_]/g,"").replace(/[\u0660-\u0669]/g,s=>String(s.charCodeAt(0)-d)).replace(/[\u06f0-\u06f9]/g,s=>String(s.charCodeAt(0)-p)).replace(/[^0-9.+-]/g,""),n=Number(e);return Number.isFinite(n)?n:0}function l(t){try{const e=h(t);return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,useGrouping:!0}).format(e)}catch{return String(t??0)}}function c(t,e){if(!t)return;const n=document.getElementById(t);n&&(n.textContent=l(e))}function o(t){try{const e=typeof t=="function"?t():null;return Array.isArray(e)?e.length:0}catch{return 0}}function m(){u=!1;const t=o(()=>a()?.projects),e=o(()=>a()?.reservations),n=o(()=>a()?.equipment),s=o(()=>a()?.technicians);i.projects.forEach(r=>c(r,t)),i.reservations.forEach(r=>c(r,e)),i.equipment.forEach(r=>c(r,n)),i.technicians.forEach(r=>c(r,s))}function f(){u||(u=!0,typeof requestAnimationFrame=="function"?requestAnimationFrame(m):setTimeout(m,16))}function E(){["reservations:changed","reservations:updated","projects:changed","equipment:changed","technicians:changed","customers:changed","maintenance:updated","language:changed"].forEach(e=>{document.addEventListener(e,f,{passive:!0})}),f()}export{E as initDashboardMetrics};
