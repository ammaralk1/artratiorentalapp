import{l as s}from"./maintenance.C0-OxG42.js";import"./reservations.C_D60Eux.js";import"./projects.DiFMPdQO.js";import"./reports.IrboV5F4.js";const a={projects:["stat-projects","sidebar-stat-projects"],reservations:["stat-reservations","sidebar-stat-reservations"],equipment:["stat-equipment","sidebar-stat-equipment"],technicians:["stat-technicians","sidebar-stat-technicians"]};let u=!1;const f=1632,d=1776;function h(t){if(t==null)return 0;if(typeof t=="number"&&Number.isFinite(t))return t;const e=String(t).trim().replace(/[\s,_]/g,"").replace(/[\u0660-\u0669]/g,i=>String(i.charCodeAt(0)-f)).replace(/[\u06f0-\u06f9]/g,i=>String(i.charCodeAt(0)-d)).replace(/[^0-9.+-]/g,""),n=Number(e);return Number.isFinite(n)?n:0}function l(t){try{const e=h(t);return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,useGrouping:!0}).format(e)}catch{return String(t??0)}}function o(t,e){if(!t)return;const n=document.getElementById(t);n&&(n.textContent=l(e))}function c(t){try{const e=typeof t=="function"?t():null;return Array.isArray(e)?e.length:0}catch{return 0}}function m(){u=!1;const t=c(()=>s()?.projects),e=c(()=>s()?.reservations),n=c(()=>s()?.equipment),i=c(()=>s()?.technicians);a.projects.forEach(r=>o(r,t)),a.reservations.forEach(r=>o(r,e)),a.equipment.forEach(r=>o(r,n)),a.technicians.forEach(r=>o(r,i))}function p(){u||(u=!0,typeof requestAnimationFrame=="function"?requestAnimationFrame(m):setTimeout(m,16))}function v(){["reservations:changed","reservations:updated","projects:changed","equipment:changed","technicians:changed","customers:changed","maintenance:updated","language:changed"].forEach(e=>{document.addEventListener(e,p,{passive:!0})}),p()}export{v as initDashboardMetrics};
