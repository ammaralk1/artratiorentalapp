import{r as Lt,d as Pe,t as n,n as b,x as qt,l as ns,j as x,v as os,w as is,u as vt,p as Tt}from"./auth.B4XUmSYg.js";import{getProjectsState as ze,deleteProjectApi as cs,refreshProjectsFromApi as Dt,isApiError as tt,buildProjectPayload as Rt,updateProjectApi as gt,createProjectApi as ls}from"./projectsService.GA8uKd8c.js";import{g as G,n as Ie,f as ps,r as Ft,u as We,a as ds,D as ue,c as Me,e as Xe,d as us,b as ms,h as js}from"./reservationsService.CrNVhtun.js";import{g as fs,w as ys}from"./uiBridge.BLZZT8b9.js";import{e as hs}from"./reservationPdf.ZBmzwlJi.js";import{d as t,s as u,i as o,r as Ae,u as $e,a as Ke,h as Be,j as bs,k as _t,l as k,m as vs,f as st,n as xt,o as gs,p as xs,q as Ss,t as Ps,v as kt,w as Ct}from"./view.BmW6FmvT.js";Lt({ar:{"projects.nav.brand":"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.nav.projects":"Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.nav.customers":"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.nav.technicians":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.hero.title":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.hero.subtitle":"Ø£Ù†Ø´Ø¦ ÙˆÙ†Ø³Ù‘Ù‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ ÙˆÙˆØ²Ù‘Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ù‚Ù… ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ.","projects.form.title":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯","projects.form.labels.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.title":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.clientCompany":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.form.labels.startDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.startTime":"â° ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.endDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.endTime":"â° ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.description":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.technician":"Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø·Ø§Ù‚Ù…","projects.form.labels.equipment":"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø©","projects.form.labels.quantity":"Ø§Ù„ÙƒÙ…ÙŠØ©","projects.form.labels.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseLabel":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseAmount":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.form.labels.servicesClientTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.labels.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.expenses.table.headers.service":"Ø§Ù„Ø®Ø¯Ù…Ø©","projects.expenses.table.headers.cost":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.expenses.table.headers.sale":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)","projects.expenses.table.headers.actions":"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.form.placeholders.title":"Ù…Ø«Ø§Ù„: ØªØµÙˆÙŠØ± Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯","projects.form.placeholders.description":"Ù…Ù„Ø®Øµ Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª","projects.form.placeholders.type":"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.placeholders.clientCompany":"ØªØ¹Ø¨Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§","projects.form.placeholders.startDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.startTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.endDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.endTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.client":"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...","projects.form.placeholders.expenseLabel":"Ù…Ø«Ø§Ù„: Ù…ØªØ·Ù„Ø¨ Ø¥Ø¶Ø§ÙÙŠ (Ø±Ø³ÙˆÙ… Ù…ÙˆÙ‚Ø¹ØŒ Ù…Ø¹Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...)","projects.form.linkedReservation.title":"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.description":"Ø£Ù†Ø´Ø¦ Ø­Ø¬Ø²Ù‹Ø§ Ù…Ø±ØªØ¨Ø·Ù‹Ø§ Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© ØªÙØ§ØµÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.","projects.form.linkedReservation.button":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingClient":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingSchedule":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.empty":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯.","projects.form.linkedReservation.pendingItem":"Ø³ÙŠØªÙ… Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¬Ø² ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.form.linkedReservation.buttonDisabled":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø· Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¬Ø².","projects.form.linkedReservation.meta.equipment":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}","projects.form.linkedReservation.meta.crew":"Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}","projects.form.linkedReservation.meta.crewNames":"Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}","projects.form.linkedReservation.meta.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}","projects.form.labels.discount":"Ø§Ù„Ø®ØµÙ…","projects.form.labels.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.form.labels.applyTax":"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.form.discount.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.discount.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.companyShareToggle":"Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)","projects.form.selectClient":"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.selectTechnician":"Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.form.selectEquipment":"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.form.types.commercial":"ØªØµÙˆÙŠØ± Ø¥Ø¹Ù„Ø§Ù†","projects.form.types.coverage":"ØªØµÙˆÙŠØ± ØªØºØ·ÙŠØ©","projects.form.types.photography":"ØªØµÙˆÙŠØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ","projects.form.types.social":"ØªØµÙˆÙŠØ± Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ","projects.form.types.unknown":"Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯","projects.form.buttons.addTechnician":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ø§Ù‚Ù…","projects.form.buttons.addEquipment":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.form.buttons.save":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.update":"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.taxLabel":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.form.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.form.paymentProgress.label":"ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©","projects.form.paymentProgress.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.paymentProgress.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ø§ Ù…Ù† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.selected.emptyTechnicians":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹Ø¶Ùˆ Ø¨Ø¹Ø¯","projects.selected.emptyEquipment":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù…Ø¹Ø¯Ø§Øª","projects.selected.emptyExpenses":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ","projects.summary.title":"Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹","projects.summary.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.summary.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.summary.expenses":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projects.summary.budget":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.focus.title":"ğŸ“Œ Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.legend":"Ø§Ø®ØªØ± Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø§Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹.","projects.focus.today":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…","projects.focus.thisWeek":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹","projects.focus.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.focus.recent":"Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù„ÙŠÙˆÙ… Ø£Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.","projects.focus.view":"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„","projects.focus.edit":"ØªØ¹Ø¯ÙŠÙ„","projects.focus.actions.confirm":"âœ”ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.confirmed":"âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯","projects.focus.toastNotFound":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","projects.toast.linkReservationFailed":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§","projects.toast.companyShareRequiresTax":"âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.timeline.title":"Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.timeline.legend":"ÙŠÙØ¸Ù‡Ø± Ø§Ù„Ø´Ø±ÙŠØ· Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ØªÙÙ…Ø«Ù‘Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.timeline.legend.upcoming":"Ù‚Ø§Ø¯Ù…","projects.timeline.legend.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.timeline.legend.completed":"Ù…ÙƒØªÙ…Ù„","projects.timeline.legend.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.timeline.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø²Ù…Ù†ÙŠØ© ØµØ§Ù„Ø­Ø©.","projects.timeline.conflict":"ØªØ¹Ø§Ø±Ø¶ ÙÙŠ Ø§Ù„ØªÙˆÙ‚ÙŠØª","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹","projects.search.placeholder":"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.subtabs.create":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹","projects.subtabs.list":"Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ","projects.subtabs.reports":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.expenses":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.templates":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨","projects.templates.title":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (A4)","projects.templates.subtitle":"Ø§Ø±Ø¨Ø· Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ ÙˆØ­Ø¬Ø²Ø§Ù‹ Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨ØŒ Ø¹Ø¯Ù‘ÙÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø«Ù… Ø§Ø·Ø¨Ø¹ PDF.","projects.templates.labels.project":"ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.templates.labels.reservation":"ğŸ”— Ø§Ù„Ø­Ø¬Ø² (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)","projects.templates.labels.type":"ğŸ“„ Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ù„Ø¨","projects.templates.types.expenses":"ÙˆØ±Ù‚Ø© Ù…ØµØ§Ø±ÙŠÙ (A4 Ø¹Ù…ÙˆØ¯ÙŠ)","projects.templates.types.callsheet":"ÙƒÙˆÙ„ Ø´ÙŠØª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.types.shotlist":"Ø´ÙˆØª Ù„ÙŠØ³Øª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.actions.refresh":"ØªØ­Ø¯ÙŠØ«","projects.templates.actions.print":"ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© PDF","projects.templates.noReservation":"â€” Ø¨Ø¯ÙˆÙ† Ø±Ø¨Ø· â€”","projects.templates.empty":"Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ Ù„Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨.","projects.templates.expenses.title":"Expenses Sheet / Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.templates.callsheet.title":"Call Sheet / Ù‚Ø§Ù„Ø¨ ÙƒÙˆÙ„ Ø´ÙŠØª","projects.templates.callsheet.contacts":"Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©","projects.templates.callsheet.schedule":"Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…","projects.templates.shotlist.title":"Shot List / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ù‚Ø·Ø§Øª","projects.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.table.count":"{count} Ù…Ø´Ø±ÙˆØ¹","projects.table.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.table.headers.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.table.headers.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.table.headers.period":"Ø§Ù„ÙØªØ±Ø©","projects.table.headers.crew":"Ø§Ù„Ø·Ø§Ù‚Ù…","projects.table.headers.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.table.headers.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.table.headers.expenses":"Ù…ØµØ±ÙˆÙØ§Øª (SR)","projects.table.emptyInitial":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¹Ø¯.","projects.table.emptyFiltered":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø©.","projects.modal.title":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.overview.heading":"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.pageTitle":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.reports.title":"Ù„ÙˆØ­Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.subtitle":"ØªØ­Ù„ÙŠÙ„Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©ØŒ ÙˆÙ†Ø³Ø¨ Ø§Ù„ØªÙ†ÙÙŠØ°.","projects.reports.filters.search":"Ø¨Ø­Ø«","projects.reports.filters.searchPlaceholder":"Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.filters.status":"Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.filters.payment":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.reports.filters.paymentAll":"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.filters.paymentPaid":"Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.paymentPartial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.reports.filters.paymentUnpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.dateRange":"Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®","projects.reports.filters.range.all":"ÙƒÙ„ Ø§Ù„ÙˆÙ‚Øª","projects.reports.filters.range.30":"Ø¢Ø®Ø± 30 ÙŠÙˆÙ…","projects.reports.filters.range.90":"Ø¢Ø®Ø± 90 ÙŠÙˆÙ…","projects.reports.filters.range.365":"Ø¢Ø®Ø± Ø³Ù†Ø©","projects.reports.filters.range.custom":"ØªØ§Ø±ÙŠØ® Ù…Ø®ØµØµ","projects.reports.filters.start":"Ù…Ù†","projects.reports.filters.end":"Ø¥Ù„Ù‰","projects.reports.filters.refresh":"ØªØ­Ø¯ÙŠØ«","projects.reports.charts.status":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.charts.statusHint":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ°","projects.reports.charts.timeline":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù†","projects.reports.charts.timelineHint":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø´Ù‡Ø±ÙŠÙ‹Ø§","projects.reports.charts.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.charts.expensesHint":"Ù…Ù‚Ø§Ø±Ù†Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ø¹ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.charts.clients":"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.reports.charts.clientsHint":"Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.noData":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©","projects.reports.loading.chart":"Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù…...","projects.reports.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.table.columns.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.reports.table.columns.period":"Ø§Ù„ÙØªØ±Ø©","projects.reports.table.columns.value":"Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.table.columns.payment":"Ø§Ù„Ø¯ÙØ¹","projects.reports.table.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø§Ù„ÙŠ.","projects.reports.table.meta":"Ø¹Ø±Ø¶ {count} Ù…Ù† Ø£ØµÙ„ {total} Ù…Ø´Ø±ÙˆØ¹","projects.reports.kpi.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.kpi.totalProjectsMeta":"Ø¨Ø¹Ø¯ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.totalValueMeta":"ÙŠØ´Ù…Ù„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.unpaidValueMeta":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù… ØªÙØ³Ø¯Ù‘ÙØ¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¹Ø¯","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.expensesMeta":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.datasets.value":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©","projects.reports.datasets.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.projectExpenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.expenses.pageTitle":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.expenses.title":"Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.expenses.subtitle":"ØªØ§Ø¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.","projects.expenses.placeholder":"Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ù…Ø®ØµØµØ© Ù„Ø±Ø¨Ø· Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹.","projects.expenses.placeholderHint":"Ø¬Ù‡Ø² Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¢Ù† Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¯Ù….","projects.expenses.actions.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.expenses.actions.importInvoice":"ğŸ§¾ Ø±ÙØ¹ ÙØ§ØªÙˆØ±Ø©","projects.expenses.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.expenses.kpi.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.expenses.kpi.total.meta":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.expenses.kpi.pending":"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.pending.meta":"Ù…ØµØ§Ø±ÙŠÙ ØªØ­ØªØ§Ø¬ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.expenses.kpi.approved":"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.approved.meta":"Ø¢Ø®Ø± Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§","projects.expenses.kpi.average":"Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ Ù„ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹","projects.expenses.kpi.average.meta":"Ù‚ÙŠÙ…Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø§Ø³ØªÙ†Ø§Ø¯Ø§Ù‹ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù†Ø´Ø·Ø©","projects.expenses.breakdown.title":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.breakdown.hint":"Ø±Ø§Ù‚Ø¨ Ø§Ù„ØµØ±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ ÙˆØ§Ù„ØªÙ†Ù‚Ù„Ø§Øª.","projects.expenses.breakdown.empty":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ§Ø±ÙŠÙ Ù…ØµÙ†ÙØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.","projects.expenses.timeline.title":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø¹Ø¨Ø± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ","projects.expenses.timeline.hint":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠØ© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª.","projects.expenses.timeline.empty":"Ø£Ø¶Ù Ù…ØµØ±ÙˆÙØ§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ.","projects.expenses.table.title":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ","projects.expenses.table.hint":"Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª.","projects.expenses.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.expenses.table.columns.category":"Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.table.columns.description":"Ø§Ù„ÙˆØµÙ","projects.expenses.table.columns.amount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.expenses.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.expenses.table.columns.date":"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„","projects.expenses.table.empty":"Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§.","projects.toast.selectTechnician":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.technicianAlreadyAdded":"âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„","projects.toast.technicianAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.selectEquipment":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.toast.equipmentAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.missingExpenseLabel":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.toast.invalidExpenseAmount":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­","projects.toast.customerNotFound":"âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„","projects.toast.missingRequiredFields":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©","projects.toast.invalidDateRange":"âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.toast.saved":"âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editReady":"âœï¸ ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„. Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.toast.updated":"âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editMissing":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡","projects.toast.confirmed":"âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.alreadyConfirmed":"â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§","projects.toast.deleted":"ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.confirm.delete":"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ","projects.fallback.unknownClient":"Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ","projects.fallback.unknownEquipment":"Ù…Ø¹Ø¯Ø©","projects.fallback.noDescription":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ","projects.fallback.untitled":"Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…","projects.fallback.emptyList":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.fallback.technicianName":"Ø¹Ø¶Ùˆ {id}","projects.status.upcoming":"Ù‚Ø§Ø¯Ù…","projects.status.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.status.completed":"Ù…ÙƒØªÙ…Ù„","projects.status.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.status.cancelled":"Ù…Ù„ØºÙŠ","projects.form.labels.cancelled":"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.hints.cancelled":"Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ.","projectCards.filters.search":"ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„ÙˆØµÙ...","projectCards.filters.status.all":"âš™ï¸ ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projectCards.filters.status.upcoming":"ğŸ“… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projectCards.filters.status.ongoing":"âš™ï¸ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projectCards.filters.status.completed":"âœ… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù†ØªÙ‡ÙŠØ©","projectCards.stats.crew":"ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…: {count}","projectCards.stats.reservations":"ğŸ”— Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: {count}","projectCards.stats.client":"ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: {name}","projectCards.stats.type":"ğŸ·ï¸ Ø§Ù„Ù†ÙˆØ¹: {label}","projectCards.stats.budget":"ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©): {amount}","projectCards.stats.expenses":"ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: {amount}","projectCards.stats.crewShort":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projectCards.stats.reservationsShort":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.budgetShort":"Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.stats.expensesShort":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projectCards.stats.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projectCards.stats.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projectCards.stats.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projectCards.stats.reservationValue":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.expensesTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projectCards.stats.reservationTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²","projectCards.stats.taxTotal":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projectCards.stats.overallTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ","projectCards.groups.meta":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.groups.reservations":"Ù…ÙˆØ¬Ø² Ø§Ù„Ø­Ø¬Ø²","projectCards.groups.payment":"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯ÙØ¹","projectCards.meta.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.startDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projectCards.meta.endDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.crew":"Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„ÙÙ†ÙŠ ({count})","projects.details.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ({count})","projects.details.expenses":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})","projects.details.subtotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.tax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (15Ùª):","projects.details.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.labels.projectTitle":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.projectSubtotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.details.summary.projectTax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (15Ùª)","projects.details.summary.projectTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.summary.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª / Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.details.summary.combinedTax":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (15Ùª)","projects.details.summary.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø©","projects.details.summary.overallTotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.summary.equipmentTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.summary.crewTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.crewCostTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.gross":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ","projects.details.summary.discount":"Ø§Ù„Ø®ØµÙ…","projects.details.summary.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©","projects.details.summary.tax":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.details.summary.grossAfterDiscount":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…","projects.details.summary.netProfit":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­","projects.details.summary.finalTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ","projects.details.labels.start":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.details.labels.end":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.labels.days":"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…","projects.details.labels.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.labels.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.labels.reservationsCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.labels.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.chips.vatOn":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.details.chips.vatOff":"ØºÙŠØ± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.chips.reservations":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.chips.linkedReservation":"Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.chips.notLinkedReservation":"ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.noItems":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.details.quantity":"{qty} Ù‚Ø·Ø¹Ø©","projects.details.reservations.title":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.details.reservations.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯.","projects.details.reservations.create":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.details.actions.edit":"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.exportExpenses":"ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Excel","projects.details.actions.exportShotList":"ğŸ¬ ØªØµØ¯ÙŠØ± Ø§Ù„Ø´ÙˆØª Ù„ÙŠØ³Øª","projects.details.actions.exportCallSheet":"ğŸ“ ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙˆÙ„ Ø´ÙŠØª","projects.details.reservations.view":"Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¬Ø²","projects.details.reservations.count":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.reservations.itemsCount":"{count} Ù…Ø¹Ø¯Ø©","projects.details.reservations.crewCount":"{count} Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.edit.heading":"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.edit.subheading":"Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.details.edit.save":"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª","projects.details.edit.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.quote.sections.customer":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.quote.sections.project":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.quote.sections.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.quote.sections.crew":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.quote.sections.financial":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.quote.sections.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.quote.sections.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"},en:{"projects.nav.brand":"Rental System","projects.nav.projects":"Projects","projects.nav.customers":"Clients","projects.nav.technicians":"Crew","projects.hero.title":"Projects Management","projects.hero.subtitle":"Create and coordinate projects, assign crew and equipment, and track expenses.","projects.form.title":"Create New Project","projects.form.labels.type":"Project Type","projects.form.labels.title":"Project Name","projects.form.labels.client":"Client","projects.form.labels.clientCompany":"Client Company","projects.form.labels.paymentStatus":"Payment Status","projects.form.labels.startDate":"ğŸ“… Start Date","projects.form.labels.startTime":"â° Start Time","projects.form.labels.endDate":"ğŸ“… End Date","projects.form.labels.endTime":"â° End Time","projects.form.labels.description":"Project Details","projects.form.labels.technician":"Add Crew Member","projects.form.labels.equipment":"Add Equipment","projects.form.labels.quantity":"Quantity","projects.form.labels.expenses":"Production services","projects.form.labels.expenseLabel":"Expense Name","projects.form.labels.expenseAmount":"Amount (SR)","projects.form.labels.servicesClientTotal":"Sales total","projects.form.labels.salePrice":"Sale price","projects.expenses.table.headers.service":"Service","projects.expenses.table.headers.cost":"Cost (SR)","projects.expenses.table.headers.sale":"Sale price (SR)","projects.expenses.table.headers.actions":"Actions","projects.form.placeholders.title":"Example: New product shoot","projects.form.placeholders.description":"Project brief and requirements","projects.form.placeholders.type":"Choose a project type","projects.form.placeholders.clientCompany":"Auto-filled from client record","projects.form.placeholders.startDate":"Select the start date","projects.form.placeholders.startTime":"Select the start time","projects.form.placeholders.endDate":"Select the end date (optional)","projects.form.placeholders.endTime":"Select the end time (optional)","projects.form.placeholders.client":"Type the client name...","projects.form.placeholders.expenseLabel":"Example: Location permit or extra gear","projects.form.linkedReservation.title":"Create Linked Reservation","projects.form.linkedReservation.description":"Create a reservation for this project and we'll pre-fill the matching details.","projects.form.linkedReservation.button":"â• Create Linked Reservation","projects.form.linkedReservation.missingClient":"âš ï¸ Please select the client before creating the linked reservation.","projects.form.linkedReservation.missingSchedule":"âš ï¸ Please provide both start and end date/time before creating the linked reservation.","projects.form.linkedReservation.empty":"No linked reservations yet.","projects.form.linkedReservation.pendingItem":"This reservation will be linked automatically once the project is saved.","projects.form.linkedReservation.buttonDisabled":"A linked reservation was created. Manage further changes from the reservation itself.","projects.form.linkedReservation.meta.equipment":"Equipment count: {count}","projects.form.linkedReservation.meta.crew":"Crew count: {count}","projects.form.linkedReservation.meta.crewNames":"Crew names: {names}","projects.form.linkedReservation.meta.total":"Reservation total: {amount}","projects.form.labels.discount":"Discount","projects.form.labels.companyShare":"Company share & VAT","projects.form.labels.applyTax":"Apply VAT 15%","projects.form.discount.percent":"% Percent","projects.form.discount.amount":"ğŸ’µ Amount","projects.form.companyShareToggle":"Include company share (10%)","projects.form.selectClient":"Select client","projects.form.selectTechnician":"Select crew member","projects.form.selectEquipment":"Select equipment","projects.form.types.commercial":"Commercial shoot","projects.form.types.coverage":"Event coverage","projects.form.types.photography":"Photography","projects.form.types.social":"Social media content","projects.form.types.unknown":"Unspecified type","projects.form.buttons.addTechnician":"â• Add to Crew","projects.form.buttons.addEquipment":"â• Add to Project","projects.form.buttons.addExpense":"â• Add Expense","projects.form.buttons.save":"ğŸ†• Create Project","projects.form.buttons.update":"ğŸ” Update Project","projects.form.taxLabel":"Include VAT (15%)","projects.form.paymentStatus.paid":"Paid","projects.form.paymentStatus.unpaid":"Unpaid","projects.form.paymentStatus.partial":"Partially Paid","projects.form.paymentProgress.label":"ğŸ’° Received Payment","projects.form.paymentProgress.amount":"ğŸ’µ Amount","projects.form.paymentProgress.percent":"% Percent","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Enter the amount or percentage received from the project total","projects.paymentStatus.paid":"Paid","projects.paymentStatus.unpaid":"Unpaid","projects.paymentStatus.partial":"Partially Paid","projects.selected.emptyTechnicians":"No crew members selected yet","projects.selected.emptyEquipment":"No equipment selected","projects.selected.emptyExpenses":"No expenses recorded","projects.summary.title":"Quick Overview","projects.summary.totalProjects":"Total Projects","projects.summary.upcoming":"Upcoming Projects","projects.summary.expenses":"Total Expenses","projects.summary.budget":"Estimated Value (with VAT)","projects.focus.title":"ğŸ“Œ Focus Projects","projects.focus.legend":"Tap a card to review details or jump to editing.","projects.focus.today":"Today's Projects","projects.focus.thisWeek":"This Week","projects.focus.upcoming":"Upcoming Projects","projects.focus.recent":"Latest Projects","projects.focus.empty":"No projects scheduled for today or this week.","projects.focus.view":"View details","projects.focus.edit":"Edit","projects.focus.actions.confirm":"âœ”ï¸ Confirm project","projects.focus.confirmed":"âœ… Project confirmed","projects.focus.toastNotFound":"âš ï¸ Could not find this project in the list","projects.toast.linkReservationFailed":"âš ï¸ Unable to link some reservations to the project. Please review them manually.","projects.toast.companyShareRequiresTax":"âš ï¸ Company share requires VAT to be enabled first.","projects.timeline.title":"Projects Timeline","projects.timeline.legend":"The bar shows project start and end, with colors reflecting status.","projects.timeline.legend.upcoming":"Upcoming","projects.timeline.legend.ongoing":"In Progress","projects.timeline.legend.completed":"Completed","projects.timeline.legend.conflict":"Conflict","projects.timeline.empty":"No projects with valid schedule to display.","projects.timeline.conflict":"Scheduling conflict","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Quick Search","projects.search.placeholder":"Search by project name or client","projects.subtabs.create":"Create Project","projects.subtabs.list":"My Projects","projects.subtabs.reports":"Project Reports","projects.subtabs.expenses":"Project Expenses","projects.subtabs.templates":"Templates","projects.templates.title":"Templates (A4)","projects.templates.subtitle":"Bind a project/reservation, edit fields, and print PDF.","projects.templates.labels.project":"ğŸ“ Project","projects.templates.labels.reservation":"ğŸ”— Reservation (optional)","projects.templates.labels.type":"ğŸ“„ Template type","projects.templates.types.expenses":"Expenses Sheet (A4 Portrait)","projects.templates.types.callsheet":"Call Sheet (A4 Landscape)","projects.templates.types.shotlist":"Shot List (A4 Landscape)","projects.templates.actions.refresh":"Refresh","projects.templates.actions.print":"ğŸ–¨ï¸ Print PDF","projects.templates.noReservation":"â€” None â€”","projects.templates.empty":"Select a project to start building templates.","projects.templates.expenses.title":"Expenses Sheet","projects.templates.callsheet.title":"Call Sheet","projects.templates.callsheet.contacts":"Key Contacts","projects.templates.callsheet.schedule":"Day Schedule","projects.templates.shotlist.title":"Shot List","projects.table.title":"Projects List","projects.table.count":"{count} project","projects.table.reservationsCount":"{count} reservations","projects.table.headers.project":"Project","projects.table.headers.client":"Client","projects.table.headers.period":"Schedule","projects.table.headers.crew":"Crew","projects.table.headers.equipment":"Equipment","projects.table.headers.total":"Total (with VAT)","projects.table.headers.expenses":"Expenses (SR)","projects.table.emptyInitial":"No projects have been created yet.","projects.table.emptyFiltered":"No matching projects found.","projects.modal.title":"Project Details","projects.details.overview.heading":"Project Information","projects.reports.pageTitle":"Project Reports - Rental System","projects.reports.title":"Project Reporting Dashboard","projects.reports.subtitle":"Detailed analytics for project performance, deadlines, and completion rates.","projects.reports.filters.search":"Search","projects.reports.filters.searchPlaceholder":"Search by project or client name","projects.reports.filters.status":"Project status","projects.reports.filters.payment":"Payment status","projects.reports.filters.paymentAll":"All payments","projects.reports.filters.paymentPaid":"Paid","projects.reports.filters.paymentPartial":"Partially paid","projects.reports.filters.paymentUnpaid":"Unpaid","projects.reports.filters.dateRange":"Date range","projects.reports.filters.range.all":"All time","projects.reports.filters.range.30":"Last 30 days","projects.reports.filters.range.90":"Last 90 days","projects.reports.filters.range.365":"Last year","projects.reports.filters.range.custom":"Custom range","projects.reports.filters.start":"From","projects.reports.filters.end":"To","projects.reports.filters.refresh":"Refresh","projects.reports.charts.status":"Status distribution","projects.reports.charts.statusHint":"Share of projects per execution status","projects.reports.charts.timeline":"Revenue over time","projects.reports.charts.timelineHint":"Total project value by month","projects.reports.charts.expenses":"Expenses vs. value","projects.reports.charts.expensesHint":"Compare spend against total project value","projects.reports.charts.clients":"Top clients","projects.reports.charts.clientsHint":"Highest clients by project value","projects.reports.noData":"No data available","projects.reports.loading.chart":"Refreshing chartâ€¦","projects.reports.table.title":"Project list","projects.reports.table.columns.project":"Project","projects.reports.table.columns.client":"Client","projects.reports.table.columns.status":"Status","projects.reports.table.columns.period":"Period","projects.reports.table.columns.value":"Value","projects.reports.table.columns.payment":"Payment","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.reports.filters.confirmed.label":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯","projects.reports.filters.confirmed.all":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯: Ø§Ù„ÙƒÙ„","projects.reports.filters.confirmed.yes":"Ù…Ø¤ÙƒØ¯","projects.reports.filters.confirmed.no":"ØºÙŠØ± Ù…Ø¤ÙƒØ¯","projects.reports.table.columns.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.actions.exportExcel":"ØªØµØ¯ÙŠØ± Excel","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.table.empty":"No projects match the current filters.","projects.reports.table.meta":"Showing {count} of {total} projects","projects.reports.kpi.totalProjects":"Total projects","projects.reports.kpi.totalProjectsMeta":"After applying the current filters","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.totalValueMeta":"Includes projects, linked reservations, and VAT","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.unpaidValueMeta":"Projects not fully paid yet","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.expensesMeta":"Expenses for included projects","projects.reports.datasets.value":"Total value","projects.reports.datasets.expenses":"Expenses","projects.expenses.pageTitle":"Project Expenses - Rental System","projects.expenses.title":"Manage Project Expenses","projects.expenses.subtitle":"Track expenses linked to bookings and projects with full invoicing visibility.","projects.expenses.placeholder":"A dedicated board for linking project expenses to bookings is coming soon.","projects.expenses.placeholderHint":"Prepare invoices and categories now to accelerate the upcoming release.","projects.expenses.actions.addExpense":"â• Add expense","projects.expenses.actions.importInvoice":"ğŸ§¾ Upload invoice","projects.expenses.actions.export":"â¬‡ï¸ Export","projects.expenses.kpi.total":"Total expenses","projects.expenses.kpi.total.meta":"Expenses recorded during the current period","projects.expenses.kpi.pending":"Pending approval","projects.expenses.kpi.pending.meta":"Expenses awaiting financial manager approval","projects.expenses.kpi.approved":"Approved","projects.expenses.kpi.approved.meta":"Latest expenses that were approved","projects.expenses.kpi.average":"Average per project","projects.expenses.kpi.average.meta":"Estimated value based on active projects","projects.expenses.breakdown.title":"Expenses by category","projects.expenses.breakdown.hint":"Track spend on equipment, crew, and logistics.","projects.expenses.breakdown.empty":"No categorized expenses recorded yet.","projects.expenses.timeline.title":"Expenses over time","projects.expenses.timeline.hint":"Review spend across recent months to spot trends.","projects.expenses.timeline.empty":"Add expenses to unlock the interactive timeline.","projects.expenses.table.title":"Detailed expense ledger","projects.expenses.table.hint":"Review project expenses together with approval status.","projects.expenses.table.columns.project":"Project","projects.expenses.table.columns.category":"Category","projects.expenses.table.columns.description":"Description","projects.expenses.table.columns.amount":"Amount","projects.expenses.table.columns.status":"Status","projects.expenses.table.columns.date":"Logged on","projects.expenses.table.empty":"Registered expenses will appear here as soon as you add them.","projects.toast.selectTechnician":"âš ï¸ Please select a crew member","projects.toast.technicianAlreadyAdded":"âš ï¸ Crew member already added","projects.toast.technicianAdded":"âœ… Crew member added","projects.toast.selectEquipment":"âš ï¸ Please select equipment","projects.toast.equipmentAdded":"âœ… Equipment added to project","projects.toast.missingExpenseLabel":"âš ï¸ Please enter an expense description","projects.toast.invalidExpenseAmount":"âš ï¸ Please enter a valid amount","projects.toast.customerNotFound":"âš ï¸ Client name not found. Please select an existing client.","projects.toast.missingRequiredFields":"âš ï¸ Please fill in the required fields","projects.toast.invalidDateRange":"âš ï¸ End date must be after the start date","projects.toast.saved":"âœ… Project saved successfully","projects.toast.editReady":"âœï¸ Project loaded for editing. Update the fields, then save.","projects.toast.updated":"âœ… Project updated successfully","projects.toast.editMissing":"âš ï¸ Unable to find the project you tried to edit","projects.toast.confirmed":"âœ… Project confirmed","projects.toast.alreadyConfirmed":"â„¹ï¸ Project already confirmed","projects.toast.deleted":"ğŸ—‘ï¸ Project deleted","projects.confirm.delete":"Are you sure you want to delete this project?","projects.fallback.unknownClient":"Unknown client","projects.fallback.unknownEquipment":"Equipment","projects.fallback.noDescription":"No description","projects.fallback.untitled":"Untitled project","projects.fallback.emptyList":"None","projects.fallback.technicianName":"Member {id}","projects.status.upcoming":"Upcoming","projects.status.ongoing":"In Progress","projects.status.completed":"Completed","projects.status.conflict":"Conflict","projects.status.cancelled":"Cancelled","projects.form.labels.cancelled":"Cancel project","projects.form.hints.cancelled":"Marks the project as cancelled and updates all linked reservations to cancelled.","projectCards.filters.search":"ğŸ” Search by project name or description...","projectCards.filters.status.all":"âš™ï¸ All statuses","projectCards.filters.status.upcoming":"ğŸ“… Upcoming projects","projectCards.filters.status.ongoing":"âš™ï¸ In-progress projects","projectCards.filters.status.completed":"âœ… Completed projects","projectCards.stats.crew":"ğŸ‘¥ Crew members: {count}","projectCards.stats.reservations":"ğŸ”— Reservations: {count}","projectCards.stats.client":"ğŸ‘¤ Client: {name}","projectCards.stats.type":"ğŸ·ï¸ Type: {label}","projectCards.stats.budget":"ğŸ’° Estimated budget (with VAT): {amount}","projectCards.stats.expenses":"ğŸ’¸ Expenses: {amount}","projectCards.stats.crewShort":"Crew","projectCards.stats.reservationsShort":"Reservations","projectCards.stats.budgetShort":"Project budget","projectCards.stats.expensesShort":"Total expenses","projectCards.stats.paymentStatus":"Payment status","projectCards.stats.equipmentCount":"Equipment count","projectCards.stats.crewCount":"Crew count","projectCards.stats.reservationValue":"Reservation total","projectCards.stats.expensesTotal":"Expenses total","projectCards.stats.reservationTotal":"Linked reservation total","projectCards.stats.taxTotal":"VAT","projectCards.stats.overallTotal":"Grand total","projectCards.groups.meta":"Project info","projectCards.groups.reservations":"Reservation snapshot","projectCards.groups.payment":"Payment summary","projectCards.meta.code":"Project ID","projectCards.meta.client":"Client","projectCards.meta.company":"Client company","projectCards.meta.type":"Project type","projectCards.meta.startDate":"Start date","projectCards.meta.endDate":"End date","projects.details.type":"Project type","projects.details.company":"Client company","projects.details.client":"Client","projects.details.crew":"Crew ({count})","projects.details.equipment":"Equipment ({count})","projects.details.expenses":"Expenses ({amount})","projects.details.subtotal":"Subtotal before tax:","projects.details.tax":"VAT 15%:","projects.details.total":"Total with VAT:","projects.details.labels.projectTitle":"Project Name","projects.details.labels.code":"Project ID","projects.details.summary.projectSubtotal":"Project total","projects.details.summary.paymentStatus":"Payment status","projects.details.summary.projectTax":"Project VAT (15%)","projects.details.summary.projectTotal":"Project total (after VAT)","projects.details.summary.reservationsTotal":"Equipment / crew total","projects.details.summary.combinedTax":"Total VAT on combined amount (15%)","projects.details.summary.reservationsCount":"{count} linked reservations","projects.details.summary.overallTotal":"Overall total","projects.details.summary.equipmentTotal":"Equipment total","projects.details.summary.crewTotal":"Crew total","projects.details.summary.crewCostTotal":"Crew cost","projects.details.summary.expensesTotal":"Project expenses","projects.details.summary.gross":"Gross","projects.details.summary.discount":"Discount","projects.details.summary.companyShare":"Company share","projects.details.summary.tax":"VAT (15%)","projects.details.summary.grossAfterDiscount":"Total after discount","projects.details.summary.netProfit":"Net profit","projects.details.summary.finalTotal":"Final total","projects.details.labels.start":"Start date","projects.details.labels.end":"End date","projects.details.labels.days":"Days","projects.details.labels.crewCount":"Crew count","projects.details.labels.equipmentCount":"Equipment quantity","projects.details.labels.reservationsCount":"Reservations count","projects.details.labels.notes":"Project notes","projects.details.chips.vatOn":"VAT enabled 15%","projects.details.chips.vatOff":"VAT disabled","projects.details.chips.reservations":"{count} reservations","projects.details.chips.linkedReservation":"Linked to reservation","projects.details.chips.notLinkedReservation":"Not linked to reservation","projects.details.noItems":"None","projects.details.quantity":"{qty} pcs","projects.details.reservations.title":"Linked reservations","projects.details.reservations.empty":"No reservations linked to this project yet.","projects.details.reservations.create":"â• Create linked reservation","projects.details.reservations.view":"View reservation","projects.details.actions.edit":"âœï¸ Edit Project","projects.details.actions.delete":"ğŸ—‘ï¸ Delete Project","projects.details.actions.exportExpenses":"ğŸ“Š Export Expenses (Excel)","projects.details.actions.exportShotList":"ğŸ¬ Export Shot List","projects.details.actions.exportCallSheet":"ğŸ“ Export Call Sheet","projects.details.reservations.count":"{count} reservations","projects.details.reservations.itemsCount":"{count} item(s)","projects.details.reservations.crewCount":"{count} crew member(s)","projects.details.edit.heading":"Edit Project","projects.details.edit.subheading":"Update the project details, then save your changes.","projects.details.edit.save":"ğŸ’¾ Save Changes","projects.details.edit.cancel":"Cancel","projects.quote.sections.customer":"Customer info","projects.quote.sections.project":"Project info","projects.quote.sections.expenses":"Production services","projects.quote.sections.crew":"Crew","projects.quote.sections.financial":"Financial summary","projects.quote.sections.equipment":"Equipment","projects.quote.sections.notes":"Project notes"}});Lt({en:{"projects.reports.filters.confirmed.label":"Confirmation","projects.reports.filters.confirmed.all":"Confirmation: All","projects.reports.filters.confirmed.yes":"Confirmed","projects.reports.filters.confirmed.no":"Unconfirmed","projects.reports.table.columns.margin":"Profit margin","projects.reports.actions.exportExcel":"Export Excel","projects.reports.kpi.margin":"Profit margin","projects.reports.kpi.marginMeta":"Net profit Ã· revenue (excl. VAT)","projects.reports.kpi.netProfitMeta":"Sum of net profit for selected projects","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.margin":"Profit margin","projects.reports.kpi.revenue.details.projectExpenses":"Project expenses","projects.reports.table.sortable":"Sortable","projects.reports.table.sort.asc":"Ascending","projects.reports.table.sort.desc":"Descending"}});function As(){if(!Array.isArray(u.projects)||u.projects.length===0)return;let e=!1;const s=u.projects.map(r=>{if(r.projectCode)return r;const a=qt();return e=!0,{...r,projectCode:a}});e&&(u.projects=s)}function hr(){const{customers:e,technicians:s,equipment:r}=Pe();u.customers=Array.isArray(e)?e:[],u.technicians=Array.isArray(s)?s:[],u.equipment=Array.isArray(r)?r:[],u.reservations=G(),u.projects=ze(),As()}function br(){if(Ts(),t.technicianSelect){const e=t.technicianSelect.value,s=o(n("projects.form.selectTechnician","Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));t.technicianSelect.innerHTML=`<option value="">${s}</option>`+u.technicians.map(r=>{const a=n("projects.fallback.technicianName","Ø¹Ø¶Ùˆ {id}"),i=r.name||a.replace("{id}",b(String(r.id||"")));return`<option value="${r.id}">${o(i)}</option>`}).join(""),e&&(t.technicianSelect.value=e)}if(t.equipmentSelect){const e=t.equipmentSelect.value,s=o(n("projects.form.selectEquipment","Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©"));t.equipmentSelect.innerHTML=`<option value="">${s}</option>`+u.equipment.map(r=>{const a=r.desc||r.description||r.name||n("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©");return`<option value="${o(r.barcode||"")}">${o(a)}</option>`}).join(""),e&&(t.equipmentSelect.value=e)}}function Ce(e){if(!t.clientCompany)return;const s=e?.companyName||e?.company||"";t.clientCompany.value=s}function Ts(){if(!t.client)return;ks();const e=t.client.dataset?.customerId;if(e){const s=u.customers.find(r=>String(r.id)===String(e));s?Ce(s):(t.client.dataset.customerId="",Ce(null))}else Ce(null);document.activeElement===t.client&&yt()}function ks(){!t.client||!t.clientSuggestions||t.client.dataset.autocompleteAttached!=="true"&&(t.client.addEventListener("input",()=>{t.client.dataset.customerId="",yt(),Ce(null)}),t.client.addEventListener("focus",()=>{yt()}),t.client.addEventListener("blur",()=>{window.setTimeout(()=>Oe(),150)}),t.client.dataset.autocompleteAttached="true")}function Oe(){t.clientSuggestions&&(t.clientSuggestions.classList.remove("is-visible"),t.clientSuggestions.hidden=!0,t.clientSuggestions.innerHTML="")}function yt(){if(!t.client||!t.clientSuggestions)return;if(!Array.isArray(u.customers)||u.customers.length===0){const a=Pe();Array.isArray(a?.customers)&&a.customers.length&&(u.customers=a.customers)}const e=Cs(),s=Ie(t.client.value||""),r=s?e.filter(a=>{const i=Ie(a.name).includes(s),l=Ie(a.company||"").includes(s);return i||l}).slice(0,10):e.slice(0,10);if(!r.length){Oe();return}t.clientSuggestions.innerHTML=r.map(a=>{const i=a.company?`<div class="suggestion-item__meta">${o(a.company)}</div>`:"";return`
        <div class="suggestion-item" data-id="${o(String(a.id))}" data-name="${o(a.name)}" data-company="${o(a.company||"")}">
          <div class="suggestion-item__primary">${o(a.name)}</div>
          ${i}
        </div>
      `}).join(""),t.clientSuggestions.hidden=!1,t.clientSuggestions.classList.add("is-visible"),t.clientSuggestions.scrollTop=0,t.clientSuggestions.querySelectorAll(".suggestion-item").forEach(a=>{a.addEventListener("mousedown",i=>{i.preventDefault();const{id:l,name:p}=i.currentTarget.dataset;t.client&&(t.client.value=p||"",t.client.dataset.customerId=l||"");const c=i.currentTarget.dataset.company||"";Ce({companyName:c}),Oe()})})}function Cs(){return Array.isArray(u.customers)?u.customers.map(e=>{const s=(e.customerName||e.name||"").trim();return s?{id:e.id,name:s,company:(e.companyName||e.company||"").trim()}:null}).filter(Boolean):[]}function ws(e,s=""){if(!Array.isArray(u.customers)||u.customers.length===0)return null;if(s){const i=u.customers.find(l=>String(l.id)===String(s));if(i)return i}const r=Ie(e||"");if(!r)return null;const a=u.customers.find(i=>Ie(i.customerName||i.name||"")===r);return a||u.customers.find(i=>Ie(i.customerName||i.name||"").includes(r))||null}function Es(){return typeof window<"u"&&typeof window.flatpickr=="function"?window.flatpickr.bind(window):typeof globalThis<"u"&&typeof globalThis.flatpickr=="function"?globalThis.flatpickr.bind(globalThis):null}function vr(){t.form=document.getElementById("project-form"),t.title=document.getElementById("project-title"),t.type=document.getElementById("project-type"),t.client=document.getElementById("project-client"),t.clientSuggestions=document.getElementById("project-customer-suggestions"),t.clientCompany=document.getElementById("project-client-company"),t.paymentStatus=document.getElementById("project-payment-status"),t.startDate=document.getElementById("project-start-date"),t.startTime=document.getElementById("project-start-time"),t.endDate=document.getElementById("project-end-date"),t.endTime=document.getElementById("project-end-time"),t.description=document.getElementById("project-description"),t.technicianSelect=document.getElementById("project-technician-select"),t.addTechnicianBtn=document.getElementById("add-technician-btn"),t.technicianList=document.getElementById("project-technician-list"),t.equipmentSelect=document.getElementById("project-equipment-select"),t.equipmentQty=document.getElementById("project-equipment-qty"),t.addEquipmentBtn=document.getElementById("add-equipment-btn"),t.equipmentList=document.getElementById("project-equipment-list"),t.expenseLabel=document.getElementById("project-expense-label"),t.expenseAmount=document.getElementById("project-expense-amount"),t.expenseNote=document.getElementById("project-expense-note"),t.addExpenseBtn=document.getElementById("add-expense-btn"),t.expenseList=document.getElementById("project-expense-list"),t.servicesClientTotalIndicator=document.getElementById("project-services-client-total-indicator"),t.servicesClientTotalValue=document.getElementById("project-services-client-total-value"),t.discountType=document.getElementById("project-discount-type"),t.discountValue=document.getElementById("project-discount"),t.servicesClientPrice=document.getElementById("project-services-client-price"),t.paymentAddButton=document.getElementById("project-payment-add"),t.paymentHistory=document.getElementById("project-payment-history"),t.companyShare=document.getElementById("project-company-share"),t.paymentProgressType=document.getElementById("project-payment-progress-type"),t.paymentProgressValue=document.getElementById("project-payment-progress-value"),t.taxCheckbox=document.getElementById("project-tax"),t.linkedReservationBtn=document.getElementById("project-linked-reservation-btn"),t.submitBtn=t.form?.querySelector('[type="submit"]'),t.projectsTableBody=document.getElementById("project-table-body"),t.projectsCount=document.getElementById("projects-count"),t.projectsUpcoming=document.getElementById("projects-upcoming"),t.projectsExpenses=document.getElementById("projects-expenses"),t.projectsBudget=document.getElementById("projects-budget"),t.tableCount=document.getElementById("project-table-count"),t.search=document.getElementById("project-search"),t.detailsModalEl=document.getElementById("projectDetailsModal"),t.detailsBody=document.getElementById("project-details-body"),t.tabButtons=Array.from(document.querySelectorAll(".tab-button[data-tab-target]")),t.tabPanes=Array.from(document.querySelectorAll("[data-tab-pane]")),t.projectSubTabButtons=Array.from(document.querySelectorAll(".sub-tab-button[data-project-subtab-target]")),t.projectSubTabPanes=Array.from(document.querySelectorAll("[data-project-subtab]")),t.timeline=document.getElementById("project-timeline"),t.focusCards=document.getElementById("project-focus-cards"),t.detailsModalEl&&!t.detailsModalEl.dataset.projectListenerAttached&&(t.detailsModalEl.addEventListener("hidden.bs.modal",()=>{t.detailsBody&&(t.detailsBody.dataset.projectId="")}),t.detailsModalEl.dataset.projectListenerAttached="true")}function gr(){const e=Es();if(!e)return;["#project-start-date","#project-end-date","#project-start-time","#project-end-time"].forEach(p=>{const c=document.querySelector(p);if(c){try{c.setAttribute("autocomplete","off")}catch{}try{c.setAttribute("autocapitalize","off")}catch{}try{c.setAttribute("autocorrect","off")}catch{}try{c.setAttribute("spellcheck","false")}catch{}}});const s=[["#project-start-date",{dateFormat:"Y-m-d",allowInput:!0}],["#project-end-date",{dateFormat:"Y-m-d",allowInput:!0}]],r=[["#project-start-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}],["#project-end-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}]];[...s,...r].forEach(([p,c])=>{const d=document.querySelector(p);d&&e(d,c)});const a=p=>{if(p==null)return"";const c=["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"],d=["Û°","Û±","Û²","Û³","Û´","Ûµ","Û¶","Û·","Û¸","Û¹"],v=["0","1","2","3","4","5","6","7","8","9"];return String(p).split("").map(m=>{const h=c.indexOf(m);if(h>-1)return v[h];const S=d.indexOf(m);return S>-1?v[S]:m}).join("")},i=p=>{if(!p||p.dataset.normalizedDigits==="true")return;const c=()=>{const d=p.value||"",v=a(d);if(v!==d){const m=p.selectionStart,h=p.selectionEnd;p.value=v;try{if(typeof m=="number"&&typeof h=="number"){const S=v.length-d.length;p.setSelectionRange(Math.max(0,m+S),Math.max(0,h+S))}}catch{}}};p.addEventListener("input",c),p.addEventListener("blur",c);try{p.setAttribute("inputmode","numeric")}catch{}p.dataset.normalizedDigits="true"};i(t.startDate),i(t.endDate),i(t.startTime),i(t.endTime),t.startTime&&t.startTime._flatpickr?.altInput&&i(t.startTime._flatpickr.altInput),t.endTime&&t.endTime._flatpickr?.altInput&&i(t.endTime._flatpickr.altInput);const l=p=>{if(!p)return;const c=p._flatpickr,d=()=>{try{if(!c)return;const v=c.altInput&&typeof c.altInput.value=="string"?c.altInput.value.trim():"",m=typeof p.value=="string"?p.value.trim():"",h=v||m;if(!h)return;const S=v?c.config.altFormat:c.config.dateFormat,I=c.parseDate(h,S)||c.parseDate(h);I&&c.setDate(I,!0)}catch{}};p.addEventListener("blur",d),c?.altInput&&c.altInput.addEventListener("blur",d)};l(t.startTime),l(t.endTime)}function Mt(){["startDate","startTime","endDate","endTime"].forEach(e=>{const s=t[e];s&&(s._flatpickr?s._flatpickr.clear():s.value="")})}function xr(){const e=document.getElementById("logout-btn");e&&!e.dataset.listenerAttached&&(e.addEventListener("click",()=>ns()),e.dataset.listenerAttached="true")}async function Bt(e){if(u.projects.findIndex(i=>String(i.id)===String(e))===-1)return;let r=0;try{r=(G()||[]).filter(l=>String(l.projectId)===String(e)).length}catch{}const a=r>0?n("projects.confirm.deleteCascade",`âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡ (${r}). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`):n("projects.confirm.delete","Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ");if(window.confirm(a))try{try{const l=(G()||[]).filter(p=>String(p.projectId)===String(e));for(const p of l){const c=p.id??p.reservationId??p.reservation_code;if(c)try{await ps(c)}catch(d){console.warn("âš ï¸ failed to delete linked reservation",c,d)}}}catch{}await cs(e),await Dt(),await Ft(),u.projects=ze(),u.reservations=G(),Ae(),$e(),Ke(),document.dispatchEvent(new CustomEvent("projects:changed")),document.dispatchEvent(new CustomEvent("reservations:changed")),x(n("projects.toast.deleted","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡"))}catch(i){console.error("âŒ [projects] removeProject failed",i);const l=tt(i)?i.message:n("projects.toast.deleteFailed","ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");x(l,"error")}}async function Ns(e,{start:s=null,end:r=null}={}){if(!e)return!1;const i=G().filter(c=>String(c.projectId)===String(e));if(!i.length)return!1;let l=!1,p=0;for(const c of i){const d=c.id??c.reservationId;if(!d)continue;const v=String(c.status||"").toLowerCase();if(v==="completed"||v==="cancelled"||v==="canceled")continue;const m={};if(s&&(m.start_datetime=s),r&&(m.end_datetime=r),Object.keys(m).length!==0)try{await We(d,m),l=!0,p+=1}catch(h){console.warn("[projects] failed to update linked reservation schedule",d,h)}}if(l){u.reservations=G();try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const c=n("projects.toast.linkedReservationsScheduleUpdated","ØªÙ… ØªØ­Ø¯ÙŠØ« ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© ({count})","Updated linked reservations timing ({count})").replace("{count}",String(p));x(c)}catch{}}return l}async function Is(e,s){if(!e)return!1;const a=G().filter(d=>String(d.projectId)===String(e));if(!a.length)return!1;const i=typeof s=="string"?s.toLowerCase():"unpaid",l=i==="paid",p=l?"paid":i==="partial"?"partial":"unpaid";let c=!1;for(const d of a){const v=d.id??d.reservationId;if(!v)continue;const m=d.paid===!0||d.paid==="paid",h=d.paidStatus||d.paymentStatus||(m?"paid":"unpaid");m===l&&h===p||(await We(v,{paid_status:p,paid:l}),c=!0)}return c&&(u.reservations=G()),c}async function $s(e){if(!e)return!1;const s=G(),r=u.projects.find(l=>String(l.id)===String(e))||(Pe().projects||[]).find?.(l=>String(l.id)===String(e))||null,a=s.filter(l=>String(l.projectId)===String(e));if(!a.length)return!1;let i=!1;for(const l of a){const p=l.id??l.reservationId;if(!p)continue;const c=ds({...l,projectId:e},r);if(c.effectiveConfirmed)continue;const d=r?.status??c.projectStatus??"confirmed";await We(p,{confirmed:!0,status:d}),i=!0}return i&&(u.reservations=G()),i}async function ht(e,s){if(!e)return!1;const r=await Is(e,s);return r&&document.dispatchEvent(new CustomEvent("reservations:changed")),r}async function Ls(e){if(!e)return!1;const r=G().filter(i=>String(i.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const i of r){const l=i.id??i.reservationId;if(l)try{await We(l,{status:"cancelled",cancelled:!0}),a=!0}catch(p){console.warn("[projects] failed to cancel linked reservation",l,p)}}return a&&(u.reservations=G(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}let jt=!1;const rt="projects:create:draft",qs="projects.html#projects-section";let Qe=!1,ve=[];function Vt(e){return e?e instanceof HTMLElement?e:typeof e=="string"?document.getElementById(e):null:null}function Ds(e=t.companyShare){const s=Vt(e);if(!s||s.checked!==!0)return null;const r=s.dataset.companyShare??s.value??ue,a=b(String(r).replace("%","").trim()),i=Number.parseFloat(a);return!Number.isFinite(i)||i<=0?ue:i}function Ve(e=t.companyShare,s=ue){const r=Vt(e);if(!r)return;const a=r.dataset.companyShare??r.value??s,i=b(String(a).replace("%","").trim());let l=Number.parseFloat(i);(!Number.isFinite(l)||l<=0)&&(l=s),r.dataset.companyShare=String(l),r.checked=!0}function He(e){const s=t.taxCheckbox,r=t.companyShare;if(!s||!r||Qe)return;Qe=!0;const a=()=>{x(n("projects.toast.companyShareRequiresTax","âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©"))};if(e==="share")if(r.checked){if(s.disabled){r.checked=!1,a(),Qe=!1;return}s.checked||(s.checked=!0),Ve(r)}else s.checked&&!s.disabled&&(s.checked=!1);else e==="tax"&&(s.checked?Ve(r):r.checked&&(r.checked=!1));Qe=!1}function Ht({equipmentEstimate:e=0,expensesTotal:s=0,servicesClientPrice:r=0,discountValue:a=0,discountType:i="percent",applyTax:l=!1,companyShareEnabled:p=!1,companySharePercent:c=null}={}){const d=Number(e)+Number(r),v=Number.isFinite(Number(a))?Number(a):0;let m=0;i==="amount"?m=v:m=d*(v/100),(!Number.isFinite(m)||m<0)&&(m=0),m>d&&(m=d);const h=Math.max(0,d-m),S=p&&l&&Number.isFinite(Number(c))&&Number(c)>0?Number(c):0,I=S>0?Number((h*(S/100)).toFixed(2)):0,E=h+I;let N=l?E*Be:0;(!Number.isFinite(N)||N<0)&&(N=0),N=Number(N.toFixed(2));const $=Number((E+N).toFixed(2));return{baseSubtotal:d,discountAmount:m,subtotalAfterDiscount:h,companyShareAmount:I,taxableAmount:E,taxAmount:N,totalWithTax:$}}function Sr(){t.form&&!t.form.dataset.listenerAttached&&(t.form.addEventListener("submit",zs),t.form.dataset.listenerAttached="true"),t.form&&!t.form.dataset.resetListenerAttached&&(t.form.addEventListener("reset",()=>{t.client&&(t.client.dataset.customerId=""),Oe(),Mt(),t.type&&(t.type.value=""),Ce(null),Yt(),Ot()}),t.form.dataset.resetListenerAttached="true"),Rs(),Fs(),t.search&&!t.search.dataset.listenerAttached&&(t.search.addEventListener("input",()=>{u.filters.search=b(t.search.value||"").trim().toLowerCase(),Ae()}),t.search.dataset.listenerAttached="true")}function Ot(){bs(),u.editingProjectId=null,t.form&&(delete t.form.dataset.editingId,t.form.dataset.mode="create"),Le(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=""),u.servicesClientPriceTotal=0,t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.taxCheckbox&&(t.taxCheckbox.checked=!1),t.discountType&&(t.discountType.value="percent"),t.discountValue&&(t.discountValue.value=""),t.companyShare&&(t.companyShare.checked=!1,t.companyShare.dataset.companyShare=String(ue)),t.paymentStatus&&(t.paymentStatus.value="unpaid"),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected,t.paymentProgressType&&(t.paymentProgressType.value="percent"),t.paymentProgressValue&&(t.paymentProgressValue.value=""),ve=[],t.paymentHistory&&(t.paymentHistory.innerHTML=""),Jt(),Ue(),He("tax"),qe()}function Pr(){t.addTechnicianBtn&&t.addTechnicianBtn.dataset.listenerAttached!=="true"&&(t.addTechnicianBtn.addEventListener("click",_s),t.addTechnicianBtn.dataset.listenerAttached="true"),t.addEquipmentBtn&&t.addEquipmentBtn.dataset.listenerAttached!=="true"&&(t.addEquipmentBtn.addEventListener("click",Ms),t.addEquipmentBtn.dataset.listenerAttached="true")}function Ar(){ft(t.technicianList,e=>{if(e.matches('[data-action="remove-technician"]')){const s=e.dataset.id;u.selectedTechnicians=u.selectedTechnicians.filter(r=>r!==s),Ut()}}),ft(t.equipmentList,e=>{if(e.matches('[data-action="remove-equipment"]')){const s=e.dataset.id;u.selectedEquipment=u.selectedEquipment.filter(r=>r.barcode!==s),zt()}}),ft(t.expenseList,e=>{if(e.matches('[data-action="remove-expense"]')){const s=e.dataset.id;u.expenses=u.expenses.filter(r=>String(r.id)!==String(s)),Wt(),$e(),Gt(),qe()}})}function Rs(){t.discountValue&&t.discountValue.dataset.listenerAttached!=="true"&&(t.discountValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=b(s.value||""))}),t.discountValue.dataset.listenerAttached="true"),t.companyShare&&t.companyShare.dataset.listenerAttached!=="true"&&(t.companyShare.addEventListener("change",()=>{He("share")}),t.companyShare.dataset.listenerAttached="true"),t.taxCheckbox&&t.taxCheckbox.dataset.projectListenerAttached!=="true"&&(t.taxCheckbox.addEventListener("change",()=>{He("tax")}),t.taxCheckbox.dataset.projectListenerAttached="true"),t.paymentStatus&&t.paymentStatus.dataset.billingListenerAttached!=="true"&&(t.paymentStatus.addEventListener("change",()=>{t.paymentStatus.dataset.userSelected="true"}),t.paymentStatus.dataset.billingListenerAttached="true"),t.paymentProgressValue&&t.paymentProgressValue.dataset.listenerAttached!=="true"&&(t.paymentProgressValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=b(s.value||""))}),t.paymentProgressValue.dataset.listenerAttached="true"),t.servicesClientPrice&&t.servicesClientPrice.dataset.normalizeAttached!=="true"&&(t.servicesClientPrice.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const r=s.selectionStart,a=b(s.value||"");if(s.value=a,r!=null){const i=Math.min(a.length,r);s.setSelectionRange(i,i)}}),t.servicesClientPrice.dataset.normalizeAttached="true"),He(t.companyShare?.checked?"share":"tax"),qe()}function wt(){const e=t.paymentHistory;if(!e)return;const s=Array.isArray(ve)?ve:[];if(!s.length){e.innerHTML=`<div class="reservation-payment-history__empty">${o(n("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;return}const r=s.map((a,i)=>{const l=Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?k(Number(a.amount)):"â€”",p=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${b(Number(a.percentage).toFixed(2))}%`:"â€”",c=a?.recordedAt?b(st(a.recordedAt)):"â€”",d=a?.type==="percent"?n("reservations.paymentHistory.type.percent","Ùª Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):n("reservations.paymentHistory.type.amount","ğŸ’µ Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©");return`
      <tr>
        <td>${o(d)}</td>
        <td>${o(l)}</td>
        <td>${o(p)}</td>
        <td>${o(c)}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${i}" aria-label="${o(n("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}">ğŸ—‘ï¸</button>
        </td>
      </tr>`}).join("");e.innerHTML=`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${o(n("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>`}function Fs(){t.paymentAddButton&&t.paymentAddButton.dataset.listenerAttached!=="true"&&(t.paymentAddButton.addEventListener("click",e=>{e.preventDefault();const s=t.paymentProgressType?.value==="amount"?"amount":"percent",r=b(t.paymentProgressValue?.value||"").replace("%","").trim(),a=Number.parseFloat(r);if(!Number.isFinite(a)||a<=0){x(n("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©"));return}ve.push({type:s,value:a,recordedAt:new Date().toISOString()}),t.paymentProgressValue&&(t.paymentProgressValue.value=""),wt()}),t.paymentAddButton.dataset.listenerAttached="true"),t.paymentHistory&&t.paymentHistory.dataset.listenerAttached!=="true"&&(t.paymentHistory.addEventListener("click",e=>{const s=e.target.closest('[data-action="remove-payment"]');if(!s)return;const r=Number.parseInt(s.dataset.index||"-1",10);!Number.isInteger(r)||r<0||(ve.splice(r,1),wt())}),t.paymentHistory.dataset.listenerAttached="true")}function Tr(){t.addExpenseBtn&&t.addExpenseBtn.dataset.listenerAttached!=="true"&&(t.addExpenseBtn.addEventListener("click",Bs),t.addExpenseBtn.dataset.listenerAttached="true"),t.expenseAmount&&t.expenseAmount.dataset.normalizeAttached!=="true"&&(t.expenseAmount.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const r=s.selectionStart,a=b(s.value||"");if(s.value=a,r!=null){const i=Math.min(a.length,r);s.setSelectionRange(i,i)}}),t.expenseAmount.dataset.normalizeAttached="true")}function ft(e,s){!e||e.dataset.listenerAttached==="true"||(e.addEventListener("click",r=>{const a=r.target;a instanceof HTMLElement&&s(a)}),e.dataset.listenerAttached="true")}function kr({onViewDetails:e}){!t.projectsTableBody||t.projectsTableBody.dataset.listenerAttached==="true"||(t.projectsTableBody.addEventListener("click",s=>{const r=s.target;if(r instanceof HTMLElement){if(r.matches('[data-action="view-details"]')){const a=r.dataset.id;e?.(a);return}if(r.matches('[data-action="delete-project"]')){if(!os()){is();return}const a=r.dataset.id;Bt(a)}}}),t.projectsTableBody.dataset.listenerAttached="true")}function Cr(){const{customers:e}=Pe();u.customers=Array.isArray(e)?e:[],Le(),Ae(),Ke()}function wr(){const{technicians:e}=Pe();u.technicians=Array.isArray(e)?e:[],Le(),Ae(),Ke()}function Er(e){const{reservations:s}=Pe();u.reservations=Array.isArray(s)?s:[],Ae();const r=t.detailsModalEl&&t.detailsModalEl.classList.contains("show"),a=t.detailsBody?.dataset.projectId;r&&a&&u.projects.find(l=>String(l.id)===String(a))&&e?.(a)}function _s(){const e=t.technicianSelect?.value;if(!e){x(n("projects.toast.selectTechnician","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));return}if(u.selectedTechnicians.includes(e)){x(n("projects.toast.technicianAlreadyAdded","âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„"));return}u.selectedTechnicians.push(e),Le(),x(n("projects.toast.technicianAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"))}function Ms(){const e=t.equipmentSelect?.value;if(!e){x(n("projects.toast.selectEquipment","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©"));return}const s=Math.max(1,parseInt(t.equipmentQty?.value||"1",10)||1),r=u.selectedEquipment.find(a=>a.barcode===e);r?r.qty+=s:u.selectedEquipment.push({barcode:e,qty:s}),Le(),x(n("projects.toast.equipmentAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹"))}function Bs(){const e=(t.expenseLabel?.value||"").trim(),s=b(t.expenseAmount?.value||"0"),r=Number(s),a=b(t.servicesClientPrice?.value||"0"),i=Number.parseFloat(a)||0,l=(t.expenseNote?.value||"").trim();if(!e){x(n("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ"));return}if(!Number.isFinite(r)||r<0){x(n("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­"));return}u.expenses.push({id:Date.now(),label:e,amount:r,salePrice:i,note:l}),Gt(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=b(String(s))),t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.expenseNote&&(t.expenseNote.value=""),Le(),$e(),qe()}function Le(){Ut(),zt(),Wt(),Jt(),qe()}function Ut(){t.technicianList&&Kt(t.technicianList,u.selectedTechnicians,e=>{const r=u.technicians.find(a=>String(a.id)===String(e))?.name||n("projects.fallback.technicianName","Ø¹Ø¶Ùˆ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…");return`
      <span class="chip">
        ${o(r)}
        <button type="button" class="chip__remove" data-action="remove-technician" data-id="${o(String(e))}" aria-label="${o(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function zt(){t.equipmentList&&Kt(t.equipmentList,u.selectedEquipment,e=>{const s=u.equipment.find(i=>String(i.barcode||"")===String(e.barcode)),r=s?.desc||s?.description||s?.name||n("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©"),a=b(String(e.qty||1));return`
      <span class="chip">
        ${o(r)} (x${a})
        <button type="button" class="chip__remove" data-action="remove-equipment" data-id="${o(String(e.barcode))}" aria-label="${o(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function Wt(){if(!t.expenseList)return;const e=Array.isArray(u.expenses)?u.expenses:[];if(!e.length){const r=o(_t(t.expenseList));t.expenseList.innerHTML=`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${o(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${o(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${o(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${o(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${o(n("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${r}</td></tr>
          </tbody>
        </table>
      </div>`;return}const s=e.map(r=>{const a=o(r.label||""),i=k(Number(r.amount)||0),l=k(Number(r.salePrice)||0),p=o(r.note||""),c=o(String(r.id)),d=o(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©"));return`
      <tr>
        <td>${a}</td>
        <td>${o(i)}</td>
        <td>${o(l)}</td>
        <td>${p||"â€”"}</td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${c}" aria-label="${d}">âœ–</button>
        </td>
      </tr>`}).join("");t.expenseList.innerHTML=`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
            <tr>
              <th>${o(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${o(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${o(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${o(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${o(n("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
        </thead>
        <tbody>${s}</tbody>
      </table>
    </div>`}function Kt(e,s,r){if(e){if(!s||s.length===0){const a=o(_t(e));e.innerHTML=`<span class="text-muted">${a}</span>`;return}e.innerHTML=s.map(a=>r(a)).join("")}}function Jt(){if(!t.submitBtn)return;const e=!!u.editingProjectId,s=e?"projects.form.buttons.update":"projects.form.buttons.save",r=e?"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹";t.submitBtn.textContent=n(s,r)}function Vs(){return u.expenses.reduce((e,s)=>e+(Number(s.amount)||0),0)}function Et(e){return b(String(e||"")).trim().toLowerCase()}function Hs(){if(!Array.isArray(u.selectedEquipment)||u.selectedEquipment.length===0)return{items:[],missing:[]};const e=new Map((u.equipment||[]).map(a=>[Et(a?.barcode),a])),s=[],r=[];return u.selectedEquipment.forEach(a=>{const i=Et(a?.barcode);if(!i){s.push(a?.barcode||"");return}const l=e.get(i);if(!l||l.id==null){s.push(a?.barcode||i);return}const p=Number.parseInt(String(a?.qty??0),10);r.push({equipmentId:l.id,qty:Number.isInteger(p)&&p>0?p:1})}),{items:r,missing:s}}function Os(e){return!e||!Array.isArray(e.equipment)?[]:e.equipment.map(s=>{const r=s?.equipmentId??s?.equipment_id??s?.id??null,a=Number.parseInt(String(s?.qty??s?.quantity??0),10);return r?{equipmentId:r,qty:Number.isInteger(a)&&a>0?a:1}:null}).filter(Boolean)}function Us(){return u.selectedEquipment.reduce((e,s)=>{const r=u.equipment.find(i=>String(i.barcode||"")===String(s.barcode)),a=Number(r?.price||r?.daily_rate||r?.dailyRate||0);return e+a*(s.qty||1)},0)}async function zs(e){if(e.preventDefault(),jt)return;const s=t.title?.value.trim(),r=t.type?.value||"",a=t.client?.value?.trim()||"",i=t.client?.dataset?.customerId||"",l=t.startDate?.value?.trim()||"",p=t.startTime?.value?.trim()||"";if(!s||!r||!l){x(n("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"));return}const c=ws(a,i);if(!c){x(n("projects.toast.customerNotFound","âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„")),t.client?.focus();return}const d=String(c.id);t.client&&(t.client.dataset.customerId=d,t.client.value=c.customerName||c.name||t.client.value),Ce(c);const v=t.endDate?.value?.trim()||"",m=t.endTime?.value?.trim()||"",h=Ze(l,p),S=v?Ze(v,m):"",I=new Date(h),E=S?new Date(S):null;if(E&&I>E){x(n("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"));return}t.expenseAmount&&(t.expenseAmount.value=b(t.expenseAmount.value||""));const N=Vs(),$=Us(),K=b(t.servicesClientPrice?.value||"");let U=u.servicesClientPriceTotal||Number.parseFloat(K);(!Number.isFinite(U)||U<0)&&(U=0);const Q=t.taxCheckbox?.checked===!0,L=t.discountType?.value==="amount"?"amount":"percent",Z=b(t.discountValue?.value||"0");let z=Number.parseFloat(Z);(!Number.isFinite(z)||z<0)&&(z=0);const fe=t.companyShare,ye=fe?.checked===!0;let me=ye?Number.parseFloat(b(String(fe.dataset.companyShare??fe.value??ue))):null;(!Number.isFinite(me)||me<=0)&&(me=ye?ue:null);const oe=Ht({equipmentEstimate:$,expensesTotal:N,servicesClientPrice:U,discountValue:z,discountType:L,applyTax:Q,companyShareEnabled:ye,companySharePercent:me}),he=t.paymentProgressType?.value==="amount"?"amount":"percent",ie=b(t.paymentProgressValue?.value||""),ge=ie?Number.parseFloat(ie):null,ne=Me({totalAmount:oe.totalWithTax,progressType:he,progressValue:ge,history:Array.isArray(ve)?[...ve]:[]}),be=t.paymentStatus?.dataset?.userSelected==="true",we=(t.paymentStatus?.value||"unpaid").toLowerCase(),re=["paid","partial"].includes(we)?we:"unpaid",ae=Xe({manualStatus:be?re:null,paidAmount:ne.paidAmount,paidPercent:ne.paidPercent,totalAmount:oe.totalWithTax}),ce=be?re:ae;!be&&t.paymentStatus&&(t.paymentStatus.value=ce),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected;const{items:le,missing:Ee}=Hs();if(Ee.length){x(n("projects.toast.equipmentMissing","âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),"error");return}const je=!!u.editingProjectId,pe=je?u.projects.find(f=>String(f.id)===String(u.editingProjectId)):null;if(je&&!pe){x(n("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const j=c.companyName||c.company||"",y=t.description?.value.trim()||"",g=Rt({projectCode:pe?.projectCode||(je?null:qt()),title:s,type:r,clientId:d,clientCompany:j,description:y,start:h,end:S||null,applyTax:Q,paymentStatus:ce,equipmentEstimate:$,expenses:u.expenses.map(f=>({id:f.id,label:f.label,amount:f.amount,salePrice:f.salePrice,note:f.note||void 0})),servicesClientPrice:U,discount:z,discountType:L,companyShareEnabled:ye&&Q,companySharePercent:ye&&Q?me:null,companyShareAmount:oe.companyShareAmount,taxAmount:oe.taxAmount,totalWithTax:oe.totalWithTax,confirmed:pe?.confirmed??!1,technicians:u.selectedTechnicians,equipment:le,paidAmount:ne.paidAmount,paidPercentage:ne.paidPercent,paymentProgressType:ne.paymentProgressType,paymentProgressValue:ne.paymentProgressValue,payments:Array.isArray(ve)?ve:[]});jt=!0;try{let f=pe?.projectId??pe?.id??null;if(je){const A=await gt(f??u.editingProjectId,g);f=A?.projectId??A?.id??f,await ht(f,ce),x(n("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"))}else{const A=await ls(g);f=A?.projectId??A?.id??null,await ht(f,ce),x(n("projects.toast.saved","âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"));try{vt({projectsTab:"projects-section",projectsSubTab:"projects-list-tab"}).catch(()=>{});const C=document.querySelector('.tab-button[data-tab-target="projects-section"]');C&&typeof C.click=="function"&&C.click();const w=document.querySelector('.sub-tab-button[data-project-subtab-target="projects-list-tab"]');w&&typeof w.click=="function"&&setTimeout(()=>w.click(),0)}catch{}}await Ys(f)||Yt(),u.editingProjectId=null,t.form.reset(),Ot(),Mt(),Oe(),t.client&&(t.client.dataset.customerId=""),t.type&&(t.type.value="");try{await Dt()}catch{}u.projects=ze(),u.reservations=G(),Ae(),$e(),document.dispatchEvent(new CustomEvent("projects:changed"))}catch(f){console.error("âŒ [projects] handleSubmitProject failed",f);const T=tt(f)?f.message:n("projects.toast.saveFailed","ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");x(T,"error")}finally{jt=!1}}function Ze(e,s){if(!e)return"";const r=s&&/\d{1,2}:\d{2}/.test(s)?s:"00:00",[a="00",i="00"]=r.split(":"),l=a.padStart(2,"0"),p=i.padStart(2,"0");return`${e}T${l}:${p}`}function at(){if(typeof window>"u"||!window.sessionStorage)return null;const e=window.sessionStorage.getItem(rt);if(!e)return null;try{const s=JSON.parse(e);return s&&typeof s=="object"?s:null}catch(s){return console.warn("âš ï¸ [projects] Failed to parse project form draft",s),null}}function St(e){if(!(typeof window>"u"||!window.sessionStorage))try{window.sessionStorage.setItem(rt,JSON.stringify(e))}catch(s){console.warn("âš ï¸ [projects] Unable to persist project form draft",s)}}function Yt(){typeof window>"u"||!window.sessionStorage||(window.sessionStorage.removeItem(rt),Ue())}function Ws(){const e=at()||{};return{...e,type:t.type?.value||"",title:t.title?.value||"",client:t.client?.value||"",customerId:t.client?.dataset.customerId||"",clientCompany:t.clientCompany?.value||"",paymentStatus:t.paymentStatus?.value||"unpaid",taxChecked:t.taxCheckbox?.checked===!0,discountType:t.discountType?.value||"percent",discountValue:t.discountValue?.value||"",companyShareEnabled:t.companyShare?.checked===!0,companySharePercent:t.companyShare?.dataset.companyShare||t.companyShare?.value||String(ue),paymentProgressType:t.paymentProgressType?.value||"percent",paymentProgressValue:t.paymentProgressValue?.value||"",startDate:t.startDate?.value||"",startTime:t.startTime?.value||"",endDate:t.endDate?.value||"",endTime:t.endTime?.value||"",description:t.description?.value||"",expenses:Array.isArray(u.expenses)?u.expenses.map(s=>({...s})):[],servicesClientPriceTotal:Number.isFinite(Number(u.servicesClientPriceTotal))?u.servicesClientPriceTotal:0,technicians:Array.isArray(u.selectedTechnicians)?[...u.selectedTechnicians]:[],equipment:Array.isArray(u.selectedEquipment)?u.selectedEquipment.map(s=>({...s})):[],linkedReservationIds:Array.isArray(e.linkedReservationIds)?[...e.linkedReservationIds]:[],savedAt:Date.now()}}function Nr(){const e=at();return e?(t.type&&(t.type.value=e.type||""),t.title&&(t.title.value=e.title||""),t.client&&(t.client.value=e.client||"",t.client.dataset.customerId=e.customerId||""),t.clientCompany&&(t.clientCompany.value=e.clientCompany||""),t.paymentStatus&&e.paymentStatus&&(t.paymentStatus.value=e.paymentStatus),t.taxCheckbox&&(t.taxCheckbox.checked=e.taxChecked===!0),t.discountType&&e.discountType&&(t.discountType.value=e.discountType),t.discountValue&&(t.discountValue.value=e.discountValue||""),t.companyShare&&(e.companySharePercent?t.companyShare.dataset.companyShare=String(e.companySharePercent):t.companyShare.dataset.companyShare=String(ue),t.companyShare.checked=e.companyShareEnabled===!0),t.paymentProgressType&&e.paymentProgressType&&(t.paymentProgressType.value=e.paymentProgressType),t.paymentProgressValue&&(t.paymentProgressValue.value=e.paymentProgressValue||""),u.servicesClientPriceTotal=Number.isFinite(Number(e.servicesClientPriceTotal))?Number(e.servicesClientPriceTotal):0,t.startDate&&(t.startDate.value=e.startDate||""),t.startTime&&(t.startTime.value=e.startTime||""),t.endDate&&(t.endDate.value=e.endDate||""),t.endTime&&(t.endTime.value=e.endTime||""),t.description&&(t.description.value=e.description||""),u.expenses=Array.isArray(e.expenses)?e.expenses.map(s=>({...s})):[],u.selectedTechnicians=Array.isArray(e.technicians)?[...e.technicians]:[],u.selectedEquipment=Array.isArray(e.equipment)?e.equipment.map(s=>({...s})):[],He("tax"),Ue(),qe(),!0):(Ue(),!1)}function Ir(){!t.linkedReservationBtn||t.linkedReservationBtn.dataset.listenerAttached==="true"||(t.linkedReservationBtn.addEventListener("click",Ks),t.linkedReservationBtn.dataset.listenerAttached="true")}function Ks(e){e.preventDefault();const s=e.currentTarget;if(s?.classList?.contains("btn-disabled")||s?.getAttribute("aria-disabled")==="true"){x(n("projects.form.linkedReservation.buttonDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"));return}const a=Ws();if(!(a.customerId&&a.customerId!==""||a.client&&a.client.trim())){x(n("projects.form.linkedReservation.missingClient","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}const l=a.startDate&&a.startTime,p=a.endDate&&a.endTime;if(!l||!p){x(n("projects.form.linkedReservation.missingSchedule","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}St(a);const c=Js(a);let d="";try{d=encodeURIComponent(JSON.stringify(c))}catch(m){console.warn("âš ï¸ [projects] Unable to encode reservation context",m)}vt({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(m=>{console.warn("âš ï¸ [projects] Failed to persist dashboard preference before redirect",m)});const v=d?`?reservationProjectContext=${d}`:"";window.location.href=`dashboard.html${v}#reservations`}function Js(e){const s=Ze(e.startDate,e.startTime)||null,r=Ze(e.endDate,e.endTime)||null;return{fromProjectForm:!0,draftStorageKey:rt,returnUrl:qs,start:s,end:r,customerId:e.customerId||null,customerName:e.client||"",clientCompany:e.clientCompany||"",projectTitle:e.title||"",projectType:e.type||"",description:e.description||""}}async function Ys(e){if(!e)return;const s=at(),r=Array.isArray(s?.linkedReservationIds)?s.linkedReservationIds:[];if(!r.length)return;const a=[];let i=!1;for(const p of r){const c=p!=null?String(p):"";if(c)try{await We(c,{project_id:e}),i=!0}catch(d){console.error("âŒ [projects] Failed to link reservation to project",c,d),a.push(c)}}if(i)try{await Ft(),u.reservations=G(),document.dispatchEvent(new CustomEvent("reservations:changed"))}catch(p){console.warn("âš ï¸ [projects] Failed to refresh reservations after linking",p)}const l={linkedReservationIds:a,savedAt:Date.now()};return St(l),a.length&&x(n("projects.toast.linkReservationFailed","âš ï¸ ØªØ¹Ø°Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§"),"error"),Ue(),a.length}function Gs(){const e=new Map,s=a=>{if(!a)return;[a.id,a.reservationId,a.reservation_id,a.reservation_code].map(l=>l!=null?String(l):"").filter(Boolean).forEach(l=>{e.has(l)||e.set(l,a)})};Array.isArray(u.reservations)&&u.reservations.forEach(s);const r=Pe();return Array.isArray(r?.reservations)&&r.reservations.forEach(s),e}function Qs(e){if(!e||typeof e!="object")return"";const s=[e.name,e.full_name,e.fullName,e.technician_name,e.technicianName,e.label,e.displayName];for(const r of s)if(typeof r=="string"&&r.trim())return r.trim();return""}function Xs(e){if(!e)return[];const s=new Set;(Array.isArray(e.techniciansDetails)?e.techniciansDetails:[]).forEach(i=>{const l=Qs(i);l&&s.add(l)});const a=Array.isArray(e.technicians)?e.technicians:[];if(a.length){const i=Array.isArray(u.technicians)?u.technicians:[];a.forEach(l=>{const p=i.find(d=>String(d?.id)===String(l)),c=p?.name||p?.full_name||"";c&&s.add(String(c).trim())})}return Array.from(s)}function Ue(){const e=document.getElementById("project-linked-reservation-summary");if(!e)return;const s=at(),r=t.linkedReservationBtn;let a=Array.isArray(s?.linkedReservationIds)?Array.from(new Set(s.linkedReservationIds.map(c=>String(c)).filter(Boolean))):[];const i=Gs(),l=a.filter(c=>i.has(c));if(l.length!==a.length){a=l;const c={...s||{},linkedReservationIds:a,savedAt:Date.now()};St(c)}if(!a.length){e.dataset.state="empty",e.innerHTML=`<p class="project-linked-reservation__summary-empty">${o(n("projects.form.linkedReservation.empty","Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯."))}</p>`,r&&(r.disabled=!1,r.classList.remove("btn-disabled"),r.removeAttribute("aria-disabled"),r.title="");return}const p=a.map(c=>{const d=i.get(c);if(!d)return`
        <li class="project-linked-reservation__summary-item">
          <div class="project-linked-reservation__summary-item-title">#${o(b(c))}</div>
          <div class="project-linked-reservation__summary-item-meta">
            <span>${o(n("projects.form.linkedReservation.pendingItem","ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ ÙˆØ³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."))}</span>
          </div>
        </li>`;const v=d.reservation_code||d.reservationId||d.id||c,m=`#${b(String(v))}`,h=Array.isArray(d.items)?d.items:[],S=h.reduce((L,Z)=>L+(Number(Z?.qty)||0),0)||h.length||0,I=Xs(d),N=(Array.isArray(d.technicians)?d.technicians:[]).length||I.length||0,$=vs(d),K=[],U=n("projects.form.linkedReservation.meta.equipment","Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}").replace("{count}",b(String(S)));K.push(U);const Q=n("projects.form.linkedReservation.meta.crew","Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}").replace("{count}",b(String(N)));if(K.push(Q),I.length){const L=typeof Tt=="function"&&Tt()==="en"?", ":"ØŒ ",Z=n("projects.form.linkedReservation.meta.crewNames","Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}").replace("{names}",I.join(L));K.push(Z)}if(Number.isFinite($)){const L=n("projects.form.linkedReservation.meta.total","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}").replace("{amount}",k($));K.push(L)}return`
      <li class="project-linked-reservation__summary-item">
        <div class="project-linked-reservation__summary-item-title">${o(m)}</div>
        <div class="project-linked-reservation__summary-item-meta">
          ${K.map(L=>`<span>${o(L)}</span>`).join("")}
        </div>
      </li>`}).join("");e.dataset.state="has-linked",e.innerHTML=`<ul class="project-linked-reservation__summary-list">${p}</ul>`,r&&(r.disabled=!1,r.classList.add("btn-disabled"),r.setAttribute("aria-disabled","true"),r.setAttribute("data-allow-click","true"),r.title=n("projects.form.linkedReservation.buttonDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))}function Gt(){const e=Array.isArray(u.expenses)?u.expenses.reduce((s,r)=>s+(Number(r?.salePrice)||0),0):0;u.servicesClientPriceTotal=Math.round(e*100)/100}function qe(){t.servicesClientTotalIndicator||document.getElementById("project-services-client-total-indicator");const e=t.servicesClientTotalValue||document.getElementById("project-services-client-total-value");if(!e)return;const s=Number(u.servicesClientPriceTotal)||0;e.textContent=k(s)}function bt(e){const s=u.projects.find(P=>String(P.id)===String(e));if(!s||!t.detailsBody)return;t.detailsBody.dataset.mode="view",t.detailsBody.dataset.projectId=String(s.id);const a=(u.customers.length?u.customers:Pe().customers||[]).find(P=>String(P.id)===String(s.clientId)),i=Zt(s.type),p=s.description?.trim()||n("projects.fallback.noDescription","Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ"),c=a?.customerName||n("projects.fallback.unknownClient","Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"),d=a?.phone??a?.customerPhone??s.clientPhone??s.customerPhone??"",v=d?b(String(d).trim()):n("projects.details.client.noPhone","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­"),m=a?.email??s.clientEmail??s.customerEmail??"",h=m?String(m).trim():n("projects.details.client.noEmail","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­"),S=(s.clientCompany||a?.companyName||"").trim(),I=s.projectCode||`PRJ-${b(String(s.id))}`,E=b(I),N=xt(s.id),$=N.reduce((P,D)=>P+es(D),0),K=Number($.toFixed(2)),U=N.length,{subtotal:Q,applyTax:L,expensesTotal:Z}=gs(s),z=Number(s?.servicesClientPrice??s?.services_client_price??0),fe=Q,ye=L?Number(((fe+K)*Be).toFixed(2)):0,me=Number((fe+K+ye).toFixed(2)),oe=xs(s),he=s?.cancelled===!0||s?.status==="cancelled"||s?.status==="canceled"?"cancelled":oe,ie=n(`projects.status.${he}`,Ss[he]||he),ne=(()=>{try{const P=s.start?new Date(s.start):null,D=s.end?new Date(s.end):P?new Date(P.getTime()+3600*1e3):null;return!P||!D||Number.isNaN(P.getTime())||Number.isNaN(D.getTime())?!1:u.projects.some(M=>{if(!M||String(M.id)===String(s.id))return!1;const Y=M.start?new Date(M.start):null,F=M.end?new Date(M.end):Y?new Date(Y.getTime()+3600*1e3):null;if(!Y||!F||Number.isNaN(Y.getTime())||Number.isNaN(F.getTime()))return!1;const B=Math.max(P.getTime(),Y.getTime()),_=Math.min(D.getTime(),F.getTime());return B<_})}catch{return!1}})()&&(he==="upcoming"||he==="ongoing")?"conflict":he,we={upcoming:"Ù‚Ø§Ø¯Ù…",ongoing:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°",completed:"Ù…ÙƒØªÙ…Ù„",conflict:"ØªØ¹Ø§Ø±Ø¶"}[ne]||ie,ae={upcoming:"timeline-status-badge timeline-status-badge--upcoming",ongoing:"timeline-status-badge timeline-status-badge--ongoing",completed:"timeline-status-badge timeline-status-badge--completed",conflict:"timeline-status-badge timeline-status-badge--conflict",cancelled:"timeline-status-badge timeline-status-badge--cancelled"}[ne]||"timeline-status-badge timeline-status-badge--upcoming",ce=typeof s.paymentStatus=="string"?s.paymentStatus.toLowerCase():"",le=cr(s),Ee=le.length>0,je=Ee?0:Number(s.paidAmount)||0,pe=Ee?0:Number(s.paidPercent)||0;let j=me,y,g,f,T,A,C,w,R,J,H,ee="";const nt=n("projects.focus.confirmed","âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯"),De=s.confirmed===!0||s.confirmed==="true"?`<span class="reservation-chip status-confirmed">${o(nt)}</span>`:"";let q=[];if(U>0){const P=N.reduce((Ge,de)=>{const ss=Array.isArray(de.items)?de.items:[],At=Array.isArray(de.crewAssignments)?de.crewAssignments:[],Se=At.length?At:Array.isArray(de.technicians)?de.technicians:[],rs=Array.isArray(Se)&&Se.length&&typeof Se[0]=="object",as=Array.isArray(Se)&&Se.length&&typeof Se[0]!="object",mt=us({items:ss,technicianIds:as?Se:[],crewAssignments:rs?Se:[],discount:de.discount??0,discountType:de.discountType||"percent",applyTax:!1,start:de.start,end:de.end,companySharePercent:null,groupingSource:de});return Ge.equipment+=Number(mt.equipmentTotal||0),Ge.crew+=Number(mt.crewTotal||0),Ge.crewCost+=Number(mt.crewCostTotal||0),Ge},{equipment:0,crew:0,crewCost:0}),D=Number(Z||0),M=Number((P.equipment+P.crew+z).toFixed(2)),Y=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let B=(s?.discountType==="amount"?"amount":"percent")==="amount"?Y:M*(Y/100);(!Number.isFinite(B)||B<0)&&(B=0),B>M&&(B=M);const _=L===!0,X=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",V=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,ke=X&&_&&V>0?V:0,O=Math.max(0,M-B),se=Number((O*(ke/100)).toFixed(2)),xe=_?Number(((O+se)*Be).toFixed(2)):0,_e=Number((O+se+xe).toFixed(2)),ts=Number((_e-se-xe-D-P.crewCost).toFixed(2));P.equipment>0&&q.push({icon:"ğŸ›ï¸",label:n("projects.details.summary.equipmentTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),value:k(P.equipment)}),P.crew>0&&q.push({icon:"ğŸ˜",label:n("projects.details.summary.crewTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚"),value:k(P.crew)}),P.crewCost>0&&q.push({icon:"ğŸ§¾",label:n("projects.details.summary.crewCostTotal","ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚"),value:k(P.crewCost)}),z>0&&q.push({icon:"ğŸ’¼",label:n("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:k(z)}),D>0&&q.push({icon:"ğŸ§¾",label:n("projects.details.summary.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:k(D)}),B>0&&q.push({icon:"ğŸ·ï¸",label:n("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${k(B)}`}),q.push({icon:"ğŸ§®",label:n("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:k(O)}),se>0&&q.push({icon:"ğŸ¦",label:n("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${k(se)}`}),xe>0&&q.push({icon:"ğŸ’¸",label:n("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${k(xe)}`}),q.push({icon:"ğŸ’µ",label:n("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:k(ts)}),q.push({icon:"ğŸ’°",label:n("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:k(_e)}),j=_e}else{const P=Number(Z||0),D=Math.max(0,Number(z)||0),M=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let F=(s?.discountType==="amount"?"amount":"percent")==="amount"?M:D*(M/100);(!Number.isFinite(F)||F<0)&&(F=0),F>D&&(F=D);const B=Math.max(0,D-F),_=L===!0,X=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",V=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,ke=X&&_&&V>0?V:0,O=Number((B*(ke/100)).toFixed(2)),se=_?Number(((B+O)*Be).toFixed(2)):0,xe=Number((B+O+se).toFixed(2)),_e=Number((xe-O-se-P).toFixed(2));q=[],q.push({icon:"ğŸ’¼",label:n("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:k(D)}),F>0&&q.push({icon:"ğŸ·ï¸",label:n("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${k(F)}`}),q.push({icon:"ğŸ§®",label:n("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:k(B)}),O>0&&q.push({icon:"ğŸ¦",label:n("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${k(O)}`}),se>0&&q.push({icon:"ğŸ’¸",label:n("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${k(se)}`}),q.push({icon:"ğŸ’µ",label:n("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:k(_e)}),q.push({icon:"ğŸ’°",label:n("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:k(xe)}),j=xe}y=Me({totalAmount:j,paidAmount:je,paidPercent:pe,history:le}),g=Xe({manualStatus:ce||"unpaid",paidAmount:y.paidAmount,paidPercent:y.paidPercent,totalAmount:j}),f=n(`projects.paymentStatus.${g}`,g==="paid"?"Paid":g==="partial"?"Partial":"Unpaid"),T=g==="paid"?"status-paid":g==="partial"?"status-partial":"status-unpaid",A=Number.isFinite(Number(y.paidAmount))?Number(y.paidAmount):0,C=Number.isFinite(Number(y.paidPercent))?Number(y.paidPercent):0,w=Math.max(0,Number((j-A).toFixed(2))),R=k(A),J=`${b(C.toFixed(2))}%`,H=k(w);try{ee=It(le,{total:j})}catch{ee=It(le,{total:me})}const ot=q.map(({icon:P,label:D,value:M})=>`
    <div class="summary-details-row">
      <span class="summary-details-label">${P} ${o(D)}</span>
      <span class="summary-details-value">${o(M)}</span>
    </div>
  `).join(""),Re=n("projects.details.labels.code","Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),Pt=`
    <div class="project-details-code-badge" title="${o(Re)}">
      <span class="project-details-code-badge__label">
        <span class="project-details-code-badge__icon" aria-hidden="true">ğŸ—‚ï¸</span>
        ${o(Re)}
      </span>
      <span class="project-details-code-badge__value">${o(E)}</span>
    </div>
  `,it=ms(s.start,s.end),ct=$t("start",s.start),Ne=$t("end",s.end),lt=Ne?{...Ne,meta:(Ne.meta?`${Ne.meta} â€” `:"")+`${n("projects.details.labels.days","Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…")}: ${b(String(it))}`}:null,pt=[{icon:"ğŸ‘¤",label:n("projects.details.client","Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:c},{icon:"ğŸ“",label:n("projects.details.labels.clientPhone","Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:v},{icon:"âœ‰ï¸",label:n("projects.details.labels.clientEmail","Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"),value:h},S?{icon:"ğŸ¢",label:n("projects.details.company","Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:S}:null,{icon:"ğŸ·ï¸",label:n("projects.details.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),value:`<span class="project-type-chip project-type-chip--${s.type||"default"}">${o(i)}</span>`},ct,lt].filter(Boolean),Fe=n("projects.details.overview.heading","Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),Je=`
    <div class="project-details-outline">
      <h6 class="project-details-outline__title">${o(Fe)}</h6>
      <ul class="project-details-outline__list">
        ${pt.map(({icon:P,label:D,value:M,meta:Y})=>{const F=String(M??""),_=F.trim().startsWith("<")?F:o(F),X=String(Y??""),V=X?o(X):"";return`
          <li>
            <span class="project-details-outline__label">${o(P)} ${o(D)}</span>
            <span class="project-details-outline__value-group">
              <span class="project-details-outline__value">${_}</span>
              ${Y?`<span class="project-details-outline__meta">${V}</span>`:""}
            </span>
          </li>
          `}).join("")}
      </ul>
    </div>
  `,dt=U>0?n("projects.details.chips.linkedReservation","Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"):n("projects.details.chips.notLinkedReservation","ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"),te=U>0?"reservation-chip status-confirmed":"reservation-chip status-info",ut=[`<span class="${ae}">${o(we)}</span>`,`<span class="${te}">${o(dt)}</span>`,`<span class="reservation-chip ${T}">${o(f)}</span>`,De].filter(Boolean).join("");n("projects.details.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),n("projects.details.reservationsTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª");const Ye=n("projects.details.expenses","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})").replace("{amount}",k(Z)),Te=Zs(Array.isArray(s.expenses)?s.expenses:[]);t.detailsBody.innerHTML=`
    <section class="project-details-primary">
      <header class="project-details-header">
        <div class="project-details-header__info">
          <div class="project-details-chips">${ut}</div>
        </div>
        <div class="project-details-header__code">
          ${Pt}
          <h4 class="project-details-title">${o(s.title)}</h4>
        </div>
      </header>
      <div class="project-summary">
        <div class="project-summary-left">
          ${Je}
        </div>
        <div class="project-summary-right">
          <div class="project-summary-card project-details-outline">
            <h6>${o(n("projects.details.summary.title","Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ"))}</h6>
            ${ot}
          </div>
        </div>
      </div>
    </section>
    <section class="project-details-section">
      <h5>${o(n("projects.details.description","ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</h5>
      <p class="project-details-description">${o(p)}</p>
    </section>
    <section class="project-details-section">
      <h5>${o(Ye)}</h5>
      ${Te}
    </section>
    
    <section class="project-details-section">
      <h5>${o(n("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h5>
      <div class="project-details-grid">
        <div class="project-details-grid-item">
          <span>${o(n("projects.details.paymentOverview.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"))}</span>
          <strong>${o(k(j))}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${o(n("projects.details.paymentOverview.paid","Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${o(R)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${o(n("projects.details.paymentOverview.percent","Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${o(J)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${o(n("projects.details.paymentOverview.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"))}</span>
          <strong>${o(H)}</strong>
        </div>
      </div>
      <div class="reservation-payment-history-modal mt-3">
        ${ee}
      </div>
    </section>
    ${Ps(s)}
    <div class="project-details-footer">
      <button type="button" class="modal-action-btn modal-action-btn--primary" data-action="create-reservation">
        ${o(n("projects.details.reservations.create","â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-action="edit-project">
        ${o(n("projects.details.actions.edit","âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--danger" data-action="delete-project">
        ${o(n("projects.details.actions.delete","ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" id="project-details-export-btn">
        ${o(n("projects.details.actions.exportPdf","ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© PDF"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-bs-dismiss="modal">
        ${o(n("actions.close","Ø¥ØºÙ„Ø§Ù‚"))}
      </button>
    </div>
  `,tr(s);const W=t.detailsBody.querySelector("#project-details-export-btn");W&&W.addEventListener("click",async P=>{if(P.preventDefault(),W.blur(),!W.disabled){W.disabled=!0;try{await hs({project:s})}catch(D){console.error("âŒ [projects/details] export project PDF failed",D),x(n("projects.details.exportFailed","âš ï¸ ØªØ¹Ø°Ø± ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¥Ù„Ù‰ PDF"),"error")}finally{W.disabled=!1}}}),t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl).show()}function Zs(e=[]){if(!(Array.isArray(e)&&e.length>0)){const a=o(n("projects.expenses.table.empty","Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§."));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${o(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${o(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${o(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${o(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4" class="text-center text-muted">${a}</td></tr>
          </tbody>
        </table>
      </div>
    `}const r=e.map(a=>{const i=o(a?.label||""),l=k(Number(a?.amount)||0),p=k(Number(a?.sale_price??a?.salePrice??0)),c=a?.note!=null?String(a.note):a?.notes!=null?String(a.notes):"";return`
      <tr>
        <td>${i}</td>
        <td>${o(l)}</td>
        <td>${o(p)}</td>
        <td>${o(c||"â€”")}</td>
      </tr>`}).join("");return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${o(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
            <th>${o(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
            <th>${o(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
            <th>${o(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>
  `}function $r({onOpenProject:e}){!t.focusCards||t.focusCards.dataset.listenerAttached==="true"||(t.focusCards.addEventListener("click",s=>{const r=s.target.closest("[data-action]");if(r){const{action:i,id:l}=r.dataset;if(i==="confirm-project"){s.preventDefault(),s.stopPropagation(),ar(l);return}i==="view"?e?.(l):i==="highlight"&&er(l);return}const a=s.target.closest(".project-focus-card");a?.dataset.projectId&&e?.(a.dataset.projectId)}),t.focusCards.dataset.listenerAttached="true")}function er(e){if(!t.projectsTableBody)return;const s=`tr[data-project-id="${CSS.escape(String(e))}"]`,r=t.projectsTableBody.querySelector(s);if(!r){x(n("projects.focus.toastNotFound","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"));return}r.classList.add("project-row-highlight"),r.scrollIntoView({behavior:"smooth",block:"center"}),window.setTimeout(()=>{r.classList.remove("project-row-highlight")},2200)}function tr(e){if(!t.detailsBody)return;const s=t.detailsBody.querySelector('[data-action="create-reservation"]'),r=t.detailsBody.querySelector('[data-action="edit-project"]'),a=t.detailsBody.querySelector('[data-action="delete-project"]'),i=t.detailsBody.querySelector(".project-reservations-list");if(s&&e)try{(xt(e.id)||[]).some(c=>{const d=String(c?.status||c?.reservationStatus||"").toLowerCase();return d!=="cancelled"&&d!=="canceled"})?(s.classList?.add("disabled"),s.setAttribute?.("aria-disabled","true"),s.title=n("projects.details.reservations.createDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"),s.addEventListener("click",c=>{c.preventDefault(),x(n("projects.details.reservations.createDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))})):(s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",c=>{c.preventDefault(),Nt(e)}))}catch{s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",p=>{p.preventDefault(),Nt(e)})}if(r&&e&&r.addEventListener("click",l=>{l.preventDefault(),sr(e)}),a&&e&&a.addEventListener("click",async l=>{l.preventDefault();const p=l.currentTarget;p.disabled=!0;try{await Bt(e.id),!u.projects.some(d=>String(d.id)===String(e.id))&&t.detailsModalEl&&window.bootstrap?.Modal.getInstance(t.detailsModalEl)?.hide()}finally{u.projects.some(d=>String(d.id)===String(e.id))&&(p.disabled=!1)}}),i){const l=async p=>{if(!Number.isInteger(p)||p<0)return!1;const c=fs("showReservationDetails");if(typeof c=="function")return c(p),!0;try{const d=await ys("showReservationDetails");if(typeof d=="function")return d(p),!0}catch(d){console.warn("âš ï¸ [projects/projectDetails] Unable to resolve reservation UI handler",d)}return!1};i.addEventListener("click",async p=>{const c=p.target.closest('[data-action="view-reservation"]');if(!c)return;const d=c.dataset.index||c.dataset.reservationIndex,v=Number.parseInt(d||"-1",10);if(!Number.isInteger(v)||v<0)return;await l(v)||(window.location.href="dashboard.html#reservations")}),i.addEventListener("keydown",p=>{if(!["Enter"," "].includes(p.key))return;const c=p.target.closest('[data-action="view-reservation"]');c&&(p.preventDefault(),c.click())})}}function sr(e){if(!e||!t.detailsBody)return;const s=u.projects.find(m=>String(m.id)===String(e.id));if(!s)return;const r=u.customers.find(m=>String(m.id)===String(s.clientId));r?.customerName||r?.name||s.clientName||s.customerName,s.clientCompany||r?.companyName||r?.company;const a=Array.isArray(s.expenses)?s.expenses.map((m,h)=>({id:m?.id||`expense-${s.id}-${h}-${Date.now()}`,label:m?.label||"",amount:Number(m?.amount)||0,salePrice:Number.isFinite(Number(m?.sale_price??m?.salePrice))?Number(m?.sale_price??m?.salePrice):0,note:m?.note!=null?String(m.note):m?.notes!=null?String(m.notes):""})):[];let i=Array.isArray(s.paymentHistory)?s.paymentHistory.map((m,h)=>({type:m?.type==="percent"?"percent":"amount",amount:Number.isFinite(Number(m?.amount))?Number(m.amount):null,percentage:Number.isFinite(Number(m?.percentage))?Number(m.percentage):null,value:Number.isFinite(Number(m?.value))?Number(m.value):null,note:m?.note??null,recordedAt:m?.recordedAt??m?.recorded_at??new Date().toISOString(),key:`payment-${s.id}-${h}`})):[],l=i.reduce((m,h)=>m+(Number(h?.amount)||0),0),p=i.reduce((m,h)=>m+(Number(h?.percentage)||0),0),c=Number.isFinite(Number(s.paidAmount))?Number(s.paidAmount):0,d=Number.isFinite(Number(s.paidPercent))?Number(s.paidPercent):0;if(!i.length&&(c>0||d>0)){const m=s.updatedAt??s.createdAt??new Date().toISOString();d>0?i=[{type:"percent",amount:Number.isFinite(c)&&c>0?c:null,percentage:d,value:d,note:null,recordedAt:m,key:`legacy-payment-${s.id}-percent`}]:c>0&&(i=[{type:"amount",amount:c,percentage:null,value:c,note:null,recordedAt:m,key:`legacy-payment-${s.id}-amount`}]),l=i.reduce((h,S)=>h+(Number(S?.amount)||0),0),p=i.reduce((h,S)=>h+(Number(S?.percentage)||0),0),c=0,d=0}l>0&&Math.abs(c-l)<.01&&(c=0),p>0&&Math.abs(d-p)<.01&&(d=0);const v={expenses:a,payments:i,basePaidAmount:c,basePaidPercent:d};t.detailsBody.dataset.mode="edit",t.detailsBody.innerHTML=nr(s,v),rr(s,v)}function rr(e,s={expenses:[]}){const r=t.detailsBody?.querySelector("#project-details-edit-form");if(!r)return;const a=r.querySelector('[data-action="cancel-edit"]');a&&a.addEventListener("click",j=>{j.preventDefault(),bt(e.id)});const i=r.querySelector("#project-edit-expense-label"),l=r.querySelector("#project-edit-expense-amount"),p=r.querySelector("#project-edit-expense-sale"),c=r.querySelector("#project-edit-expense-note"),d=r.querySelector('[data-action="add-expense"]'),v=r.querySelector("#project-edit-expense-list"),m=r.querySelector('[name="project-start-date"]'),h=r.querySelector('[name="project-start-time"]'),S=r.querySelector('[name="project-end-date"]'),I=r.querySelector('[name="project-end-time"]'),E=r.querySelector('[name="project-payment-status"]'),N=r.querySelector("#project-edit-tax"),$=r.querySelector("#project-edit-company-share"),K=r.querySelector("#project-edit-discount"),U=r.querySelector("#project-edit-discount-type"),Q=r.querySelector("#project-edit-payment-progress-type"),L=r.querySelector("#project-edit-payment-progress-value"),Z=r.querySelector("#project-edit-payment-add"),z=r.querySelector("#project-edit-payment-history"),fe=r.querySelector("#project-edit-payment-summary"),ye=n("reservations.create.summary.currency","SR"),me=r.querySelector("#project-cancelled");let oe=!1;(()=>{const j=(typeof window<"u"?window.flatpickr:null)||(typeof globalThis<"u"?globalThis.flatpickr:null);j&&(m&&j(m,{dateFormat:"Y-m-d",allowInput:!0}),S&&j(S,{dateFormat:"Y-m-d",allowInput:!0}),h&&j(h,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}),I&&j(I,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}))})();const ie=j=>{if(!j||j.dataset.normalizedDigits==="true")return;const y=()=>{const g=j.value||"",f=b(g);if(f!==g){const T=j.selectionStart,A=j.selectionEnd;j.value=f;try{if(typeof T=="number"&&typeof A=="number"){const C=f.length-g.length;j.setSelectionRange(Math.max(0,T+C),Math.max(0,A+C))}}catch{}}};j.addEventListener("input",y),j.addEventListener("blur",y);try{j.setAttribute("inputmode","numeric")}catch{}j.dataset.normalizedDigits="true"};ie(m),ie(h),ie(S),ie(I),h&&h._flatpickr?.altInput&&ie(h._flatpickr.altInput),I&&I._flatpickr?.altInput&&ie(I._flatpickr.altInput);const ge=()=>(Array.isArray(s.payments)||(s.payments=[]),s.payments),ne=()=>{const j=Number(e.equipmentEstimate)||0,y=Array.isArray(s.expenses)?s.expenses.reduce((H,ee)=>H+(Number(ee.amount)||0),0):0,g=Array.isArray(s.expenses)?Math.max(0,Math.round(s.expenses.reduce((H,ee)=>H+Number(ee?.salePrice??0),0)*100)/100):Math.max(0,Number(e?.servicesClientPrice??0)),f=U?.value==="amount"?"amount":"percent",T=b(K?.value||"0");let A=Number.parseFloat(T);(!Number.isFinite(A)||A<0)&&(A=0);const C=N?.checked===!0,w=$?.checked===!0;let R=w?Ds($):null;(!Number.isFinite(R)||R<=0)&&(R=w?ue:null);const J=Ht({equipmentEstimate:j,expensesTotal:y,servicesClientPrice:g,discountValue:A,discountType:f,applyTax:C,companyShareEnabled:w,companySharePercent:R});return{equipmentEstimate:j,expensesTotal:y,discountValue:A,discountTypeValue:f,applyTax:C,companyShareEnabled:w,companySharePercent:R,servicesClientPrice:g,finance:J}},be=()=>{const j=ne(),y=ge(),f=(xt(e.id)||[]).reduce((R,J)=>R+(Number(J?.totalAmount)||es(J)||0),0),T=Number(j.finance?.taxableAmount||0),A=j.applyTax?Number(((T+f)*Be).toFixed(2)):0,C=Number((T+f+A).toFixed(2)),w=Me({totalAmount:C,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:y});try{const J=(new URL(window.location.href).searchParams.get("paymentDebug")||"").toLowerCase();(J==="1"||J==="true"||J==="yes")&&console.debug("[PaymentDebug][modal]",{projectId:e?.id,projectTaxableBase:T,reservationsTotal:f,combinedTax:A,combinedTotalWithTax:C,paidAmount:w.paidAmount,paidPercent:w.paidPercent})}catch{}return{...j,combinedTotalWithTax:C,payments:y,progress:w}},we=()=>{if(!z)return;const{combinedTotalWithTax:j}=be();z.innerHTML=ir(ge(),{total:j})},re=()=>{if(!fe)return;const{combinedTotalWithTax:j,progress:y}=be(),g=Number.isFinite(Number(j))?Number(j):0,f=Number.isFinite(Number(y.paidAmount))?Number(y.paidAmount):0,T=Number.isFinite(Number(y.paidPercent))?Number(y.paidPercent):0,A=Math.max(0,Math.round((g-f)*100)/100),C=[{label:n("projects.form.paymentSummary.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"),value:k(g)},{label:n("projects.form.paymentSummary.paidAmount","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"),value:k(f)},{label:n("projects.form.paymentSummary.paidPercent","Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹Ø§Øª"),value:`${b(T.toFixed(2))}%`},{label:n("projects.form.paymentSummary.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"),value:k(A)}];fe.innerHTML=C.map(({label:w,value:R})=>`
        <div class="project-details-grid-item">
          <span>${o(w)}</span>
          <strong>${o(R)}</strong>
        </div>
      `).join("")},ae=(j="auto")=>{if(!E)return;const y=E.dataset?.userSelected==="true";if(j==="auto"&&y)return;const{finance:g,progress:f}=be(),T=Xe({manualStatus:y?E.value:e.paymentStatus||"unpaid",paidAmount:f.paidAmount,paidPercent:f.paidPercent,totalAmount:g.totalWithTax});y||(E.value=T)},ce=()=>{we(),re(),ae("auto")},le=1e-4,Ee=()=>{const j=Q?.value==="amount"?"amount":"percent",y=b(L?.value||"").replace("%","").trim();let g=Number.parseFloat(y);if(!Number.isFinite(g)||g<=0){x(n("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©")),L?.focus();return}const f=be(),T=Number.isFinite(Number(f.finance.totalWithTax))?Number(f.finance.totalWithTax):0;if(T<=0){x(n("projects.toast.paymentTotalMissing","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"));return}const A=Number(f.progress.paidAmount)||0,C=Number(f.progress.paidPercent)||0;let w=null,R=null;if(j==="percent"){const H=Math.max(0,100-C);if(H<=le){x(n("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(g>H){g=H;const ee=b(g.toFixed(2));x(n("projects.toast.paymentCappedPercent","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {value}% Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ 100%").replace("{value}",ee))}R=Math.round(g*100)/100,T>0&&(w=Math.round(R/100*T*100)/100)}else{const H=Math.max(0,T-A);if(H<=le){x(n("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(g>H){g=H;const ee=`${b(g.toFixed(2))} ${ye}`;x(n("projects.toast.paymentCappedAmount","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {amount} Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ").replace("{amount}",ee))}w=Math.round(g*100)/100,T>0&&(R=Math.round(w/T*100*100)/100)}const J={type:j,amount:w??null,percentage:R??null,value:j==="amount"?w:R,note:null,recordedAt:new Date().toISOString()};s.payments=[...ge(),J],L&&(L.value=""),Q&&(Q.value="percent"),ce(),x(n("projects.toast.paymentAdded","âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"))},je=j=>{!N||!$||oe||(oe=!0,j==="share"?$.checked?(N.checked||(N.checked=!0),Ve($)):N.checked&&(N.checked=!1):j==="tax"&&(N.checked?Ve($):$.checked&&($.checked=!1)),oe=!1)};function pe(){v&&(v.innerHTML=Qt(s.expenses))}pe(),ce(),K&&!K.dataset.listenerAttached&&(K.addEventListener("input",j=>{const y=j.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""),re(),ae("auto"))}),K.dataset.listenerAttached="true"),p&&!p.dataset.listenerAttached&&(p.addEventListener("input",j=>{const y=j.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""))}),p.dataset.listenerAttached="true"),U&&!U.dataset.listenerAttached&&(U.addEventListener("change",()=>{re(),ae("auto")}),U.dataset.listenerAttached="true"),L&&!L.dataset.listenerAttached&&(L.addEventListener("input",j=>{const y=j.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""))}),L.dataset.listenerAttached="true"),E&&!E.dataset.listenerAttached&&(E.addEventListener("change",()=>{E.dataset.userSelected="true"}),E.dataset.listenerAttached="true"),l&&!l.dataset.listenerAttached&&(l.addEventListener("input",j=>{const y=j.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""))}),l.dataset.listenerAttached="true"),$&&!$.dataset.listenerAttached&&($.addEventListener("change",()=>{je("share"),re(),ae("auto")}),$.dataset.listenerAttached="true"),N&&!N.dataset.listenerAttached&&(N.addEventListener("change",()=>{je("tax"),re(),ae("auto")}),N.dataset.listenerAttached="true"),$?.checked&&Ve($),je($?.checked?"share":"tax"),re(),ae("auto"),d&&d.addEventListener("click",j=>{j.preventDefault();const y=i?.value.trim()||"",g=b(l?.value||"0"),f=Number(g),T=b(p?.value||"0"),A=Number(T),C=(c?.value||"").trim();if(!y){x(n("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ")),i?.focus();return}if(!Number.isFinite(f)||f<=0){x(n("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­")),l?.focus();return}s.expenses.push({id:`expense-${e.id}-${Date.now()}`,label:y,amount:f,salePrice:Number.isFinite(A)&&A>0?A:0,note:C||""}),i&&(i.value=""),l&&(l.value=""),p&&(p.value=""),c&&(c.value=""),pe(),re(),ae("auto")}),v&&(v.addEventListener("click",j=>{const y=j.target.closest('[data-action="remove-expense"]');if(!y)return;const{id:g}=y.dataset;s.expenses=s.expenses.filter(f=>String(f.id)!==String(g)),pe(),re(),ae("auto")}),v.addEventListener("input",j=>{const y=j.target;if(!(y instanceof HTMLInputElement))return;const g=y.dataset.expenseId,f=y.dataset.expenseField;if(!g||!f)return;const T=s.expenses.findIndex(C=>String(C.id)===String(g));if(T===-1)return;let A=y.value;if(f==="amount"||f==="salePrice"){const C=b(A||""),w=Number.parseFloat(C);Number.isFinite(w)&&w>=0?s.expenses[T][f]=w:(A===""||C==="")&&(s.expenses[T][f]=0),re(),ae("auto")}else(f==="label"||f==="note")&&(s.expenses[T][f]=A)})),Z&&!Z.dataset.listenerAttached&&(Z.addEventListener("click",j=>{j.preventDefault(),Ee()}),Z.dataset.listenerAttached="true"),z&&!z.dataset.listenerAttached&&(z.addEventListener("click",j=>{const y=j.target.closest('[data-action="remove-payment"]');if(!y)return;const g=Number.parseInt(y.dataset.index||"-1",10);if(!Number.isInteger(g)||g<0)return;const f=ge();if(g>=f.length)return;const T=f.filter((A,C)=>C!==g);s.payments=T,ce(),x(n("projects.toast.paymentRemoved","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}),z.dataset.listenerAttached="true"),r.addEventListener("submit",async j=>{if(j.preventDefault(),r.dataset.submitting==="true")return;const y=r.querySelector('[name="project-title"]'),g=r.querySelector('[name="project-type"]'),f=r.querySelector('[name="project-description"]'),T=y?.value.trim()||"",A=g?.value||"",C=b(m?.value.trim()||""),w=b(h?.value.trim()||""),R=f?.value.trim()||"",J=(E?.value||"unpaid").toLowerCase(),H=["paid","partial"].includes(J)?J:"unpaid";if(!T||!A||!C){x(n("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")),y?.focus();return}const ee=b(S?.value.trim()||""),nt=b(I?.value.trim()||""),De=Ct(C,w),q=ee?Ct(ee,nt):"",ot=new Date(De),Re=q?new Date(q):null;if(Re&&ot>Re){x(n("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©")),S?.focus();return}if(u.projects.findIndex(_=>String(_.id)===String(e.id))===-1){x(n("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const it=ne(),{equipmentEstimate:ct,servicesClientPrice:Ne,discountValue:lt,discountTypeValue:pt,applyTax:Fe,companyShareEnabled:Je,companySharePercent:dt,finance:te}=it,ut=Q?.value==="amount"?"amount":"percent",Ye=b(L?.value||"");let Te=Ye?Number.parseFloat(Ye):null,W=[...ge()];if(Number.isFinite(Te)&&Te>0&&Number.isFinite(Number(te.totalWithTax))){const _=Me({totalAmount:te.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:W}),X=new Date().toISOString();if(ut==="percent"){const V=Math.max(0,100-(_.paidPercent||0));if(V>le){const ke=Math.min(Te,V),O=Math.round(ke*100)/100,se=te.totalWithTax>0?Math.round(O/100*te.totalWithTax*100)/100:null;W=[...W,{type:"percent",amount:se,percentage:O,value:O,note:null,recordedAt:X}]}}else{const V=Math.max(0,te.totalWithTax-(_.paidAmount||0));if(V>le){const ke=Math.min(Te,V),O=Math.round(ke*100)/100,se=te.totalWithTax>0?Math.round(O/te.totalWithTax*100*100)/100:null;W=[...W,{type:"amount",amount:O,percentage:se,value:O,note:null,recordedAt:X}]}}W!==s.payments&&(s.payments=W,ce()),L&&(L.value=""),Q&&(Q.value="percent"),Te=null}const P=Me({totalAmount:te.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:W}),D=E?.dataset?.userSelected==="true",M=Xe({manualStatus:D?H:e.paymentStatus||H,paidAmount:P.paidAmount,paidPercent:P.paidPercent,totalAmount:te.totalWithTax}),Y=D?H:M;!D&&E&&(E.value=Y),E?.dataset&&delete E.dataset.userSelected,s.payments=W;const F=Rt({projectCode:e.projectCode,title:T,type:A,clientId:e.clientId,clientCompany:e.clientCompany,description:R,start:De,end:q||null,applyTax:Fe,paymentStatus:Y,equipmentEstimate:ct,expenses:s.expenses,servicesClientPrice:Ne,discount:lt,discountType:pt,companyShareEnabled:Je&&Fe,companySharePercent:Je&&Fe?dt:null,companyShareAmount:te.companyShareAmount,taxAmount:te.taxAmount,totalWithTax:te.totalWithTax,confirmed:e.confirmed,technicians:Array.isArray(e.technicians)?e.technicians:[],equipment:Os(e),paidAmount:P.paidAmount,paidPercentage:P.paidPercent,paymentProgressType:P.paymentProgressType,paymentProgressValue:P.paymentProgressValue,payments:W}),B=me?.checked===!0;B&&(F.status="cancelled",F.cancelled=!0),r.dataset.submitting="true";try{const _=await gt(e.projectId??e.id,F),X=_?.projectId??_?.id??e.id;if(!B)try{const V={start:De};q&&(V.end=q),await Ns(X,V)}catch(V){console.warn("âš ï¸ failed to sync linked reservations schedule",V)}if(await ht(X,Y),B)try{await Ls(X)}catch(V){console.warn("âš ï¸ failed to cancel linked reservations",V)}u.projects=ze(),u.reservations=G(),x(n("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­")),Ae(),Ke(),$e(),bt(e.id)}catch(_){console.error("âŒ [projects] Failed to update project from details view",_);const X=tt(_)?_.message:n("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");x(X,"error")}finally{delete r.dataset.submitting}})}function Nt(e){if(!e)return;const s={projectId:e.id,customerId:e.clientId||null,start:e.start||null,end:e.end||null,forceNotes:!!e.description,fromProjectForm:!0,draftStorageKey:"projects:create:draft",returnUrl:`projects.html?project=${encodeURIComponent(e.id)}&linked=1#projects-section`};vt({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(i=>{console.warn("âš ï¸ [projects] Failed to persist dashboard tab preference",i)});let r="";try{r=encodeURIComponent(JSON.stringify(s))}catch(i){console.warn("âš ï¸ [projects] Unable to encode reservation context",i)}t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl)?.hide();const a=r?`?reservationProjectContext=${r}`:"";window.location.href=`dashboard.html${a}#reservations`}async function ar(e){if(!e)return;const s=u.projects.find(r=>String(r.id)===String(e));if(!s){x(n("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}if(s.confirmed===!0||s.confirmed==="true"){x(n("projects.toast.alreadyConfirmed","â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§"));return}try{await gt(s.projectId??s.id,{confirmed:!0});const r=await $s(e);u.projects=ze(),u.reservations=G(),Ae(),Ke(),$e(),t.detailsModalEl&&t.detailsModalEl.classList.contains("show")&&t.detailsBody?.dataset.projectId===String(e)&&bt(e),document.dispatchEvent(new CustomEvent("projects:changed")),r&&document.dispatchEvent(new CustomEvent("reservations:changed")),x(n("projects.toast.confirmed","âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(r){console.error("âŒ [projects] confirmProject failed",r);const a=tt(r)?r.message:n("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");x(a,"error")}}function nr(e,s={clientName:"",clientCompany:"",expenses:[]}){const{date:r,time:a}=kt(e.start||""),{date:i,time:l}=kt(e.end||""),p=e.applyTax===!0||e.applyTax==="true";typeof e.paymentStatus=="string"&&e.paymentStatus.toLowerCase();const c=e.discountType==="amount"?"amount":"percent",d=b(String(e.discount??e.discountValue??0));b(String(e.servicesClientPrice??e.services_client_price??0));const v=e.companySharePercent??e.company_share_percent??e.companyShare??e.company_share??e.companyShareAmountPercent??ue,m=Number.parseFloat(b(String(v))),h=Number.isFinite(m)&&m>0?m:ue,S=e.companyShareEnabled===!0||e.companyShareEnabled==="true"||e.company_share_enabled===!0||e.company_share_enabled==="true"||p&&Number.isFinite(m)&&m>0,I="",E=e?.cancelled===!0||e?.cancelled==="true"||String(e?.status||"").toLowerCase()==="cancelled"||String(e?.status||"").toLowerCase()==="canceled";return`
    <form id="project-details-edit-form" class="project-edit-form">
      <div class="row g-3">
        <div class="col-12 col-xl-8">
          <label class="form-label">${o(n("projects.form.labels.title","Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <input type="text" class="form-control project-edit-input-wide" name="project-title" value="${o(e.title||"")}" required>
        </div>
        <div class="col-12 col-sm-6 col-xl-4 d-flex flex-column">
          <label class="form-label">${o(n("projects.form.labels.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <select class="form-select project-edit-select-lg" name="project-type" required>
            ${or(e.type)}
          </select>
        </div>
        <div class="col-12">
          <div class="project-edit-inline-group project-edit-inline-group--dates">
            <div class="project-edit-inline-field">
              <label class="form-label">${o(n("projects.form.labels.startDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="date" class="form-control" name="project-start-date" value="${o(r)}" required>
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${o(n("projects.form.labels.endDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="date" class="form-control" name="project-end-date" value="${o(i)}">
            </div>
          </div>
          <div class="project-edit-inline-group project-edit-inline-group--times mt-2">
            <div class="project-edit-inline-field">
              <label class="form-label">${o(n("projects.form.labels.startTime","ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="time" class="form-control" name="project-start-time" value="${o(a)}">
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${o(n("projects.form.labels.endTime","ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="time" class="form-control" name="project-end-time" value="${o(l)}">
            </div>
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">${o(n("projects.form.labels.description","Ø§Ù„ÙˆØµÙ"))}</label>
          <textarea class="form-control project-edit-textarea" name="project-description" rows="5">${o(e.description||"")}</textarea>
        </div>
        <div class="col-12">
          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="project-cancelled" name="project-cancelled" ${E?"checked":""}>
            <label class="form-check-label" for="project-cancelled">${o(n("projects.form.labels.cancelled","Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          </div>
          <div class="form-text">${o(n("projects.form.hints.cancelled","Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ."))}</div>
        </div>
        <!-- Payment status select removed: status is inferred automatically from payments -->
      </div>

      <!-- Services block placed directly under project description -->
      <section class="project-edit-expenses mt-4">
        <h6 class="mb-2">${o(n("projects.form.labels.expenseLabel","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©"))}</h6>
        <div class="project-edit-expense-form">
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-label" placeholder="${o(n("projects.form.placeholders.expenseLabel","ÙˆØµÙ Ø§Ù„Ù…ØªØ·Ù„Ø¨"))}">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-amount" placeholder="${o(n("projects.form.placeholders.expenseAmount","Ø§Ù„Ù…Ø¨Ù„Øº"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-sale" placeholder="${o(n("projects.form.labels.salePrice","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-note" placeholder="${o(n("projects.form.labels.expenseNote","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}">
          </div>
          <div class="project-edit-expense-action-col">
            <button type="button" class="modal-action-btn modal-action-btn--warning project-edit-add-btn" data-action="add-expense">${o(n("projects.form.buttons.addExpense","â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©"))}</button>
          </div>
        </div>
        <div id="project-edit-expense-list" class="project-edit-expense-list mt-3">
          ${Qt(s.expenses)}
        </div>
      </section>

      <!-- Services block placed directly under project description -->
      
      
      <div class="row g-3 align-items-start mt-1">
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-discount">${o(n("projects.form.labels.discount","Ø§Ù„Ø®ØµÙ…"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-discount-type" name="project-discount-type" class="form-select project-edit-select-xs">
              <option value="percent" ${c==="percent"?"selected":""}>${o(n("projects.form.discount.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
              <option value="amount" ${c==="amount"?"selected":""}>${o(n("projects.form.discount.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
            </select>
            <input type="text" id="project-edit-discount" name="project-discount" class="form-control project-edit-input-xs" value="${o(d)}" placeholder="0" inputmode="decimal">
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label d-block" for="project-edit-company-share">${o(n("projects.form.labels.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©"))}</label>
          <div class="d-flex flex-column gap-2">
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-company-share" name="project-company-share" data-company-share="${o(String(h))}" ${S?"checked":""}>
              <label class="form-check-label" for="project-edit-company-share">${o(n("projects.form.companyShareToggle","Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)"))}</label>
            </div>
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-tax" name="project-apply-tax" ${p?"checked":""}>
              <label class="form-check-label" for="project-edit-tax">${o(n("projects.form.taxLabel","Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"))}</label>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-payment-progress-value">${o(n("projects.form.paymentProgress.label","ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-payment-progress-type" name="project-payment-progress-type" class="form-select project-edit-select-xs">
              <option value="amount" >${o(n("projects.form.paymentProgress.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
              <option value="percent" selected>${o(n("projects.form.paymentProgress.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
            </select>
            <input type="text" id="project-edit-payment-progress-value" name="project-payment-progress-value" class="form-control project-edit-input-xs" value="${o(I)}" placeholder="0" inputmode="decimal">
          </div>
          <button type="button" class="modal-action-btn modal-action-btn--ghost project-edit-add-btn mt-2" id="project-edit-payment-add">${o(n("reservations.paymentHistory.actions.add","â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©"))}</button>
        </div>
      </div>

      <section class="project-edit-payment-history mt-4">
        <div id="project-edit-payment-summary" class="project-details-grid mb-3"></div>
        <div class="reservation-payment-history-block">
          <div class="reservation-payment-history__header">
            <h6 class="reservation-payment-history__title">${o(n("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h6>
          </div>
          <div id="project-edit-payment-history" class="reservation-payment-history"></div>
        </div>
      </section>


      <div class="project-edit-actions mt-4 d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">${o(n("projects.form.buttons.update","ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
        <button type="button" class="btn btn-outline-secondary" data-action="cancel-edit">${o(n("actions.cancel","Ø¥Ù„ØºØ§Ø¡"))}</button>
      </div>
    </form>
  `}function or(e){return["commercial","coverage","photography","social"].map(r=>{const a=Zt(r),i=r===e?"selected":"";return`<option value="${o(r)}" ${i}>${o(a)}</option>`}).join("")}function Qt(e=[]){const s=o(n("actions.remove","Ø¥Ø²Ø§Ù„Ø©")),r=o(n("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©")),a=o(n("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)")),i=o(n("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)")),l=o(n("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª")),p=o(n("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"));if(!Array.isArray(e)||e.length===0){const h=o(n("projects.selected.emptyExpenses","Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ"));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${r}</th>
              <th>${a}</th>
              <th>${i}</th>
              <th>${l}</th>
              <th>${p}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${h}</td></tr>
          </tbody>
        </table>
      </div>`}const c=e.map(h=>{const S=o(String(h?.id||"")),I=o(String(h?.label||"")),E=Number(h?.amount)||0,N=Number(h?.salePrice??h?.sale_price??0)||0,$=o(String((h?.note??h?.notes)||""));return`
      <tr>
        <td>
          <input type="text" class="form-control form-control-sm" value="${I}" data-expense-id="${S}" data-expense-field="label" placeholder="${o(n("projects.form.placeholders.expenseLabel","Ø§Ù„ÙˆØµÙ"))}">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${o(String(E))}" data-expense-id="${S}" data-expense-field="amount" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${o(String(N))}" data-expense-id="${S}" data-expense-field="salePrice" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${$}" data-expense-id="${S}" data-expense-field="note" placeholder="${o(n("projects.form.labels.expenseNote","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}">
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${S}" aria-label="${s}">âœ–</button>
        </td>
      </tr>
    `}).join(""),d=e.reduce((h,S)=>h+(Number(S?.salePrice??S?.sale_price)||0),0),v=o(k(d)),m=o(n("projects.expenses.table.totalSale","Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"));return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${r}</th>
            <th>${a}</th>
            <th>${i}</th>
            <th>${l}</th>
            <th>${p}</th>
          </tr>
        </thead>
        <tbody>${c}</tbody>
        <tfoot>
          <tr>
            <th colspan="2" class="text-end">${m}</th>
            <th>${v}</th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  `}function It(e=[],{total:s=null}={}){return!Array.isArray(e)||e.length===0?`<div class="reservation-payment-history-empty">${o(n("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`:`<ul class="reservation-payment-history-list">${e.map(r=>{const a=r?.type==="percent"?n("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):r?.type==="amount"?n("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"):n("reservations.paymentHistory.type.unknown","Ø¯ÙØ¹Ø©"),i=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?Number(r.percentage):null,l=i!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(i/100)*100)/100:null,p=r?.type==="percent"&&l!=null?l:Number.isFinite(Number(r?.amount))&&Number(r.amount)>0?Number(r.amount):null,c=p!=null?o(k(p)):"â€”",d=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?`${b(Number(r.percentage).toFixed(2))}%`:"â€”",v=r?.recordedAt?b(st(r.recordedAt)):"â€”",m=r?.note?`<div class="payment-history-note">${o(b(r.note))}</div>`:"";return`
      <li>
        <div class="payment-history-entry">
          <span class="payment-history-entry__type">${o(a)}</span>
          <span class="payment-history-entry__amount">${c}</span>
          <span class="payment-history-entry__percent">${d}</span>
          <span class="payment-history-entry__date">${v}</span>
        </div>
        ${m}
      </li>
    `}).join("")}</ul>`}function ir(e=[],{total:s=null}={}){if(!Array.isArray(e)||e.length===0)return`<div class="reservation-payment-history__empty">${o(n("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;const r=e.map((a,i)=>{const l=a?.type==="percent"?n("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):n("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"),p=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?Number(a.percentage):null,c=p!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(p/100)*100)/100:null,d=a?.type==="percent"&&c!=null?c:Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?Number(a.amount):null,v=d!=null?o(k(d)):"â€”",m=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${b(Number(a.percentage).toFixed(2))}%`:"â€”",h=a?.recordedAt?b(st(a.recordedAt)):"â€”",S=a?.note?o(b(a.note)):"",I=o(n("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"));return`
      <tr>
        <td>${o(l)}</td>
        <td>${v}</td>
        <td>${m}</td>
        <td>${h}</td>
        <td>${S}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${i}" aria-label="${I}">ğŸ—‘ï¸</button>
        </td>
      </tr>
    `}).join("");return`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${o(n("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${o(n("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>
  `}function cr(e={}){const r=(Array.isArray(e.paymentHistory)?e.paymentHistory:Array.isArray(e.payment_history)?e.payment_history:[]).map(lr).filter(Boolean);if(r.length>0)return r;const a=et(e.paidPercent??e.paid_percent),i=et(e.paidAmount??e.paid_amount),l=e.updatedAt??e.updated_at??e.createdAt??e.created_at??null,p=Xt(l);return a!=null&&a>0?[{type:"percent",amount:i!=null&&i>0?i:null,percentage:a,value:a,note:null,recordedAt:p}]:i!=null&&i>0?[{type:"amount",amount:i,percentage:null,value:i,note:null,recordedAt:p}]:[]}function lr(e){if(!e||typeof e!="object")return null;const s=e.type??e.payment_type??e.paymentType??null;let r=typeof s=="string"?s.toLowerCase().trim():null;r!=="percent"&&(r="amount");const a=et(e.amount??(r==="amount"?e.value:null)),i=et(e.percentage??(r==="percent"?e.value:null)),l=r==="percent"?i??null:a??null,p=e.note??e.memo??null,c=Xt(e.recordedAt??e.recorded_at??e.date??e.created_at??null);return r==="amount"&&a==null||r==="percent"&&i==null?null:{type:r,amount:a??null,percentage:i??null,value:l,note:p&&String(p).trim().length?String(p).trim():null,recordedAt:c}}function et(e){if(e==null||e==="")return null;const s=b(String(e)).replace(/%/g,"").trim();if(!s)return null;const r=Number.parseFloat(s);return Number.isFinite(r)?r:null}function Xt(e){if(!e)return new Date().toISOString();const s=new Date(e);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function $t(e,s){if(!s)return null;const{date:r,time:a}=pr(st(s)),i=e==="start",l=i?"â±ï¸":"âŒ›",p=i?n("projects.details.labels.start","Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"):n("projects.details.labels.end","Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹");return{icon:l,label:p,value:r,meta:a}}function pr(e){if(!e||e==="â€”")return{date:"â€”",time:""};const s=e.split(" ").filter(Boolean),r=s.shift()||"â€”",a=s.join(" ");return{date:r,time:a}}function Zt(e){if(!e)return n("projects.form.types.unknown","Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯");const s={commercial:"projects.form.types.commercial",coverage:"projects.form.types.coverage",photography:"projects.form.types.photography",social:"projects.form.types.social"}[e]||"projects.form.types.unknown";return n(s,e)}function es(e){if(!e)return 0;const s=Array.isArray(e.items)?e.items:[],r=e.discount??0,a=Number(b(String(r)))||0,i=e.discountType||"percent",l=Array.isArray(e.crewAssignments)?e.crewAssignments:[],p=l.length?l:Array.isArray(e.technicians)?e.technicians:[],c=js(s,a,i,!1,p,{start:e.start,end:e.end});if(Number.isFinite(c))return c;const d=Number(b(String(e.cost??0)));return Number.isFinite(d)?Math.round(d):0}export{Sr as a,xr as b,vr as c,Pr as d,Ar as e,Tr as f,Ir as g,kr as h,gr as i,$r as j,Ts as k,Er as l,hr as m,Le as n,bt as o,br as p,Nr as q,Jt as r,sr as s,Cr as t,wr as u};
