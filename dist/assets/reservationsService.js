import{d as D,n as b,b as $,A as _e,s as Be,f as Je,t as u,h as I,o as Qe,j as Le}from"./auth.js";const Xe=D()||{};let P=(Xe.technicians||[]).map(Pe);function Ce(){return P}function V(e){return P=Array.isArray(e)?e.map(Pe):[],Be({technicians:P}),typeof window<"u"&&typeof window.dispatchEvent=="function"?(window.dispatchEvent(new CustomEvent("technicians:updated")),typeof document<"u"&&typeof document.dispatchEvent=="function"&&document.dispatchEvent(new CustomEvent("technicians:updated"))):typeof dispatchEvent=="function"&&dispatchEvent(new CustomEvent("technicians:updated")),P}async function Ze(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([s,c])=>{c!=null&&c!==""&&t.set(s,String(c))});const n=t.toString(),a=await $(`/technicians/${n?`?${n}`:""}`),i=Array.isArray(a?.data)?a.data.map(ce):[];return V(i)}async function et(e){const t=await $("/technicians/",{method:"POST",body:e}),n=ce(t?.data??{});return V([...P,n]),n}async function De(e,t){const n=await $(`/technicians/?id=${encodeURIComponent(e)}`,{method:"PATCH",body:t}),a=ce(n?.data??{}),i=P.map(s=>String(s.id)===String(e)?a:s);return V(i),a}async function tt(e){await $(`/technicians/?id=${encodeURIComponent(e)}`,{method:"DELETE"}),V(P.filter(t=>String(t.id)!==String(e)))}function $e({name:e,phone:t,email:n,role:a,department:i,dailyWage:s,status:c,notes:o,active:r=!0}){return{full_name:e??"",phone:t??"",email:n??null,specialization:a??"",department:i??null,daily_wage:s??0,status:c??"available",notes:o??null,active:r?1:0}}function ce(e={}){return xe({id:e.id,full_name:e.full_name,phone:e.phone,email:e.email,specialization:e.specialization,department:e.department,daily_wage:e.daily_wage,status:e.status,notes:e.notes,active:e.active})}function Pe(e={}){return xe(e)}function xe(e={}){const t=e.id??e.technicianId??e.technician_id??e.ID??e.uuid??e._id??null,n=e.full_name??e.name??e.fullName??"",a=e.phone??"",i=e.email??null,s=e.specialization??e.role??e.position??"",c=e.department??e.team??"",o=nt(e.daily_wage??e.dailyWage??e.wage??e.rate??0),r=ve(e.baseStatus??e.status??"available"),l=ve(e.status??e.baseStatus??"available"),m=e.notes??"",d=e.active!=null?!!e.active:!0;return{id:t!=null?String(t):"",name:n,phone:a,email:i,role:s,department:c,dailyWage:o,status:l,baseStatus:r,notes:m,active:d}}function nt(e){const t=Number.parseFloat(b(String(e??"0")));return Number.isFinite(t)?Number(t.toFixed(2)):0}function ve(e){switch(String(e??"").trim().toLowerCase()){case"available":case"Ù…ØªØ§Ø­":return"available";case"busy":case"Ù…Ø´ØºÙˆÙ„":case"Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„":return"busy";case"leave":case"Ø¥Ø¬Ø§Ø²Ø©":case"Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©":return"leave";case"inactive":case"Ù…ØªÙˆÙ‚Ù":return"inactive";default:return"available"}}function ee(e){return e instanceof _e}let _=null,Se=!1,Y=!1,w="",se=!1;async function Fe({showToastOnError:e=!0}={}){if(!Y){Y=!0,w="",A();try{await Ze(),se=!0}catch(t){console.error("âŒ [technicians] loadTechniciansFromApi failed",t),w=ee(t)?t.message:u("technicians.toast.fetchFailed","ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ Ø­Ø§ÙˆÙ„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©"),e&&I(w,"error")}finally{Y=!1,A()}}}function Me(){return Ce()}function O(e=""){return b(String(e)).trim().toLowerCase()}function Ee(e){return e==null?"":String(e)}function k(e=""){return b(String(e)).replace(/[^0-9+]/g,"")}function R(e=""){const t=b(String(e)).replace(/[^0-9.]/g,"");if(!t.includes("."))return t;const[n,...a]=t.split(".");return`${n}.${a.join("")}`}function G(e,t){!e||e.dataset.normalizerAttached||(e.addEventListener("input",()=>{const n=t(e.value);if(e.value!==n){const a=e.selectionEnd;e.value=n,a!=null&&e.setSelectionRange(n.length,n.length)}}),e.dataset.normalizerAttached="true")}function re(e="add"){const t=document.getElementById("technician-submit-btn");if(!t)return;const n=e==="update"?"technicians.form.actions.update":"technicians.form.actions.submit",a=e==="update"?"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„":"â• Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø·Ø§Ù‚Ù…";t.textContent=u(n,a)}function oe(e){const t=document.getElementById("technician-cancel-btn");t&&(e?t.classList.remove("d-none"):t.classList.add("d-none"),t.textContent=u("technicians.form.actions.cancel","Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„"))}function le(){re(_?"update":"add"),oe(!!_),A()}function at(e=[]){const t=document.getElementById("technician-role-filter");if(!t)return"";const n=t.value,a=Array.from(new Set(e.map(s=>(s?.role||"").trim()).filter(Boolean))).sort((s,c)=>s.localeCompare(c,"ar",{sensitivity:"base"})),i=u("technicians.search.filters.allRoles","ğŸ‘” ÙƒÙ„ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù");return t.innerHTML=`<option value="">${i}</option>`+a.map(s=>`<option value="${s}">${s}</option>`).join(""),n&&a.includes(n)?t.value=n:t.value="",t.value}function te(){const e=document.getElementById("technician-form");e&&(e.reset(),_=null,re("add"),oe(!1))}function it(e){const t=document.getElementById("technician-name"),n=document.getElementById("technician-phone"),a=document.getElementById("technician-role"),i=document.getElementById("technician-department"),s=document.getElementById("technician-wage"),c=document.getElementById("technician-notes");!t||!n||!a||!s||(t.value=e.name||"",n.value=k(e.phone||""),a.value=e.role||"",i&&(i.value=e.department||""),s.value=R(e.dailyWage!=null?e.dailyWage:""),c&&(c.value=e.notes||""),_=String(e.id),re("update"),oe(!0))}function st(){const e=document.getElementById("technician-name"),t=document.getElementById("technician-phone"),n=document.getElementById("technician-role"),a=document.getElementById("technician-department"),i=document.getElementById("technician-wage"),s=document.getElementById("technician-notes");if(!e||!t||!n||!i)return null;const c=e.value.trim(),o=k(t.value.trim());t.value=o;const r=n.value.trim(),l=a?.value.trim()||"",m=R(i.value.trim());i.value=m;const d=m===""?0:parseFloat(m),g="available",f=s?.value.trim()||"";return c?o?r?Number.isNaN(d)||d<0?(I(u("technicians.toast.invalidWage","âš ï¸ Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ")),i.focus(),null):{name:c,phone:o,role:r,department:l,dailyWage:Number.isFinite(d)?d:0,status:g,baseStatus:g,notes:f}:(I(u("technicians.toast.missingRole","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØ¸ÙŠÙØ©")),n.focus(),null):(I(u("technicians.toast.missingPhone","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„")),t.focus(),null):(I(u("technicians.toast.missingName","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…")),e.focus(),null)}async function ct(e){e.preventDefault();const t=st();if(!t)return;const n=$e({name:t.name,phone:t.phone,role:t.role,department:t.department,dailyWage:t.dailyWage,status:t.status,notes:t.notes,active:!0});try{_?(await De(_,n),I(u("technicians.toast.updateSuccess","ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"))):(await et(n),I(u("technicians.toast.addSuccess","âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"))),te(),A()}catch(a){console.error("âŒ [technicians] handleTechnicianSubmit failed",a);const i=ee(a)?a.message:u("technicians.toast.saveFailed","ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");I(i,"error")}}function rt(){te()}function ot(e){const t={id:document.getElementById("edit-technician-id"),name:document.getElementById("edit-technician-name"),phone:document.getElementById("edit-technician-phone"),role:document.getElementById("edit-technician-role"),department:document.getElementById("edit-technician-department"),wage:document.getElementById("edit-technician-wage"),status:document.getElementById("edit-technician-status"),notes:document.getElementById("edit-technician-notes")};if(!t.id||!t.name||!t.phone||!t.role||!t.wage||!t.status)return;t.id.value=e.id||"",t.name.value!==(e.name||"")&&(t.name.value=e.name||"");const n=k(e.phone||"");t.phone.value!==n&&(t.phone.value=n),t.role.value!==(e.role||"")&&(t.role.value=e.role||""),t.department&&t.department.value!==(e.department||"")&&(t.department.value=e.department||"");const a=R(e.dailyWage!=null?e.dailyWage:"");t.wage.value!==a&&(t.wage.value=a);const i=e.baseStatus||e.status||"available";t.status.value!==i&&(t.status.value=i),t.notes&&t.notes.value!==(e.notes||"")&&(t.notes.value=e.notes||""),G(t.phone,k),G(t.wage,R)}function lt(){const e=document.getElementById("edit-technician-id"),t=document.getElementById("edit-technician-name"),n=document.getElementById("edit-technician-phone"),a=document.getElementById("edit-technician-role"),i=document.getElementById("edit-technician-department"),s=document.getElementById("edit-technician-wage"),c=document.getElementById("edit-technician-status"),o=document.getElementById("edit-technician-notes");if(!e||!t||!n||!a||!s||!c)return null;const r=e.value.trim(),l=t.value.trim(),m=k(n.value.trim());n.value=m;const d=a.value.trim(),g=i?.value.trim()||"",f=R(s.value.trim());s.value=f;const S=f===""?0:parseFloat(f),h=c.value||"available",E=o?.value.trim()||"";return r?l?m?d?Number.isNaN(S)||S<0?(I(u("technicians.toast.invalidWage","âš ï¸ Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ")),s.focus(),null):{id:r,name:l,phone:m,role:d,department:g,dailyWage:Number.isFinite(S)?S:0,status:h,baseStatus:h,notes:E}:(I(u("technicians.toast.missingRole","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØ¸ÙŠÙØ©")),a.focus(),null):(I(u("technicians.toast.missingPhone","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„")),n.focus(),null):(I(u("technicians.toast.missingName","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…")),t.focus(),null):(I(u("technicians.toast.unidentified","âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨")),null)}async function ut(){const e=lt();if(!e)return;const t=$e({name:e.name,phone:e.phone,role:e.role,department:e.department,dailyWage:e.dailyWage,status:e.status,notes:e.notes,active:!0});try{await De(e.id,t),I(u("technicians.toast.updateSuccess","ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));const n=document.getElementById("editTechnicianModal");n&&window.bootstrap?.Modal&&window.bootstrap.Modal.getInstance(n)?.hide(),A()}catch(n){console.error("âŒ [technicians] handleTechnicianModalSave failed",n);const a=ee(n)?n.message:u("technicians.toast.updateFailed","ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…");I(a,"error")}}function A(){const e=document.getElementById("technicians-table");if(!e)return;const t=document.getElementById("search-technician-input"),n=O(t?.value||"");if(Y&&!se){const l=u("technicians.table.loading","Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...");e.innerHTML=`<tr><td colspan='6'>${l}</td></tr>`;return}if(w&&!se){e.innerHTML=`<tr><td colspan='6' class='text-danger'>${w}</td></tr>`;return}const a=Re(),{reservations:i=[]}=D(),s=new Date;at(a);const c=document.getElementById("technician-role-filter"),o=O(c?.value||""),r=a.filter(l=>o&&O(l.role||"")!==o?!1:n?O([l.name,l.phone,l.role,l.department,l.notes].filter(Boolean).join(" ")).includes(n):!0);if(r.length===0){const l=u("technicians.table.empty","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¹Ø¶Ø§Ø¡ ÙÙŠ Ø§Ù„Ø·Ø§Ù‚Ù… Ø¨Ø¹Ø¯.");e.innerHTML=`<tr><td colspan='6'>${l}</td></tr>`;return}e.innerHTML=r.map(l=>{const m=_&&String(_)===String(l.id),f=(ke(l.id,i,s)?"busy":l.status||l.baseStatus||"available")==="busy"?{label:u("technicians.status.busy","â›” Ù…Ø´ØºÙˆÙ„"),className:"technician-status-badge technician-status-badge--busy"}:{label:u("technicians.status.available","âœ… Ù…ØªØ§Ø­"),className:"technician-status-badge technician-status-badge--available"},S=u("technicians.actions.edit","âœï¸ ØªØ¹Ø¯ÙŠÙ„"),h=u("technicians.actions.delete","ğŸ—‘ï¸ Ø­Ø°Ù"),E=Le(),y=[`<button type="button" class="technician-action-btn technician-action-btn--edit technician-edit-btn" data-id="${l.id}">${S}</button>`];return E&&y.push(`<button type="button" class="technician-action-btn technician-action-btn--delete technician-delete-btn" data-id="${l.id}">${h}</button>`),`
      <tr${m?' class="technician-table-row-editing"':""}>
        <td><a href="technician.html?id=${l.id}" class="text-decoration-none">${l.name}</a></td>
        <td>${l.role||""}</td>
        <td>${l.department||"â€”"}</td>
        <td><span class="${f.className}"><span class="technician-status-badge__text">${f.label}</span></span></td>
        <td class="table-notes-cell">${l.notes||"â€”"}</td>
        <td class="table-actions-cell">
          <div class="table-action-buttons">
            ${y.join("")}
          </div>
        </td>
      </tr>
    `}).join("")}function dt(e){const t=Me().find(n=>String(n.id)===String(e));if(!t){I(u("technicians.toast.dataNotFound","âš ï¸ ØªØ¹Ø°Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));return}it(t),I(u("technicians.toast.editReady","âœï¸ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„Ø¢Ù† Ø«Ù… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„"))}async function mt(e){if(!Le()){Qe();return}if(confirm(u("technicians.toast.deleteConfirm","âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¶ÙˆØŸ")))try{await tt(e),I(u("technicians.toast.deleteSuccess","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…")),_&&String(_)===String(e)&&te(),A()}catch(t){console.error("âŒ [technicians] handleDeleteClick failed",t);const n=ee(t)?t.message:u("technicians.toast.deleteFailed","ØªØ¹Ø°Ø± Ø­Ø°Ù Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");I(n,"error")}}function Mt(){ue(),A()}function kt(e){return Me().find(t=>String(t.id)===String(e))||null}function ke(e,t=[],n){const a=Ee(e);return a?t.some(i=>{if(!i||!i.start||!i.end||!(Array.isArray(i.technicians)?i.technicians:[]).some(r=>Ee(r)===a))return!1;const c=new Date(i.start),o=new Date(i.end);return Number.isNaN(c.getTime())||Number.isNaN(o.getTime())?!1:c<=n&&n<o}):!1}function Re(){const e=D().reservations||[],t=Ce();if(!Array.isArray(t)||t.length===0)return t;const n=new Date;let a=!1;const i=t.map(s=>{if(!s)return s;const c=s.baseStatus||s.status||"available";let o=c==="busy"?"busy":c;return ke(s.id,e,n)&&(o="busy"),(o!==s.status||c!==s.baseStatus)&&(a=!0),{...s,baseStatus:c,status:o}});return a?(V(i),i):t}function ue(){const e=document.getElementById("technician-form"),t=e&&!e.dataset.initialized;e&&!e.dataset.listenerAttached&&(e.addEventListener("submit",o=>{ct(o).catch(r=>{console.error("âŒ [technicians] submit handler failed",r)})}),e.dataset.listenerAttached="true"),e&&(e.dataset.initialized="true");const n=document.getElementById("technician-cancel-btn");n&&!n.dataset.listenerAttached&&(n.addEventListener("click",rt),n.dataset.listenerAttached="true"),G(document.getElementById("technician-phone"),k),G(document.getElementById("technician-wage"),R);const a=document.getElementById("technicians-table");a&&!a.dataset.listenerAttached&&(a.addEventListener("click",o=>{const r=o.target;if(r instanceof HTMLElement){if(r.classList.contains("technician-edit-btn")){const l=r.dataset.id;dt(l)}if(r.classList.contains("technician-delete-btn")){const l=r.dataset.id;mt(l).catch(m=>{console.error("âŒ [technicians] delete handler failed",m)})}}}),a.dataset.listenerAttached="true");const i=document.getElementById("search-technician-input");i&&!i.dataset.listenerAttached&&(i.addEventListener("input",()=>{i.value=b(i.value),A()}),i.dataset.listenerAttached="true");const s=document.getElementById("technician-role-filter");s&&!s.dataset.listenerAttached&&(s.addEventListener("change",()=>{A()}),s.dataset.listenerAttached="true");const c=document.getElementById("save-technician-changes");c&&!c.dataset.listenerAttached&&(c.addEventListener("click",()=>{ut().catch(o=>{console.error("âŒ [technicians] modal save failed",o)})}),c.dataset.listenerAttached="true"),Se||(document.addEventListener("technician:prefill",o=>{const r=o.detail;r&&ot(r)}),Se=!0),t&&te()}window.addEventListener("DOMContentLoaded",()=>{ue(),A(),le(),Fe()});const ze=()=>{A()};window.addEventListener("technicians:updated",ze);document.addEventListener("technicians:updated",ze);document.addEventListener("technicians:refreshRequested",()=>{ue(),A(),le(),Fe({showToastOnError:!1})});document.addEventListener("language:changed",()=>{le()});document.addEventListener(Je.USER_UPDATED,()=>{A()});let z=[],qe=[],je=[];function Rt(){return z}function zt(e){z=Array.isArray(e)?e:[]}function qt(e){z=[...z,e]}function jt(e){Number.isInteger(e)&&e>=0&&(z=z.filter((t,n)=>n!==e))}function Ht(){return qe}function wt(e){qe=Array.isArray(e)?e:[]}function Vt(){return je}function Wt(e){je=Array.isArray(e)?e:[]}function Ut(e){if(!e)return{date:"",time:""};const t=String(e).trim();if(!t)return{date:"",time:""};let n=t;n.includes(" ")&&!n.includes("T")&&(n=n.replace(" ","T"));const[a="",i=""]=n.split("T"),s=a?a.slice(0,10):"",c=i.match(/(\d{1,2}:\d{2})/);let o="";if(c){const[r="00",l="00"]=c[0].split(":");o=`${r.padStart(2,"0")}:${l.padStart(2,"0")}`}return{date:s,time:o}}function K(e,t){if(!e)return"";const n=t&&t.length?t:"00:00";return`${e}T${n}`}function Ie(e){return b(String(e||"")).trim().toLowerCase()}function Ot(e,t,n,a=null){if(!e||!t||!n)return!1;const i=new Date(t),s=new Date(n);if(Number.isNaN(i.getTime())||Number.isNaN(s.getTime()))return!1;const{reservations:c=[]}=D(),o=Ie(e);return c.some(r=>{if(!r||!r.items||r.items.length===0||a&&(String(r.id)===String(a)||String(r.reservationId)===String(a))||!r.start||!r.end)return!1;const l=new Date(r.start),m=new Date(r.end);return Number.isNaN(l.getTime())||Number.isNaN(m.getTime())||!(l<s&&m>i)?!1:r.items.some(g=>Ie(g?.barcode)===o)})}function pt(e,t,n,a=null){if(!e||!t||!n)return!1;const i=new Date(t),s=new Date(n);if(Number.isNaN(i.getTime())||Number.isNaN(s.getTime()))return!1;const{reservations:c=[]}=D(),o=String(e);return c.some(r=>{if(!r?.start||!r?.end||a&&(String(r.id)===String(a)||String(r.reservationId)===String(a)))return!1;const l=new Date(r.start),m=new Date(r.end);return Number.isNaN(l.getTime())||Number.isNaN(m.getTime())||!(l<s&&m>i)?!1:(Array.isArray(r.technicians)?r.technicians:[]).some(f=>String(f)===o)})}let x=[],L=[],C=[],J="create",de=()=>{},me=()=>{};function ft(e={}){const t=[e.dailyWage,e.daily_rate,e.dailyRate,e.wage,e.rate];for(const n of t){if(n==null||n==="")continue;const a=b(String(n)),i=Number.parseFloat(a);if(Number.isFinite(i))return i}return 0}function He(e={}){const t=ft(e);if(!Number.isFinite(t)||t<=0)return"â€”";const n=u("technicians.table.wageSuffix","SR");return`${b(String(t))} ${n}`}function Te(e=""){return b(String(e)).trim().toLowerCase()}function we(e){return!x||!x.length?null:x.find(t=>String(t?.id)===String(e))||null}function ht(e,t="create"){t==="edit"?he(C.filter(n=>String(n)!==String(e))):fe(L.filter(n=>String(n)!==String(e)))}function Q(e,t=[],n){const a=document.getElementById(e);if(a){if(!t||t.length===0){const i=u("reservations.crew.none","Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹Ø¶Ùˆ Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ù….");a.innerHTML=`<span class="text-muted">${i}</span>`;return}a.innerHTML=t.map(i=>{const s=we(i)||{},c=u("reservations.crew.fallbackName","Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù… {id}").replace("{id}",i),o=s.name||c,r=s.role?`<small class="technician-chip-role">${s.role}</small>`:"",l=He(s),m=l!=="â€”"?`<small class="technician-chip-wage">ğŸ’° ${l}</small>`:"",d=u("reservations.crew.removeAria","Ø¥Ø²Ø§Ù„Ø©");return`
        <span class="technician-chip" data-id="${i}">
          <span class="technician-chip-name">${o}</span>
          ${r}
          ${m}
          <button type="button" class="technician-chip-remove" data-context="${n}" data-id="${i}" aria-label="${d}">âœ–</button>
        </span>
      `}).join(""),a.querySelectorAll(".technician-chip-remove").forEach(i=>{i.dataset.listenerAttached||(i.addEventListener("click",()=>ht(i.dataset.id,i.dataset.context)),i.dataset.listenerAttached="true")})}}function Ve(){return J==="edit"?C:L}function X(){const e=document.querySelector("#technician-picker-table tbody");if(!e)return;const t=document.getElementById("technician-picker-search"),n=Te(t?.value||""),a=new Set(Ve().map(String)),s=(x||[]).filter(c=>n?Te([c.name,c.phone,c.role,c.department,c.notes].filter(Boolean).join(" ")).includes(n):!0);if(s.length===0){const c=u("reservations.crew.searchEmpty","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©.");e.innerHTML=`<tr><td colspan="5" class="text-center text-muted">${c}</td></tr>`;return}e.innerHTML=s.map(c=>{const o=He(c);return`
      <tr>
        <td style="width:40px;">
          <input class="form-check-input technician-picker-checkbox" type="checkbox" value="${c.id}" ${a.has(String(c.id))?"checked":""}>
        </td>
        <td>${c.name||"-"}</td>
        <td>${c.role||"â€”"}</td>
        <td>${c.department||"â€”"}</td>
        <td>${o}</td>
      </tr>
    `}).join("")}function yt(){return Array.from(document.querySelectorAll(".technician-picker-checkbox:checked")).map(e=>e.value).filter(Boolean)}function gt(e="create"){if(e==="edit"){const o=document.getElementById("edit-res-start")?.value?.trim(),r=document.getElementById("edit-res-end")?.value?.trim(),l=document.getElementById("edit-res-start-time")?.value?.trim()||"00:00",m=document.getElementById("edit-res-end-time")?.value?.trim()||"00:00",d=o?K(o,l):null,g=r?K(r,m):null;let f=null;const S=document.getElementById("edit-res-index")?.value;if(S!=null){const h=Number.parseInt(S,10);if(Number.isInteger(h)){const{reservations:E=[]}=D(),y=E?.[h];y&&(f=y.id??y.reservationId??null)}}return{start:d,end:g,ignoreReservationId:f}}const t=document.getElementById("res-start")?.value?.trim(),n=document.getElementById("res-end")?.value?.trim(),a=document.getElementById("res-start-time")?.value?.trim()||"00:00",i=document.getElementById("res-end-time")?.value?.trim()||"00:00",s=t?K(t,a):null,c=n?K(n,i):null;return{start:s,end:c,ignoreReservationId:null}}function q(){const e=document.getElementById("technician-picker-selection-info");if(!e)return;const t=Ve().length;if(t){const n=u("technicians.picker.selectedCount","Selected {count} member(s)").replace("{count}",b(String(t)));e.textContent=n}else e.textContent=u("technicians.picker.selectionInfo","No crew selected yet")}function bt(){const e=yt().map(String),{start:t,end:n,ignoreReservationId:a}=gt(J);if(t&&n){const s=e.filter(c=>pt(c,t,n,a));if(s.length>0){const c=s.map(r=>we(r)?.name||r).join(u("reservations.list.crew.separator","ØŒ ")),o=u("reservations.toast.technicianSelectionConflict","âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± {names} Ù„Ø£Ù†Ù‡Ù… Ù…Ø±ØªØ¨Ø·ÙˆÙ† Ø¨Ø­Ø¬Ø² Ø¢Ø®Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©").replace("{names}",c);s.forEach(r=>{const l=document.querySelector(`.technician-picker-checkbox[value="${CSS.escape(String(r))}"]`);l&&(l.checked=!1)}),I(o),q();return}}J==="edit"?he(e):fe(e),q();const i=document.getElementById("selectTechniciansModal");i&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(i)?.hide?.()}function Ae(e="create"){J=e;const t=Re();Array.isArray(t)&&t.length&&(x=t);const n=document.getElementById("technician-picker-search");n&&(n.value=""),X(),q();const a=document.getElementById("selectTechniciansModal");a&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(a).show()}function vt(){const e=document.getElementById("open-technician-picker");e&&!e.dataset.listenerAttached&&(e.addEventListener("click",()=>Ae("create")),e.dataset.listenerAttached="true");const t=document.getElementById("open-edit-technician-picker");t&&!t.dataset.listenerAttached&&(t.addEventListener("click",()=>Ae("edit")),t.dataset.listenerAttached="true");const n=document.getElementById("technician-picker-search");n&&!n.dataset.listenerAttached&&(n.addEventListener("input",()=>{X(),q()}),n.dataset.listenerAttached="true");const a=document.getElementById("apply-technician-selection");a&&!a.dataset.listenerAttached&&(a.addEventListener("click",bt),a.dataset.listenerAttached="true");const i=document.getElementById("selectTechniciansModal");i&&!i.dataset.listenerAttached&&window.bootstrap?.Modal&&(i.addEventListener("shown.bs.modal",()=>{q(),X()}),i.addEventListener("hidden.bs.modal",()=>{const s=document.getElementById("technician-picker-search");s&&(s.value="")}),i.dataset.listenerAttached="true"),pe()}function pe(){Q("selected-technicians-list",L,"create"),Q("edit-selected-technicians-list",C,"edit")}function Kt({onDraftChange:e,onEditChange:t}={}){de=typeof e=="function"?e:()=>{},me=typeof t=="function"?t:()=>{},pe(),vt()}function St(e=[]){x=Array.isArray(e)?e:[]}function Et(){return[...L]}function It(){return[...C]}function fe(e=[]){L=Array.isArray(e)?e.map(String):[],Q("selected-technicians-list",L,"create"),de()}function he(e=[]){C=Array.isArray(e)?e.map(String):[],Q("edit-selected-technicians-list",C,"edit"),me()}function Yt(){fe([])}function Gt(){he([])}function Jt(e=[]){St(e);const t=new Set(x.map(o=>String(o.id))),n=L.filter(o=>t.has(String(o))),a=C.filter(o=>t.has(String(o))),i=n.length!==L.length,s=a.length!==C.length;L=n,C=a,pe(),i&&de(),s&&me();const c=document.getElementById("selectTechniciansModal");c&&c.classList.contains("show")&&(X(),q())}const We=10;function Tt(e={}){const t=[e.dailyWage,e.daily_rate,e.dailyRate,e.wage,e.rate];for(const n of t){const a=Number(n);if(Number.isFinite(a))return a}return 0}function At(e=[]){if(!Array.isArray(e)||e.length===0)return 0;const{technicians:t=[]}=D();if(!Array.isArray(t)||t.length===0)return 0;const n=new Map(t.filter(a=>a&&(a.id!=null||a.ID!=null)).map(a=>[String(a.id??a.ID),a]));return e.reduce((a,i)=>{const s=n.get(String(i));return s?a+Tt(s):a},0)}const Nt=1440*60*1e3;function _t(e,t){if(!e||!t)return 1;const n=new Date(e),a=new Date(t);if(Number.isNaN(n.getTime())||Number.isNaN(a.getTime()))return 1;const i=a.getTime()-n.getTime();if(i<=0)return 1;const s=i/Nt;return Math.max(1,Math.ceil(s))}function ye({items:e=[],technicianIds:t=[],discount:n=0,discountType:a="percent",applyTax:i=!1,start:s=null,end:c=null,companySharePercent:o=null}={}){const r=_t(s,c),m=(e||[]).reduce((ie,M)=>ie+(Number(M?.qty)||1)*(Number(M?.price)||0),0)*r,g=At(t)*r,f=m+g,S=Number(n)||0;let h=a==="amount"?S:f*(S/100);(!Number.isFinite(h)||h<0)&&(h=0),h>f&&(h=f);const E=Math.max(0,f-h);let y=i?E*.15:0;(!Number.isFinite(y)||y<0)&&(y=0);const T=E+y,p=Math.max(0,Math.round(T));let N=Number.isFinite(o)?Number(o):null;i&&(!Number.isFinite(N)||N<=0)&&(N=We);const v=N&&N>0?N:0,W=v>0?Math.max(0,p*(v/100)):0,ae=Math.max(0,p-y-W);return{rentalDays:r,equipmentTotal:m,crewTotal:g,discountAmount:h,taxableAmount:E,taxAmount:y,finalTotal:p,companySharePercent:v,companyShareAmount:W,netProfit:ae}}function Qt(e=[],t=0,n="percent",a=!1,i=[],{start:s=null,end:c=null}={}){return ye({items:e,technicianIds:i,discount:t,discountType:n,applyTax:a,start:s,end:c}).finalTotal}function Ue({total:e,itemsCount:t,rentalDays:n,techniciansCount:a,applyTax:i,paidStatus:s,companySharePercent:c=null,companyShareAmount:o=null,taxAmount:r=null,netProfit:l=null,totalKey:m="reservations.summary.total"}){const d=u("reservations.create.summary.currency","SR"),g=b(String(e)),f=b(String(t)),S=b(String(n??1)),h=b(String(a)),E=s==="paid"?u("reservations.create.paymentStatus.paid","Ù…Ø¯ÙÙˆØ¹"):u("reservations.create.paymentStatus.unpaid","ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹"),y=u("reservations.summary.itemsLabel","ğŸ“¦ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),T=u("reservations.summary.durationLabel","â±ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…"),p=u("reservations.summary.crewLabel","ğŸ˜ Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚"),N=u("reservations.summary.taxLabelShort","ğŸ§¾ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©"),v=u("reservations.summary.paymentLabelShort","ğŸ’³ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹"),W=u(m.replace(".total",".totalLabel"),"ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"),ae=u("reservations.summary.companyShareLabel","ğŸ¦ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),ie=u("reservations.details.labels.netProfit","ğŸ’µ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),M=Number.isFinite(l)?Math.max(0,Number(l)):null,j=[{label:y,value:f},{label:T,value:S},{label:p,value:h}];if(i){let B=u("reservations.summary.taxIncludedValue","Ø´Ø§Ù…Ù„ 15%");Number.isFinite(r)&&r>0&&(B=`${b(Number(r).toFixed(2))} ${d}`),j.push({label:N,value:B})}const U=Number.isFinite(c)?Number(c):null;if(U!==null&&U>0){const B=Number.isFinite(o)?Number(o):e*(U/100),H=b(String(U)),Ye=b(Number.isFinite(B)?B.toFixed(2):"0"),Ge=`${H}% (${Ye} ${d})`;j.push({label:ae,value:Ge})}if(M!==null&&Math.abs(M-Number(e))>.009){const B=b(M.toFixed(2));j.push({label:ie,value:`${B} ${d}`})}j.push({label:v,value:E});const Ke=`${g} ${d}`;return`
    <div class="reservation-summary-container">
      <div class="reservation-summary-box">
        ${j.map(({label:B,value:H})=>`
          <div class="reservation-summary-line">
            <span class="reservation-summary-label">${B}</span>
            ${H?`<span class="reservation-summary-value">${H}</span>`:""}
          </div>
        `).join("")}
        <div class="reservation-summary-line reservation-summary-total">
          <span class="reservation-summary-label">${W}</span>
          <span class="reservation-summary-value">${Ke}</span>
        </div>
      </div>
    </div>
  `}function Xt({selectedItems:e,discount:t,discountType:n,applyTax:a,paidStatus:i,start:s,end:c,companySharePercent:o=null}){const r=Et(),l=r.length,m=Number.isFinite(o)?Number(o):null,d=ye({items:e,technicianIds:r,discount:t,discountType:n,applyTax:a,start:s,end:c,companySharePercent:m}),g=Ue({total:d.finalTotal,itemsCount:e.length,rentalDays:d.rentalDays,techniciansCount:l,applyTax:a,paidStatus:i,companySharePercent:d.companySharePercent,companyShareAmount:d.companyShareAmount,taxAmount:d.taxAmount,netProfit:d.netProfit});Bt(g)}function Zt({items:e,discount:t,discountType:n,applyTax:a,paidStatus:i,start:s,end:c,companySharePercent:o=null}){const r=It(),l=r.length,m=Number.isFinite(o)?Number(o):null,d=ye({items:e,technicianIds:r,discount:t,discountType:n,applyTax:a,start:s,end:c,companySharePercent:m});return Ue({total:d.finalTotal,itemsCount:e.length,rentalDays:d.rentalDays,techniciansCount:l,applyTax:a,paidStatus:i,companySharePercent:d.companySharePercent,companyShareAmount:d.companyShareAmount,taxAmount:d.taxAmount,netProfit:d.netProfit,totalKey:"reservations.summary.totalAfterEdit"})}function Bt(e){const t=document.getElementById("reservation-preview");t&&(t.innerHTML=e,Ne(t,e));const n=document.getElementById("reservation-preview-bottom");n&&(n.innerHTML=e,Ne(n,e))}function Ne(e,t){const n=typeof t=="string"&&t.trim().length>0;e.classList.toggle("reservation-summary-host",n)}const Lt=D()||{};let F=(Lt.reservations||[]).map(Dt);function en(){return F}function ne(e){return F=Array.isArray(e)?e.map(be):[],Be({reservations:F}),F}async function tn(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([o,r])=>{r!=null&&r!==""&&t.set(o,String(r))});const n=t.toString(),i=(await $(`/reservations/${n?`?${n}`:""}`))?.data;let s=[];Array.isArray(i)?s=i:i&&typeof i=="object"&&(Array.isArray(i.items)?s=i.items:Array.isArray(i.results)?s=i.results:Array.isArray(i.data)?s=i.data:Array.isArray(i.records)&&(s=i.records));const c=s.map(ge);return ne(c)}async function nn(e){const t=await $("/reservations/",{method:"POST",body:e}),n=ge(t?.data??{});return!Number.isFinite(n.companySharePercent)&&e?.company_share_percent!=null&&(n.companySharePercent=Number(e.company_share_percent)||0),n.companySharePercent>0&&!Number.isFinite(n.companyShareAmount)&&Number.isFinite(n.cost)&&(n.companyShareAmount=Math.max(0,n.cost*(n.companySharePercent/100))),n.companyShareEnabled=e?.company_share_enabled?!0:n.companySharePercent>0,ne([...F,n]),n}async function Ct(e,t){const n=await $(`/reservations/?id=${encodeURIComponent(e)}`,{method:"PATCH",body:t}),a=ge(n?.data??{});!Number.isFinite(a.companySharePercent)&&t?.company_share_percent!=null&&(a.companySharePercent=Number(t.company_share_percent)||0),a.companySharePercent>0&&!Number.isFinite(a.companyShareAmount)&&Number.isFinite(a.cost)&&(a.companyShareAmount=Math.max(0,a.cost*(a.companySharePercent/100))),a.companyShareEnabled=t?.company_share_enabled?!0:a.companySharePercent>0;const i=F.map(s=>String(s.id)===String(e)?a:s);return ne(i),a}async function an(e){await $(`/reservations/?id=${encodeURIComponent(e)}`,{method:"DELETE"});const t=F.filter(n=>String(n.id)!==String(e));ne(t)}async function sn(e){return Ct(e,{status:"confirmed",confirmed:!0})}function ge(e={}){return be({id:e.id,reservationId:e.reservation_code??e.reservationId,reservation_code:e.reservation_code,customer_id:e.customer_id,customerId:e.customer_id,customer_name:e.customer_name,customerName:e.customer_name,title:e.title,start:e.start_datetime,end:e.end_datetime,start_datetime:e.start_datetime,end_datetime:e.end_datetime,status:e.status,confirmed:e.confirmed,location:e.location,notes:e.notes,total_amount:e.total_amount,project_id:e.project_id,discount:e.discount,discount_type:e.discount_type,apply_tax:e.apply_tax,paid_status:e.paid_status,items:e.items,technicians:e.technicians,company_share_percent:e.company_share_percent??e.companySharePercent??e.company_share??e.companyShare,company_share_enabled:e.company_share_enabled??e.companyShareEnabled??e.company_share_applied??e.companyShareApplied,company_share_amount:e.company_share_amount??e.companyShareAmount})}function Dt(e={}){return be(e)}function be(e={}){const t=e.id??e.reservation_id??e.reservationId??null,n=e.reservation_code??e.reservationCode??e.reservationId??(t!=null?`RSV-${t}`:null),a=Array.isArray(e.items)?e.items.map($t):[],i=Array.isArray(e.technicians)?e.technicians:[],s=i.map(v=>v==null?null:String(typeof v=="object"?v.id??v.technician_id??v.technicianId??v.ID??"":v)).filter(v=>v&&v!==""),c=e.start??e.start_datetime??"",o=e.end??e.end_datetime??"",r=Z(e.total_amount??e.totalAmount??e.cost??0),l=Z(e.discount??0),m=e.discount_type??e.discountType??"percent",d=!!(e.apply_tax??e.applyTax??!1),g=xt(e.paid_status??e.paidStatus??(e.paid===!0||e.paid==="paid"?"paid":"unpaid"))??"unpaid",f=e.confirmed!=null?!!e.confirmed:["confirmed","in_progress","completed"].includes(String(e.status??"").toLowerCase()),S=e.company_share_percent??e.companySharePercent??e.company_share??e.companyShare??null,h=S!=null?Number.parseFloat(b(String(S).replace("%","").trim())):NaN,E=e.company_share_enabled??e.companyShareEnabled??e.company_share_applied??e.companyShareApplied??null;let y=E!=null?E===!0||E===1||E==="1"||String(E).toLowerCase()==="true":Number.isFinite(h)&&h>0,T=y&&Number.isFinite(h)?Number(h):0;const p=e.company_share_amount??e.companyShareAmount;let N=Number.isFinite(Number(p))?Number(p):T>0?Math.max(0,r*(T/100)):0;return d&&T<=0&&(T=We,N=Math.max(0,r*(T/100)),y=!0),!y&&T>0&&(y=!0),{id:t!=null?String(t):"",reservationId:n??(t!=null?String(t):""),reservationCode:n??null,customerId:e.customer_id??e.customerId??e.customer?.id??null,customerName:e.customer_name??e.customerName??e.customer?.full_name??e.customer?.customerName??"",title:e.title??e.name??"",start:c,end:o,status:Pt(e.status??(f?"confirmed":"pending")),confirmed:f,location:e.location??"",notes:e.notes??"",discount:l,discountType:["percent","amount"].includes(m)?m:"percent",applyTax:d,paid:g==="paid",paidStatus:g,totalAmount:r,cost:r,projectId:e.project_id??e.projectId??null,items:a,technicians:s,techniciansDetails:i.map(v=>typeof v=="object"?v:{id:Number(v)||v}),startDatetime:c,endDatetime:o,customerPhone:e.customer_phone??e.customerPhone??null,companySharePercent:T,companyShareAmount:N,companyShareEnabled:y}}function $t(e={}){const t=e.equipment_id??e.equipmentId??e.id??e.item_id??null,n=Oe(e.quantity??e.qty??1),a=Z(e.unit_price??e.price??0);return{id:t!=null?String(t):"",equipmentId:t,barcode:b(String(e.barcode??e.code??"")),desc:e.description??e.desc??e.name??"",qty:n,price:a,notes:e.notes??null,image:e.image??e.image_url??null}}function cn({reservationCode:e,customerId:t,start:n,end:a,status:i,title:s,location:c,notes:o,projectId:r,totalAmount:l,discount:m,discountType:d,applyTax:g,paidStatus:f,confirmed:S,items:h,technicians:E,companySharePercent:y,companyShareEnabled:T}){return{reservation_code:e??null,customer_id:t,start_datetime:n,end_datetime:a,status:i??"pending",title:s??null,location:c??null,notes:o??null,project_id:r||null,total_amount:l??0,discount:m??0,discount_type:d??"percent",apply_tax:g?1:0,paid_status:f??"unpaid",confirmed:S===void 0?null:!!S,items:Array.isArray(h)?h.map(p=>({equipment_id:p.equipmentId??p.equipment_id??p.id,quantity:Oe(p.qty??p.quantity??1),unit_price:Z(p.price??p.unit_price??0),notes:p.notes??null})):[],company_share_percent:T&&Number.isFinite(y)?Number(y):null,company_share_enabled:T?1:0,technicians:Array.isArray(E)?E.map(p=>typeof p=="object"&&p!==null?{id:p.id??p.technician_id??p.technicianId??p.ID,role:p.role??null,notes:p.notes??null}:Number.isNaN(Number(p))?String(p):Number(p)):[]}}function Z(e){const t=Number(b(String(e??"0")));return Number.isFinite(t)?Number(t.toFixed(2)):0}function Oe(e){const t=Number.parseInt(b(String(e??"1")),10);return!Number.isFinite(t)||t<=0?1:t}function Pt(e){switch(String(e??"").trim().toLowerCase()){case"pending":case"Ù…Ø¹Ù„Ù‚":case"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±":return"pending";case"confirmed":case"Ù…Ø¤ÙƒØ¯":return"confirmed";case"in_progress":case"in-progress":case"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°":case"Ø¬Ø§Ø±ÙŠ":return"in_progress";case"completed":case"Ù…ÙƒØªÙ…Ù„":return"completed";case"cancelled":case"Ù…Ù„ØºÙŠ":return"cancelled";default:return"pending"}}function xt(e){if(e==null)return null;switch(String(e).trim().toLowerCase()){case"paid":case"Ù…Ø¯ÙÙˆØ¹":return"paid";case"partial":case"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹":case"partial_paid":return"partial";case"unpaid":case"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹":case"not_paid":default:return"unpaid"}}function rn(e){return e instanceof _e}export{pt as A,cn as B,nn as C,We as D,Vt as E,Yt as F,zt as G,Wt as H,Zt as I,he as J,It as K,Gt as L,an as M,sn as N,tn as a,ce as b,ge as c,Mt as d,kt as e,_t as f,en as g,Qt as h,rn as i,Kt as j,Jt as k,Ht as l,Dt as m,Ie as n,Xt as o,K as p,Ut as q,Ze as r,Re as s,wt as t,Ct as u,Rt as v,Ot as w,qt as x,jt as y,Et as z};
