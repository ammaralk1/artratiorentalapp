(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const We={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://127.0.0.1:8000/api"},de="/backend/api",$=new Map;let G=0,k=0;const Ye=5e3,Je=3e4,Xe=12e3;class E extends Error{constructor(t,{status:n,payload:r}={}){super(t),this.name="ApiError",this.status=n??null,this.payload=r??null}}function Qe(){const e=typeof import.meta<"u"&&We&&"http://127.0.0.1:8000/api",t=typeof window<"u"?window.APP_API_BASE:null;let n=e||t||de;try{const r=typeof n=="string"&&/^(https?:)?\/\/(localhost|127\.|\[::1\])\b/i.test(n),o=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="[::1]");r&&!o&&(n=de)}catch{}return String(n).replace(/\/$/,"")}async function H(e,{method:t="GET",headers:n={},body:r,signal:o,credentials:a="include",timeout:i=Xe}={}){let s=e;try{if(typeof URL<"u"&&e instanceof URL)s=e.href;else if(typeof Request<"u"&&e instanceof Request)s=e.url;else if(e&&typeof e=="object"){const f=e.path||e.url||e.endpoint||null;s=String(f||e)}}catch{}typeof s!="string"&&(s=String(s||""));const l=/^https?:\/\//i.test(s),c=l||s.charAt(0)==="/"?s:`/${s}`,d=l?c:`${Qe()}${c}`;try{if(typeof navigator<"u"&&navigator&&navigator.onLine===!1){const f=new E("Network offline",{status:0});throw f.offline=!0,f}}catch{}const y=Date.now(),S=Math.min(Je,Ye*Math.max(1,Math.pow(2,Math.max(0,k-1))));if(k>0&&y-G<S){const f=new E("Network cooldown after failures",{status:0});throw f.cooldown=!0,f}const m={Accept:"application/json",...n},u={method:t,headers:m,signal:o,credentials:a};r!==void 0&&(r instanceof FormData?(delete m["Content-Type"],u.body=r):typeof r=="string"?(m["Content-Type"]=m["Content-Type"]||"application/json",u.body=r):(m["Content-Type"]=m["Content-Type"]||"application/json",u.body=JSON.stringify(r)));const b=`${t} ${d}`;if($.has(b))return $.get(b);const ce=(async()=>{const f=typeof AbortController<"u"?new AbortController:null,Q=f&&Number.isFinite(i)&&i>0?setTimeout(()=>{try{f.abort()}catch{}},i):null,Ke=f?o?new Ve([o,f.signal]):f.signal:o;function Ve(D){const le=new AbortController,ue=()=>{try{le.abort()}catch{}};return D.filter(Boolean).forEach(Z=>{try{Z.aborted?ue():Z.addEventListener("abort",ue,{once:!0})}catch{}}),le.signal}try{const D=await fetch(d,{...u,signal:Ke});return k=0,G=0,D}catch(D){throw k=Math.min(10,k+1),G=Date.now(),D}finally{Q&&clearTimeout(Q)}})().finally(()=>{$.delete(b)});$.set(b,ce);const C=await ce,Ge=C.headers.get("content-type")||"";let g=null,w="";try{w=await C.text()}catch{w=""}if(Ge.includes("application/json"))try{g=w?JSON.parse(w):null}catch{g=w?{raw:w}:null}else if(w){const f=w.trim();if(f.startsWith("{")||f.startsWith("["))try{g=JSON.parse(f)}catch{g={raw:w}}else g={raw:w}}else g=null;if(!C.ok){const f=g?.error||`Request failed with status ${C.status}`;try{C.status>=500&&(k=Math.min(10,k+1),G=Date.now())}catch{}throw new E(f,{status:C.status,payload:g})}if(g&&typeof g=="object"&&g.ok===!1){const f=g.error||"API returned an error response";throw new E(f,{status:C.status,payload:g})}return g}const A=Object.freeze({language:"ar",theme:"light",dashboardTab:null,dashboardSubTab:null,projectsTab:null,projectsSubTab:null});let T=null,K=null;const oe=new Set,Se="__ART_RATIO_SKIP_PREF_FETCH__",_e="__ART_RATIO_PREFERENCES__";function Le(){try{return typeof window>"u"?!1:!!window[Se]}catch{return!1}}function Ze(){try{typeof window<"u"&&delete window[Se]}catch{}}function j(e={}){const t=e.language==="en"?"en":"ar",n=e.theme==="dark"?"dark":"light",r=typeof e.dashboardTab=="string"?V(e.dashboardTab):null,o=typeof e.dashboardSubTab=="string"?V(e.dashboardSubTab):null,a=typeof e.projectsTab=="string"?V(e.projectsTab):null,i=typeof e.projectsSubTab=="string"?V(e.projectsSubTab):null;return{language:t,theme:n,dashboardTab:r,dashboardSubTab:o,projectsTab:a,projectsSubTab:i}}function V(e){const t=String(e||"").trim();return t&&/^[a-z0-9\-]+$/i.test(t)?t:null}function et(){try{if(typeof window>"u"||!window.localStorage)return null;const e=window.localStorage.getItem(_e);if(!e)return null;const t=JSON.parse(e);return j(t)}catch(e){return console.warn("‚ö†Ô∏è [preferencesService] Failed to read cached preferences",e),null}}function tt(e){try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.setItem(_e,JSON.stringify(e))}catch(t){console.warn("‚ö†Ô∏è [preferencesService] Failed to persist preferences",t)}}const fe=et();fe&&(T=fe);function nt(){const e=p();oe.forEach(t=>{try{t(e)}catch(n){console.error("‚ö†Ô∏è [preferencesService] listener failed",n)}})}function P(e){const n={...T?{...T}:{...A},...e};T=j(n),tt(T),nt()}function p(){return T?{...T}:null}function ve(e){if(typeof e!="function")return()=>{};if(oe.add(e),T)try{e(p())}catch(t){console.error("‚ö†Ô∏è [preferencesService] listener failed",t)}return()=>{oe.delete(e)}}function Ce({refresh:e=!1}={}){if(Le()){const t=p()||{...A};return Promise.resolve(t)}return!e&&T?Promise.resolve(p()):(K||(K=H("/preferences/").then(t=>{const n=t?.data??A;return P(n),p()}).catch(t=>t instanceof E&&t.status===401?(T=null,A):(console.warn("‚ö†Ô∏è [preferencesService] Failed to load preferences",t),P(A),A)).finally(()=>{K=null})),K)}function ot(e=null){if(!e){const t=p();return j(t||A)}return j(e)}async function ae(e={}){if(Le())return P(e),p()||{...A};e.language!==void 0&&e.language,e.theme!==void 0&&e.theme,e.dashboardTab!==void 0&&e.dashboardTab,e.dashboardSubTab!==void 0&&e.dashboardSubTab,e.projectsTab!==void 0&&e.projectsTab,e.projectsSubTab!==void 0&&e.projectsSubTab;const t=ot(),n={...t,...e},r=j(n),o={},a={};["language","theme","dashboardTab","dashboardSubTab","projectsTab","projectsSubTab"].forEach(c=>{if(e[c]===void 0)return;const d=r[c],y=t[c];d!==y&&(o[c]=d,(c==="language"||c==="theme")&&(a[c]=d))});const s=Object.keys(o).length>0,l=Object.keys(a).length>0;if(!l&&!s)return p();if(!l&&s)return P(r),p();try{const c=await H("/preferences/",{method:"PATCH",body:a});return P(c?.data??A),s&&P({...p(),...o}),p()}catch(c){if(c instanceof E&&c.status===422)return console.warn("‚ö†Ô∏è [preferencesService] Server rejected preference update (no changes)."),P(r),p();throw c}}const rt="__ART_RATIO_SKIP_PREF_FETCH__";function at(){try{return typeof window<"u"&&!!window[rt]}catch{return!1}}const v="ar",st="ar",it="language-loading",me="language-ready",ke=["Placeholder","Title","AriaLabel","AriaDescription","Value"],q={ar:Object.create(null),en:Object.create(null)};let x=v,F=!1,W=null;function M(e){return e==="en"?"en":"ar"}function Pe(){if(!W){const e=p();if(e?.language){const t=M(e.language);N(t,{persist:!1,dispatch:!1})}if(at()){const t=e?.language?M(e.language):v;N(t,{persist:!1}),F=!0,W=Promise.resolve(t)}else W=Ce().then(t=>{const n=M(t?.language??v);return N(n,{persist:!1}),F=!0,n}).catch(t=>(console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑŸÑÿ∫ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ",t),N(v,{persist:!1}),F=!0,v))}return W}function ct(e){if(e.dataset.i18nCached==="true")return;e.dataset.i18nHtml==="true"?e.dataset.arHtml===void 0&&(e.dataset.arHtml=e.innerHTML):e.dataset.ar===void 0&&(e.dataset.ar=e.textContent),ke.forEach(n=>{const r=n.charAt(0).toLowerCase()+n.slice(1),o=e.getAttribute(r);o!=null&&e.dataset[`ar${n}`]===void 0&&(e.dataset[`ar${n}`]=o)}),e.dataset.i18nCached="true"}function he(e,t){if(!t)return;const n=q[e]??(q[e]=Object.create(null));Object.entries(t).forEach(([r,o])=>{typeof r=="string"&&(n[r]=o)})}function ge(e,t){if(!t)return;const n=q[e];return n?n[t]:void 0}function lt(e,t){ct(e);const n=e.dataset.i18nHtml==="true",r=e.dataset.i18nKey,o=ge(t,r);o!==void 0?n?e.innerHTML=o:e.textContent=o:t==="en"?n?e.dataset.enHtml!==void 0&&(e.innerHTML=e.dataset.enHtml):e.dataset.en!==void 0&&(e.textContent=e.dataset.en):n?e.innerHTML=e.dataset.arHtml??e.innerHTML:e.textContent=e.dataset.ar??e.textContent,ke.forEach(a=>{const i=a.charAt(0).toLowerCase()+a.slice(1),s=e.dataset[`i18n${a}Key`],l=ge(t,s);if(l!==void 0){e.setAttribute(i,l);return}const c=t==="en"?`en${a}`:`ar${a}`,d=e.dataset[c];d!==void 0&&e.setAttribute(i,d)})}function Re(e){document.querySelectorAll("[data-i18n]").forEach(n=>lt(n,e))}function ut(e){const t=document.documentElement,n=document.body,r=e===st?"rtl":"ltr";t.setAttribute("lang",e),t.setAttribute("dir",r),n&&(n.setAttribute("dir",r),n.dataset.lang=e)}function dt(){const e=document.documentElement;e&&(e.classList.contains(me)||(e.classList.remove(it),e.classList.add(me)))}function xe(e){document.querySelectorAll(".language-toggle-btn").forEach(t=>{const n=t.dataset.labelAr||"üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",r=t.dataset.labelEn||"üá¨üáß English";t.textContent=e==="en"?n:r,t.setAttribute("aria-pressed",e==="en"?"true":"false")})}function N(e,{persist:t=!1,dispatch:n=!0}={}){const r=M(e);x===r&&F&&!t||(x=r,F=!0,ut(r),Re(r),xe(r),dt(),n&&document.dispatchEvent(new CustomEvent("language:changed",{detail:{language:r}})),t&&ae({language:r}).catch(o=>{console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑŸÑÿ∫ÿ© ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ",o)}))}function ft(){mt(x==="ar"?"en":"ar")}function De(){document.querySelectorAll(".language-toggle-btn").forEach(t=>{t.dataset.listenerAttached||(t.addEventListener("click",()=>{ft()}),t.dataset.listenerAttached="true")}),xe(x)}function Ne(e={}){he("ar",e.ar),he("en",e.en);const t=re();Re(t),document.dispatchEvent(new CustomEvent("language:translationsReady",{detail:{language:t}}))}function L(e,t=""){if(!e)return t;const n=x||v,r=q[n];if(r&&r[e]!==void 0)return r[e];const a=q[n==="en"?"ar":"en"];return a&&a[e]!==void 0?a[e]:t}function mt(e){const t=M(e);N(t,{persist:!0})}function Ht(){Pe().catch(()=>v).finally(()=>{De()})}function re(){return x}function pe(){Pe().catch(()=>v),De()}ve(e=>{e&&e.language&&M(e.language)!==x&&N(e.language,{persist:!1})});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",pe,{once:!0}):pe();Ne({ar:{"actions.logout":"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨","actions.toggleTheme":"üåô ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä","theme.toggle.toLight":"‚òÄÔ∏è ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä","theme.toggle.toDark":"üåô ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä","theme.toggle.titleLight":"ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä","theme.toggle.titleDark":"ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä","theme.toggle.ariaLight":"ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä ŸÖŸÅÿπŸÑ","theme.toggle.ariaDark":"ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä ŸÖŸÅÿπŸÑ","common.boolean.yes":"ŸÜÿπŸÖ","common.boolean.no":"ŸÑÿß","language.toggle.labelAr":"üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©","language.toggle.labelEn":"üá¨üáß English","login.pageTitle":"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ","login.header.title":"üîê ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ","login.header.subtitle":"ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ.","login.form.username":"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ","login.form.username.placeholder":"ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ","login.form.password":"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.password.placeholder":"ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.password.toggleShow":"ÿ•ÿ∏Ÿáÿßÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.password.toggleHide":"ÿ•ÿÆŸÅÿßÿ° ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.submit":"ÿØÿÆŸàŸÑ","login.errors.invalidCredentials":"‚ùå ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©","login.errors.network":"üåê ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.","login.errors.generic":"‚ö†Ô∏è ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.","login.footer.note":"ŸÖÿ≠ŸÖŸä ŸÑÿ£ÿπÿ∂ÿßÿ° ŸÅÿ±ŸäŸÇ Art Ratio. ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿ•ÿ∞ÿß Ÿàÿßÿ¨Ÿáÿ™ ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ.","actions.clearFilters":"üîÑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿµŸÅŸäÿ©","actions.view":"üëÅÔ∏è ÿπÿ±ÿ∂","actions.delete":"üóëÔ∏è ÿ≠ÿ∞ŸÅ","actions.remove":"ÿ•ÿ≤ÿßŸÑÿ©","auth.permissions.denied":"‚ö†Ô∏è ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑÿ™ŸÜŸÅŸäÿ∞ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°","home.nav.brand":"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ","home.hero.title":"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ","home.hero.subtitle":"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿ≥ÿßÿ± ÿßŸÑŸÖŸÜÿßÿ≥ÿ® ŸÑÿ•ÿØÿßÿ±ÿ© ÿ£ÿπŸÖÿßŸÑŸÉ.","home.hero.greetingUser":"ŸÖÿ±ÿ≠ÿ®ÿßŸã {name}","home.bookings.title":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ¨Ÿàÿ≤ÿßÿ™","home.bookings.description":"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÉÿßŸÖŸÑÿ© ŸÑÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ¨Ÿàÿ≤ÿßÿ™ÿå ÿßŸÑŸÖÿπÿØÿßÿ™ÿå ÿßŸÑÿµŸäÿßŸÜÿ©ÿå ŸàÿßŸÑÿ∑ÿßŸÇŸÖ.","home.bookings.button":"ÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ","home.projects.title":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ","home.projects.description":"ÿ•ŸÜÿ¥ÿßÿ° ŸàŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπÿå ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿ∑ÿßŸÇŸÖ ŸàÿßŸÑŸÖÿπÿØÿßÿ™ÿå Ÿàÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ÿ© ÿ®ŸÉŸÑ ŸÖÿ¥ÿ±Ÿàÿπ.","home.projects.button":"ŸÅÿ™ÿ≠ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ","home.users.title":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ","home.users.description":"ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜÿå ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿßÿ™ÿå ŸàÿßŸÑÿßÿ∑ŸÑÿßÿπ ÿπŸÑŸâ ÿ≥ÿ¨ŸÑÿßÿ™ ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™ ŸàÿßŸÑŸÜÿ¥ÿßÿ∑.","home.users.button":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ","actions.refresh":"üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™","home.summary.title":"üìä ŸÖŸÑÿÆÿµ ÿ≥ÿ±Ÿäÿπ","home.summary.subtitle":"ÿ£ÿ±ŸÇÿßŸÖ ŸÖÿÆÿ™ÿµÿ±ÿ© ÿ™ÿ≥ÿßÿπÿØŸÉ ÿπŸÑŸâ ÿßÿ™ÿÆÿßÿ∞ ÿßŸÑŸÇÿ±ÿßÿ± ÿ®ÿ≥ÿ±ÿπÿ©.","home.summary.loading":"‚è≥ ÿ¨ÿßÿ±Ÿç ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ...","home.summary.error":"ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖÿå ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã","home.summary.empty":"ŸÑÿß ÿ™ÿ™ŸàŸÅÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿπÿØ. ÿßÿ®ÿØÿ£ ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ¨ŸÑÿßÿ™.","home.summary.customers":"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπŸÖŸÑÿßÿ°","home.summary.reservationsToday":"ÿ≠ÿ¨Ÿàÿ≤ÿßÿ™ ÿßŸÑŸäŸàŸÖ","home.summary.reservationsUpcoming":"ÿ≠ÿ¨Ÿàÿ≤ÿßÿ™ ŸÇÿßÿØŸÖÿ©","home.summary.projectsActive":"ŸÖÿ¥ÿßÿ±Ÿäÿπ ŸÜÿ¥ÿ∑ÿ©","home.summary.equipmentMaintenance":"ŸÖÿπÿØÿßÿ™ ŸÇŸäÿØ ÿßŸÑÿµŸäÿßŸÜÿ©","home.summary.maintenanceHigh":"ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿµŸäÿßŸÜÿ© ÿπÿßÿ¨ŸÑÿ©","home.summary.techniciansBusy":"ÿ£ÿπÿ∂ÿßÿ° ÿ∑ÿßŸÇŸÖ ŸÖÿ¥ÿ∫ŸàŸÑŸàŸÜ"},en:{"actions.logout":"üö™ Log Out","actions.toggleTheme":"üåô Dark Mode","theme.toggle.toLight":"‚òÄÔ∏è Light Mode","theme.toggle.toDark":"üåô Dark Mode","theme.toggle.titleLight":"Switch to Light Mode","theme.toggle.titleDark":"Switch to Dark Mode","theme.toggle.ariaLight":"Light mode enabled","theme.toggle.ariaDark":"Dark mode enabled","common.boolean.yes":"Yes","common.boolean.no":"No","language.toggle.labelAr":"üá∏üá¶ Arabic","language.toggle.labelEn":"üá¨üáß English","login.pageTitle":"Log In","login.header.title":"üîê Log In","login.header.subtitle":"Enter your account credentials to access the dashboard.","login.form.username":"Username","login.form.username.placeholder":"Enter username","login.form.password":"Password","login.form.password.placeholder":"Enter password","login.form.password.toggleShow":"Show password","login.form.password.toggleHide":"Hide password","login.form.submit":"Sign In","login.errors.invalidCredentials":"‚ùå Incorrect username or password","login.errors.network":"üåê Unable to reach the server. Please try again.","login.errors.generic":"‚ö†Ô∏è Something went wrong. Please try again.","login.footer.note":"Restricted to Art Ratio team members. Contact us if you run into any login issues.","actions.clearFilters":"üîÑ Reset filters","actions.view":"üëÅÔ∏è View","actions.delete":"üóëÔ∏è Delete","actions.remove":"Remove","auth.permissions.denied":"‚ö†Ô∏è You do not have permission to perform this action","home.nav.brand":"Control Panel","home.hero.title":"Welcome","home.hero.subtitle":"Choose the best path to manage your operations.","home.hero.greetingUser":"Welcome {name}","home.bookings.title":"Bookings Management","home.bookings.description":"Access the full dashboard for bookings, equipment, maintenance, and crew.","home.bookings.button":"Open Dashboard","home.projects.title":"Projects Management","home.projects.description":"Create and follow up on projects, assign crew and equipment, and track expenses.","home.projects.button":"Open Projects Hub","home.users.title":"User Management","home.users.description":"Create accounts, adjust roles, and review session and activity logs.","home.users.button":"Manage Users","actions.refresh":"üîÑ Refresh data","home.summary.title":"üìä Quick Snapshot","home.summary.subtitle":"Key metrics that keep you informed at a glance.","home.summary.loading":"‚è≥ Fetching system metrics...","home.summary.error":"Unable to load system metrics. Please try again later.","home.summary.empty":"No data yet. Start by adding your first records.","home.summary.customers":"Total Customers","home.summary.reservationsToday":"Reservations Today","home.summary.reservationsUpcoming":"Upcoming Reservations","home.summary.projectsActive":"Active Projects","home.summary.equipmentMaintenance":"Equipment in Maintenance","home.summary.maintenanceHigh":"Urgent Maintenance Tickets","home.summary.techniciansBusy":"Crew Members Busy"}});Ne({ar:{"equipment.packages.selection.addToPackage":"‚ûï ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿ≤ŸÖÿ©","reservations.create.equipment.selector.addToReservation":"‚ûï ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿ¨ÿ≤"},en:{"equipment.packages.selection.addToPackage":"‚ûï Add to package","reservations.create.equipment.selector.addToReservation":"‚ûï Add to reservation"}});const I="dark-mode",Y=new WeakSet,ye="theme-loading",Ie="art-ratio:session-theme";let be=!1;function je(){return Array.from(document.querySelectorAll("[data-theme-toggle], .theme-toggle-btn"))}function Me(e){return e==="dark"?"dark":"light"}function ht(e){try{window.sessionStorage?.setItem(Ie,Me(e))}catch{}}function gt(){try{const e=window.sessionStorage?.getItem(Ie);return e==="dark"?"dark":e==="light"?"light":null}catch{return null}}function pt(){document.documentElement.classList.remove(ye);const e=document.body;e&&e.classList.remove(ye)}function J(e,{persist:t=!0}={}){const n=Me(e),r=document.documentElement,o=document.body;n==="dark"?(r.classList.add(I,"dark"),o&&o.classList.add(I,"dark")):(r.classList.remove(I,"dark"),o&&o.classList.remove(I,"dark"));const a=n==="dark"?"dark":"light";r.setAttribute("data-theme",a),o&&o.setAttribute("data-theme",a),ht(n),se(n);try{document.dispatchEvent(new CustomEvent("theme:changed",{detail:{theme:n}}))}catch(i){console.warn("‚ö†Ô∏è [theme.js] Failed to dispatch theme change event",i)}t&&ae({theme:n}).catch(i=>{console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑÿ≥ŸÖÿ© ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ",i)})}function B(){const e=document.body;return e&&e.classList.contains(I)||document.documentElement.classList.contains(I)?"dark":"light"}function ee(){const e=B()==="dark"?"light":"dark";J(e,{persist:!0})}function yt(e,t){if(!e)return;const n=t==="dark",r=L("theme.toggle.toLight","‚òÄÔ∏è ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä"),o=L("theme.toggle.toDark","üåô ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä"),a=L("theme.toggle.ariaLight","ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä ŸÖŸÅÿπŸÑ"),i=L("theme.toggle.ariaDark","ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä ŸÖŸÅÿπŸÑ"),s=L("theme.toggle.titleLight","ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä"),l=L("theme.toggle.titleDark","ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä");if(e.matches("[data-theme-toggle]")){const c=e.matches("input")?e:e.querySelector('input[type="checkbox"]'),d=n?r:o,y=n?a:i,S=n?s:l;c&&(c.checked=n,c.setAttribute("aria-label",d),c.setAttribute("aria-checked",String(n))),e.setAttribute("title",S),e.setAttribute("aria-label",y),e.setAttribute("data-theme-state",n?"dark":"light");const m=e.querySelector("[data-theme-label]");m&&(m.textContent=d)}else e.textContent=n?r:o,e.setAttribute("aria-pressed",String(n)),e.setAttribute("title",n?s:l),e.setAttribute("aria-label",n?a:i)}function se(e){je().forEach(t=>yt(t,e)),pt()}function bt(){const e=je();se(B()),e.forEach(t=>{if(!(!t||Y.has(t))){if(t.matches("[data-theme-toggle]")){const n=t.matches("input")?t:t.querySelector('input[type="checkbox"]'),r=()=>{ee()};n&&!Y.has(n)?(n.addEventListener("change",r),Y.add(n)):n||t.addEventListener("click",o=>{o.preventDefault(),ee()})}else t.getAttribute("type")||t.setAttribute("type","button"),t.addEventListener("click",n=>{n.preventDefault(),ee()});Y.add(t)}})}function Bt({skipRemote:e=!1}={}){const t=p(),o=(t?.theme==="dark"?"dark":t?.theme==="light"?"light":null)||gt()||wt();J(o,{persist:!1}),Et({skipRemote:e})}function wt(){try{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch{}return"light"}function Et({skipRemote:e=!1}={}){be||(be=!0,!e&&Ce().then(t=>{const n=t?.theme==="dark"?"dark":t?.theme==="light"?"light":null;n&&J(n,{persist:!1})}).catch(t=>{console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑÿ≥ŸÖÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ",t)}))}document.addEventListener("language:changed",()=>{se(B()),bt()});ve(e=>{const t=e?.theme==="dark"?"dark":e?.theme==="light"?"light":null;t&&t!==B()&&J(t,{persist:!1})});function ie(){const e=typeof window<"u"?window:globalThis;return e.__APP_DATA_STORE__||(e.__APP_DATA_STORE__={customers:[],reservations:[],equipment:[],technicians:[],maintenance:[],projects:[],technicianPayouts:[],packages:[]}),e.__APP_DATA_STORE__}function _(e,t,n){n!=null&&(e[t]=Array.isArray(n)?[...n]:n)}function Tt(){const e=ie();return{customers:[...e.customers],reservations:[...e.reservations],equipment:[...e.equipment],technicians:[...e.technicians],maintenance:[...e.maintenance],projects:[...e.projects],technicianPayouts:[...e.technicianPayouts],packages:[...e.packages]}}function zt(e={}){const t=ie();_(t,"customers",e.customers),_(t,"reservations",e.reservations),_(t,"equipment",e.equipment),_(t,"technicians",e.technicians),_(t,"maintenance",e.maintenance),_(t,"projects",e.projects),_(t,"technicianPayouts",e.technicianPayouts),_(t,"packages",e.packages)}let te=!1;function $t(e=null){if(te)return;const t=e||(typeof window<"u"?window.__LEGACY_DATA__:null);if(!t||typeof t!="object"){te=!0;return}const n=ie();if(["customers","reservations","equipment","technicians","maintenance","projects","technicianPayouts","packages"].forEach(o=>{const a=t[o];Array.isArray(a)&&a.length>0&&(n[o]=[...a])}),te=!0,!e&&typeof window<"u")try{delete window.__LEGACY_DATA__}catch{}}function Oe(){let e=document.getElementById("toast-container");e||(e=document.createElement("div"),e.id="toast-container",document.body.appendChild(e));try{e.classList.remove("toast-container","fixed","bottom-6","start-6","z-50")}catch{}try{e.parentElement&&e.parentElement!==document.body&&document.body.appendChild(e)}catch{}const t=(n,r)=>{try{e.style.setProperty(n,r,"important")}catch{e.style[n]=r}};return t("position","fixed"),t("top","20px"),t("bottom","auto"),t("left","0"),t("right","0"),t("transform","none"),t("margin","0 auto"),t("z-index","2147483647"),t("display","flex"),t("flex-direction","column"),t("align-items","center"),t("width","min(92vw, 380px)"),t("pointer-events","none"),e}function Ue(e){const t=(n,r)=>{try{e.style.setProperty(n,r,"important")}catch{e.style[n]=r}};t("background","#333"),t("color","#fff"),t("padding","10px 18px"),t("margin-top","10px"),t("border-radius","10px"),t("box-shadow","0 8px 24px rgba(15, 23, 42, 0.32)"),t("opacity","0"),t("transition","opacity 0.3s ease"),t("font-size","0.875rem"),t("line-height","1.4"),t("pointer-events","auto"),t("backdrop-filter","blur(4px)"),t("position","relative"),t("z-index","2147483647")}function Fe(e){requestAnimationFrame(()=>{try{e.style.setProperty("opacity","1","important")}catch{e.style.opacity="1"}})}function qe(e,t){let n=null;const r=()=>{n&&(clearTimeout(n),n=null),e.style.opacity="0",setTimeout(()=>e.remove(),320)};if(t===-1){const o=()=>{try{document.removeEventListener("click",o,{capture:!0})}catch{}r()};return setTimeout(()=>{try{document.addEventListener("click",o,{once:!0,capture:!0})}catch{}},1200),{hide:r,timeoutId:n}}return n=setTimeout(r,Math.max(0,t)),{hide:r,timeoutId:n}}function X(e,t=3e3,n){try{console.debug("[toast]",e)}catch{}const r=Oe(),o=document.createElement("div");o.className="toast-message",o.textContent=e;const a=new Set(["success","error","info","warning"]);let i="info",s=3e3;typeof t=="number"&&Number.isFinite(t)?s=Math.max(0,t):typeof t=="string"&&a.has(t)&&(i=t,typeof n=="number"&&Number.isFinite(n)&&(s=Math.max(0,n))),Ue(o);const l={success:{bg:"#14532d",border:"rgba(34,197,94,0.35)",glow:"rgba(34,197,94,0.35)"},error:{bg:"#7f1d1d",border:"rgba(239,68,68,0.35)",glow:"rgba(239,68,68,0.35)"},info:{bg:"#1e3a8a",border:"rgba(59,130,246,0.35)",glow:"rgba(59,130,246,0.35)"},warning:{bg:"#7c2d12",border:"rgba(245,158,11,0.35)",glow:"rgba(245,158,11,0.35)"}},{bg:c,border:d,glow:y}=l[i]||l.info;o.style.background=c,o.style.border=`1px solid ${d}`,o.style.boxShadow=`0 8px 24px rgba(15, 23, 42, 0.32), 0 0 0 4px ${y}`,r.appendChild(o),Fe(o),setTimeout(()=>{try{const m=o.getBoundingClientRect(),u=m.height<8||m.width<8||m.top<-10||m.top>window.innerHeight+10,b=window.getComputedStyle(o),z=b.display==="none"||b.visibility==="hidden"||Number(b.opacity||"1")<.05;(u||z)&&(o.style.position="fixed",o.style.top="20px",o.style.bottom="auto",o.style.left="50%",o.style.right="auto",o.style.transform="translateX(-50%)",o.style.zIndex="2147483647",document.body.appendChild(o))}catch{}},30);const{hide:S}=qe(o,s);o.addEventListener("click",S)}function At({message:e,duration:t=6e3,actionLabel:n,onAction:r,linkLabel:o,linkHref:a}={}){const i=Oe(),s=document.createElement("div");s.className="toast-message",Ue(s);const l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.gap="8px";const c=document.createElement("span");c.textContent=e,l.appendChild(c);const d=document.createElement("div");d.style.display="flex",d.style.flexWrap="wrap",d.style.gap="8px";let y=!1,S=()=>{};if(o&&a){const u=document.createElement("a");u.href=a,u.textContent=o,u.target="_blank",u.rel="noopener noreferrer",u.style.color="#bfdbfe",u.style.textDecoration="underline",u.style.fontWeight="500",u.style.pointerEvents="auto",d.appendChild(u),y=!0}if(n&&typeof r=="function"){const u=document.createElement("button");u.type="button",u.textContent=n,u.style.border="1px solid rgba(255,255,255,0.4)",u.style.background="rgba(15, 23, 42, 0.2)",u.style.color="#fff",u.style.borderRadius="999px",u.style.padding="6px 14px",u.style.fontSize="0.78rem",u.style.cursor="pointer",u.addEventListener("click",b=>{b.preventDefault();try{r()}catch(z){console.error("‚ö†Ô∏è [toast] action callback failed",z)}finally{S()}}),d.appendChild(u),y=!0}y&&l.appendChild(d),s.appendChild(l),i.appendChild(s),Fe(s);const{hide:m}=qe(s,t);S=m,s.addEventListener("click",m)}try{typeof window<"u"&&(typeof window.showToast!="function"&&(window.showToast=X),typeof window.showToastWithAction!="function"&&(window.showToastWithAction=At))}catch{}const we="RSV",Ee="PRJ",St=4,O=(()=>{try{const e=typeof globalThis<"u"?globalThis:window;return e.__APP_SEQUENCE_STATE__=e.__APP_SEQUENCE_STATE__||{reservation:0,project:0},e.__APP_SEQUENCE_STATE__}catch{return{reservation:0,project:0}}})();function _t(){return Number.isFinite(O.reservation)?O.reservation:0}function Lt(e){O.reservation=Math.max(0,Number.parseInt(e,10)||0)}function vt(){return Number.isFinite(O.project)?O.project:0}function Ct(e){O.project=Math.max(0,Number.parseInt(e,10)||0)}function He(){try{const e=Tt();return{reservations:Array.isArray(e?.reservations)?e.reservations:[],projects:Array.isArray(e?.projects)?e.projects:[]}}catch(e){return console.warn("‚ö†Ô∏è [utils] Failed to load data snapshot for code generation",e),{reservations:[],projects:[]}}}function kt(e,t){if(e==null)return 0;if(typeof e=="number")return Number.isFinite(e)?Math.max(0,Math.trunc(e)):0;const n=String(e).trim();if(!n)return 0;const r=`${t.toUpperCase()}-`,o=n.toUpperCase();let a=n;o.startsWith(r)&&(a=n.slice(r.length));const i=a.match(/(\d+)$/);if(i){const l=Number.parseInt(i[1],10);return Number.isFinite(l)?Math.max(0,l):0}const s=Number.parseInt(n,10);return Number.isFinite(s)?Math.max(0,s):0}function Pt(e){return Array.isArray(e)?e:[e]}function Be(e,t,n){return!Array.isArray(e)||e.length===0?0:e.reduce((r,o)=>{const a=n(o),s=Pt(a).reduce((l,c)=>{const d=kt(c,t);return d>l?d:l},0);return s>r?s:r},0)}function ze(e,t){const n=Math.max(0,Number.parseInt(t,10)||0);return`${e}-${String(n).padStart(St,"0")}`}function Gt(){const{reservations:e}=He(),t=Be(e,we,r=>[r?.reservationCode,r?.reservation_code,r?.reservationId,r?.reservation_id,r?.id]),n=Math.max(t,_t())+1;return Lt(n),ze(we,n)}function Kt(){const{projects:e}=He(),t=Be(e,Ee,r=>[r?.projectCode,r?.project_code,r?.code,r?.id]),n=Math.max(t,vt())+1;return Ct(n),ze(Ee,n)}function Vt(e,t={}){if(!e)return"-";const n=new Date(e);if(Number.isNaN(n.getTime()))return"-";const r=document?.documentElement?.getAttribute("lang")||(typeof re=="function"?re():null)||"ar",a=String(r).toLowerCase().startsWith("ar")?"ar-SA-u-ca-gregory-nu-latn":"en-US",s=new Intl.DateTimeFormat(a,{dateStyle:"short",timeStyle:"short",hour12:!0,calendar:"gregory",...t}).formatToParts(n),l=n.getHours()>=12?"PM":"AM",c=s.map(d=>d.type==="dayPeriod"?l:d.value).join("").replace(/\u200f/g,"");return Rt(c)}function Rt(e){if(e==null)return"";e=String(e);const t=["Ÿ†","Ÿ°","Ÿ¢","Ÿ£","Ÿ§","Ÿ•","Ÿ¶","Ÿß","Ÿ®","Ÿ©"],n=["€∞","€±","€≤","€≥","€¥","€µ","€∂","€∑","€∏","€π"],r=["0","1","2","3","4","5","6","7","8","9"];return Array.from(e).map(o=>{const a=t.indexOf(o);if(a>-1)return r[a];const i=n.indexOf(o);return i>-1?r[i]:o}).join("")}const Te={INVALID:{key:"login.errors.invalidCredentials",fallback:"‚ùå ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©"},NETWORK:{key:"login.errors.network",fallback:"üåê ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."},GENERIC:{key:"login.errors.generic",fallback:"‚ö†Ô∏è ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."}};let h=null;const xt={USER_UPDATED:"auth:user-updated"};let ne=!1;function Ae(){if(!ne){ne=!0;try{window.location.href="login.html"}finally{setTimeout(()=>{ne=!1},2e3)}}}function Dt(){try{const e=window?.location?.hostname||"";return e==="localhost"||e==="127.0.0.1"||e===""||e==="::1"}catch{return!1}}function $e(){try{if(!Dt())return!1;const e=new URL(window.location.href),t=(e.searchParams.get("bypassAuth")||e.searchParams.get("dev")||e.searchParams.get("debug")||"").toLowerCase();return window.__BYPASS_AUTH__===!0||t==="1"||t==="true"}catch{return!1}}function Nt(e){if(typeof document>"u")return;const t=document.documentElement;t&&(e?t.dataset.userRole=e:delete t.dataset.userRole)}function It(){typeof document>"u"||document.dispatchEvent(new CustomEvent(xt.USER_UPDATED,{detail:h?{...h}:null}))}function R(e){if(e&&typeof e=="object"){const t=typeof e.role=="string"?e.role.trim().toLowerCase():null;h={id:Number.isFinite(e.id)?Number(e.id):null,username:String(e.username||""),loginAt:e.loginAt??null,role:t}}else h=null;Nt(h?.role||""),It()}function jt(e="INVALID",t){if(t&&typeof t=="string")return t;const n=Te[e]||Te.INVALID;return L(n.key,n.fallback)}function Mt(){const e=document.getElementById("login-error");e&&(e.textContent="",e.classList.add("hidden"))}function U(e="INVALID",t){const n=jt(e,t);X(n);const r=document.getElementById("login-error");r&&(r.textContent=n,r.classList.remove("hidden"))}async function Ot({username:e,password:t,form:n}){if(!(!e||!t))try{if(typeof window>"u"||typeof navigator>"u"||!window.isSecureContext||!navigator.credentials||typeof navigator.credentials.store!="function")return;const r=(()=>{try{const a=document.querySelector('link[rel~="icon"]');return a?a.href:void 0}catch{return}})();let o=null;if(n&&n instanceof HTMLFormElement&&typeof window.PasswordCredential<"u")try{o=new window.PasswordCredential(n)}catch(a){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿπÿ™ŸÖÿßÿØ ŸÖŸÜ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨",a)}if(!o&&typeof window.PasswordCredential<"u")try{o=new window.PasswordCredential({id:e,name:e,password:t,iconURL:r})}catch(a){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° PasswordCredential ŸÖÿ®ÿßÿ¥ÿ±",a)}!o&&typeof navigator.credentials.create=="function"&&(o=await navigator.credentials.create({password:{id:e,name:e,password:t,iconURL:r}})),o&&await navigator.credentials.store(o)}catch(r){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿπÿ™ŸÖÿßÿØ ŸÅŸä ÿßŸÑŸÖÿ™ÿµŸÅÿ≠",r)}}async function Wt(e,t,{form:n}={}){const r=(e||"").trim(),o=t||"";if(Mt(),!r||!o)return U("INVALID"),!1;try{const a=await H("/auth/",{method:"POST",body:{username:r,password:o}});R(a?.data??null);try{await ae({theme:B()})}catch(i){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑÿ≥ŸÖÿ© ÿ®ÿπÿØ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",i)}return Ze(),await Ot({username:r,password:o,form:n}),window.location.href="home.html",!0}catch(a){if(console.error("‚ùå ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",a),R(null),a instanceof E)if(a.status===401||a.status===403)U("INVALID");else if(a.status>=500)U("GENERIC");else{const s=typeof a.message=="string"&&!/^request failed with status/i.test(a.message)?a.message:null;U("GENERIC",s)}else U("NETWORK");return!1}}async function Yt(){try{await H("/auth/",{method:"DELETE"})}catch(e){console.warn("‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ",e)}finally{R(null),X("üö™ ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨"),window.location.href="login.html"}}async function Ut({refresh:e=!1}={}){if($e())return h||R({id:0,username:"dev-local",loginAt:new Date().toISOString(),role:"admin"}),h;if(!e&&h)return h;try{const t=await H("/auth/"),n=t&&typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"data")?t.data:t:null;return R(n??null),h}catch(t){if(t instanceof E&&t.status===401)throw R(null),t;return console.warn("‚ö†Ô∏è getCurrentUser: non-auth error, preserving session",t),h}}function Jt({redirect:e=!0,retries:t=1,retryDelay:n=300}={}){if($e())return h||R({id:0,username:"dev-local",loginAt:new Date().toISOString(),role:"admin"}),Promise.resolve(h);const r=o=>Ut({refresh:!0}).then(a=>(!a&&e&&Ae(),a)).catch(a=>a instanceof E&&a.status===401&&o>0?new Promise(i=>setTimeout(i,Math.max(0,n))).then(()=>r(o-1)):a instanceof E&&a.status===401?(e&&Ae(),null):(console.warn("‚ö†Ô∏è checkAuth: network/server issue, skipping redirect",a),h));return r(Math.max(0,Number.isFinite(t)?t:1))}function Ft(){return h?.role||null}function Xt(){return Ft()==="admin"}function Qt(){X(L("auth.permissions.denied","‚ö†Ô∏è ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑÿ™ŸÜŸÅŸäÿ∞ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°"),"error")}export{E as A,At as B,Bt as a,H as b,Jt as c,Tt as d,p as e,Ce as f,Ut as g,zt as h,bt as i,X as j,Ht as k,Yt as l,$t as m,Rt as n,Wt as o,re as p,xt as q,Ne as r,ve as s,L as t,ae as u,Vt as v,Xt as w,Qt as x,Kt as y,Gt as z};
