import{r as Mt,d as $e,t as o,n as b,x as Bt,l as ls,j as g,v as ps,w as ds,u as St,p as It}from"./auth.BLFzWQsL.js";import{getProjectsState as Ee,deleteProjectApi as us,refreshProjectsFromApi as Pt,isApiError as at,closeProjectApi as At,buildProjectPayload as Vt,updateProjectApi as Tt,createProjectApi as ms,reopenProjectApi as fs}from"./projectsService.Do5PYtuQ.js";import{g as M,n as Me,f as js,r as wt,u as qe,a as ys,D as ye,c as ze,e as tt,d as hs,b as bs,h as vs}from"./reservationsService.YjmzgTYf.js";import{g as gs,w as xs}from"./uiBridge.Dh5t9okA.js";import{e as Ss}from"./reservationPdf.BPb9TVH5.js";import{d as t,s as u,i as c,r as ce,u as ke,a as ge,h as We,j as Ps,k as Ht,l as C,m as As,f as ot,n as Ct,o as Ts,p as ws,q as Cs,t as Es,v as $t,w as Lt}from"./view.BETZ-vtT.js";Mt({ar:{"projects.pageTitle":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.form.labels.expenseNote":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª","projects.form.placeholders.expenseNote":"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø©/Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.templates.placeholders.saveTitle":"Ø§Ø³Ù… Ø§Ù„Ù†Ø³Ø®Ø©","projects.nav.brand":"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.nav.projects":"Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.nav.customers":"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.nav.technicians":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.hero.title":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.hero.subtitle":"Ø£Ù†Ø´Ø¦ ÙˆÙ†Ø³Ù‘Ù‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ ÙˆÙˆØ²Ù‘Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ù‚Ù… ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ.","projects.form.title":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯","projects.form.labels.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.title":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.clientCompany":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.form.labels.startDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.startTime":"â° ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.endDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.endTime":"â° ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.description":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.technician":"Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø·Ø§Ù‚Ù…","projects.form.labels.equipment":"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø©","projects.form.labels.quantity":"Ø§Ù„ÙƒÙ…ÙŠØ©","projects.form.labels.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseLabel":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseAmount":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.form.labels.servicesClientTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.labels.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.placeholders.expenseAmount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.form.placeholders.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.expenses.table.headers.service":"Ø§Ù„Ø®Ø¯Ù…Ø©","projects.expenses.table.headers.cost":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.expenses.table.headers.sale":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)","projects.expenses.table.headers.note":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª","projects.expenses.table.headers.actions":"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.expenses.table.totalSale":"Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.placeholders.title":"Ù…Ø«Ø§Ù„: ØªØµÙˆÙŠØ± Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯","projects.form.placeholders.description":"Ù…Ù„Ø®Øµ Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª","projects.form.placeholders.type":"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.placeholders.clientCompany":"ØªØ¹Ø¨Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§","projects.form.placeholders.startDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.startTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.endDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.endTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.client":"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...","projects.form.placeholders.expenseLabel":"Ù…Ø«Ø§Ù„: Ù…ØªØ·Ù„Ø¨ Ø¥Ø¶Ø§ÙÙŠ (Ø±Ø³ÙˆÙ… Ù…ÙˆÙ‚Ø¹ØŒ Ù…Ø¹Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...)","projects.form.linkedReservation.title":"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.description":"Ø£Ù†Ø´Ø¦ Ø­Ø¬Ø²Ù‹Ø§ Ù…Ø±ØªØ¨Ø·Ù‹Ø§ Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© ØªÙØ§ØµÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.","projects.form.linkedReservation.button":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingClient":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingSchedule":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.empty":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯.","projects.form.linkedReservation.pendingItem":"Ø³ÙŠØªÙ… Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¬Ø² ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.form.linkedReservation.buttonDisabled":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø· Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¬Ø².","projects.form.linkedReservation.meta.equipment":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}","projects.form.linkedReservation.meta.crew":"Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}","projects.form.linkedReservation.meta.crewNames":"Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}","projects.form.linkedReservation.meta.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}","projects.form.labels.discount":"Ø§Ù„Ø®ØµÙ…","projects.form.labels.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.form.labels.applyTax":"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.form.discount.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.discount.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.companyShareToggle":"Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)","projects.form.selectClient":"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.selectTechnician":"Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.form.selectEquipment":"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.form.types.commercial":"ØªØµÙˆÙŠØ± Ø¥Ø¹Ù„Ø§Ù†","projects.form.types.coverage":"ØªØµÙˆÙŠØ± ØªØºØ·ÙŠØ©","projects.form.types.photography":"ØªØµÙˆÙŠØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ","projects.form.types.social":"ØªØµÙˆÙŠØ± Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ","projects.form.types.unknown":"Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯","projects.form.buttons.addTechnician":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ø§Ù‚Ù…","projects.form.buttons.addEquipment":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.form.buttons.save":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.update":"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.taxLabel":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.form.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.form.paymentProgress.label":"ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©","projects.form.paymentProgress.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.paymentProgress.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ø§ Ù…Ù† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.selected.emptyTechnicians":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹Ø¶Ùˆ Ø¨Ø¹Ø¯","projects.selected.emptyEquipment":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù…Ø¹Ø¯Ø§Øª","projects.selected.emptyExpenses":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ","projects.summary.title":"Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹","projects.summary.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.summary.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.summary.expenses":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projects.summary.budget":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.focus.title":"ğŸ“Œ Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.legend":"Ø§Ø®ØªØ± Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø§Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹.","projects.focus.today":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…","projects.focus.thisWeek":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹","projects.focus.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.focus.recent":"Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù„ÙŠÙˆÙ… Ø£Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.","projects.focus.view":"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„","projects.focus.edit":"ØªØ¹Ø¯ÙŠÙ„","projects.focus.actions.confirm":"âœ”ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.confirmed":"âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯","projects.focus.summary.project":"Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.summary.reservations":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.focus.summary.payment":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.focus.summary.range":"Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©","projects.focus.summary.time":"Ø§Ù„ÙˆÙ‚Øª","projects.focus.toastNotFound":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","projects.toast.linkReservationFailed":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§","projects.toast.companyShareRequiresTax":"âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.timeline.title":"Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.timeline.legend":"ÙŠÙØ¸Ù‡Ø± Ø§Ù„Ø´Ø±ÙŠØ· Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ØªÙÙ…Ø«Ù‘Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.timeline.legend.upcoming":"Ù‚Ø§Ø¯Ù…","projects.timeline.legend.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.timeline.legend.completed":"Ù…ÙƒØªÙ…Ù„","projects.timeline.legend.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.timeline.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø²Ù…Ù†ÙŠØ© ØµØ§Ù„Ø­Ø©.","projects.timeline.conflict":"ØªØ¹Ø§Ø±Ø¶ ÙÙŠ Ø§Ù„ØªÙˆÙ‚ÙŠØª","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹","projects.search.placeholder":"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.subtabs.create":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹","projects.subtabs.list":"Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ","projects.subtabs.reports":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.expenses":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.templates":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨","projects.templates.title":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (A4)","projects.templates.subtitle":"Ø§Ø±Ø¨Ø· Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ ÙˆØ­Ø¬Ø²Ø§Ù‹ Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨ØŒ Ø¹Ø¯Ù‘ÙÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø«Ù… Ø§Ø·Ø¨Ø¹ PDF.","projects.templates.labels.project":"ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.templates.labels.reservation":"ğŸ”— Ø§Ù„Ø­Ø¬Ø² (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)","projects.templates.labels.type":"ğŸ“„ Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ù„Ø¨","projects.templates.types.expenses":"ÙˆØ±Ù‚Ø© Ù…ØµØ§Ø±ÙŠÙ (A4 Ø¹Ù…ÙˆØ¯ÙŠ)","projects.templates.types.callsheet":"ÙƒÙˆÙ„ Ø´ÙŠØª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.types.shotlist":"Ø´ÙˆØª Ù„ÙŠØ³Øª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.actions.refresh":"ØªØ­Ø¯ÙŠØ«","projects.templates.actions.print":"ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© PDF","projects.templates.actions.toggle":"â‹¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.templates.actions.save":"ğŸ’¾ Ø­ÙØ¸","projects.templates.actions.saveCopy":"ğŸ“ Ø­ÙØ¸ ÙƒÙ†Ø³Ø®Ø©","projects.templates.actions.fromReservation":"ğŸ“… Ù…Ù† Ø§Ù„Ø­Ø¬Ø²","projects.templates.actions.rename":"âœï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØ©","projects.templates.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù","projects.templates.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.templates.actions.exportExcel":"â¬‡ï¸ ØªØµØ¯ÙŠØ± Excel","projects.templates.actions.import":"â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯","projects.templates.noReservation":"â€” Ø¨Ø¯ÙˆÙ† Ø±Ø¨Ø· â€”","projects.templates.empty":"Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ Ù„Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨.","projects.templates.expenses.title":"Expenses Sheet / Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.templates.callsheet.title":"Call Sheet / Ù‚Ø§Ù„Ø¨ ÙƒÙˆÙ„ Ø´ÙŠØª","projects.templates.callsheet.contacts":"Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©","projects.templates.callsheet.schedule":"Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…","projects.templates.shotlist.title":"Shot List / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ù‚Ø·Ø§Øª","projects.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.table.count":"{count} Ù…Ø´Ø±ÙˆØ¹","projects.table.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.table.headers.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.table.headers.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.table.headers.period":"Ø§Ù„ÙØªØ±Ø©","projects.table.headers.crew":"Ø§Ù„Ø·Ø§Ù‚Ù…","projects.table.headers.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.table.headers.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.table.headers.expenses":"Ù…ØµØ±ÙˆÙØ§Øª (SR)","projects.table.emptyInitial":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¹Ø¯.","projects.table.emptyFiltered":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø©.","projects.modal.title":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.overview.heading":"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.pageTitle":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.reports.title":"Ù„ÙˆØ­Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.subtitle":"ØªØ­Ù„ÙŠÙ„Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©ØŒ ÙˆÙ†Ø³Ø¨ Ø§Ù„ØªÙ†ÙÙŠØ°.","projects.reports.filters.search":"Ø¨Ø­Ø«","projects.reports.filters.searchPlaceholder":"Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.filters.status":"Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.filters.payment":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.reports.filters.paymentAll":"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.filters.paymentPaid":"Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.paymentPartial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.reports.filters.paymentUnpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.dateRange":"Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®","projects.reports.filters.range.all":"ÙƒÙ„ Ø§Ù„ÙˆÙ‚Øª","projects.reports.filters.range.30":"Ø¢Ø®Ø± 30 ÙŠÙˆÙ…","projects.reports.filters.range.90":"Ø¢Ø®Ø± 90 ÙŠÙˆÙ…","projects.reports.filters.range.365":"Ø¢Ø®Ø± Ø³Ù†Ø©","projects.reports.filters.range.custom":"ØªØ§Ø±ÙŠØ® Ù…Ø®ØµØµ","projects.reports.filters.start":"Ù…Ù†","projects.reports.filters.end":"Ø¥Ù„Ù‰","projects.reports.filters.refresh":"ØªØ­Ø¯ÙŠØ«","projects.reports.charts.status":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.charts.statusHint":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ°","projects.reports.charts.timeline":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù†","projects.reports.charts.timelineHint":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø´Ù‡Ø±ÙŠÙ‹Ø§","projects.reports.charts.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.charts.expensesHint":"Ù…Ù‚Ø§Ø±Ù†Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ø¹ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.charts.clients":"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.reports.charts.clientsHint":"Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.noData":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©","projects.reports.loading.chart":"Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù…...","projects.reports.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.table.columns.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.reports.table.columns.period":"Ø§Ù„ÙØªØ±Ø©","projects.reports.table.columns.value":"Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.table.columns.payment":"Ø§Ù„Ø¯ÙØ¹","projects.reports.table.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø§Ù„ÙŠ.","projects.reports.table.meta":"Ø¹Ø±Ø¶ {count} Ù…Ù† Ø£ØµÙ„ {total} Ù…Ø´Ø±ÙˆØ¹","projects.reports.kpi.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.kpi.totalProjectsMeta":"Ø¨Ø¹Ø¯ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.totalValueMeta":"ÙŠØ´Ù…Ù„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.unpaidValueMeta":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù… ØªÙØ³Ø¯Ù‘ÙØ¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¹Ø¯","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.expensesMeta":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.datasets.value":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©","projects.reports.datasets.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.projectExpenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.expenses.pageTitle":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.expenses.title":"Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.expenses.subtitle":"ØªØ§Ø¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.","projects.expenses.placeholder":"Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ù…Ø®ØµØµØ© Ù„Ø±Ø¨Ø· Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹.","projects.expenses.placeholderHint":"Ø¬Ù‡Ø² Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¢Ù† Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¯Ù….","projects.expenses.actions.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.expenses.actions.importInvoice":"ğŸ§¾ Ø±ÙØ¹ ÙØ§ØªÙˆØ±Ø©","projects.expenses.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.expenses.kpi.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.expenses.kpi.total.meta":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.expenses.kpi.pending":"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.pending.meta":"Ù…ØµØ§Ø±ÙŠÙ ØªØ­ØªØ§Ø¬ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.expenses.kpi.approved":"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.approved.meta":"Ø¢Ø®Ø± Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§","projects.expenses.kpi.average":"Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ Ù„ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹","projects.expenses.kpi.average.meta":"Ù‚ÙŠÙ…Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø§Ø³ØªÙ†Ø§Ø¯Ø§Ù‹ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù†Ø´Ø·Ø©","projects.expenses.breakdown.title":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.breakdown.hint":"Ø±Ø§Ù‚Ø¨ Ø§Ù„ØµØ±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ ÙˆØ§Ù„ØªÙ†Ù‚Ù„Ø§Øª.","projects.expenses.breakdown.empty":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ§Ø±ÙŠÙ Ù…ØµÙ†ÙØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.","projects.expenses.timeline.title":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø¹Ø¨Ø± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ","projects.expenses.timeline.hint":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠØ© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª.","projects.expenses.timeline.empty":"Ø£Ø¶Ù Ù…ØµØ±ÙˆÙØ§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ.","projects.expenses.table.title":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ","projects.expenses.table.hint":"Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª.","projects.expenses.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.expenses.table.columns.category":"Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.table.columns.description":"Ø§Ù„ÙˆØµÙ","projects.expenses.table.columns.amount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.expenses.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.expenses.table.columns.date":"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„","projects.expenses.table.empty":"Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§.","projects.toast.selectTechnician":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.technicianAlreadyAdded":"âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„","projects.toast.technicianAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.selectEquipment":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.toast.equipmentAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.missingExpenseLabel":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.toast.invalidExpenseAmount":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­","projects.toast.customerNotFound":"âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„","projects.toast.missingRequiredFields":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©","projects.toast.invalidDateRange":"âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.toast.saved":"âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editReady":"âœï¸ ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„. Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.toast.updated":"âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editMissing":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡","projects.toast.confirmed":"âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.alreadyConfirmed":"â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§","projects.toast.deleted":"ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.confirm.delete":"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ","projects.fallback.unknownClient":"Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ","projects.fallback.unknownEquipment":"Ù…Ø¹Ø¯Ø©","projects.fallback.noDescription":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ","projects.fallback.untitled":"Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…","projects.fallback.emptyList":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.fallback.technicianName":"Ø¹Ø¶Ùˆ {id}","projects.status.upcoming":"Ù‚Ø§Ø¯Ù…","projects.status.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.status.completed":"Ù…ÙƒØªÙ…Ù„","projects.status.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.status.cancelled":"Ù…Ù„ØºÙŠ","projects.tag.closed":"Ù…ØºÙ„Ù‚","projects.form.labels.cancelled":"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.hints.cancelled":"Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ.","projects.close.noteLabel":"Ù…Ù„Ø§Ø­Ø¸Ø© Ø¥ØºÙ„Ø§Ù‚","projectCards.filters.search":"ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„ÙˆØµÙ...","projectCards.filters.status.all":"âš™ï¸ ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projectCards.filters.status.upcoming":"ğŸ“… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projectCards.filters.status.ongoing":"âš™ï¸ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projectCards.filters.status.completed":"âœ… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù†ØªÙ‡ÙŠØ©","projectCards.stats.crew":"ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…: {count}","projectCards.stats.reservations":"ğŸ”— Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: {count}","projectCards.stats.client":"ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: {name}","projectCards.stats.type":"ğŸ·ï¸ Ø§Ù„Ù†ÙˆØ¹: {label}","projectCards.stats.budget":"ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©): {amount}","projectCards.stats.expenses":"ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: {amount}","projectCards.stats.crewShort":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projectCards.stats.reservationsShort":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.budgetShort":"Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.stats.expensesShort":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projectCards.stats.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projectCards.stats.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projectCards.stats.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projectCards.stats.reservationValue":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.servicesClientPrice":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projectCards.stats.expensesTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projectCards.stats.reservationTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²","projectCards.stats.taxTotal":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projectCards.stats.overallTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ","projectCards.groups.meta":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.groups.reservations":"Ù…ÙˆØ¬Ø² Ø§Ù„Ø­Ø¬Ø²","projectCards.groups.payment":"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯ÙØ¹","projectCards.meta.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.startDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projectCards.meta.endDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.labels.clientPhone":"Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.labels.clientEmail":"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ","projects.details.client.noPhone":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­","projects.details.client.noEmail":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­","projects.details.crew":"Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„ÙÙ†ÙŠ ({count})","projects.details.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ({count})","projects.details.expenses":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})","projects.details.subtotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.tax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (15Ùª):","projects.details.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.labels.projectTitle":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.projectSubtotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.details.summary.projectTax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (15Ùª)","projects.details.summary.projectTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.summary.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª / Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.details.summary.combinedTax":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (15Ùª)","projects.details.summary.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø©","projects.details.summary.overallTotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.summary.equipmentTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.summary.crewTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.crewCostTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.servicesClientPrice":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.gross":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ","projects.details.summary.discount":"Ø§Ù„Ø®ØµÙ…","projects.details.summary.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©","projects.details.summary.tax":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.details.summary.grossAfterDiscount":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…","projects.details.summary.netProfit":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­","projects.details.summary.finalTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ","projects.details.labels.start":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.details.labels.end":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.summary.title":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.details.description":"ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.paymentOverview.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.paymentOverview.paid":"Ø§Ù„Ù…Ø¯ÙÙˆØ¹","projects.details.paymentOverview.percent":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹","projects.details.paymentOverview.remaining":"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ","projects.closeModal.title":"ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.closeModal.subtitle":"ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ).","projects.closeModal.noteLabel":"ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ØºÙ„Ø§Ù‚","projects.closeModal.notePlaceholder":"Ù…Ø«Ø§Ù„: ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­...","projects.closeModal.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.closeModal.confirm":"ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.days":"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…","projects.details.labels.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.labels.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.labels.reservationsCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.labels.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.chips.vatOn":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.details.chips.vatOff":"ØºÙŠØ± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.chips.reservations":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.chips.linkedReservation":"Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.chips.notLinkedReservation":"ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.noItems":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.details.quantity":"{qty} Ù‚Ø·Ø¹Ø©","projects.details.reservations.title":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.details.reservations.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯.","projects.details.reservations.create":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.details.actions.edit":"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.exportExpenses":"ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Excel","projects.details.actions.exportShotList":"ğŸ¬ ØªØµØ¯ÙŠØ± Ø§Ù„Ø´ÙˆØª Ù„ÙŠØ³Øª","projects.details.actions.exportCallSheet":"ğŸ“ ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙˆÙ„ Ø´ÙŠØª","projects.details.actions.exportPdf":"Ø¹Ø±Ø¶ Ø³Ø¹Ø±","projects.details.reservations.view":"Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¬Ø²","projects.details.reservations.count":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.reservations.itemsCount":"{count} Ù…Ø¹Ø¯Ø©","projects.details.reservations.crewCount":"{count} Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.edit.heading":"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.edit.subheading":"Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.details.edit.save":"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª","projects.details.edit.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.quote.sections.customer":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.quote.sections.project":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.quote.sections.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.quote.sections.crew":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.quote.sections.financial":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.quote.sections.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.quote.sections.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"},en:{"projects.pageTitle":"Project Management - Rental System","projects.form.labels.expenseNote":"Notes","projects.form.placeholders.expenseNote":"Additional details for this service/expense","projects.templates.placeholders.saveTitle":"Template name","projects.nav.brand":"Rental System","projects.nav.projects":"Projects","projects.nav.customers":"Clients","projects.nav.technicians":"Crew","projects.hero.title":"Projects Management","projects.hero.subtitle":"Create and coordinate projects, assign crew and equipment, and track expenses.","projects.form.title":"Create New Project","projects.form.labels.type":"Project Type","projects.form.labels.title":"Project Name","projects.form.labels.client":"Client","projects.form.labels.clientCompany":"Client Company","projects.form.labels.paymentStatus":"Payment Status","projects.form.labels.startDate":"ğŸ“… Start Date","projects.form.labels.startTime":"â° Start Time","projects.form.labels.endDate":"ğŸ“… End Date","projects.form.labels.endTime":"â° End Time","projects.form.labels.description":"Project Details","projects.form.labels.technician":"Add Crew Member","projects.form.labels.equipment":"Add Equipment","projects.form.labels.quantity":"Quantity","projects.form.labels.expenses":"Production services","projects.form.labels.expenseLabel":"Expense Name","projects.form.labels.expenseAmount":"Amount (SR)","projects.form.labels.servicesClientTotal":"Sales total","projects.form.labels.salePrice":"Sale price","projects.form.placeholders.expenseAmount":"Amount","projects.form.placeholders.salePrice":"Sale price","projects.expenses.table.headers.service":"Service","projects.expenses.table.headers.cost":"Cost (SR)","projects.expenses.table.headers.sale":"Sale price (SR)","projects.expenses.table.headers.note":"Notes","projects.expenses.table.headers.actions":"Actions","projects.expenses.table.totalSale":"Sales total","projects.form.placeholders.title":"Example: New product shoot","projects.form.placeholders.description":"Project brief and requirements","projects.form.placeholders.type":"Choose a project type","projects.form.placeholders.clientCompany":"Auto-filled from client record","projects.form.placeholders.startDate":"Select the start date","projects.form.placeholders.startTime":"Select the start time","projects.form.placeholders.endDate":"Select the end date (optional)","projects.form.placeholders.endTime":"Select the end time (optional)","projects.form.placeholders.client":"Type the client name...","projects.form.placeholders.expenseLabel":"Example: Location permit or extra gear","projects.form.linkedReservation.title":"Create Linked Reservation","projects.form.linkedReservation.description":"Create a reservation for this project and we'll pre-fill the matching details.","projects.form.linkedReservation.button":"â• Create Linked Reservation","projects.form.linkedReservation.missingClient":"âš ï¸ Please select the client before creating the linked reservation.","projects.form.linkedReservation.missingSchedule":"âš ï¸ Please provide both start and end date/time before creating the linked reservation.","projects.form.linkedReservation.empty":"No linked reservations yet.","projects.form.linkedReservation.pendingItem":"This reservation will be linked automatically once the project is saved.","projects.form.linkedReservation.buttonDisabled":"A linked reservation was created. Manage further changes from the reservation itself.","projects.form.linkedReservation.meta.equipment":"Equipment count: {count}","projects.form.linkedReservation.meta.crew":"Crew count: {count}","projects.form.linkedReservation.meta.crewNames":"Crew names: {names}","projects.form.linkedReservation.meta.total":"Reservation total: {amount}","projects.form.labels.discount":"Discount","projects.form.labels.companyShare":"Company share & VAT","projects.form.labels.applyTax":"Apply VAT 15%","projects.form.discount.percent":"% Percent","projects.form.discount.amount":"ğŸ’µ Amount","projects.form.companyShareToggle":"Include company share (10%)","projects.form.selectClient":"Select client","projects.form.selectTechnician":"Select crew member","projects.form.selectEquipment":"Select equipment","projects.form.types.commercial":"Commercial shoot","projects.form.types.coverage":"Event coverage","projects.form.types.photography":"Photography","projects.form.types.social":"Social media content","projects.form.types.unknown":"Unspecified type","projects.form.buttons.addTechnician":"â• Add to Crew","projects.form.buttons.addEquipment":"â• Add to Project","projects.form.buttons.addExpense":"â• Add Expense","projects.form.buttons.save":"ğŸ†• Create Project","projects.form.buttons.update":"ğŸ” Update Project","projects.form.taxLabel":"Include VAT (15%)","projects.form.paymentStatus.paid":"Paid","projects.form.paymentStatus.unpaid":"Unpaid","projects.form.paymentStatus.partial":"Partially Paid","projects.form.paymentProgress.label":"ğŸ’° Received Payment","projects.form.paymentProgress.amount":"ğŸ’µ Amount","projects.form.paymentProgress.percent":"% Percent","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Enter the amount or percentage received from the project total","projects.paymentStatus.paid":"Paid","projects.paymentStatus.unpaid":"Unpaid","projects.paymentStatus.partial":"Partially Paid","projects.selected.emptyTechnicians":"No crew members selected yet","projects.selected.emptyEquipment":"No equipment selected","projects.selected.emptyExpenses":"No expenses recorded","projects.summary.title":"Quick Overview","projects.summary.totalProjects":"Total Projects","projects.summary.upcoming":"Upcoming Projects","projects.summary.expenses":"Total Expenses","projects.summary.budget":"Estimated Value (with VAT)","projects.focus.title":"ğŸ“Œ Focus Projects","projects.focus.legend":"Tap a card to review details or jump to editing.","projects.focus.today":"Today's Projects","projects.focus.thisWeek":"This Week","projects.focus.upcoming":"Upcoming Projects","projects.focus.recent":"Latest Projects","projects.focus.empty":"No projects scheduled for today or this week.","projects.focus.view":"View details","projects.focus.edit":"Edit","projects.focus.actions.confirm":"âœ”ï¸ Confirm project","projects.focus.confirmed":"âœ… Project confirmed","projects.focus.summary.project":"Project summary","projects.focus.summary.reservations":"Linked reservations","projects.focus.summary.payment":"Financial summary","projects.focus.summary.range":"Date range","projects.focus.summary.time":"Time","projects.focus.toastNotFound":"âš ï¸ Could not find this project in the list","projects.toast.linkReservationFailed":"âš ï¸ Unable to link some reservations to the project. Please review them manually.","projects.toast.companyShareRequiresTax":"âš ï¸ Company share requires VAT to be enabled first.","projects.timeline.title":"Projects Timeline","projects.timeline.legend":"The bar shows project start and end, with colors reflecting status.","projects.timeline.legend.upcoming":"Upcoming","projects.timeline.legend.ongoing":"In Progress","projects.timeline.legend.completed":"Completed","projects.timeline.legend.conflict":"Conflict","projects.timeline.empty":"No projects with valid schedule to display.","projects.timeline.conflict":"Scheduling conflict","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Quick Search","projects.search.placeholder":"Search by project name or client","projects.subtabs.create":"Create Project","projects.subtabs.list":"My Projects","projects.subtabs.reports":"Project Reports","projects.subtabs.expenses":"Project Expenses","projects.subtabs.templates":"Templates","projects.templates.title":"Templates (A4)","projects.templates.subtitle":"Bind a project/reservation, edit fields, and print PDF.","projects.templates.labels.project":"ğŸ“ Project","projects.templates.labels.reservation":"ğŸ”— Reservation (optional)","projects.templates.labels.type":"ğŸ“„ Template type","projects.templates.types.expenses":"Expenses Sheet (A4 Portrait)","projects.templates.types.callsheet":"Call Sheet (A4 Landscape)","projects.templates.types.shotlist":"Shot List (A4 Landscape)","projects.templates.actions.refresh":"Refresh","projects.templates.actions.print":"ğŸ–¨ï¸ Print PDF","projects.templates.actions.toggle":"â‹¯ Actions","projects.templates.actions.save":"ğŸ’¾ Save","projects.templates.actions.saveCopy":"ğŸ“ Save as copy","projects.templates.actions.fromReservation":"ğŸ“… From reservation","projects.templates.actions.rename":"âœï¸ Rename","projects.templates.actions.delete":"ğŸ—‘ï¸ Delete","projects.templates.actions.export":"â¬‡ï¸ Export","projects.templates.actions.exportExcel":"â¬‡ï¸ Export Excel","projects.templates.actions.import":"â¬†ï¸ Import","projects.templates.noReservation":"â€” None â€”","projects.templates.empty":"Select a project to start building templates.","projects.templates.expenses.title":"Expenses Sheet","projects.templates.callsheet.title":"Call Sheet","projects.templates.callsheet.contacts":"Key Contacts","projects.templates.callsheet.schedule":"Day Schedule","projects.templates.shotlist.title":"Shot List","projects.table.title":"Projects List","projects.table.count":"{count} project","projects.table.reservationsCount":"{count} reservations","projects.table.headers.project":"Project","projects.table.headers.client":"Client","projects.table.headers.period":"Schedule","projects.table.headers.crew":"Crew","projects.table.headers.equipment":"Equipment","projects.table.headers.total":"Total (with VAT)","projects.table.headers.expenses":"Expenses (SR)","projects.table.emptyInitial":"No projects have been created yet.","projects.table.emptyFiltered":"No matching projects found.","projects.modal.title":"Project Details","projects.details.overview.heading":"Project Information","projects.details.labels.clientPhone":"Client phone","projects.details.labels.clientEmail":"Email","projects.details.client.noPhone":"No phone available","projects.details.client.noEmail":"No email available","projects.reports.pageTitle":"Project Reports - Rental System","projects.reports.title":"Project Reporting Dashboard","projects.reports.subtitle":"Detailed analytics for project performance, deadlines, and completion rates.","projects.reports.filters.search":"Search","projects.reports.filters.searchPlaceholder":"Search by project or client name","projects.reports.filters.status":"Project status","projects.reports.filters.payment":"Payment status","projects.reports.filters.paymentAll":"All payments","projects.reports.filters.paymentPaid":"Paid","projects.reports.filters.paymentPartial":"Partially paid","projects.reports.filters.paymentUnpaid":"Unpaid","projects.reports.filters.dateRange":"Date range","projects.reports.filters.range.all":"All time","projects.reports.filters.range.30":"Last 30 days","projects.reports.filters.range.90":"Last 90 days","projects.reports.filters.range.365":"Last year","projects.reports.filters.range.custom":"Custom range","projects.reports.filters.start":"From","projects.reports.filters.end":"To","projects.reports.filters.refresh":"Refresh","projects.reports.charts.status":"Status distribution","projects.reports.charts.statusHint":"Share of projects per execution status","projects.reports.charts.timeline":"Revenue over time","projects.reports.charts.timelineHint":"Total project value by month","projects.reports.charts.expenses":"Expenses vs. value","projects.reports.charts.expensesHint":"Compare spend against total project value","projects.reports.charts.clients":"Top clients","projects.reports.charts.clientsHint":"Highest clients by project value","projects.reports.noData":"No data available","projects.reports.loading.chart":"Refreshing chartâ€¦","projects.reports.table.title":"Project list","projects.reports.table.columns.project":"Project","projects.reports.table.columns.client":"Client","projects.reports.table.columns.status":"Status","projects.reports.table.columns.period":"Period","projects.reports.table.columns.value":"Value","projects.reports.table.columns.payment":"Payment","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.reports.filters.confirmed.label":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯","projects.reports.filters.confirmed.all":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯: Ø§Ù„ÙƒÙ„","projects.reports.filters.confirmed.yes":"Ù…Ø¤ÙƒØ¯","projects.reports.filters.confirmed.closed":"Ù…ØºÙ„Ù‚","projects.reports.table.columns.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.actions.exportExcel":"ØªØµØ¯ÙŠØ± Excel","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.table.empty":"No projects match the current filters.","projects.reports.table.meta":"Showing {count} of {total} projects","projects.reports.kpi.totalProjects":"Total projects","projects.reports.kpi.totalProjectsMeta":"After applying the current filters","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.totalValueMeta":"Includes projects, linked reservations, and VAT","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.unpaidValueMeta":"Projects not fully paid yet","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.expensesMeta":"Expenses for included projects","projects.reports.datasets.value":"Total value","projects.reports.datasets.expenses":"Expenses","projects.expenses.pageTitle":"Project Expenses - Rental System","projects.expenses.title":"Manage Project Expenses","projects.expenses.subtitle":"Track expenses linked to bookings and projects with full invoicing visibility.","projects.expenses.placeholder":"A dedicated board for linking project expenses to bookings is coming soon.","projects.expenses.placeholderHint":"Prepare invoices and categories now to accelerate the upcoming release.","projects.expenses.actions.addExpense":"â• Add expense","projects.expenses.actions.importInvoice":"ğŸ§¾ Upload invoice","projects.expenses.actions.export":"â¬‡ï¸ Export","projects.expenses.kpi.total":"Total expenses","projects.expenses.kpi.total.meta":"Expenses recorded during the current period","projects.expenses.kpi.pending":"Pending approval","projects.expenses.kpi.pending.meta":"Expenses awaiting financial manager approval","projects.expenses.kpi.approved":"Approved","projects.expenses.kpi.approved.meta":"Latest expenses that were approved","projects.expenses.kpi.average":"Average per project","projects.expenses.kpi.average.meta":"Estimated value based on active projects","projects.expenses.breakdown.title":"Expenses by category","projects.expenses.breakdown.hint":"Track spend on equipment, crew, and logistics.","projects.expenses.breakdown.empty":"No categorized expenses recorded yet.","projects.expenses.timeline.title":"Expenses over time","projects.expenses.timeline.hint":"Review spend across recent months to spot trends.","projects.expenses.timeline.empty":"Add expenses to unlock the interactive timeline.","projects.expenses.table.title":"Detailed expense ledger","projects.expenses.table.hint":"Review project expenses together with approval status.","projects.expenses.table.columns.project":"Project","projects.expenses.table.columns.category":"Category","projects.expenses.table.columns.description":"Description","projects.expenses.table.columns.amount":"Amount","projects.expenses.table.columns.status":"Status","projects.expenses.table.columns.date":"Logged on","projects.expenses.table.empty":"Registered expenses will appear here as soon as you add them.","projects.toast.selectTechnician":"âš ï¸ Please select a crew member","projects.toast.technicianAlreadyAdded":"âš ï¸ Crew member already added","projects.toast.technicianAdded":"âœ… Crew member added","projects.toast.selectEquipment":"âš ï¸ Please select equipment","projects.toast.equipmentAdded":"âœ… Equipment added to project","projects.toast.missingExpenseLabel":"âš ï¸ Please enter an expense description","projects.toast.invalidExpenseAmount":"âš ï¸ Please enter a valid amount","projects.toast.customerNotFound":"âš ï¸ Client name not found. Please select an existing client.","projects.toast.missingRequiredFields":"âš ï¸ Please fill in the required fields","projects.toast.invalidDateRange":"âš ï¸ End date must be after the start date","projects.toast.saved":"âœ… Project saved successfully","projects.toast.editReady":"âœï¸ Project loaded for editing. Update the fields, then save.","projects.toast.updated":"âœ… Project updated successfully","projects.toast.editMissing":"âš ï¸ Unable to find the project you tried to edit","projects.toast.confirmed":"âœ… Project confirmed","projects.toast.alreadyConfirmed":"â„¹ï¸ Project already confirmed","projects.toast.deleted":"ğŸ—‘ï¸ Project deleted","projects.confirm.delete":"Are you sure you want to delete this project?","projects.fallback.unknownClient":"Unknown client","projects.fallback.unknownEquipment":"Equipment","projects.fallback.noDescription":"No description","projects.fallback.untitled":"Untitled project","projects.fallback.emptyList":"None","projects.fallback.technicianName":"Member {id}","projects.status.upcoming":"Upcoming","projects.status.ongoing":"In Progress","projects.status.completed":"Completed","projects.status.conflict":"Conflict","projects.status.cancelled":"Cancelled","projects.tag.closed":"Closed","projects.form.labels.cancelled":"Cancel project","projects.form.hints.cancelled":"Marks the project as cancelled and updates all linked reservations to cancelled.","projects.close.noteLabel":"Close note","projectCards.filters.search":"ğŸ” Search by project name or description...","projectCards.filters.status.all":"âš™ï¸ All statuses","projectCards.filters.status.upcoming":"ğŸ“… Upcoming projects","projectCards.filters.status.ongoing":"âš™ï¸ In-progress projects","projectCards.filters.status.completed":"âœ… Completed projects","projectCards.stats.crew":"ğŸ‘¥ Crew members: {count}","projectCards.stats.reservations":"ğŸ”— Reservations: {count}","projectCards.stats.client":"ğŸ‘¤ Client: {name}","projectCards.stats.type":"ğŸ·ï¸ Type: {label}","projectCards.stats.budget":"ğŸ’° Estimated budget (with VAT): {amount}","projectCards.stats.expenses":"ğŸ’¸ Expenses: {amount}","projectCards.stats.crewShort":"Crew","projectCards.stats.reservationsShort":"Reservations","projectCards.stats.budgetShort":"Project budget","projectCards.stats.expensesShort":"Total expenses","projectCards.stats.paymentStatus":"Payment status","projectCards.stats.equipmentCount":"Equipment count","projectCards.stats.crewCount":"Crew count","projectCards.stats.reservationValue":"Reservation total","projectCards.stats.servicesClientPrice":"Production services","projectCards.stats.expensesTotal":"Expenses total","projectCards.stats.reservationTotal":"Linked reservation total","projectCards.stats.taxTotal":"VAT","projectCards.stats.overallTotal":"Grand total","projectCards.groups.meta":"Project info","projectCards.groups.reservations":"Reservation snapshot","projectCards.groups.payment":"Payment summary","projectCards.meta.code":"Project ID","projectCards.meta.client":"Client","projectCards.meta.company":"Client company","projectCards.meta.type":"Project type","projectCards.meta.startDate":"Start date","projectCards.meta.endDate":"End date","projects.details.type":"Project type","projects.details.company":"Client company","projects.details.client":"Client","projects.details.crew":"Crew ({count})","projects.details.equipment":"Equipment ({count})","projects.details.expenses":"Expenses ({amount})","projects.details.subtotal":"Subtotal before tax:","projects.details.tax":"VAT 15%:","projects.details.total":"Total with VAT:","projects.details.labels.projectTitle":"Project Name","projects.details.labels.code":"Project ID","projects.details.summary.projectSubtotal":"Project total","projects.details.summary.paymentStatus":"Payment status","projects.details.summary.projectTax":"Project VAT (15%)","projects.details.summary.projectTotal":"Project total (after VAT)","projects.details.summary.reservationsTotal":"Equipment / crew total","projects.details.summary.combinedTax":"Total VAT on combined amount (15%)","projects.details.summary.reservationsCount":"{count} linked reservations","projects.details.summary.overallTotal":"Overall total","projects.details.expensesTotal":"Production services cost","projects.details.reservationsTotal":"Total reservations","projects.details.summary.equipmentTotal":"Equipment total","projects.details.summary.crewTotal":"Crew total","projects.details.summary.crewCostTotal":"Crew cost","projects.details.summary.expensesTotal":"Production services cost","projects.details.summary.servicesClientPrice":"Production services","projects.details.summary.gross":"Gross","projects.details.summary.discount":"Discount","projects.details.summary.companyShare":"Company share","projects.details.summary.tax":"VAT (15%)","projects.details.summary.grossAfterDiscount":"Total after discount","projects.details.summary.netProfit":"Net profit","projects.details.summary.finalTotal":"Final total","projects.details.labels.start":"Start date","projects.details.labels.end":"End date","projects.details.summary.title":"Financial summary","projects.details.description":"Project description","projects.details.paymentOverview.total":"Overall total","projects.details.paymentOverview.paid":"Paid","projects.details.paymentOverview.percent":"Paid %","projects.details.paymentOverview.remaining":"Remaining","projects.closeModal.title":"ğŸ”’ Close Project","projects.closeModal.subtitle":"Please add a closing note (optional).","projects.closeModal.noteLabel":"ğŸ“ Closing notes","projects.closeModal.notePlaceholder":"e.g., Project successfully completed...","projects.closeModal.cancel":"Cancel","projects.closeModal.confirm":"ğŸ”’ Close Project","projects.details.labels.days":"Days","projects.details.labels.crewCount":"Crew count","projects.details.labels.equipmentCount":"Equipment quantity","projects.details.labels.reservationsCount":"Reservations count","projects.details.labels.notes":"Project notes","projects.details.chips.vatOn":"VAT enabled 15%","projects.details.chips.vatOff":"VAT disabled","projects.details.chips.reservations":"{count} reservations","projects.details.chips.linkedReservation":"Linked to reservation","projects.details.chips.notLinkedReservation":"Not linked to reservation","projects.details.noItems":"None","projects.details.quantity":"{qty} pcs","projects.details.reservations.title":"Linked reservations","projects.details.reservations.empty":"No reservations linked to this project yet.","projects.details.reservations.create":"â• Create linked reservation","projects.details.reservations.view":"View reservation","projects.details.actions.edit":"âœï¸ Edit Project","projects.details.actions.delete":"ğŸ—‘ï¸ Delete Project","projects.details.actions.exportExpenses":"ğŸ“Š Export Expenses (Excel)","projects.details.actions.exportShotList":"ğŸ¬ Export Shot List","projects.details.actions.exportCallSheet":"ğŸ“ Export Call Sheet","projects.details.actions.exportPdf":"Quote","projects.details.reservations.count":"{count} reservations","projects.details.reservations.itemsCount":"{count} item(s)","projects.details.reservations.crewCount":"{count} crew member(s)","projects.details.edit.heading":"Edit Project","projects.details.edit.subheading":"Update the project details, then save your changes.","projects.details.edit.save":"ğŸ’¾ Save Changes","projects.details.edit.cancel":"Cancel","projects.quote.sections.customer":"Customer info","projects.quote.sections.project":"Project info","projects.quote.sections.expenses":"Production services","projects.quote.sections.crew":"Crew","projects.quote.sections.financial":"Financial summary","projects.quote.sections.equipment":"Equipment","projects.quote.sections.notes":"Project notes"}});Mt({en:{"projects.reports.filters.confirmed.label":"Confirmation","projects.reports.filters.confirmed.all":"Confirmation: All","projects.reports.filters.confirmed.yes":"Confirmed","projects.reports.filters.confirmed.closed":"Closed","projects.reports.table.columns.margin":"Profit margin","projects.reports.actions.exportExcel":"Export Excel","projects.reports.kpi.margin":"Profit margin","projects.reports.kpi.marginMeta":"Net profit Ã· revenue (excl. VAT)","projects.reports.kpi.netProfitMeta":"Sum of net profit for selected projects","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.margin":"Profit margin","projects.reports.kpi.revenue.details.projectExpenses":"Project expenses","projects.reports.table.sortable":"Sortable","projects.reports.table.sort.asc":"Ascending","projects.reports.table.sort.desc":"Descending"}});function ks(){if(!Array.isArray(u.projects)||u.projects.length===0)return;let e=!1;const s=u.projects.map(r=>{if(r.projectCode)return r;const a=Bt();return e=!0,{...r,projectCode:a}});e&&(u.projects=s)}function Ar(){const{customers:e,technicians:s,equipment:r}=$e();u.customers=Array.isArray(e)?e:[],u.technicians=Array.isArray(s)?s:[],u.equipment=Array.isArray(r)?r:[],u.reservations=M(),u.projects=Ee(),ks()}function Tr(){if(Ns(),t.technicianSelect){const e=t.technicianSelect.value,s=c(o("projects.form.selectTechnician","Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));t.technicianSelect.innerHTML=`<option value="">${s}</option>`+u.technicians.map(r=>{const a=o("projects.fallback.technicianName","Ø¹Ø¶Ùˆ {id}"),n=r.name||a.replace("{id}",b(String(r.id||"")));return`<option value="${r.id}">${c(n)}</option>`}).join(""),e&&(t.technicianSelect.value=e)}if(t.equipmentSelect){const e=t.equipmentSelect.value,s=c(o("projects.form.selectEquipment","Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©"));t.equipmentSelect.innerHTML=`<option value="">${s}</option>`+u.equipment.map(r=>{const a=r.desc||r.description||r.name||o("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©");return`<option value="${c(r.barcode||"")}">${c(a)}</option>`}).join(""),e&&(t.equipmentSelect.value=e)}}function Re(e){if(!t.clientCompany)return;const s=e?.companyName||e?.company||"";t.clientCompany.value=s}function Ns(){if(!t.client)return;Is();const e=t.client.dataset?.customerId;if(e){const s=u.customers.find(r=>String(r.id)===String(e));s?Re(s):(t.client.dataset.customerId="",Re(null))}else Re(null);document.activeElement===t.client&&gt()}function Is(){!t.client||!t.clientSuggestions||t.client.dataset.autocompleteAttached!=="true"&&(t.client.addEventListener("input",()=>{t.client.dataset.customerId="",gt(),Re(null)}),t.client.addEventListener("focus",()=>{gt()}),t.client.addEventListener("blur",()=>{window.setTimeout(()=>Je(),150)}),t.client.dataset.autocompleteAttached="true")}function Je(){t.clientSuggestions&&(t.clientSuggestions.classList.remove("is-visible"),t.clientSuggestions.hidden=!0,t.clientSuggestions.innerHTML="")}function gt(){if(!t.client||!t.clientSuggestions)return;if(!Array.isArray(u.customers)||u.customers.length===0){const a=$e();Array.isArray(a?.customers)&&a.customers.length&&(u.customers=a.customers)}const e=$s(),s=Me(t.client.value||""),r=s?e.filter(a=>{const n=Me(a.name).includes(s),i=Me(a.company||"").includes(s);return n||i}).slice(0,10):e.slice(0,10);if(!r.length){Je();return}t.clientSuggestions.innerHTML=r.map(a=>{const n=a.company?`<div class="suggestion-item__meta">${c(a.company)}</div>`:"";return`
        <div class="suggestion-item" data-id="${c(String(a.id))}" data-name="${c(a.name)}" data-company="${c(a.company||"")}">
          <div class="suggestion-item__primary">${c(a.name)}</div>
          ${n}
        </div>
      `}).join(""),t.clientSuggestions.hidden=!1,t.clientSuggestions.classList.add("is-visible"),t.clientSuggestions.scrollTop=0,t.clientSuggestions.querySelectorAll(".suggestion-item").forEach(a=>{a.addEventListener("mousedown",n=>{n.preventDefault();const{id:i,name:d}=n.currentTarget.dataset;t.client&&(t.client.value=d||"",t.client.dataset.customerId=i||"");const l=n.currentTarget.dataset.company||"";Re({companyName:l}),Je()})})}function $s(){return Array.isArray(u.customers)?u.customers.map(e=>{const s=(e.customerName||e.name||"").trim();return s?{id:e.id,name:s,company:(e.companyName||e.company||"").trim()}:null}).filter(Boolean):[]}function Ls(e,s=""){if(!Array.isArray(u.customers)||u.customers.length===0)return null;if(s){const n=u.customers.find(i=>String(i.id)===String(s));if(n)return n}const r=Me(e||"");if(!r)return null;const a=u.customers.find(n=>Me(n.customerName||n.name||"")===r);return a||u.customers.find(n=>Me(n.customerName||n.name||"").includes(r))||null}function Ds(){return typeof window<"u"&&typeof window.flatpickr=="function"?window.flatpickr.bind(window):typeof globalThis<"u"&&typeof globalThis.flatpickr=="function"?globalThis.flatpickr.bind(globalThis):null}function wr(){t.form=document.getElementById("project-form"),t.title=document.getElementById("project-title"),t.type=document.getElementById("project-type"),t.client=document.getElementById("project-client"),t.clientSuggestions=document.getElementById("project-customer-suggestions"),t.clientCompany=document.getElementById("project-client-company"),t.paymentStatus=document.getElementById("project-payment-status"),t.startDate=document.getElementById("project-start-date"),t.startTime=document.getElementById("project-start-time"),t.endDate=document.getElementById("project-end-date"),t.endTime=document.getElementById("project-end-time"),t.description=document.getElementById("project-description"),t.technicianSelect=document.getElementById("project-technician-select"),t.addTechnicianBtn=document.getElementById("add-technician-btn"),t.technicianList=document.getElementById("project-technician-list"),t.equipmentSelect=document.getElementById("project-equipment-select"),t.equipmentQty=document.getElementById("project-equipment-qty"),t.addEquipmentBtn=document.getElementById("add-equipment-btn"),t.equipmentList=document.getElementById("project-equipment-list"),t.expenseLabel=document.getElementById("project-expense-label"),t.expenseAmount=document.getElementById("project-expense-amount"),t.expenseNote=document.getElementById("project-expense-note"),t.addExpenseBtn=document.getElementById("add-expense-btn"),t.expenseList=document.getElementById("project-expense-list"),t.servicesClientTotalIndicator=document.getElementById("project-services-client-total-indicator"),t.servicesClientTotalValue=document.getElementById("project-services-client-total-value"),t.discountType=document.getElementById("project-discount-type"),t.discountValue=document.getElementById("project-discount"),t.servicesClientPrice=document.getElementById("project-services-client-price"),t.paymentAddButton=document.getElementById("project-payment-add"),t.paymentHistory=document.getElementById("project-payment-history"),t.companyShare=document.getElementById("project-company-share"),t.paymentProgressType=document.getElementById("project-payment-progress-type"),t.paymentProgressValue=document.getElementById("project-payment-progress-value"),t.taxCheckbox=document.getElementById("project-tax"),t.linkedReservationBtn=document.getElementById("project-linked-reservation-btn"),t.submitBtn=t.form?.querySelector('[type="submit"]'),t.projectsTableBody=document.getElementById("project-table-body"),t.projectsCount=document.getElementById("projects-count"),t.projectsUpcoming=document.getElementById("projects-upcoming"),t.projectsExpenses=document.getElementById("projects-expenses"),t.projectsBudget=document.getElementById("projects-budget"),t.tableCount=document.getElementById("project-table-count"),t.search=document.getElementById("project-search"),t.filterStatus=document.getElementById("project-filter-status"),t.filterPayment=document.getElementById("project-filter-payment"),t.filterType=document.getElementById("project-filter-type"),t.filterConfirmed=document.getElementById("project-filter-confirmed"),t.filterRange=document.getElementById("project-filter-range"),t.filterStart=document.getElementById("project-filter-start-date"),t.filterEnd=document.getElementById("project-filter-end-date"),t.filterReset=document.getElementById("project-filter-reset"),t.detailsModalEl=document.getElementById("projectDetailsModal"),t.detailsBody=document.getElementById("project-details-body"),t.tabButtons=Array.from(document.querySelectorAll(".tab-button[data-tab-target]")),t.tabPanes=Array.from(document.querySelectorAll("[data-tab-pane]")),t.projectSubTabButtons=Array.from(document.querySelectorAll(".sub-tab-button[data-project-subtab-target]")),t.projectSubTabPanes=Array.from(document.querySelectorAll("[data-project-subtab]")),t.timeline=document.getElementById("project-timeline"),t.focusCards=document.getElementById("project-focus-cards"),t.detailsModalEl&&!t.detailsModalEl.dataset.projectListenerAttached&&(t.detailsModalEl.addEventListener("hidden.bs.modal",()=>{t.detailsBody&&(t.detailsBody.dataset.projectId="")}),t.detailsModalEl.dataset.projectListenerAttached="true")}function Cr(){const e=Ds();if(!e)return;["#project-start-date","#project-end-date","#project-start-time","#project-end-time"].forEach(l=>{const p=document.querySelector(l);if(p){try{p.setAttribute("autocomplete","off")}catch{}try{p.setAttribute("autocapitalize","off")}catch{}try{p.setAttribute("autocorrect","off")}catch{}try{p.setAttribute("spellcheck","false")}catch{}}});const s=[["#project-start-date",{dateFormat:"Y-m-d",allowInput:!0}],["#project-end-date",{dateFormat:"Y-m-d",allowInput:!0}]],r=[["#project-filter-start-date",{dateFormat:"Y-m-d",allowInput:!0,altInput:!0,altFormat:"d/m/Y",disableMobile:!0}],["#project-filter-end-date",{dateFormat:"Y-m-d",allowInput:!0,altInput:!0,altFormat:"d/m/Y",disableMobile:!0}]],a=[["#project-start-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}],["#project-end-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}]];[...s,...a].forEach(([l,p])=>{const j=document.querySelector(l);j&&e(j,p)}),r.forEach(([l,p])=>{const j=document.querySelector(l);j&&e(j,p)});const n=l=>{if(l==null)return"";const p=["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"],j=["Û°","Û±","Û²","Û³","Û´","Ûµ","Û¶","Û·","Û¸","Û¹"],m=["0","1","2","3","4","5","6","7","8","9"];return String(l).split("").map(h=>{const S=p.indexOf(h);if(S>-1)return m[S];const E=j.indexOf(h);return E>-1?m[E]:h}).join("")},i=l=>{if(!l||l.dataset.normalizedDigits==="true")return;const p=()=>{const j=l.value||"",m=n(j);if(m!==j){const h=l.selectionStart,S=l.selectionEnd;l.value=m;try{if(typeof h=="number"&&typeof S=="number"){const E=m.length-j.length;l.setSelectionRange(Math.max(0,h+E),Math.max(0,S+E))}}catch{}}};l.addEventListener("input",p),l.addEventListener("blur",p);try{l.setAttribute("inputmode","numeric")}catch{}l.dataset.normalizedDigits="true"};i(t.startDate),i(t.endDate),i(t.startTime),i(t.endTime),t.startTime&&t.startTime._flatpickr?.altInput&&i(t.startTime._flatpickr.altInput),t.endTime&&t.endTime._flatpickr?.altInput&&i(t.endTime._flatpickr.altInput);const d=l=>{if(!l)return;const p=l._flatpickr,j=()=>{try{if(!p)return;const m=p.altInput&&typeof p.altInput.value=="string"?p.altInput.value.trim():"",h=typeof l.value=="string"?l.value.trim():"",S=m||h;if(!S)return;const E=m?p.config.altFormat:p.config.dateFormat,k=p.parseDate(S,E)||p.parseDate(S);k&&p.setDate(k,!0)}catch{}};l.addEventListener("blur",j),p?.altInput&&p.altInput.addEventListener("blur",j)};d(t.startTime),d(t.endTime)}function Ot(){["startDate","startTime","endDate","endTime"].forEach(e=>{const s=t[e];s&&(s._flatpickr?s._flatpickr.clear():s.value="")})}function Er(){const e=document.getElementById("logout-btn");e&&!e.dataset.listenerAttached&&(e.addEventListener("click",()=>ls()),e.dataset.listenerAttached="true")}async function Ut(e){if(u.projects.findIndex(n=>String(n.id)===String(e))===-1)return;let r=0;try{r=(M()||[]).filter(i=>String(i.projectId)===String(e)).length}catch{}const a=r>0?o("projects.confirm.deleteCascade",`âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡ (${r}). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`):o("projects.confirm.delete","Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ");if(window.confirm(a))try{try{const i=(M()||[]).filter(d=>String(d.projectId)===String(e));for(const d of i){const l=d.id??d.reservationId??d.reservation_code;if(l)try{await js(l)}catch(p){console.warn("âš ï¸ failed to delete linked reservation",l,p)}}}catch{}await us(e),await Pt(),await wt(),u.projects=Ee(),u.reservations=M(),ce(),ke(),ge(),document.dispatchEvent(new CustomEvent("projects:changed")),document.dispatchEvent(new CustomEvent("reservations:changed")),g(o("projects.toast.deleted","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡"))}catch(n){console.error("âŒ [projects] removeProject failed",n);const i=at(n)?n.message:o("projects.toast.deleteFailed","ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(i,"error")}}async function Rs(e,{start:s=null,end:r=null}={}){if(!e)return!1;const n=M().filter(l=>String(l.projectId)===String(e));if(!n.length)return!1;let i=!1,d=0;for(const l of n){const p=l.id??l.reservationId;if(!p)continue;const j=String(l.status||"").toLowerCase();if(j==="completed"||j==="cancelled"||j==="canceled")continue;const m={};if(s&&(m.start_datetime=s),r&&(m.end_datetime=r),Object.keys(m).length!==0)try{await qe(p,m),i=!0,d+=1}catch(h){console.warn("[projects] failed to update linked reservation schedule",p,h)}}if(i){u.reservations=M();try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const l=o("projects.toast.linkedReservationsScheduleUpdated","ØªÙ… ØªØ­Ø¯ÙŠØ« ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© ({count})","Updated linked reservations timing ({count})").replace("{count}",String(d));g(l)}catch{}}return i}async function qs(e,s){if(!e)return!1;const a=M().filter(p=>String(p.projectId)===String(e));if(!a.length)return!1;const n=typeof s=="string"?s.toLowerCase():"unpaid",i=n==="paid",d=i?"paid":n==="partial"?"partial":"unpaid";let l=!1;for(const p of a){const j=p.id??p.reservationId;if(!j)continue;const m=p.paid===!0||p.paid==="paid",h=p.paidStatus||p.paymentStatus||(m?"paid":"unpaid");m===i&&h===d||(await qe(j,{paid_status:d,paid:i}),l=!0)}return l&&(u.reservations=M()),l}async function Fs(e){if(!e)return!1;const s=M(),r=u.projects.find(i=>String(i.id)===String(e))||($e().projects||[]).find?.(i=>String(i.id)===String(e))||null,a=s.filter(i=>String(i.projectId)===String(e));if(!a.length)return!1;let n=!1;for(const i of a){const d=i.id??i.reservationId;if(!d)continue;const l=ys({...i,projectId:e},r);if(l.effectiveConfirmed)continue;const p=r?.status??l.projectStatus??"confirmed";await qe(d,{confirmed:!0,status:p}),n=!0}return n&&(u.reservations=M()),n}async function xt(e,s){if(!e)return!1;const r=await qs(e,s);return r&&document.dispatchEvent(new CustomEvent("reservations:changed")),r}async function _s(e){if(!e)return!1;const r=M().filter(n=>String(n.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const n of r){const i=n.id??n.reservationId;if(i)try{await qe(i,{status:"cancelled",cancelled:!0}),a=!0}catch(d){console.warn("[projects] failed to cancel linked reservation",i,d)}}return a&&(u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}async function Et(e){if(!e)return!1;const r=M().filter(n=>String(n.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const n of r){const i=n.id??n.reservationId;if(i)try{await qe(i,{status:"completed",confirmed:!0}),a=!0}catch(d){console.warn("[projects] failed to close linked reservation",i,d)}}return a&&(u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}async function Ms(e){if(!e)return!1;const r=M().filter(n=>String(n.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const n of r){const i=n.id??n.reservationId;if(i)try{const d=String(n.status||"").toLowerCase();if(d==="cancelled"||d==="canceled")continue;await qe(i,{status:"confirmed",confirmed:!0}),a=!0}catch(d){console.warn("[projects] failed to reopen linked reservation",i,d)}}return a&&(u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}async function kr(){const e=Ee();if(!Array.isArray(e)||e.length===0)return!1;const s=new Date;let r=!1,a=0;for(const n of e)try{const i=String(n?.status||"").toLowerCase();if(i==="completed"||i==="closed"||i==="cancelled"||i==="canceled")continue;const d=n?.end?new Date(n.end):null;if(!d||Number.isNaN(d.getTime())||d>=s)continue;const l=o("projects.autoClose.note","Ø¥ØºÙ„Ø§Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),p=await At(n.projectId??n.id,l),j=p?.projectId??p?.id??n.id;await Et(j),r=!0,a+=1}catch(i){console.warn("[projects] autoCloseExpiredProjects failed for",n?.id,i)}if(r){try{await Pt()}catch{}try{await wt()}catch{}try{document.dispatchEvent(new CustomEvent("projects:changed"))}catch{}try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const n=o("projects.toast.autoClosed","ØªÙ… Ø¥ØºÙ„Ø§Ù‚ {count} Ù…Ø´Ø±ÙˆØ¹ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª").replace("{count}",String(a));g(n)}catch{}}return r}let bt=!1;const nt="projects:create:draft",Bs="projects.html#projects-section";let et=!1,Ce=[];const Vs=()=>{u.filters.search="",u.filters.status="",u.filters.payment="",u.filters.type="",u.filters.confirmed="",u.filters.range="",u.filters.startDate="",u.filters.endDate=""};function zt(e){return e?e instanceof HTMLElement?e:typeof e=="string"?document.getElementById(e):null:null}function Hs(e=t.companyShare){const s=zt(e);if(!s||s.checked!==!0)return null;const r=s.dataset.companyShare??s.value??ye,a=b(String(r).replace("%","").trim()),n=Number.parseFloat(a);return!Number.isFinite(n)||n<=0?ye:n}function Ye(e=t.companyShare,s=ye){const r=zt(e);if(!r)return;const a=r.dataset.companyShare??r.value??s,n=b(String(a).replace("%","").trim());let i=Number.parseFloat(n);(!Number.isFinite(i)||i<=0)&&(i=s),r.dataset.companyShare=String(i),r.checked=!0}function Ke(e){const s=t.taxCheckbox,r=t.companyShare;if(!s||!r||et)return;et=!0;const a=()=>{g(o("projects.toast.companyShareRequiresTax","âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©"))};if(e==="share")if(r.checked){if(s.disabled){r.checked=!1,a(),et=!1;return}s.checked||(s.checked=!0),Ye(r)}else s.checked&&!s.disabled&&(s.checked=!1);else e==="tax"&&(s.checked?Ye(r):r.checked&&(r.checked=!1));et=!1}function Wt({equipmentEstimate:e=0,expensesTotal:s=0,servicesClientPrice:r=0,discountValue:a=0,discountType:n="percent",applyTax:i=!1,companyShareEnabled:d=!1,companySharePercent:l=null}={}){const p=Number(e)+Number(r),j=Number.isFinite(Number(a))?Number(a):0;let m=0;n==="amount"?m=j:m=p*(j/100),(!Number.isFinite(m)||m<0)&&(m=0),m>p&&(m=p);const h=Math.max(0,p-m),S=d&&i&&Number.isFinite(Number(l))&&Number(l)>0?Number(l):0,E=S>0?Number((h*(S/100)).toFixed(2)):0,k=h+E;let I=i?k*We:0;(!Number.isFinite(I)||I<0)&&(I=0),I=Number(I.toFixed(2));const L=Number((k+I).toFixed(2));return{baseSubtotal:p,discountAmount:m,subtotalAfterDiscount:h,companyShareAmount:E,taxableAmount:k,taxAmount:I,totalWithTax:L}}function Nr(){t.form&&!t.form.dataset.listenerAttached&&(t.form.addEventListener("submit",Xs),t.form.dataset.listenerAttached="true"),t.form&&!t.form.dataset.resetListenerAttached&&(t.form.addEventListener("reset",()=>{t.client&&(t.client.dataset.customerId=""),Je(),Ot(),t.type&&(t.type.value=""),Re(null),Zt(),Yt()}),t.form.dataset.resetListenerAttached="true"),Os(),Us(),t.search&&!t.search.dataset.listenerAttached&&(t.search.addEventListener("input",()=>{u.filters.search=b(t.search.value||"").trim().toLowerCase(),ce(),ge()}),t.search.dataset.listenerAttached="true");const e=()=>{ce(),ge()},s=i=>{if(!(i instanceof Date)||Number.isNaN(i.getTime()))return"";const d=String(i.getDate()).padStart(2,"0"),l=String(i.getMonth()+1).padStart(2,"0");return`${String(i.getFullYear())}-${l}-${d}`},r=i=>{const d=new Date;let l="",p="";if(i==="today")l=s(d),p=l;else if(i==="week"){const j=new Date(d),m=j.getDay(),h=m===0?6:m-1;j.setDate(j.getDate()-h);const S=new Date(j);S.setDate(S.getDate()+6),l=s(j),p=s(S)}else if(i==="month"){const j=new Date(d.getFullYear(),d.getMonth(),1),m=new Date(d.getFullYear(),d.getMonth()+1,0);l=s(j),p=s(m)}else i===""?(l="",p=""):i==="custom"&&(l=t.filterStart?.value||u.filters.startDate||"",p=t.filterEnd?.value||u.filters.endDate||"");t.filterStart&&(t.filterStart.value=l),t.filterEnd&&(t.filterEnd.value=p),u.filters.range=i,u.filters.startDate=b(l),u.filters.endDate=b(p),e()},a=(i,d)=>{!i||i.dataset.listenerAttached||(i.addEventListener("change",()=>{u.filters[d]=b(i.value||"").trim().toLowerCase(),e()}),i.dataset.listenerAttached="true")};a(t.filterStatus,"status"),a(t.filterPayment,"payment"),a(t.filterType,"type"),a(t.filterConfirmed,"confirmed"),t.filterRange&&!t.filterRange.dataset.listenerAttached&&(t.filterRange.addEventListener("change",()=>r(t.filterRange.value||"")),t.filterRange.dataset.listenerAttached="true");const n=(i,d)=>{if(!i||i.dataset.listenerAttached)return;const l=()=>{const p=b(i.value||"").trim();u.filters[d]=p,p&&(u.filters.range="custom",t.filterRange&&(t.filterRange.value="custom")),e()};i.addEventListener("change",l),i.addEventListener("input",l),i.dataset.listenerAttached="true"};n(t.filterStart,"startDate"),n(t.filterEnd,"endDate"),t.filterReset&&!t.filterReset.dataset.listenerAttached&&(t.filterReset.addEventListener("click",()=>{Vs(),t.search&&(t.search.value=""),t.filterStatus&&(t.filterStatus.value=""),t.filterPayment&&(t.filterPayment.value=""),t.filterType&&(t.filterType.value=""),t.filterConfirmed&&(t.filterConfirmed.value=""),t.filterRange&&(t.filterRange.value=""),t.filterStart&&(t.filterStart.value=""),t.filterEnd&&(t.filterEnd.value=""),e()}),t.filterReset.dataset.listenerAttached="true")}function Yt(){Ps(),u.editingProjectId=null,t.form&&(delete t.form.dataset.editingId,t.form.dataset.mode="create"),Be(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=""),u.servicesClientPriceTotal=0,t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.taxCheckbox&&(t.taxCheckbox.checked=!1),t.discountType&&(t.discountType.value="percent"),t.discountValue&&(t.discountValue.value=""),t.companyShare&&(t.companyShare.checked=!1,t.companyShare.dataset.companyShare=String(ye)),t.paymentStatus&&(t.paymentStatus.value="unpaid"),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected,t.paymentProgressType&&(t.paymentProgressType.value="percent"),t.paymentProgressValue&&(t.paymentProgressValue.value=""),Ce=[],t.paymentHistory&&(t.paymentHistory.innerHTML=""),Xt(),Qe(),Ke("tax"),Ve()}function Ir(){t.addTechnicianBtn&&t.addTechnicianBtn.dataset.listenerAttached!=="true"&&(t.addTechnicianBtn.addEventListener("click",zs),t.addTechnicianBtn.dataset.listenerAttached="true"),t.addEquipmentBtn&&t.addEquipmentBtn.dataset.listenerAttached!=="true"&&(t.addEquipmentBtn.addEventListener("click",Ws),t.addEquipmentBtn.dataset.listenerAttached="true")}function $r(){vt(t.technicianList,e=>{if(e.matches('[data-action="remove-technician"]')){const s=e.dataset.id;u.selectedTechnicians=u.selectedTechnicians.filter(r=>r!==s),Kt()}}),vt(t.equipmentList,e=>{if(e.matches('[data-action="remove-equipment"]')){const s=e.dataset.id;u.selectedEquipment=u.selectedEquipment.filter(r=>r.barcode!==s),Jt()}}),vt(t.expenseList,e=>{if(e.matches('[data-action="remove-expense"]')){const s=e.dataset.id;u.expenses=u.expenses.filter(r=>String(r.id)!==String(s)),Qt(),ke(),es(),Ve()}})}function Os(){t.discountValue&&t.discountValue.dataset.listenerAttached!=="true"&&(t.discountValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=b(s.value||""))}),t.discountValue.dataset.listenerAttached="true"),t.companyShare&&t.companyShare.dataset.listenerAttached!=="true"&&(t.companyShare.addEventListener("change",()=>{Ke("share")}),t.companyShare.dataset.listenerAttached="true"),t.taxCheckbox&&t.taxCheckbox.dataset.projectListenerAttached!=="true"&&(t.taxCheckbox.addEventListener("change",()=>{Ke("tax")}),t.taxCheckbox.dataset.projectListenerAttached="true"),t.paymentStatus&&t.paymentStatus.dataset.billingListenerAttached!=="true"&&(t.paymentStatus.addEventListener("change",()=>{t.paymentStatus.dataset.userSelected="true"}),t.paymentStatus.dataset.billingListenerAttached="true"),t.paymentProgressValue&&t.paymentProgressValue.dataset.listenerAttached!=="true"&&(t.paymentProgressValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=b(s.value||""))}),t.paymentProgressValue.dataset.listenerAttached="true"),t.servicesClientPrice&&t.servicesClientPrice.dataset.normalizeAttached!=="true"&&(t.servicesClientPrice.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const r=s.selectionStart,a=b(s.value||"");if(s.value=a,r!=null){const n=Math.min(a.length,r);s.setSelectionRange(n,n)}}),t.servicesClientPrice.dataset.normalizeAttached="true"),Ke(t.companyShare?.checked?"share":"tax"),Ve()}function Dt(){const e=t.paymentHistory;if(!e)return;const s=Array.isArray(Ce)?Ce:[];if(!s.length){e.innerHTML=`<div class="reservation-payment-history__empty">${c(o("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;return}const r=s.map((a,n)=>{const i=Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?C(Number(a.amount)):"â€”",d=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${b(Number(a.percentage).toFixed(2))}%`:"â€”",l=a?.recordedAt?b(ot(a.recordedAt)):"â€”",p=a?.type==="percent"?o("reservations.paymentHistory.type.percent","Ùª Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):o("reservations.paymentHistory.type.amount","ğŸ’µ Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©");return`
      <tr>
        <td>${c(p)}</td>
        <td>${c(i)}</td>
        <td>${c(d)}</td>
        <td>${c(l)}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${n}" aria-label="${c(o("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}">ğŸ—‘ï¸</button>
        </td>
      </tr>`}).join("");e.innerHTML=`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${c(o("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>`}function Us(){t.paymentAddButton&&t.paymentAddButton.dataset.listenerAttached!=="true"&&(t.paymentAddButton.addEventListener("click",e=>{e.preventDefault();const s=t.paymentProgressType?.value==="amount"?"amount":"percent",r=b(t.paymentProgressValue?.value||"").replace("%","").trim(),a=Number.parseFloat(r);if(!Number.isFinite(a)||a<=0){g(o("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©"));return}Ce.push({type:s,value:a,recordedAt:new Date().toISOString()}),t.paymentProgressValue&&(t.paymentProgressValue.value=""),Dt()}),t.paymentAddButton.dataset.listenerAttached="true"),t.paymentHistory&&t.paymentHistory.dataset.listenerAttached!=="true"&&(t.paymentHistory.addEventListener("click",e=>{const s=e.target.closest('[data-action="remove-payment"]');if(!s)return;const r=Number.parseInt(s.dataset.index||"-1",10);!Number.isInteger(r)||r<0||(Ce.splice(r,1),Dt())}),t.paymentHistory.dataset.listenerAttached="true")}function Lr(){t.addExpenseBtn&&t.addExpenseBtn.dataset.listenerAttached!=="true"&&(t.addExpenseBtn.addEventListener("click",Ys),t.addExpenseBtn.dataset.listenerAttached="true"),t.expenseAmount&&t.expenseAmount.dataset.normalizeAttached!=="true"&&(t.expenseAmount.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const r=s.selectionStart,a=b(s.value||"");if(s.value=a,r!=null){const n=Math.min(a.length,r);s.setSelectionRange(n,n)}}),t.expenseAmount.dataset.normalizeAttached="true")}function vt(e,s){!e||e.dataset.listenerAttached==="true"||(e.addEventListener("click",r=>{const a=r.target;a instanceof HTMLElement&&s(a)}),e.dataset.listenerAttached="true")}function Dr({onViewDetails:e}){!t.projectsTableBody||t.projectsTableBody.dataset.listenerAttached==="true"||(t.projectsTableBody.addEventListener("click",s=>{const r=s.target;if(r instanceof HTMLElement){if(r.matches('[data-action="view-details"]')){const a=r.dataset.id;e?.(a);return}if(r.matches('[data-action="delete-project"]')){if(!ps()){ds();return}const a=r.dataset.id;Ut(a)}}}),t.projectsTableBody.dataset.listenerAttached="true")}function Rr(){const{customers:e}=$e();u.customers=Array.isArray(e)?e:[],Be(),ce(),ge()}function qr(){const{technicians:e}=$e();u.technicians=Array.isArray(e)?e:[],Be(),ce(),ge()}function Fr(e){const{reservations:s}=$e();u.reservations=Array.isArray(s)?s:[],ce();const r=t.detailsModalEl&&t.detailsModalEl.classList.contains("show"),a=t.detailsBody?.dataset.projectId;r&&a&&u.projects.find(i=>String(i.id)===String(a))&&e?.(a)}function zs(){const e=t.technicianSelect?.value;if(!e){g(o("projects.toast.selectTechnician","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));return}if(u.selectedTechnicians.includes(e)){g(o("projects.toast.technicianAlreadyAdded","âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„"));return}u.selectedTechnicians.push(e),Be(),g(o("projects.toast.technicianAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"))}function Ws(){const e=t.equipmentSelect?.value;if(!e){g(o("projects.toast.selectEquipment","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©"));return}const s=Math.max(1,parseInt(t.equipmentQty?.value||"1",10)||1),r=u.selectedEquipment.find(a=>a.barcode===e);r?r.qty+=s:u.selectedEquipment.push({barcode:e,qty:s}),Be(),g(o("projects.toast.equipmentAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹"))}function Ys(){const e=(t.expenseLabel?.value||"").trim(),s=b(t.expenseAmount?.value||"0"),r=Number(s),a=b(t.servicesClientPrice?.value||"0"),n=Number.parseFloat(a)||0,i=(t.expenseNote?.value||"").trim();if(!e){g(o("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ"));return}if(!Number.isFinite(r)||r<0){g(o("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­"));return}u.expenses.push({id:Date.now(),label:e,amount:r,salePrice:n,note:i}),es(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=b(String(s))),t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.expenseNote&&(t.expenseNote.value=""),Be(),ke(),Ve()}function Be(){Kt(),Jt(),Qt(),Xt(),Ve()}function Kt(){t.technicianList&&Gt(t.technicianList,u.selectedTechnicians,e=>{const r=u.technicians.find(a=>String(a.id)===String(e))?.name||o("projects.fallback.technicianName","Ø¹Ø¶Ùˆ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…");return`
      <span class="chip">
        ${c(r)}
        <button type="button" class="chip__remove" data-action="remove-technician" data-id="${c(String(e))}" aria-label="${c(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function Jt(){t.equipmentList&&Gt(t.equipmentList,u.selectedEquipment,e=>{const s=u.equipment.find(n=>String(n.barcode||"")===String(e.barcode)),r=s?.desc||s?.description||s?.name||o("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©"),a=b(String(e.qty||1));return`
      <span class="chip">
        ${c(r)} (x${a})
        <button type="button" class="chip__remove" data-action="remove-equipment" data-id="${c(String(e.barcode))}" aria-label="${c(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function Qt(){if(!t.expenseList)return;const e=Array.isArray(u.expenses)?u.expenses:[];if(!e.length){const r=c(Ht(t.expenseList));t.expenseList.innerHTML=`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${c(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${c(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${c(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${c(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${c(o("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${r}</td></tr>
          </tbody>
        </table>
      </div>`;return}const s=e.map(r=>{const a=c(r.label||""),n=C(Number(r.amount)||0),i=C(Number(r.salePrice)||0),d=c(r.note||""),l=c(String(r.id)),p=c(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©"));return`
      <tr>
        <td>${a}</td>
        <td>${c(n)}</td>
        <td>${c(i)}</td>
        <td>${d||c(o("common.placeholder.empty","â€”"))}</td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${l}" aria-label="${p}">âœ–</button>
        </td>
      </tr>`}).join("");t.expenseList.innerHTML=`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
            <tr>
              <th>${c(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${c(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${c(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${c(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${c(o("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
        </thead>
        <tbody>${s}</tbody>
      </table>
    </div>`}function Gt(e,s,r){if(e){if(!s||s.length===0){const a=c(Ht(e));e.innerHTML=`<span class="text-muted">${a}</span>`;return}e.innerHTML=s.map(a=>r(a)).join("")}}function Xt(){if(!t.submitBtn)return;const e=!!u.editingProjectId,s=e?"projects.form.buttons.update":"projects.form.buttons.save",r=e?"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹";t.submitBtn.textContent=o(s,r)}function Ks(){return u.expenses.reduce((e,s)=>e+(Number(s.amount)||0),0)}function Rt(e){return b(String(e||"")).trim().toLowerCase()}function Js(){if(!Array.isArray(u.selectedEquipment)||u.selectedEquipment.length===0)return{items:[],missing:[]};const e=new Map((u.equipment||[]).map(a=>[Rt(a?.barcode),a])),s=[],r=[];return u.selectedEquipment.forEach(a=>{const n=Rt(a?.barcode);if(!n){s.push(a?.barcode||"");return}const i=e.get(n);if(!i||i.id==null){s.push(a?.barcode||n);return}const d=Number.parseInt(String(a?.qty??0),10);r.push({equipmentId:i.id,qty:Number.isInteger(d)&&d>0?d:1})}),{items:r,missing:s}}function Qs(e){return!e||!Array.isArray(e.equipment)?[]:e.equipment.map(s=>{const r=s?.equipmentId??s?.equipment_id??s?.id??null,a=Number.parseInt(String(s?.qty??s?.quantity??0),10);return r?{equipmentId:r,qty:Number.isInteger(a)&&a>0?a:1}:null}).filter(Boolean)}function Gs(){return u.selectedEquipment.reduce((e,s)=>{const r=u.equipment.find(n=>String(n.barcode||"")===String(s.barcode)),a=Number(r?.price||r?.daily_rate||r?.dailyRate||0);return e+a*(s.qty||1)},0)}async function Xs(e){if(e.preventDefault(),bt)return;const s=t.title?.value.trim(),r=t.type?.value||"",a=t.client?.value?.trim()||"",n=t.client?.dataset?.customerId||"",i=t.startDate?.value?.trim()||"",d=t.startTime?.value?.trim()||"";if(!s||!r||!i){g(o("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"));return}const l=Ls(a,n);if(!l){g(o("projects.toast.customerNotFound","âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„")),t.client?.focus();return}const p=String(l.id);t.client&&(t.client.dataset.customerId=p,t.client.value=l.customerName||l.name||t.client.value),Re(l);const j=t.endDate?.value?.trim()||"",m=t.endTime?.value?.trim()||"",h=st(i,d),S=j?st(j,m):"",E=new Date(h),k=S?new Date(S):null;if(k&&E>k){g(o("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"));return}t.expenseAmount&&(t.expenseAmount.value=b(t.expenseAmount.value||""));const I=Ks(),L=Gs(),W=b(t.servicesClientPrice?.value||"");let U=u.servicesClientPriceTotal||Number.parseFloat(W);(!Number.isFinite(U)||U<0)&&(U=0);const G=t.taxCheckbox?.checked===!0,R=t.discountType?.value==="amount"?"amount":"percent",Z=b(t.discountValue?.value||"0");let z=Number.parseFloat(Z);(!Number.isFinite(z)||z<0)&&(z=0);const xe=t.companyShare,Se=xe?.checked===!0;let he=Se?Number.parseFloat(b(String(xe.dataset.companyShare??xe.value??ye))):null;(!Number.isFinite(he)||he<=0)&&(he=Se?ye:null);const le=Wt({equipmentEstimate:L,expensesTotal:I,servicesClientPrice:U,discountValue:z,discountType:R,applyTax:G,companyShareEnabled:Se,companySharePercent:he}),Pe=t.paymentProgressType?.value==="amount"?"amount":"percent",pe=b(t.paymentProgressValue?.value||""),Ne=pe?Number.parseFloat(pe):null,ne=ze({totalAmount:le.totalWithTax,progressType:Pe,progressValue:Ne,history:Array.isArray(Ce)?[...Ce]:[]}),Ae=t.paymentStatus?.dataset?.userSelected==="true",Fe=(t.paymentStatus?.value||"unpaid").toLowerCase(),se=["paid","partial"].includes(Fe)?Fe:"unpaid",re=tt({manualStatus:Ae?se:null,paidAmount:ne.paidAmount,paidPercent:ne.paidPercent,totalAmount:le.totalWithTax}),de=Ae?se:re;!Ae&&t.paymentStatus&&(t.paymentStatus.value=de),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected;const{items:ue,missing:Le}=Js();if(Le.length){g(o("projects.toast.equipmentMissing","âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),"error");return}const be=!!u.editingProjectId,me=be?u.projects.find(F=>String(F.id)===String(u.editingProjectId)):null;if(be&&!me){g(o("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const Y=l.companyName||l.company||"",K=t.description?.value.trim()||"",ae=Vt({projectCode:me?.projectCode||(be?null:Bt()),title:s,type:r,clientId:p,clientCompany:Y,description:K,start:h,end:S||null,applyTax:G,paymentStatus:de,equipmentEstimate:L,expenses:u.expenses.map(F=>({id:F.id,label:F.label,amount:F.amount,salePrice:F.salePrice,note:F.note||void 0})),servicesClientPrice:U,discount:z,discountType:R,companyShareEnabled:Se&&G,companySharePercent:Se&&G?he:null,companyShareAmount:le.companyShareAmount,taxAmount:le.taxAmount,totalWithTax:le.totalWithTax,confirmed:me?.confirmed??!1,technicians:u.selectedTechnicians,equipment:ue,paidAmount:ne.paidAmount,paidPercentage:ne.paidPercent,paymentProgressType:ne.paymentProgressType,paymentProgressValue:ne.paymentProgressValue,payments:Array.isArray(Ce)?Ce:[]});bt=!0;try{let F=me?.projectId??me?.id??null;if(be){const y=await Tt(F??u.editingProjectId,ae);F=y?.projectId??y?.id??F,await xt(F,de),g(o("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"))}else{const y=await ms(ae);F=y?.projectId??y?.id??null,await xt(F,de),g(o("projects.toast.saved","âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"));try{St({projectsTab:"projects-section",projectsSubTab:"projects-list-tab"}).catch(()=>{});const v=document.querySelector('.tab-button[data-tab-target="projects-section"]');v&&typeof v.click=="function"&&v.click();const x=document.querySelector('.sub-tab-button[data-project-subtab-target="projects-list-tab"]');x&&typeof x.click=="function"&&setTimeout(()=>x.click(),0)}catch{}}await sr(F)||Zt(),u.editingProjectId=null,t.form.reset(),Yt(),Ot(),Je(),t.client&&(t.client.dataset.customerId=""),t.type&&(t.type.value="");try{await Pt()}catch{}u.projects=Ee(),u.reservations=M(),ce(),ke(),document.dispatchEvent(new CustomEvent("projects:changed"))}catch(F){console.error("âŒ [projects] handleSubmitProject failed",F);const f=at(F)?F.message:o("projects.toast.saveFailed","ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(f,"error")}finally{bt=!1}}function st(e,s){if(!e)return"";const r=s&&/\d{1,2}:\d{2}/.test(s)?s:"00:00",[a="00",n="00"]=r.split(":"),i=a.padStart(2,"0"),d=n.padStart(2,"0");return`${e}T${i}:${d}`}function it(){if(typeof window>"u"||!window.sessionStorage)return null;const e=window.sessionStorage.getItem(nt);if(!e)return null;try{const s=JSON.parse(e);return s&&typeof s=="object"?s:null}catch(s){return console.warn("âš ï¸ [projects] Failed to parse project form draft",s),null}}function kt(e){if(!(typeof window>"u"||!window.sessionStorage))try{window.sessionStorage.setItem(nt,JSON.stringify(e))}catch(s){console.warn("âš ï¸ [projects] Unable to persist project form draft",s)}}function Zt(){typeof window>"u"||!window.sessionStorage||(window.sessionStorage.removeItem(nt),Qe())}function Zs(){const e=it()||{};return{...e,type:t.type?.value||"",title:t.title?.value||"",client:t.client?.value||"",customerId:t.client?.dataset.customerId||"",clientCompany:t.clientCompany?.value||"",paymentStatus:t.paymentStatus?.value||"unpaid",taxChecked:t.taxCheckbox?.checked===!0,discountType:t.discountType?.value||"percent",discountValue:t.discountValue?.value||"",companyShareEnabled:t.companyShare?.checked===!0,companySharePercent:t.companyShare?.dataset.companyShare||t.companyShare?.value||String(ye),paymentProgressType:t.paymentProgressType?.value||"percent",paymentProgressValue:t.paymentProgressValue?.value||"",startDate:t.startDate?.value||"",startTime:t.startTime?.value||"",endDate:t.endDate?.value||"",endTime:t.endTime?.value||"",description:t.description?.value||"",expenses:Array.isArray(u.expenses)?u.expenses.map(s=>({...s})):[],servicesClientPriceTotal:Number.isFinite(Number(u.servicesClientPriceTotal))?u.servicesClientPriceTotal:0,technicians:Array.isArray(u.selectedTechnicians)?[...u.selectedTechnicians]:[],equipment:Array.isArray(u.selectedEquipment)?u.selectedEquipment.map(s=>({...s})):[],linkedReservationIds:Array.isArray(e.linkedReservationIds)?[...e.linkedReservationIds]:[],savedAt:Date.now()}}function _r(){const e=it();return e?(t.type&&(t.type.value=e.type||""),t.title&&(t.title.value=e.title||""),t.client&&(t.client.value=e.client||"",t.client.dataset.customerId=e.customerId||""),t.clientCompany&&(t.clientCompany.value=e.clientCompany||""),t.paymentStatus&&e.paymentStatus&&(t.paymentStatus.value=e.paymentStatus),t.taxCheckbox&&(t.taxCheckbox.checked=e.taxChecked===!0),t.discountType&&e.discountType&&(t.discountType.value=e.discountType),t.discountValue&&(t.discountValue.value=e.discountValue||""),t.companyShare&&(e.companySharePercent?t.companyShare.dataset.companyShare=String(e.companySharePercent):t.companyShare.dataset.companyShare=String(ye),t.companyShare.checked=e.companyShareEnabled===!0),t.paymentProgressType&&e.paymentProgressType&&(t.paymentProgressType.value=e.paymentProgressType),t.paymentProgressValue&&(t.paymentProgressValue.value=e.paymentProgressValue||""),u.servicesClientPriceTotal=Number.isFinite(Number(e.servicesClientPriceTotal))?Number(e.servicesClientPriceTotal):0,t.startDate&&(t.startDate.value=e.startDate||""),t.startTime&&(t.startTime.value=e.startTime||""),t.endDate&&(t.endDate.value=e.endDate||""),t.endTime&&(t.endTime.value=e.endTime||""),t.description&&(t.description.value=e.description||""),u.expenses=Array.isArray(e.expenses)?e.expenses.map(s=>({...s})):[],u.selectedTechnicians=Array.isArray(e.technicians)?[...e.technicians]:[],u.selectedEquipment=Array.isArray(e.equipment)?e.equipment.map(s=>({...s})):[],Ke("tax"),Qe(),Ve(),!0):(Qe(),!1)}function Mr(){!t.linkedReservationBtn||t.linkedReservationBtn.dataset.listenerAttached==="true"||(t.linkedReservationBtn.addEventListener("click",er),t.linkedReservationBtn.dataset.listenerAttached="true")}function er(e){e.preventDefault();const s=e.currentTarget;if(s?.classList?.contains("btn-disabled")||s?.getAttribute("aria-disabled")==="true"){g(o("projects.form.linkedReservation.buttonDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"));return}const a=Zs();if(!(a.customerId&&a.customerId!==""||a.client&&a.client.trim())){g(o("projects.form.linkedReservation.missingClient","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}const i=a.startDate&&a.startTime,d=a.endDate&&a.endTime;if(!i||!d){g(o("projects.form.linkedReservation.missingSchedule","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}kt(a);const l=tr(a);let p="";try{p=encodeURIComponent(JSON.stringify(l))}catch(m){console.warn("âš ï¸ [projects] Unable to encode reservation context",m)}St({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(m=>{console.warn("âš ï¸ [projects] Failed to persist dashboard preference before redirect",m)});const j=p?`?reservationProjectContext=${p}`:"";window.location.href=`dashboard.html${j}#reservations`}function tr(e){const s=st(e.startDate,e.startTime)||null,r=st(e.endDate,e.endTime)||null;return{fromProjectForm:!0,draftStorageKey:nt,returnUrl:Bs,start:s,end:r,customerId:e.customerId||null,customerName:e.client||"",clientCompany:e.clientCompany||"",projectTitle:e.title||"",projectType:e.type||"",description:e.description||""}}async function sr(e){if(!e)return;const s=it(),r=Array.isArray(s?.linkedReservationIds)?s.linkedReservationIds:[];if(!r.length)return;const a=[];let n=!1;for(const d of r){const l=d!=null?String(d):"";if(l)try{await qe(l,{project_id:e}),n=!0}catch(p){console.error("âŒ [projects] Failed to link reservation to project",l,p),a.push(l)}}if(n)try{await wt(),u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))}catch(d){console.warn("âš ï¸ [projects] Failed to refresh reservations after linking",d)}const i={linkedReservationIds:a,savedAt:Date.now()};return kt(i),a.length&&g(o("projects.toast.linkReservationFailed","âš ï¸ ØªØ¹Ø°Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§"),"error"),Qe(),a.length}function rr(){const e=new Map,s=a=>{if(!a)return;[a.id,a.reservationId,a.reservation_id,a.reservation_code].map(i=>i!=null?String(i):"").filter(Boolean).forEach(i=>{e.has(i)||e.set(i,a)})};Array.isArray(u.reservations)&&u.reservations.forEach(s);const r=$e();return Array.isArray(r?.reservations)&&r.reservations.forEach(s),e}function ar(e){if(!e||typeof e!="object")return"";const s=[e.name,e.full_name,e.fullName,e.technician_name,e.technicianName,e.label,e.displayName];for(const r of s)if(typeof r=="string"&&r.trim())return r.trim();return""}function or(e){if(!e)return[];const s=new Set;(Array.isArray(e.techniciansDetails)?e.techniciansDetails:[]).forEach(n=>{const i=ar(n);i&&s.add(i)});const a=Array.isArray(e.technicians)?e.technicians:[];if(a.length){const n=Array.isArray(u.technicians)?u.technicians:[];a.forEach(i=>{const d=n.find(p=>String(p?.id)===String(i)),l=d?.name||d?.full_name||"";l&&s.add(String(l).trim())})}return Array.from(s)}function Qe(){const e=document.getElementById("project-linked-reservation-summary");if(!e)return;const s=it(),r=t.linkedReservationBtn;let a=Array.isArray(s?.linkedReservationIds)?Array.from(new Set(s.linkedReservationIds.map(l=>String(l)).filter(Boolean))):[];const n=rr(),i=a.filter(l=>n.has(l));if(i.length!==a.length){a=i;const l={...s||{},linkedReservationIds:a,savedAt:Date.now()};kt(l)}if(!a.length){e.dataset.state="empty",e.innerHTML=`<p class="project-linked-reservation__summary-empty">${c(o("projects.form.linkedReservation.empty","Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯."))}</p>`,r&&(r.disabled=!1,r.classList.remove("btn-disabled"),r.removeAttribute("aria-disabled"),r.title="");return}const d=a.map(l=>{const p=n.get(l);if(!p)return`
        <li class="project-linked-reservation__summary-item">
          <div class="project-linked-reservation__summary-item-title">#${c(b(l))}</div>
          <div class="project-linked-reservation__summary-item-meta">
            <span>${c(o("projects.form.linkedReservation.pendingItem","ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ ÙˆØ³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."))}</span>
          </div>
        </li>`;const j=p.reservation_code||p.reservationId||p.id||l,m=`#${b(String(j))}`,h=Array.isArray(p.items)?p.items:[],S=h.reduce((R,Z)=>R+(Number(Z?.qty)||0),0)||h.length||0,E=or(p),I=(Array.isArray(p.technicians)?p.technicians:[]).length||E.length||0,L=As(p),W=[],U=o("projects.form.linkedReservation.meta.equipment","Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}").replace("{count}",b(String(S)));W.push(U);const G=o("projects.form.linkedReservation.meta.crew","Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}").replace("{count}",b(String(I)));if(W.push(G),E.length){const R=typeof It=="function"&&It()==="en"?", ":"ØŒ ",Z=o("projects.form.linkedReservation.meta.crewNames","Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}").replace("{names}",E.join(R));W.push(Z)}if(Number.isFinite(L)){const R=o("projects.form.linkedReservation.meta.total","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}").replace("{amount}",C(L));W.push(R)}return`
      <li class="project-linked-reservation__summary-item">
        <div class="project-linked-reservation__summary-item-title">${c(m)}</div>
        <div class="project-linked-reservation__summary-item-meta">
          ${W.map(R=>`<span>${c(R)}</span>`).join("")}
        </div>
      </li>`}).join("");e.dataset.state="has-linked",e.innerHTML=`<ul class="project-linked-reservation__summary-list">${d}</ul>`,r&&(r.disabled=!1,r.classList.add("btn-disabled"),r.setAttribute("aria-disabled","true"),r.setAttribute("data-allow-click","true"),r.title=o("projects.form.linkedReservation.buttonDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))}function es(){const e=Array.isArray(u.expenses)?u.expenses.reduce((s,r)=>s+(Number(r?.salePrice)||0),0):0;u.servicesClientPriceTotal=Math.round(e*100)/100}function Ve(){t.servicesClientTotalIndicator||document.getElementById("project-services-client-total-indicator");const e=t.servicesClientTotalValue||document.getElementById("project-services-client-total-value");if(!e)return;const s=Number(u.servicesClientPriceTotal)||0;e.textContent=C(s)}function Ue(e){const s=u.projects.find(A=>String(A.id)===String(e));if(!s||!t.detailsBody)return;t.detailsBody.dataset.mode="view",t.detailsBody.dataset.projectId=String(s.id);const a=(u.customers.length?u.customers:$e().customers||[]).find(A=>String(A.id)===String(s.clientId)),n=rs(s.type),d=s.description?.trim()||o("projects.fallback.noDescription","Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ"),l=a?.customerName||o("projects.fallback.unknownClient","Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"),p=a?.phone??a?.customerPhone??s.clientPhone??s.customerPhone??"",j=p?b(String(p).trim()):o("projects.details.client.noPhone","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­"),m=a?.email??s.clientEmail??s.customerEmail??"",h=m?String(m).trim():o("projects.details.client.noEmail","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­"),S=(s.clientCompany||a?.companyName||"").trim(),E=s.projectCode||`PRJ-${b(String(s.id))}`,k=b(E),I=Ct(s.id),L=I.reduce((A,N)=>A+as(N),0),W=Number(L.toFixed(2)),U=I.length,{subtotal:G,applyTax:R,expensesTotal:Z}=Ts(s),z=Number(s?.servicesClientPrice??s?.services_client_price??0),xe=G,Se=R?Number(((xe+W)*We).toFixed(2)):0,he=Number((xe+W+Se).toFixed(2)),le=ws(s),Pe=s?.cancelled===!0||s?.status==="cancelled"||s?.status==="canceled"?"cancelled":le,pe=o(`projects.status.${Pe}`,Cs[Pe]||Pe),ne=(()=>{try{const A=s.start?new Date(s.start):null,N=s.end?new Date(s.end):A?new Date(A.getTime()+3600*1e3):null;return!A||!N||Number.isNaN(A.getTime())||Number.isNaN(N.getTime())?!1:u.projects.some(q=>{if(!q||String(q.id)===String(s.id))return!1;const J=q.start?new Date(q.start):null,H=q.end?new Date(q.end):J?new Date(J.getTime()+3600*1e3):null;if(!J||!H||Number.isNaN(J.getTime())||Number.isNaN(H.getTime()))return!1;const V=Math.max(A.getTime(),J.getTime()),oe=Math.min(N.getTime(),H.getTime());return V<oe})}catch{return!1}})()&&(Pe==="upcoming"||Pe==="ongoing")?"conflict":Pe,Fe={upcoming:o("projects.status.upcoming","Ù‚Ø§Ø¯Ù…"),ongoing:o("projects.status.ongoing","Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"),completed:o("projects.status.completed","Ù…ÙƒØªÙ…Ù„"),conflict:o("projects.status.conflict","ØªØ¹Ø§Ø±Ø¶")}[ne]||pe,re={upcoming:"timeline-status-badge timeline-status-badge--upcoming",ongoing:"timeline-status-badge timeline-status-badge--ongoing",completed:"timeline-status-badge timeline-status-badge--completed",conflict:"timeline-status-badge timeline-status-badge--conflict",cancelled:"timeline-status-badge timeline-status-badge--cancelled"}[ne]||"timeline-status-badge timeline-status-badge--upcoming",de=typeof s.paymentStatus=="string"?s.paymentStatus.toLowerCase():"",ue=jr(s),Le=ue.length>0,be=Le?0:Number(s.paidAmount)||0,me=Le?0:Number(s.paidPercent)||0;let Y=he,K,ae,F,f,y,v,x,w,P,$,D="";const B=o("projects.focus.confirmed","âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯"),X=s.confirmed===!0||s.confirmed==="true"?`<span class="reservation-chip status-confirmed">${c(B)}</span>`:"";let T=[];if(U>0){const A=I.reduce((Ze,je)=>{const ns=Array.isArray(je.items)?je.items:[],Nt=Array.isArray(je.crewAssignments)?je.crewAssignments:[],Ie=Nt.length?Nt:Array.isArray(je.technicians)?je.technicians:[],is=Array.isArray(Ie)&&Ie.length&&typeof Ie[0]=="object",cs=Array.isArray(Ie)&&Ie.length&&typeof Ie[0]!="object",ht=hs({items:ns,technicianIds:cs?Ie:[],crewAssignments:is?Ie:[],discount:je.discount??0,discountType:je.discountType||"percent",applyTax:!1,start:je.start,end:je.end,companySharePercent:null,groupingSource:je});return Ze.equipment+=Number(ht.equipmentTotal||0),Ze.crew+=Number(ht.crewTotal||0),Ze.crewCost+=Number(ht.crewCostTotal||0),Ze},{equipment:0,crew:0,crewCost:0}),N=Number(Z||0),q=Number((A.equipment+A.crew+z).toFixed(2)),J=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let V=(s?.discountType==="amount"?"amount":"percent")==="amount"?J:q*(J/100);(!Number.isFinite(V)||V<0)&&(V=0),V>q&&(V=q);const oe=R===!0,ve=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",O=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,ie=ve&&oe&&O>0?O:0,_=Math.max(0,q-V),te=Number((_*(ie/100)).toFixed(2)),Q=oe?Number(((_+te)*We).toFixed(2)):0,we=Number((_+te+Q).toFixed(2)),os=Number((we-te-Q-N-A.crewCost).toFixed(2));A.equipment>0&&T.push({icon:"ğŸ›ï¸",label:o("projects.details.summary.equipmentTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),value:C(A.equipment)}),A.crew>0&&T.push({icon:"ğŸ˜",label:o("projects.details.summary.crewTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚"),value:C(A.crew)}),A.crewCost>0&&T.push({icon:"ğŸ§¾",label:o("projects.details.summary.crewCostTotal","ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚"),value:C(A.crewCost)}),z>0&&T.push({icon:"ğŸ’¼",label:o("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:C(z)}),N>0&&T.push({icon:"ğŸ§¾",label:o("projects.details.summary.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:C(N)}),V>0&&T.push({icon:"ğŸ·ï¸",label:o("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${C(V)}`}),T.push({icon:"ğŸ§®",label:o("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:C(_)}),te>0&&T.push({icon:"ğŸ¦",label:o("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${C(te)}`}),Q>0&&T.push({icon:"ğŸ’¸",label:o("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${C(Q)}`}),T.push({icon:"ğŸ’µ",label:o("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:C(os)}),T.push({icon:"ğŸ’°",label:o("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:C(we)}),Y=we}else{const A=Number(Z||0),N=Math.max(0,Number(z)||0),q=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let H=(s?.discountType==="amount"?"amount":"percent")==="amount"?q:N*(q/100);(!Number.isFinite(H)||H<0)&&(H=0),H>N&&(H=N);const V=Math.max(0,N-H),oe=R===!0,ve=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",O=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,ie=ve&&oe&&O>0?O:0,_=Number((V*(ie/100)).toFixed(2)),te=oe?Number(((V+_)*We).toFixed(2)):0,Q=Number((V+_+te).toFixed(2)),we=Number((Q-_-te-A).toFixed(2));T=[],T.push({icon:"ğŸ’¼",label:o("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:C(N)}),H>0&&T.push({icon:"ğŸ·ï¸",label:o("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${C(H)}`}),T.push({icon:"ğŸ§®",label:o("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:C(V)}),_>0&&T.push({icon:"ğŸ¦",label:o("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${C(_)}`}),te>0&&T.push({icon:"ğŸ’¸",label:o("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${C(te)}`}),T.push({icon:"ğŸ’µ",label:o("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:C(we)}),T.push({icon:"ğŸ’°",label:o("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:C(Q)}),Y=Q}K=ze({totalAmount:Y,paidAmount:be,paidPercent:me,history:ue}),ae=tt({manualStatus:Le?"unpaid":de||"unpaid",paidAmount:K.paidAmount,paidPercent:K.paidPercent,totalAmount:Y}),F=o(`projects.paymentStatus.${ae}`,ae==="paid"?"Paid":ae==="partial"?"Partial":"Unpaid"),f=ae==="paid"?"status-paid":ae==="partial"?"status-partial":"status-unpaid",y=Number.isFinite(Number(K.paidAmount))?Number(K.paidAmount):0,v=Number.isFinite(Number(K.paidPercent))?Number(K.paidPercent):0,x=Math.max(0,Number((Y-y).toFixed(2))),w=C(y),P=`${b(v.toFixed(2))}%`,$=C(x);try{D=Ft(ue,{total:Y})}catch{D=Ft(ue,{total:he})}const ct=T.map(({icon:A,label:N,value:q})=>`
    <div class="summary-details-row">
      <span class="summary-details-label">${A} ${c(N)}</span>
      <span class="summary-details-value">${c(q)}</span>
    </div>
  `).join(""),_e=o("projects.details.labels.code","Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),De=`
    <div class="project-details-code-badge" title="${c(_e)}">
      <span class="project-details-code-badge__label">
        <span class="project-details-code-badge__icon" aria-hidden="true">ğŸ—‚ï¸</span>
        ${c(_e)}
      </span>
      <span class="project-details-code-badge__value">${c(k)}</span>
    </div>
  `,lt=bs(s.start,s.end),Ge=_t("start",s.start),He=_t("end",s.end),pt=He?{...He,meta:(He.meta?`${He.meta} â€” `:"")+`${o("projects.details.labels.days","Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…")}: ${b(String(lt))}`}:null,dt=[{icon:"ğŸ‘¤",label:o("projects.details.client","Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:l},{icon:"ğŸ“",label:o("projects.details.labels.clientPhone","Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:j},{icon:"âœ‰ï¸",label:o("projects.details.labels.clientEmail","Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"),value:h},S?{icon:"ğŸ¢",label:o("projects.details.company","Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:S}:null,{icon:"ğŸ·ï¸",label:o("projects.details.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),value:`<span class="project-type-chip project-type-chip--${s.type||"default"}">${c(n)}</span>`},Ge,pt].filter(Boolean),ut=o("projects.details.overview.heading","Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),mt=`
    <div class="project-details-outline">
      <h6 class="project-details-outline__title">${c(ut)}</h6>
      <ul class="project-details-outline__list">
        ${dt.map(({icon:A,label:N,value:q,meta:J})=>{const H=String(q??""),oe=H.trim().startsWith("<")?H:c(H),ve=String(J??""),O=ve?c(ve):"";return`
          <li>
            <span class="project-details-outline__label">${c(A)} ${c(N)}</span>
            <span class="project-details-outline__value-group">
              <span class="project-details-outline__value">${oe}</span>
              ${J?`<span class="project-details-outline__meta">${O}</span>`:""}
            </span>
          </li>
          `}).join("")}
      </ul>
    </div>
  `,ft=U>0?o("projects.details.chips.linkedReservation","Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"):o("projects.details.chips.notLinkedReservation","ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"),Oe=U>0?"reservation-chip status-confirmed":"reservation-chip status-info",Xe=[`<span class="${re}">${c(Fe)}</span>`,`<span class="${Oe}">${c(ft)}</span>`,`<span class="reservation-chip ${f}">${c(F)}</span>`,X].filter(Boolean).join("");o("projects.details.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),o("projects.details.reservationsTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª");const jt=o("projects.details.expenses","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})").replace("{amount}",C(Z)),ee=nr(Array.isArray(s.expenses)?s.expenses:[]),yt={...s,paymentStatus:ae};t.detailsBody.innerHTML=`
    <section class="project-details-primary">
      <header class="project-details-header">
        <div class="project-details-header__info">
          <div class="project-details-chips">${Xe}</div>
        </div>
        <div class="project-details-header__code">
          ${De}
          <h4 class="project-details-title">${c(s.title)}</h4>
        </div>
      </header>
      <div class="project-summary">
        <div class="project-summary-left">
          ${mt}
        </div>
        <div class="project-summary-right">
          <div class="project-summary-card project-details-outline">
            <h6>${c(o("projects.details.summary.title","Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ"))}</h6>
            ${ct}
          </div>
        </div>
      </div>
    </section>
    <section class="project-details-section">
      <h5>${c(o("projects.details.description","ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</h5>
      <p class="project-details-description">${c(d)}</p>
    </section>
    <section class="project-details-section">
      <h5>${c(jt)}</h5>
      ${ee}
    </section>
    
    <section class="project-details-section">
      <h5>${c(o("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h5>
      <div class="project-details-grid">
        <div class="project-details-grid-item">
          <span>${c(o("projects.details.paymentOverview.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"))}</span>
          <strong>${c(C(Y))}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${c(o("projects.details.paymentOverview.paid","Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${c(w)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${c(o("projects.details.paymentOverview.percent","Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${c(P)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${c(o("projects.details.paymentOverview.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"))}</span>
          <strong>${c($)}</strong>
        </div>
      </div>
      <div class="reservation-payment-history-modal mt-3">
        ${D}
      </div>
    </section>
    ${Es(yt)}
    <div class="project-details-footer">
      <button type="button" class="modal-action-btn modal-action-btn--primary" data-action="create-reservation">
        ${c(o("projects.details.reservations.create","â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-action="edit-project">
        ${c(o("projects.details.actions.edit","âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--danger" data-action="delete-project">
        ${c(o("projects.details.actions.delete","ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" id="project-details-export-btn">
        ${c(o("projects.details.actions.exportPdf","Ø¹Ø±Ø¶ Ø³Ø¹Ø±"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-bs-dismiss="modal">
        ${c(o("actions.close","Ø¥ØºÙ„Ø§Ù‚"))}
      </button>
    </div>
  `,cr(s);const Te=t.detailsBody.querySelector("#project-details-export-btn");Te&&Te.addEventListener("click",async A=>{if(A.preventDefault(),Te.blur(),!Te.disabled){Te.disabled=!0;try{await Ss({project:s})}catch(N){console.error("âŒ [projects/details] export project PDF failed",N),g(o("projects.details.exportFailed","âš ï¸ ØªØ¹Ø°Ø± ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¥Ù„Ù‰ PDF"),"error")}finally{Te.disabled=!1}}}),t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl).show()}function nr(e=[]){if(!(Array.isArray(e)&&e.length>0)){const a=c(o("projects.expenses.table.empty","Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§."));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${c(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${c(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${c(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${c(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4" class="text-center text-muted">${a}</td></tr>
          </tbody>
        </table>
      </div>
    `}const r=e.map(a=>{const n=c(a?.label||""),i=C(Number(a?.amount)||0),d=C(Number(a?.sale_price??a?.salePrice??0)),l=a?.note!=null?String(a.note):a?.notes!=null?String(a.notes):"";return`
      <tr>
        <td>${n}</td>
        <td>${c(i)}</td>
        <td>${c(d)}</td>
        <td>${c(l||o("common.placeholder.empty","â€”"))}</td>
      </tr>`}).join("");return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${c(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
            <th>${c(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
            <th>${c(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
            <th>${c(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>
  `}function Br({onOpenProject:e}){!t.focusCards||t.focusCards.dataset.listenerAttached==="true"||(t.focusCards.addEventListener("click",async s=>{const r=s.target.closest("[data-action]");if(r){const{action:n,id:i}=r.dataset;if(n==="confirm-project"){s.preventDefault(),s.stopPropagation(),dr(i);return}if(n==="close-project"){s.preventDefault(),s.stopPropagation();try{const d=document.getElementById("closeProjectModal"),l=document.getElementById("close-project-notes"),p=document.getElementById("close-project-submit");if(l&&(l.value=""),p&&p.__tmpCloseProjectListener&&(p.removeEventListener("click",p.__tmpCloseProjectListener),p.__tmpCloseProjectListener=null),p){const j=async()=>{const m=l?.value||"";try{const h=await At(i,m);await Et(h?.projectId??h?.id??i),u.projects=Ee(),u.reservations=M(),ce(),ge(),ke(),g(o("projects.toast.closed","âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(h){console.error("âŒ [projects] close-project (card) failed",h),g(o("projects.toast.closeFailed","ØªØ¹Ø°Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),"error")}finally{try{((window.bootstrap?.Modal||bootstrap?.Modal)?.getInstance?.(d)||(window.bootstrap?.Modal||bootstrap?.Modal)?.getOrCreateInstance?.(d))?.hide?.()}catch{}}};p.__tmpCloseProjectListener=j,p.addEventListener("click",j,{once:!0})}d&&(window.bootstrap?.Modal||typeof bootstrap<"u"&&bootstrap?.Modal)&&(window.bootstrap?.Modal||bootstrap.Modal).getOrCreateInstance(d).show()}catch(d){console.warn("âš ï¸ [projects] unable to open close modal from card",d)}return}n==="view"?e?.(i):n==="highlight"&&ir(i);return}const a=s.target.closest(".project-focus-card");a?.dataset.projectId&&e?.(a.dataset.projectId)}),t.focusCards.dataset.listenerAttached="true")}function ir(e){if(!t.projectsTableBody)return;const s=`tr[data-project-id="${CSS.escape(String(e))}"]`,r=t.projectsTableBody.querySelector(s);if(!r){g(o("projects.focus.toastNotFound","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"));return}r.classList.add("project-row-highlight"),r.scrollIntoView({behavior:"smooth",block:"center"}),window.setTimeout(()=>{r.classList.remove("project-row-highlight")},2200)}function cr(e){if(!t.detailsBody)return;const s=t.detailsBody.querySelector('[data-action="create-reservation"]'),r=t.detailsBody.querySelector('[data-action="edit-project"]'),a=t.detailsBody.querySelector('[data-action="delete-project"]'),n=t.detailsBody.querySelector(".project-reservations-list");if(s&&e)try{(Ct(e.id)||[]).some(l=>{const p=String(l?.status||l?.reservationStatus||"").toLowerCase();return p!=="cancelled"&&p!=="canceled"})?(s.classList?.add("disabled"),s.setAttribute?.("aria-disabled","true"),s.title=o("projects.details.reservations.createDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"),s.addEventListener("click",l=>{l.preventDefault(),g(o("projects.details.reservations.createDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))})):(s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",l=>{l.preventDefault(),qt(e)}))}catch{s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",d=>{d.preventDefault(),qt(e)})}if(r&&e&&r.addEventListener("click",i=>{i.preventDefault(),lr(e)}),a&&e&&a.addEventListener("click",async i=>{i.preventDefault();const d=i.currentTarget;d.disabled=!0;try{await Ut(e.id),!u.projects.some(p=>String(p.id)===String(e.id))&&t.detailsModalEl&&window.bootstrap?.Modal.getInstance(t.detailsModalEl)?.hide()}finally{u.projects.some(p=>String(p.id)===String(e.id))&&(d.disabled=!1)}}),n){const i=async d=>{if(!Number.isInteger(d)||d<0)return!1;const l=gs("showReservationDetails");if(typeof l=="function")return l(d),!0;try{const p=await xs("showReservationDetails");if(typeof p=="function")return p(d),!0}catch(p){console.warn("âš ï¸ [projects/projectDetails] Unable to resolve reservation UI handler",p)}return!1};n.addEventListener("click",async d=>{const l=d.target.closest('[data-action="view-reservation"]');if(!l)return;const p=l.dataset.index||l.dataset.reservationIndex,j=Number.parseInt(p||"-1",10);if(!Number.isInteger(j)||j<0)return;await i(j)||(window.location.href="dashboard.html#reservations")}),n.addEventListener("keydown",d=>{if(!["Enter"," "].includes(d.key))return;const l=d.target.closest('[data-action="view-reservation"]');l&&(d.preventDefault(),l.click())})}}function lr(e){if(!e||!t.detailsBody)return;const s=u.projects.find(m=>String(m.id)===String(e.id));if(!s)return;const r=u.customers.find(m=>String(m.id)===String(s.clientId));r?.customerName||r?.name||s.clientName||s.customerName,s.clientCompany||r?.companyName||r?.company;const a=Array.isArray(s.expenses)?s.expenses.map((m,h)=>({id:m?.id||`expense-${s.id}-${h}-${Date.now()}`,label:m?.label||"",amount:Number(m?.amount)||0,salePrice:Number.isFinite(Number(m?.sale_price??m?.salePrice))?Number(m?.sale_price??m?.salePrice):0,note:m?.note!=null?String(m.note):m?.notes!=null?String(m.notes):""})):[];let n=Array.isArray(s.paymentHistory)?s.paymentHistory.map((m,h)=>({type:m?.type==="percent"?"percent":"amount",amount:Number.isFinite(Number(m?.amount))?Number(m.amount):null,percentage:Number.isFinite(Number(m?.percentage))?Number(m.percentage):null,value:Number.isFinite(Number(m?.value))?Number(m.value):null,note:m?.note??null,recordedAt:m?.recordedAt??m?.recorded_at??new Date().toISOString(),key:`payment-${s.id}-${h}`})):[],i=n.reduce((m,h)=>m+(Number(h?.amount)||0),0),d=n.reduce((m,h)=>m+(Number(h?.percentage)||0),0),l=Number.isFinite(Number(s.paidAmount))?Number(s.paidAmount):0,p=Number.isFinite(Number(s.paidPercent))?Number(s.paidPercent):0;if(!n.length&&(l>0||p>0)){const m=s.updatedAt??s.createdAt??new Date().toISOString();p>0?n=[{type:"percent",amount:Number.isFinite(l)&&l>0?l:null,percentage:p,value:p,note:null,recordedAt:m,key:`legacy-payment-${s.id}-percent`}]:l>0&&(n=[{type:"amount",amount:l,percentage:null,value:l,note:null,recordedAt:m,key:`legacy-payment-${s.id}-amount`}]),i=n.reduce((h,S)=>h+(Number(S?.amount)||0),0),d=n.reduce((h,S)=>h+(Number(S?.percentage)||0),0),l=0,p=0}i>0&&Math.abs(l-i)<.01&&(l=0),d>0&&Math.abs(p-d)<.01&&(p=0);const j={expenses:a,payments:n,basePaidAmount:l,basePaidPercent:p};t.detailsBody.dataset.mode="edit",t.detailsBody.innerHTML=ur(s,j),pr(s,j)}function pr(e,s={expenses:[]}){const r=t.detailsBody?.querySelector("#project-details-edit-form");if(!r)return;const a=r.querySelector('[data-action="cancel-edit"]');a&&a.addEventListener("click",f=>{f.preventDefault(),Ue(e.id)});const n=r.querySelector("#project-edit-expense-label"),i=r.querySelector("#project-edit-expense-amount"),d=r.querySelector("#project-edit-expense-sale"),l=r.querySelector("#project-edit-expense-note"),p=r.querySelector('[data-action="add-expense"]'),j=r.querySelector("#project-edit-expense-list"),m=r.querySelector('[name="project-start-date"]'),h=r.querySelector('[name="project-start-time"]'),S=r.querySelector('[name="project-end-date"]'),E=r.querySelector('[name="project-end-time"]'),k=r.querySelector('[name="project-payment-status"]'),I=r.querySelector("#project-edit-tax"),L=r.querySelector("#project-edit-company-share"),W=r.querySelector("#project-edit-discount"),U=r.querySelector("#project-edit-discount-type"),G=r.querySelector("#project-edit-payment-progress-type"),R=r.querySelector("#project-edit-payment-progress-value"),Z=r.querySelector("#project-edit-payment-add"),z=r.querySelector("#project-edit-payment-history"),xe=r.querySelector("#project-edit-payment-summary"),Se=o("reservations.create.summary.currency","SR"),he=r.querySelector("#project-cancelled");let le=!1;(()=>{const f=(typeof window<"u"?window.flatpickr:null)||(typeof globalThis<"u"?globalThis.flatpickr:null);f&&(m&&f(m,{dateFormat:"Y-m-d",allowInput:!0}),S&&f(S,{dateFormat:"Y-m-d",allowInput:!0}),h&&f(h,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}),E&&f(E,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}))})();const pe=f=>{if(!f||f.dataset.normalizedDigits==="true")return;const y=()=>{const v=f.value||"",x=b(v);if(x!==v){const w=f.selectionStart,P=f.selectionEnd;f.value=x;try{if(typeof w=="number"&&typeof P=="number"){const $=x.length-v.length;f.setSelectionRange(Math.max(0,w+$),Math.max(0,P+$))}}catch{}}};f.addEventListener("input",y),f.addEventListener("blur",y);try{f.setAttribute("inputmode","numeric")}catch{}f.dataset.normalizedDigits="true"};pe(m),pe(h),pe(S),pe(E),h&&h._flatpickr?.altInput&&pe(h._flatpickr.altInput),E&&E._flatpickr?.altInput&&pe(E._flatpickr.altInput);const Ne=()=>(Array.isArray(s.payments)||(s.payments=[]),s.payments),ne=()=>{const f=Number(e.equipmentEstimate)||0,y=Array.isArray(s.expenses)?s.expenses.reduce((T,fe)=>T+(Number(fe.amount)||0),0):0,v=Array.isArray(s.expenses)?Math.max(0,Math.round(s.expenses.reduce((T,fe)=>T+Number(fe?.salePrice??0),0)*100)/100):Math.max(0,Number(e?.servicesClientPrice??0)),x=U?.value==="amount"?"amount":"percent",w=b(W?.value||"0");let P=Number.parseFloat(w);(!Number.isFinite(P)||P<0)&&(P=0);const $=I?.checked===!0,D=L?.checked===!0;let B=D?Hs(L):null;(!Number.isFinite(B)||B<=0)&&(B=D?ye:null);const X=Wt({equipmentEstimate:f,expensesTotal:y,servicesClientPrice:v,discountValue:P,discountType:x,applyTax:$,companyShareEnabled:D,companySharePercent:B});return{equipmentEstimate:f,expensesTotal:y,discountValue:P,discountTypeValue:x,applyTax:$,companyShareEnabled:D,companySharePercent:B,servicesClientPrice:v,finance:X}},Ae=()=>{const f=ne(),y=Ne(),x=(Ct(e.id)||[]).reduce((B,X)=>B+(Number(X?.totalAmount)||as(X)||0),0),w=Number(f.finance?.taxableAmount||0),P=f.applyTax?Number(((w+x)*We).toFixed(2)):0,$=Number((w+x+P).toFixed(2)),D=ze({totalAmount:$,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:y});try{const X=(new URL(window.location.href).searchParams.get("paymentDebug")||"").toLowerCase();(X==="1"||X==="true"||X==="yes")&&console.debug("[PaymentDebug][modal]",{projectId:e?.id,projectTaxableBase:w,reservationsTotal:x,combinedTax:P,combinedTotalWithTax:$,paidAmount:D.paidAmount,paidPercent:D.paidPercent})}catch{}return{...f,combinedTotalWithTax:$,payments:y,progress:D}},Fe=()=>{if(!z)return;const{combinedTotalWithTax:f}=Ae();z.innerHTML=fr(Ne(),{total:f})},se=()=>{if(!xe)return;const{combinedTotalWithTax:f,progress:y}=Ae(),v=Number.isFinite(Number(f))?Number(f):0,x=Number.isFinite(Number(y.paidAmount))?Number(y.paidAmount):0,w=Number.isFinite(Number(y.paidPercent))?Number(y.paidPercent):0,P=Math.max(0,Math.round((v-x)*100)/100),$=[{label:o("projects.form.paymentSummary.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"),value:C(v)},{label:o("projects.form.paymentSummary.paidAmount","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"),value:C(x)},{label:o("projects.form.paymentSummary.paidPercent","Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹Ø§Øª"),value:`${b(w.toFixed(2))}%`},{label:o("projects.form.paymentSummary.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"),value:C(P)}];xe.innerHTML=$.map(({label:D,value:B})=>`
        <div class="project-details-grid-item">
          <span>${c(D)}</span>
          <strong>${c(B)}</strong>
        </div>
      `).join("")},re=(f="auto")=>{if(!k)return;const y=k.dataset?.userSelected==="true";if(f==="auto"&&y)return;const{finance:v,progress:x}=Ae(),w=tt({manualStatus:y?k.value:e.paymentStatus||"unpaid",paidAmount:x.paidAmount,paidPercent:x.paidPercent,totalAmount:v.totalWithTax});y||(k.value=w)},de=()=>{Fe(),se(),re("auto")},ue=1e-4,Le=()=>{const f=G?.value==="amount"?"amount":"percent",y=b(R?.value||"").replace("%","").trim();let v=Number.parseFloat(y);if(!Number.isFinite(v)||v<=0){g(o("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©")),R?.focus();return}const x=Ae(),w=Number.isFinite(Number(x.finance.totalWithTax))?Number(x.finance.totalWithTax):0;if(w<=0){g(o("projects.toast.paymentTotalMissing","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"));return}const P=Number(x.progress.paidAmount)||0,$=Number(x.progress.paidPercent)||0;let D=null,B=null;if(f==="percent"){const T=Math.max(0,100-$);if(T<=ue){g(o("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(v>T){v=T;const fe=b(v.toFixed(2));g(o("projects.toast.paymentCappedPercent","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {value}% Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ 100%").replace("{value}",fe))}B=Math.round(v*100)/100,w>0&&(D=Math.round(B/100*w*100)/100)}else{const T=Math.max(0,w-P);if(T<=ue){g(o("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(v>T){v=T;const fe=`${b(v.toFixed(2))} ${Se}`;g(o("projects.toast.paymentCappedAmount","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {amount} Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ").replace("{amount}",fe))}D=Math.round(v*100)/100,w>0&&(B=Math.round(D/w*100*100)/100)}const X={type:f,amount:D??null,percentage:B??null,value:f==="amount"?D:B,note:null,recordedAt:new Date().toISOString()};s.payments=[...Ne(),X],R&&(R.value=""),G&&(G.value="percent"),de(),g(o("projects.toast.paymentAdded","âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"))},be=f=>{!I||!L||le||(le=!0,f==="share"?L.checked?(I.checked||(I.checked=!0),Ye(L)):I.checked&&(I.checked=!1):f==="tax"&&(I.checked?Ye(L):L.checked&&(L.checked=!1)),le=!1)};function me(){j&&(j.innerHTML=ts(s.expenses))}me(),de();const Y=r.querySelector("#project-edit-close-btn"),K=r.querySelector("#project-edit-reopen-btn"),ae=String(e?.status||"").toLowerCase()==="completed";Y&&(Y.disabled=ae),K&&(K.disabled=!ae);const F=()=>{const f=document.getElementById("closeProjectModal"),y=document.getElementById("close-project-notes"),v=document.getElementById("close-project-submit");if(y&&(y.value=""),v&&v.__tmpCloseProjectListener&&(v.removeEventListener("click",v.__tmpCloseProjectListener),v.__tmpCloseProjectListener=null),v){const x=async()=>{const w=y?.value||"";try{const P=await At(e.projectId??e.id,w);await Et(P?.projectId??P?.id??e.id),u.projects=Ee(),u.reservations=M(),g(o("projects.toast.closed","âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),ce(),ge(),ke(),Ue(P?.id??e.id)}catch(P){console.error("âŒ [projects] closeProject failed",P),g(o("projects.toast.closeFailed","ØªØ¹Ø°Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),"error")}finally{try{((window.bootstrap?.Modal||bootstrap?.Modal)?.getInstance?.(f)||(window.bootstrap?.Modal||bootstrap?.Modal)?.getOrCreateInstance?.(f))?.hide?.()}catch{}}};v.__tmpCloseProjectListener=x,v.addEventListener("click",x,{once:!0})}f&&(window.bootstrap?.Modal||typeof bootstrap<"u"&&bootstrap?.Modal)&&(window.bootstrap?.Modal||bootstrap.Modal).getOrCreateInstance(f).show()};Y&&!Y.dataset.listenerAttached&&(Y.addEventListener("click",f=>{f.preventDefault(),F()}),Y.dataset.listenerAttached="true"),K&&!K.dataset.listenerAttached&&(K.addEventListener("click",async f=>{f.preventDefault();try{const y=await fs(e.projectId??e.id);await Ms(y?.projectId??y?.id??e.id),u.projects=Ee(),u.reservations=M(),g(o("projects.toast.reopened","â†©ï¸ ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),ce(),ge(),ke(),Ue(y?.id??e.id)}catch(y){console.error("âŒ [projects] reopenProject failed",y),g(o("projects.toast.reopenFailed","ØªØ¹Ø°Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"),"error")}}),K.dataset.listenerAttached="true"),W&&!W.dataset.listenerAttached&&(W.addEventListener("input",f=>{const y=f.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""),se(),re("auto"))}),W.dataset.listenerAttached="true"),d&&!d.dataset.listenerAttached&&(d.addEventListener("input",f=>{const y=f.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""))}),d.dataset.listenerAttached="true"),U&&!U.dataset.listenerAttached&&(U.addEventListener("change",()=>{se(),re("auto")}),U.dataset.listenerAttached="true"),R&&!R.dataset.listenerAttached&&(R.addEventListener("input",f=>{const y=f.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""))}),R.dataset.listenerAttached="true"),k&&!k.dataset.listenerAttached&&(k.addEventListener("change",()=>{k.dataset.userSelected="true"}),k.dataset.listenerAttached="true"),i&&!i.dataset.listenerAttached&&(i.addEventListener("input",f=>{const y=f.target;y instanceof HTMLInputElement&&(y.value=b(y.value||""))}),i.dataset.listenerAttached="true"),L&&!L.dataset.listenerAttached&&(L.addEventListener("change",()=>{be("share"),se(),re("auto")}),L.dataset.listenerAttached="true"),I&&!I.dataset.listenerAttached&&(I.addEventListener("change",()=>{be("tax"),se(),re("auto")}),I.dataset.listenerAttached="true"),L?.checked&&Ye(L),be(L?.checked?"share":"tax"),se(),re("auto"),p&&p.addEventListener("click",f=>{f.preventDefault();const y=n?.value.trim()||"",v=b(i?.value||"0"),x=Number(v),w=b(d?.value||"0"),P=Number(w),$=(l?.value||"").trim();if(!y){g(o("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ")),n?.focus();return}if(!Number.isFinite(x)||x<=0){g(o("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­")),i?.focus();return}s.expenses.push({id:`expense-${e.id}-${Date.now()}`,label:y,amount:x,salePrice:Number.isFinite(P)&&P>0?P:0,note:$||""}),n&&(n.value=""),i&&(i.value=""),d&&(d.value=""),l&&(l.value=""),me(),se(),re("auto")}),j&&(j.addEventListener("click",f=>{const y=f.target.closest('[data-action="remove-expense"]');if(!y)return;const{id:v}=y.dataset;s.expenses=s.expenses.filter(x=>String(x.id)!==String(v)),me(),se(),re("auto")}),j.addEventListener("input",f=>{const y=f.target;if(!(y instanceof HTMLInputElement))return;const v=y.dataset.expenseId,x=y.dataset.expenseField;if(!v||!x)return;const w=s.expenses.findIndex($=>String($.id)===String(v));if(w===-1)return;let P=y.value;if(x==="amount"||x==="salePrice"){const $=b(P||""),D=Number.parseFloat($);Number.isFinite(D)&&D>=0?s.expenses[w][x]=D:(P===""||$==="")&&(s.expenses[w][x]=0),se(),re("auto")}else(x==="label"||x==="note")&&(s.expenses[w][x]=P)})),Z&&!Z.dataset.listenerAttached&&(Z.addEventListener("click",f=>{f.preventDefault(),Le()}),Z.dataset.listenerAttached="true"),z&&!z.dataset.listenerAttached&&(z.addEventListener("click",f=>{const y=f.target.closest('[data-action="remove-payment"]');if(!y)return;const v=Number.parseInt(y.dataset.index||"-1",10);if(!Number.isInteger(v)||v<0)return;const x=Ne();if(v>=x.length)return;const w=x.filter((P,$)=>$!==v);s.payments=w,de(),g(o("projects.toast.paymentRemoved","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}),z.dataset.listenerAttached="true"),r.addEventListener("submit",async f=>{if(f.preventDefault(),r.dataset.submitting==="true")return;const y=r.querySelector('[name="project-title"]'),v=r.querySelector('[name="project-type"]'),x=r.querySelector('[name="project-description"]'),w=y?.value.trim()||"",P=v?.value||"",$=b(m?.value.trim()||""),D=b(h?.value.trim()||""),B=x?.value.trim()||"",X=(k?.value||"unpaid").toLowerCase(),T=["paid","partial"].includes(X)?X:"unpaid";if(!w||!P||!$){g(o("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")),y?.focus();return}const fe=b(S?.value.trim()||""),ct=b(E?.value.trim()||""),_e=Lt($,D),De=fe?Lt(fe,ct):"",lt=new Date(_e),Ge=De?new Date(De):null;if(Ge&&lt>Ge){g(o("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©")),S?.focus();return}if(u.projects.findIndex(O=>String(O.id)===String(e.id))===-1){g(o("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const pt=ne(),{equipmentEstimate:dt,servicesClientPrice:ut,discountValue:mt,discountTypeValue:ft,applyTax:Oe,companyShareEnabled:Xe,companySharePercent:jt,finance:ee}=pt,yt=G?.value==="amount"?"amount":"percent",Te=b(R?.value||"");let A=Te?Number.parseFloat(Te):null,N=[...Ne()];if(Number.isFinite(A)&&A>0&&Number.isFinite(Number(ee.totalWithTax))){const O=ze({totalAmount:ee.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:N}),ie=new Date().toISOString();if(yt==="percent"){const _=Math.max(0,100-(O.paidPercent||0));if(_>ue){const te=Math.min(A,_),Q=Math.round(te*100)/100,we=ee.totalWithTax>0?Math.round(Q/100*ee.totalWithTax*100)/100:null;N=[...N,{type:"percent",amount:we,percentage:Q,value:Q,note:null,recordedAt:ie}]}}else{const _=Math.max(0,ee.totalWithTax-(O.paidAmount||0));if(_>ue){const te=Math.min(A,_),Q=Math.round(te*100)/100,we=ee.totalWithTax>0?Math.round(Q/ee.totalWithTax*100*100)/100:null;N=[...N,{type:"amount",amount:Q,percentage:we,value:Q,note:null,recordedAt:ie}]}}N!==s.payments&&(s.payments=N,de()),R&&(R.value=""),G&&(G.value="percent"),A=null}const q=ze({totalAmount:ee.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:N}),J=k?.dataset?.userSelected==="true",H=tt({manualStatus:J?T:e.paymentStatus||T,paidAmount:q.paidAmount,paidPercent:q.paidPercent,totalAmount:ee.totalWithTax}),V=J?T:H;!J&&k&&(k.value=V),k?.dataset&&delete k.dataset.userSelected,s.payments=N;const oe=Vt({projectCode:e.projectCode,title:w,type:P,clientId:e.clientId,clientCompany:e.clientCompany,description:B,start:_e,end:De||null,applyTax:Oe,paymentStatus:V,equipmentEstimate:dt,expenses:s.expenses,servicesClientPrice:ut,discount:mt,discountType:ft,companyShareEnabled:Xe&&Oe,companySharePercent:Xe&&Oe?jt:null,companyShareAmount:ee.companyShareAmount,taxAmount:ee.taxAmount,totalWithTax:ee.totalWithTax,confirmed:e.confirmed,technicians:Array.isArray(e.technicians)?e.technicians:[],equipment:Qs(e),paidAmount:q.paidAmount,paidPercentage:q.paidPercent,paymentProgressType:q.paymentProgressType,paymentProgressValue:q.paymentProgressValue,payments:N}),ve=he?.checked===!0;ve&&(oe.status="cancelled",oe.cancelled=!0),r.dataset.submitting="true";try{const O=await Tt(e.projectId??e.id,oe),ie=O?.projectId??O?.id??e.id;if(!ve)try{const _={start:_e};De&&(_.end=De),await Rs(ie,_)}catch(_){console.warn("âš ï¸ failed to sync linked reservations schedule",_)}if(await xt(ie,V),ve)try{await _s(ie)}catch(_){console.warn("âš ï¸ failed to cancel linked reservations",_)}u.projects=Ee(),u.reservations=M(),g(o("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­")),ce(),ge(),ke(),Ue(e.id)}catch(O){console.error("âŒ [projects] Failed to update project from details view",O);const ie=at(O)?O.message:o("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(ie,"error")}finally{delete r.dataset.submitting}})}function qt(e){if(!e)return;const s={projectId:e.id,customerId:e.clientId||null,start:e.start||null,end:e.end||null,forceNotes:!!e.description,fromProjectForm:!0,draftStorageKey:"projects:create:draft",returnUrl:`projects.html?project=${encodeURIComponent(e.id)}&linked=1#projects-section`};St({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(n=>{console.warn("âš ï¸ [projects] Failed to persist dashboard tab preference",n)});let r="";try{r=encodeURIComponent(JSON.stringify(s))}catch(n){console.warn("âš ï¸ [projects] Unable to encode reservation context",n)}t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl)?.hide();const a=r?`?reservationProjectContext=${r}`:"";window.location.href=`dashboard.html${a}#reservations`}async function dr(e){if(!e)return;const s=u.projects.find(r=>String(r.id)===String(e));if(!s){g(o("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}if(s.confirmed===!0||s.confirmed==="true"){g(o("projects.toast.alreadyConfirmed","â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§"));return}try{await Tt(s.projectId??s.id,{confirmed:!0});const r=await Fs(e);u.projects=Ee(),u.reservations=M(),ce(),ge(),ke(),t.detailsModalEl&&t.detailsModalEl.classList.contains("show")&&t.detailsBody?.dataset.projectId===String(e)&&Ue(e),document.dispatchEvent(new CustomEvent("projects:changed")),r&&document.dispatchEvent(new CustomEvent("reservations:changed")),g(o("projects.toast.confirmed","âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(r){console.error("âŒ [projects] confirmProject failed",r);const a=at(r)?r.message:o("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(a,"error")}}function ur(e,s={clientName:"",clientCompany:"",expenses:[]}){const{date:r,time:a}=$t(e.start||""),{date:n,time:i}=$t(e.end||""),d=e.applyTax===!0||e.applyTax==="true";typeof e.paymentStatus=="string"&&e.paymentStatus.toLowerCase();const l=e.discountType==="amount"?"amount":"percent",p=b(String(e.discount??e.discountValue??0));b(String(e.servicesClientPrice??e.services_client_price??0));const j=e.companySharePercent??e.company_share_percent??e.companyShare??e.company_share??e.companyShareAmountPercent??ye,m=Number.parseFloat(b(String(j))),h=Number.isFinite(m)&&m>0?m:ye,S=e.companyShareEnabled===!0||e.companyShareEnabled==="true"||e.company_share_enabled===!0||e.company_share_enabled==="true"||d&&Number.isFinite(m)&&m>0,E="",k=e?.cancelled===!0||e?.cancelled==="true"||String(e?.status||"").toLowerCase()==="cancelled"||String(e?.status||"").toLowerCase()==="canceled";return`
    <form id="project-details-edit-form" class="project-edit-form">
      <div class="row g-3">
        <div class="col-12 col-xl-8">
          <label class="form-label">${c(o("projects.form.labels.title","Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <input type="text" class="form-control project-edit-input-wide" name="project-title" value="${c(e.title||"")}" required>
        </div>
        <div class="col-12 col-sm-6 col-xl-4 d-flex flex-column">
          <label class="form-label">${c(o("projects.form.labels.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <select class="form-select project-edit-select-lg" name="project-type" required>
            ${mr(e.type)}
          </select>
        </div>
        <div class="col-12">
          <div class="project-edit-inline-group project-edit-inline-group--dates">
            <div class="project-edit-inline-field">
              <label class="form-label">${c(o("projects.form.labels.startDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="date" class="form-control" name="project-start-date" value="${c(r)}" required>
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${c(o("projects.form.labels.endDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="date" class="form-control" name="project-end-date" value="${c(n)}">
            </div>
          </div>
          <div class="project-edit-inline-group project-edit-inline-group--times mt-2">
            <div class="project-edit-inline-field">
              <label class="form-label">${c(o("projects.form.labels.startTime","ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="time" class="form-control" name="project-start-time" value="${c(a)}">
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${c(o("projects.form.labels.endTime","ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="time" class="form-control" name="project-end-time" value="${c(i)}">
            </div>
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">${c(o("projects.form.labels.description","Ø§Ù„ÙˆØµÙ"))}</label>
          <textarea class="form-control project-edit-textarea" name="project-description" rows="5">${c(e.description||"")}</textarea>
        </div>
        <div class="col-12">
          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="project-cancelled" name="project-cancelled" ${k?"checked":""}>
            <label class="form-check-label" for="project-cancelled">${c(o("projects.form.labels.cancelled","Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          </div>
          <div class="form-text">${c(o("projects.form.hints.cancelled","Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ."))}</div>
        </div>
        <!-- Payment status select removed: status is inferred automatically from payments -->
      </div>

      <!-- Services block placed directly under project description -->
      <section class="project-edit-expenses mt-4">
        <h6 class="mb-2">${c(o("projects.form.labels.expenseLabel","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©"))}</h6>
        <div class="project-edit-expense-form">
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-label" placeholder="${c(o("projects.form.placeholders.expenseLabel","ÙˆØµÙ Ø§Ù„Ù…ØªØ·Ù„Ø¨"))}">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-amount" placeholder="${c(o("projects.form.placeholders.expenseAmount","Ø§Ù„Ù…Ø¨Ù„Øº"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-sale" placeholder="${c(o("projects.form.placeholders.salePrice","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-note" placeholder="${c(o("projects.form.placeholders.expenseNote","ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"))}">
          </div>
          <div class="project-edit-expense-action-col">
            <button type="button" class="modal-action-btn modal-action-btn--warning project-edit-add-btn" data-action="add-expense">${c(o("projects.form.buttons.addExpense","â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©"))}</button>
          </div>
        </div>
        <div id="project-edit-expense-list" class="project-edit-expense-list mt-3">
          ${ts(s.expenses)}
        </div>
      </section>

      <!-- Services block placed directly under project description -->
      
      
      <div class="row g-3 align-items-start mt-1">
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-discount">${c(o("projects.form.labels.discount","Ø§Ù„Ø®ØµÙ…"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-discount-type" name="project-discount-type" class="form-select project-edit-select-xs">
              <option value="percent" ${l==="percent"?"selected":""}>${c(o("projects.form.discount.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
              <option value="amount" ${l==="amount"?"selected":""}>${c(o("projects.form.discount.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
            </select>
            <input type="text" id="project-edit-discount" name="project-discount" class="form-control project-edit-input-xs" value="${c(p)}" placeholder="0" inputmode="decimal">
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label d-block" for="project-edit-company-share">${c(o("projects.form.labels.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©"))}</label>
          <div class="d-flex flex-column gap-2">
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-company-share" name="project-company-share" data-company-share="${c(String(h))}" ${S?"checked":""}>
              <label class="form-check-label" for="project-edit-company-share">${c(o("projects.form.companyShareToggle","Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)"))}</label>
            </div>
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-tax" name="project-apply-tax" ${d?"checked":""}>
              <label class="form-check-label" for="project-edit-tax">${c(o("projects.form.taxLabel","Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"))}</label>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-payment-progress-value">${c(o("projects.form.paymentProgress.label","ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-payment-progress-type" name="project-payment-progress-type" class="form-select project-edit-select-xs">
              <option value="amount" >${c(o("projects.form.paymentProgress.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
              <option value="percent" selected>${c(o("projects.form.paymentProgress.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
            </select>
            <input type="text" id="project-edit-payment-progress-value" name="project-payment-progress-value" class="form-control project-edit-input-xs" value="${c(E)}" placeholder="0" inputmode="decimal">
          </div>
          <button type="button" class="modal-action-btn modal-action-btn--ghost project-edit-add-btn mt-2" id="project-edit-payment-add">${c(o("reservations.paymentHistory.actions.add","â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©"))}</button>
        </div>
      </div>

      <section class="project-edit-payment-history mt-4">
        <div id="project-edit-payment-summary" class="project-details-grid mb-3"></div>
        <div class="reservation-payment-history-block">
          <div class="reservation-payment-history__header">
            <h6 class="reservation-payment-history__title">${c(o("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h6>
          </div>
          <div id="project-edit-payment-history" class="reservation-payment-history"></div>
        </div>
      </section>


      <div class="project-edit-actions mt-4 d-flex justify-content-between">
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-warning" id="project-edit-close-btn">${c(o("projects.actions.close","ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
          <button type="button" class="btn btn-outline-secondary" id="project-edit-reopen-btn">${c(o("projects.actions.reopen","â†©ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"))}</button>
        </div>
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary">${c(o("projects.form.buttons.update","ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
          <button type="button" class="btn btn-outline-secondary" data-action="cancel-edit">${c(o("actions.cancel","Ø¥Ù„ØºØ§Ø¡"))}</button>
        </div>
      </div>
    </form>
  `}function mr(e){return["commercial","coverage","photography","social"].map(r=>{const a=rs(r),n=r===e?"selected":"";return`<option value="${c(r)}" ${n}>${c(a)}</option>`}).join("")}function ts(e=[]){const s=c(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©")),r=c(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©")),a=c(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)")),n=c(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)")),i=c(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª")),d=c(o("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"));if(!Array.isArray(e)||e.length===0){const h=c(o("projects.selected.emptyExpenses","Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ"));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${r}</th>
              <th>${a}</th>
              <th>${n}</th>
              <th>${i}</th>
              <th>${d}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${h}</td></tr>
          </tbody>
        </table>
      </div>`}const l=e.map(h=>{const S=c(String(h?.id||"")),E=c(String(h?.label||"")),k=Number(h?.amount)||0,I=Number(h?.salePrice??h?.sale_price??0)||0,L=c(String((h?.note??h?.notes)||""));return`
      <tr>
        <td>
          <input type="text" class="form-control form-control-sm" value="${E}" data-expense-id="${S}" data-expense-field="label" placeholder="${c(o("projects.form.placeholders.expenseLabel","Ø§Ù„ÙˆØµÙ"))}">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${c(String(k))}" data-expense-id="${S}" data-expense-field="amount" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${c(String(I))}" data-expense-id="${S}" data-expense-field="salePrice" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${L}" data-expense-id="${S}" data-expense-field="note" placeholder="${c(o("projects.form.placeholders.expenseNote","ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"))}">
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${S}" aria-label="${s}">âœ–</button>
        </td>
      </tr>
    `}).join(""),p=e.reduce((h,S)=>h+(Number(S?.salePrice??S?.sale_price)||0),0),j=c(C(p)),m=c(o("projects.expenses.table.totalSale","Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"));return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${r}</th>
            <th>${a}</th>
            <th>${n}</th>
            <th>${i}</th>
            <th>${d}</th>
          </tr>
        </thead>
        <tbody>${l}</tbody>
        <tfoot>
          <tr>
            <th colspan="2" class="text-end">${m}</th>
            <th>${j}</th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  `}function Ft(e=[],{total:s=null}={}){return!Array.isArray(e)||e.length===0?`<div class="reservation-payment-history-empty">${c(o("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`:`<ul class="reservation-payment-history-list">${e.map(r=>{const a=r?.type==="percent"?o("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):r?.type==="amount"?o("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"):o("reservations.paymentHistory.type.unknown","Ø¯ÙØ¹Ø©"),n=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?Number(r.percentage):null,i=n!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(n/100)*100)/100:null,d=r?.type==="percent"&&i!=null?i:Number.isFinite(Number(r?.amount))&&Number(r.amount)>0?Number(r.amount):null,l=d!=null?c(C(d)):"â€”",p=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?`${b(Number(r.percentage).toFixed(2))}%`:"â€”",j=r?.recordedAt?b(ot(r.recordedAt)):"â€”",m=r?.note?`<div class="payment-history-note">${c(b(r.note))}</div>`:"";return`
      <li>
        <div class="payment-history-entry">
          <span class="payment-history-entry__type">${c(a)}</span>
          <span class="payment-history-entry__amount">${l}</span>
          <span class="payment-history-entry__percent">${p}</span>
          <span class="payment-history-entry__date">${j}</span>
        </div>
        ${m}
      </li>
    `}).join("")}</ul>`}function fr(e=[],{total:s=null}={}){if(!Array.isArray(e)||e.length===0)return`<div class="reservation-payment-history__empty">${c(o("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;const r=e.map((a,n)=>{const i=a?.type==="percent"?o("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):o("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"),d=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?Number(a.percentage):null,l=d!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(d/100)*100)/100:null,p=a?.type==="percent"&&l!=null?l:Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?Number(a.amount):null,j=p!=null?c(C(p)):"â€”",m=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${b(Number(a.percentage).toFixed(2))}%`:"â€”",h=a?.recordedAt?b(ot(a.recordedAt)):"â€”",S=a?.note?c(b(a.note)):"",E=c(o("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"));return`
      <tr>
        <td>${c(i)}</td>
        <td>${j}</td>
        <td>${m}</td>
        <td>${h}</td>
        <td>${S}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${n}" aria-label="${E}">ğŸ—‘ï¸</button>
        </td>
      </tr>
    `}).join("");return`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${c(o("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${c(o("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>
  `}function jr(e={}){const r=(Array.isArray(e.paymentHistory)?e.paymentHistory:Array.isArray(e.payment_history)?e.payment_history:[]).map(yr).filter(Boolean);if(r.length>0)return r;const a=rt(e.paidPercent??e.paid_percent),n=rt(e.paidAmount??e.paid_amount),i=e.updatedAt??e.updated_at??e.createdAt??e.created_at??null,d=ss(i);return a!=null&&a>0?[{type:"percent",amount:n!=null&&n>0?n:null,percentage:a,value:a,note:null,recordedAt:d}]:n!=null&&n>0?[{type:"amount",amount:n,percentage:null,value:n,note:null,recordedAt:d}]:[]}function yr(e){if(!e||typeof e!="object")return null;const s=e.type??e.payment_type??e.paymentType??null;let r=typeof s=="string"?s.toLowerCase().trim():null;r!=="percent"&&(r="amount");const a=rt(e.amount??(r==="amount"?e.value:null)),n=rt(e.percentage??(r==="percent"?e.value:null)),i=r==="percent"?n??null:a??null,d=e.note??e.memo??null,l=ss(e.recordedAt??e.recorded_at??e.date??e.created_at??null);return r==="amount"&&a==null||r==="percent"&&n==null?null:{type:r,amount:a??null,percentage:n??null,value:i,note:d&&String(d).trim().length?String(d).trim():null,recordedAt:l}}function rt(e){if(e==null||e==="")return null;const s=b(String(e)).replace(/%/g,"").trim();if(!s)return null;const r=Number.parseFloat(s);return Number.isFinite(r)?r:null}function ss(e){if(!e)return new Date().toISOString();const s=new Date(e);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function _t(e,s){if(!s)return null;const{date:r,time:a}=hr(ot(s)),n=e==="start",i=n?"â±ï¸":"âŒ›",d=n?o("projects.details.labels.start","Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"):o("projects.details.labels.end","Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹");return{icon:i,label:d,value:r,meta:a}}function hr(e){if(!e||e==="â€”")return{date:"â€”",time:""};const s=e.split(" ").filter(Boolean),r=s.shift()||"â€”",a=s.join(" ");return{date:r,time:a}}function rs(e){if(!e)return o("projects.form.types.unknown","Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯");const s={commercial:"projects.form.types.commercial",coverage:"projects.form.types.coverage",photography:"projects.form.types.photography",social:"projects.form.types.social"}[e]||"projects.form.types.unknown";return o(s,e)}function as(e){if(!e)return 0;const s=Array.isArray(e.items)?e.items:[],r=e.discount??0,a=Number(b(String(r)))||0,n=e.discountType||"percent",i=Array.isArray(e.crewAssignments)?e.crewAssignments:[],d=i.length?i:Array.isArray(e.technicians)?e.technicians:[],l=vs(s,a,n,!1,d,{start:e.start,end:e.end});if(Number.isFinite(l))return l;const p=Number(b(String(e.cost??0)));return Number.isFinite(p)?Math.round(p):0}export{Nr as a,Er as b,wr as c,Ir as d,$r as e,Lr as f,Mr as g,Dr as h,Cr as i,Br as j,Ns as k,Fr as l,Ar as m,Be as n,Ue as o,kr as p,Tr as q,Xt as r,lr as s,_r as t,Rr as u,qr as v};
