import{r as Mt,d as $e,t as o,n as h,x as Bt,l as ls,j as g,v as ps,w as ds,u as St,p as It}from"./auth.CVl03_4f.js";import{getProjectsState as we,deleteProjectApi as us,refreshProjectsFromApi as Pt,isApiError as at,closeProjectApi as At,buildProjectPayload as Vt,updateProjectApi as Tt,createProjectApi as ms,reopenProjectApi as js}from"./projectsService.e6vMi3I3.js";import{g as M,n as Me,f as fs,r as Ct,u as De,a as ys,D as ye,c as ze,e as tt,d as hs,b as bs,h as vs}from"./reservationsService.dHWo2H8Q.js";import{g as gs,w as xs}from"./uiBridge.DZRIdx42.js";import{e as Ss}from"./reservationPdf.BNH3LLHY.js";import{d as t,s as u,i,r as fe,u as ke,a as Ie,h as We,j as Ps,k as Ht,l as w,m as As,f as ot,n as wt,o as Ts,p as Cs,q as ws,t as ks,v as $t,w as Lt}from"./view.DFfGCXCu.js";Mt({ar:{"projects.pageTitle":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.form.labels.expenseNote":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª","projects.form.placeholders.expenseNote":"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø©/Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.templates.placeholders.saveTitle":"Ø§Ø³Ù… Ø§Ù„Ù†Ø³Ø®Ø©","projects.nav.brand":"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.nav.projects":"Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.nav.customers":"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.nav.technicians":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.hero.title":"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.hero.subtitle":"Ø£Ù†Ø´Ø¦ ÙˆÙ†Ø³Ù‘Ù‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ ÙˆÙˆØ²Ù‘Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ù‚Ù… ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ.","projects.form.title":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯","projects.form.labels.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.title":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.clientCompany":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.labels.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.form.labels.startDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.startTime":"â° ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.labels.endDate":"ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.endTime":"â° ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.labels.description":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.labels.technician":"Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø·Ø§Ù‚Ù…","projects.form.labels.equipment":"Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø¯Ø©","projects.form.labels.quantity":"Ø§Ù„ÙƒÙ…ÙŠØ©","projects.form.labels.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseLabel":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.form.labels.expenseAmount":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.form.labels.servicesClientTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.labels.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.placeholders.expenseAmount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.form.placeholders.salePrice":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.expenses.table.headers.service":"Ø§Ù„Ø®Ø¯Ù…Ø©","projects.expenses.table.headers.cost":"Ø§Ù„ØªÙƒÙ„ÙØ© (SR)","projects.expenses.table.headers.sale":"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)","projects.expenses.table.headers.note":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª","projects.expenses.table.headers.actions":"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.expenses.table.totalSale":"Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹","projects.form.placeholders.title":"Ù…Ø«Ø§Ù„: ØªØµÙˆÙŠØ± Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯","projects.form.placeholders.description":"Ù…Ù„Ø®Øµ Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª","projects.form.placeholders.type":"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.placeholders.clientCompany":"ØªØ¹Ø¨Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§","projects.form.placeholders.startDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.startTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.form.placeholders.endDate":"Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.endTime":"Ø§Ø®ØªØ± ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.form.placeholders.client":"Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...","projects.form.placeholders.expenseLabel":"Ù…Ø«Ø§Ù„: Ù…ØªØ·Ù„Ø¨ Ø¥Ø¶Ø§ÙÙŠ (Ø±Ø³ÙˆÙ… Ù…ÙˆÙ‚Ø¹ØŒ Ù…Ø¹Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...)","projects.form.linkedReservation.title":"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.description":"Ø£Ù†Ø´Ø¦ Ø­Ø¬Ø²Ù‹Ø§ Ù…Ø±ØªØ¨Ø·Ù‹Ø§ Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© ØªÙØ§ØµÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.","projects.form.linkedReservation.button":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingClient":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.missingSchedule":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø±ØªØ¨Ø·","projects.form.linkedReservation.empty":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯.","projects.form.linkedReservation.pendingItem":"Ø³ÙŠØªÙ… Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¬Ø² ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.form.linkedReservation.buttonDisabled":"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø· Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¬Ø².","projects.form.linkedReservation.meta.equipment":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}","projects.form.linkedReservation.meta.crew":"Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}","projects.form.linkedReservation.meta.crewNames":"Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}","projects.form.linkedReservation.meta.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}","projects.form.labels.discount":"Ø§Ù„Ø®ØµÙ…","projects.form.labels.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.form.labels.applyTax":"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.form.discount.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.discount.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.companyShareToggle":"Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)","projects.form.selectClient":"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.form.selectTechnician":"Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.form.selectEquipment":"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.form.types.commercial":"ØªØµÙˆÙŠØ± Ø¥Ø¹Ù„Ø§Ù†","projects.form.types.coverage":"ØªØµÙˆÙŠØ± ØªØºØ·ÙŠØ©","projects.form.types.photography":"ØªØµÙˆÙŠØ± ÙÙˆØªÙˆØºØ±Ø§ÙÙŠ","projects.form.types.social":"ØªØµÙˆÙŠØ± Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ","projects.form.types.unknown":"Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯","projects.form.buttons.addTechnician":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø·Ø§Ù‚Ù…","projects.form.buttons.addEquipment":"â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.form.buttons.save":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.buttons.update":"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.taxLabel":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.form.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.form.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.form.paymentProgress.label":"ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©","projects.form.paymentProgress.amount":"ğŸ’µ Ù…Ø¨Ù„Øº","projects.form.paymentProgress.percent":"Ùª Ù†Ø³Ø¨Ø©","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ø§ Ù…Ù† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.paymentStatus.paid":"Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.unpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.paymentStatus.partial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.selected.emptyTechnicians":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹Ø¶Ùˆ Ø¨Ø¹Ø¯","projects.selected.emptyEquipment":"Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù…Ø¹Ø¯Ø§Øª","projects.selected.emptyExpenses":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ","projects.summary.title":"Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹","projects.summary.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.summary.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.summary.expenses":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projects.summary.budget":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.focus.title":"ğŸ“Œ Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.legend":"Ø§Ø®ØªØ± Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø§Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹.","projects.focus.today":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…","projects.focus.thisWeek":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹","projects.focus.upcoming":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projects.focus.recent":"Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.focus.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù„ÙŠÙˆÙ… Ø£Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.","projects.focus.view":"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„","projects.focus.edit":"ØªØ¹Ø¯ÙŠÙ„","projects.focus.actions.confirm":"âœ”ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.confirmed":"âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯","projects.focus.summary.project":"Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.focus.summary.reservations":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.focus.summary.payment":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.focus.summary.range":"Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©","projects.focus.summary.time":"Ø§Ù„ÙˆÙ‚Øª","projects.focus.toastNotFound":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","projects.toast.linkReservationFailed":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§","projects.toast.companyShareRequiresTax":"âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.timeline.title":"Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.timeline.legend":"ÙŠÙØ¸Ù‡Ø± Ø§Ù„Ø´Ø±ÙŠØ· Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ØªÙÙ…Ø«Ù‘Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.","projects.timeline.legend.upcoming":"Ù‚Ø§Ø¯Ù…","projects.timeline.legend.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.timeline.legend.completed":"Ù…ÙƒØªÙ…Ù„","projects.timeline.legend.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.timeline.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¨ÙŠØ§Ù†Ø§Øª Ø²Ù…Ù†ÙŠØ© ØµØ§Ù„Ø­Ø©.","projects.timeline.conflict":"ØªØ¹Ø§Ø±Ø¶ ÙÙŠ Ø§Ù„ØªÙˆÙ‚ÙŠØª","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹","projects.search.placeholder":"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.subtabs.create":"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹","projects.subtabs.list":"Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ","projects.subtabs.reports":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.expenses":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.subtabs.templates":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨","projects.templates.title":"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (A4)","projects.templates.subtitle":"Ø§Ø±Ø¨Ø· Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ ÙˆØ­Ø¬Ø²Ø§Ù‹ Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨ØŒ Ø¹Ø¯Ù‘ÙÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø«Ù… Ø§Ø·Ø¨Ø¹ PDF.","projects.templates.labels.project":"ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.templates.labels.reservation":"ğŸ”— Ø§Ù„Ø­Ø¬Ø² (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)","projects.templates.labels.type":"ğŸ“„ Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ù„Ø¨","projects.templates.types.expenses":"ÙˆØ±Ù‚Ø© Ù…ØµØ§Ø±ÙŠÙ (A4 Ø¹Ù…ÙˆØ¯ÙŠ)","projects.templates.types.callsheet":"ÙƒÙˆÙ„ Ø´ÙŠØª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.types.shotlist":"Ø´ÙˆØª Ù„ÙŠØ³Øª (A4 Ø£ÙÙ‚ÙŠ)","projects.templates.actions.refresh":"ØªØ­Ø¯ÙŠØ«","projects.templates.actions.print":"ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© PDF","projects.templates.actions.toggle":"â‹¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª","projects.templates.actions.save":"ğŸ’¾ Ø­ÙØ¸","projects.templates.actions.saveCopy":"ğŸ“ Ø­ÙØ¸ ÙƒÙ†Ø³Ø®Ø©","projects.templates.actions.fromReservation":"ğŸ“… Ù…Ù† Ø§Ù„Ø­Ø¬Ø²","projects.templates.actions.rename":"âœï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØ©","projects.templates.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù","projects.templates.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.templates.actions.exportExcel":"â¬‡ï¸ ØªØµØ¯ÙŠØ± Excel","projects.templates.actions.import":"â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯","projects.templates.noReservation":"â€” Ø¨Ø¯ÙˆÙ† Ø±Ø¨Ø· â€”","projects.templates.empty":"Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ Ù„Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨.","projects.templates.expenses.title":"Expenses Sheet / Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.templates.callsheet.title":"Call Sheet / Ù‚Ø§Ù„Ø¨ ÙƒÙˆÙ„ Ø´ÙŠØª","projects.templates.callsheet.contacts":"Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©","projects.templates.callsheet.schedule":"Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…","projects.templates.shotlist.title":"Shot List / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ù‚Ø·Ø§Øª","projects.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.table.count":"{count} Ù…Ø´Ø±ÙˆØ¹","projects.table.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.table.headers.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.table.headers.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.table.headers.period":"Ø§Ù„ÙØªØ±Ø©","projects.table.headers.crew":"Ø§Ù„Ø·Ø§Ù‚Ù…","projects.table.headers.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.table.headers.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©)","projects.table.headers.expenses":"Ù…ØµØ±ÙˆÙØ§Øª (SR)","projects.table.emptyInitial":"Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¹Ø¯.","projects.table.emptyFiltered":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø©.","projects.modal.title":"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.overview.heading":"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.pageTitle":"ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.reports.title":"Ù„ÙˆØ­Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.subtitle":"ØªØ­Ù„ÙŠÙ„Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ØŒ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©ØŒ ÙˆÙ†Ø³Ø¨ Ø§Ù„ØªÙ†ÙÙŠØ°.","projects.reports.filters.search":"Ø¨Ø­Ø«","projects.reports.filters.searchPlaceholder":"Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.filters.status":"Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.filters.payment":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.reports.filters.paymentAll":"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.filters.paymentPaid":"Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.paymentPartial":"Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","projects.reports.filters.paymentUnpaid":"ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹","projects.reports.filters.dateRange":"Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®","projects.reports.filters.range.all":"ÙƒÙ„ Ø§Ù„ÙˆÙ‚Øª","projects.reports.filters.range.30":"Ø¢Ø®Ø± 30 ÙŠÙˆÙ…","projects.reports.filters.range.90":"Ø¢Ø®Ø± 90 ÙŠÙˆÙ…","projects.reports.filters.range.365":"Ø¢Ø®Ø± Ø³Ù†Ø©","projects.reports.filters.range.custom":"ØªØ§Ø±ÙŠØ® Ù…Ø®ØµØµ","projects.reports.filters.start":"Ù…Ù†","projects.reports.filters.end":"Ø¥Ù„Ù‰","projects.reports.filters.refresh":"ØªØ­Ø¯ÙŠØ«","projects.reports.charts.status":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projects.reports.charts.statusHint":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ°","projects.reports.charts.timeline":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù†","projects.reports.charts.timelineHint":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø´Ù‡Ø±ÙŠÙ‹Ø§","projects.reports.charts.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.charts.expensesHint":"Ù…Ù‚Ø§Ø±Ù†Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù…Ø¹ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.charts.clients":"Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡","projects.reports.charts.clientsHint":"Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.noData":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©","projects.reports.loading.chart":"Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù…...","projects.reports.table.title":"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.reports.table.columns.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.reports.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.reports.table.columns.period":"Ø§Ù„ÙØªØ±Ø©","projects.reports.table.columns.value":"Ø§Ù„Ù‚ÙŠÙ…Ø©","projects.reports.table.columns.payment":"Ø§Ù„Ø¯ÙØ¹","projects.reports.table.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø§Ù„ÙŠ.","projects.reports.table.meta":"Ø¹Ø±Ø¶ {count} Ù…Ù† Ø£ØµÙ„ {total} Ù…Ø´Ø±ÙˆØ¹","projects.reports.kpi.totalProjects":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.reports.kpi.totalProjectsMeta":"Ø¨Ø¹Ø¯ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.totalValueMeta":"ÙŠØ´Ù…Ù„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.unpaidValueMeta":"Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù… ØªÙØ³Ø¯Ù‘ÙØ¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¹Ø¯","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.expensesMeta":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.datasets.value":"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©","projects.reports.datasets.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.projectExpenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.expenses.pageTitle":"Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±","projects.expenses.title":"Ø¥Ø¯Ø§Ø±Ø© Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹","projects.expenses.subtitle":"ØªØ§Ø¨Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.","projects.expenses.placeholder":"Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ù…Ø®ØµØµØ© Ù„Ø±Ø¨Ø· Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹.","projects.expenses.placeholderHint":"Ø¬Ù‡Ø² Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¢Ù† Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¯Ù….","projects.expenses.actions.addExpense":"â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©","projects.expenses.actions.importInvoice":"ğŸ§¾ Ø±ÙØ¹ ÙØ§ØªÙˆØ±Ø©","projects.expenses.actions.export":"â¬‡ï¸ ØªØµØ¯ÙŠØ±","projects.expenses.kpi.total":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projects.expenses.kpi.total.meta":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø®Ù„Ø§Ù„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©","projects.expenses.kpi.pending":"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.pending.meta":"Ù…ØµØ§Ø±ÙŠÙ ØªØ­ØªØ§Ø¬ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.expenses.kpi.approved":"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©","projects.expenses.kpi.approved.meta":"Ø¢Ø®Ø± Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ØªÙŠ ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§","projects.expenses.kpi.average":"Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØµØ±ÙˆÙ Ù„ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹","projects.expenses.kpi.average.meta":"Ù‚ÙŠÙ…Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø§Ø³ØªÙ†Ø§Ø¯Ø§Ù‹ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù†Ø´Ø·Ø©","projects.expenses.breakdown.title":"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.breakdown.hint":"Ø±Ø§Ù‚Ø¨ Ø§Ù„ØµØ±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ø§ØªØŒ Ø§Ù„Ø·Ø§Ù‚Ù…ØŒ ÙˆØ§Ù„ØªÙ†Ù‚Ù„Ø§Øª.","projects.expenses.breakdown.empty":"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ§Ø±ÙŠÙ Ù…ØµÙ†ÙØ© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.","projects.expenses.timeline.title":"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø¹Ø¨Ø± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ","projects.expenses.timeline.hint":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠØ© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª.","projects.expenses.timeline.empty":"Ø£Ø¶Ù Ù…ØµØ±ÙˆÙØ§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ.","projects.expenses.table.title":"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ","projects.expenses.table.hint":"Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª.","projects.expenses.table.columns.project":"Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.expenses.table.columns.category":"Ø§Ù„ØªØµÙ†ÙŠÙ","projects.expenses.table.columns.description":"Ø§Ù„ÙˆØµÙ","projects.expenses.table.columns.amount":"Ø§Ù„Ù…Ø¨Ù„Øº","projects.expenses.table.columns.status":"Ø§Ù„Ø­Ø§Ù„Ø©","projects.expenses.table.columns.date":"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„","projects.expenses.table.empty":"Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§.","projects.toast.selectTechnician":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.technicianAlreadyAdded":"âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„","projects.toast.technicianAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.toast.selectEquipment":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©","projects.toast.equipmentAdded":"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.missingExpenseLabel":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ","projects.toast.invalidExpenseAmount":"âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­","projects.toast.customerNotFound":"âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„","projects.toast.missingRequiredFields":"âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©","projects.toast.invalidDateRange":"âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.toast.saved":"âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editReady":"âœï¸ ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„. Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.toast.updated":"âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­","projects.toast.editMissing":"âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡","projects.toast.confirmed":"âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.toast.alreadyConfirmed":"â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§","projects.toast.deleted":"ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.confirm.delete":"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ","projects.fallback.unknownClient":"Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ","projects.fallback.unknownEquipment":"Ù…Ø¹Ø¯Ø©","projects.fallback.noDescription":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ","projects.fallback.untitled":"Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…","projects.fallback.emptyList":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.fallback.technicianName":"Ø¹Ø¶Ùˆ {id}","projects.status.upcoming":"Ù‚Ø§Ø¯Ù…","projects.status.ongoing":"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projects.status.completed":"Ù…ÙƒØªÙ…Ù„","projects.status.conflict":"ØªØ¹Ø§Ø±Ø¶","projects.status.cancelled":"Ù…Ù„ØºÙŠ","projects.tag.closed":"Ù…ØºÙ„Ù‚","projects.form.labels.cancelled":"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.form.hints.cancelled":"Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ.","projects.close.noteLabel":"Ù…Ù„Ø§Ø­Ø¸Ø© Ø¥ØºÙ„Ø§Ù‚","projectCards.filters.search":"ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„ÙˆØµÙ...","projectCards.filters.status.all":"âš™ï¸ ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª","projectCards.filters.status.upcoming":"ğŸ“… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚Ø§Ø¯Ù…Ø©","projectCards.filters.status.ongoing":"âš™ï¸ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°","projectCards.filters.status.completed":"âœ… Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù†ØªÙ‡ÙŠØ©","projectCards.stats.crew":"ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…: {count}","projectCards.stats.reservations":"ğŸ”— Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: {count}","projectCards.stats.client":"ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: {name}","projectCards.stats.type":"ğŸ·ï¸ Ø§Ù„Ù†ÙˆØ¹: {label}","projectCards.stats.budget":"ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©): {amount}","projectCards.stats.expenses":"ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: {amount}","projectCards.stats.crewShort":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projectCards.stats.reservationsShort":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.budgetShort":"Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.stats.expensesShort":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª","projectCards.stats.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projectCards.stats.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projectCards.stats.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projectCards.stats.reservationValue":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projectCards.stats.servicesClientPrice":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projectCards.stats.expensesTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ","projectCards.stats.reservationTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²","projectCards.stats.taxTotal":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projectCards.stats.overallTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ","projectCards.groups.meta":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.groups.reservations":"Ù…ÙˆØ¬Ø² Ø§Ù„Ø­Ø¬Ø²","projectCards.groups.payment":"Ù…Ù„Ø®Øµ Ø§Ù„Ø¯ÙØ¹","projectCards.meta.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projectCards.meta.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projectCards.meta.startDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projectCards.meta.endDate":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.type":"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.company":"Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.client":"Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.labels.clientPhone":"Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.details.labels.clientEmail":"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ","projects.details.client.noPhone":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­","projects.details.client.noEmail":"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­","projects.details.crew":"Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„ÙÙ†ÙŠ ({count})","projects.details.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ({count})","projects.details.expenses":"Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})","projects.details.subtotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.tax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (15Ùª):","projects.details.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:","projects.details.labels.projectTitle":"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.code":"Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.projectSubtotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.summary.paymentStatus":"Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹","projects.details.summary.projectTax":"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (15Ùª)","projects.details.summary.projectTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.summary.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª / Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.details.summary.combinedTax":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (15Ùª)","projects.details.summary.reservationsCount":"{count} Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø©","projects.details.summary.overallTotal":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.reservationsTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.summary.equipmentTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.summary.crewTotal":"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.crewCostTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚","projects.details.summary.expensesTotal":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.servicesClientPrice":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.details.summary.gross":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ","projects.details.summary.discount":"Ø§Ù„Ø®ØµÙ…","projects.details.summary.companyShare":"Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©","projects.details.summary.tax":"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)","projects.details.summary.grossAfterDiscount":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…","projects.details.summary.netProfit":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­","projects.details.summary.finalTotal":"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ","projects.details.labels.start":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©","projects.details.labels.end":"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©","projects.details.summary.title":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.details.description":"ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.paymentOverview.total":"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ","projects.details.paymentOverview.paid":"Ø§Ù„Ù…Ø¯ÙÙˆØ¹","projects.details.paymentOverview.percent":"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹","projects.details.paymentOverview.remaining":"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ","projects.closeModal.title":"ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.closeModal.subtitle":"ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ).","projects.closeModal.noteLabel":"ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ØºÙ„Ø§Ù‚","projects.closeModal.notePlaceholder":"Ù…Ø«Ø§Ù„: ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­...","projects.closeModal.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.closeModal.confirm":"ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.labels.days":"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…","projects.details.labels.crewCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.labels.equipmentCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.details.labels.reservationsCount":"Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.labels.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.chips.vatOn":"Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© 15Ùª","projects.details.chips.vatOff":"ØºÙŠØ± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.details.chips.reservations":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.chips.linkedReservation":"Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.chips.notLinkedReservation":"ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²","projects.details.noItems":"Ù„Ø§ ÙŠÙˆØ¬Ø¯","projects.details.quantity":"{qty} Ù‚Ø·Ø¹Ø©","projects.details.reservations.title":"Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©","projects.details.reservations.empty":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯.","projects.details.reservations.create":"â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·","projects.details.actions.edit":"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.delete":"ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.actions.exportExpenses":"ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Excel","projects.details.actions.exportShotList":"ğŸ¬ ØªØµØ¯ÙŠØ± Ø§Ù„Ø´ÙˆØª Ù„ÙŠØ³Øª","projects.details.actions.exportCallSheet":"ğŸ“ ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙˆÙ„ Ø´ÙŠØª","projects.details.actions.exportPdf":"Ø¹Ø±Ø¶ Ø³Ø¹Ø±","projects.details.reservations.view":"Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¬Ø²","projects.details.reservations.count":"{count} Ø­Ø¬ÙˆØ²Ø§Øª","projects.details.reservations.itemsCount":"{count} Ù…Ø¹Ø¯Ø©","projects.details.reservations.crewCount":"{count} Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ù…","projects.details.edit.heading":"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.details.edit.subheading":"Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø«Ù… Ø§Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.","projects.details.edit.save":"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª","projects.details.edit.cancel":"Ø¥Ù„ØºØ§Ø¡","projects.quote.sections.customer":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„","projects.quote.sections.project":"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹","projects.quote.sections.expenses":"Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.quote.sections.crew":"Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„","projects.quote.sections.financial":"Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ","projects.quote.sections.equipment":"Ø§Ù„Ù…Ø¹Ø¯Ø§Øª","projects.quote.sections.notes":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"},en:{"projects.pageTitle":"Project Management - Rental System","projects.form.labels.expenseNote":"Notes","projects.form.placeholders.expenseNote":"Additional details for this service/expense","projects.templates.placeholders.saveTitle":"Template name","projects.nav.brand":"Rental System","projects.nav.projects":"Projects","projects.nav.customers":"Clients","projects.nav.technicians":"Crew","projects.hero.title":"Projects Management","projects.hero.subtitle":"Create and coordinate projects, assign crew and equipment, and track expenses.","projects.form.title":"Create New Project","projects.form.labels.type":"Project Type","projects.form.labels.title":"Project Name","projects.form.labels.client":"Client","projects.form.labels.clientCompany":"Client Company","projects.form.labels.paymentStatus":"Payment Status","projects.form.labels.startDate":"ğŸ“… Start Date","projects.form.labels.startTime":"â° Start Time","projects.form.labels.endDate":"ğŸ“… End Date","projects.form.labels.endTime":"â° End Time","projects.form.labels.description":"Project Details","projects.form.labels.technician":"Add Crew Member","projects.form.labels.equipment":"Add Equipment","projects.form.labels.quantity":"Quantity","projects.form.labels.expenses":"Production services","projects.form.labels.expenseLabel":"Expense Name","projects.form.labels.expenseAmount":"Amount (SR)","projects.form.labels.servicesClientTotal":"Sales total","projects.form.labels.salePrice":"Sale price","projects.form.placeholders.expenseAmount":"Amount","projects.form.placeholders.salePrice":"Sale price","projects.expenses.table.headers.service":"Service","projects.expenses.table.headers.cost":"Cost (SR)","projects.expenses.table.headers.sale":"Sale price (SR)","projects.expenses.table.headers.note":"Notes","projects.expenses.table.headers.actions":"Actions","projects.expenses.table.totalSale":"Sales total","projects.form.placeholders.title":"Example: New product shoot","projects.form.placeholders.description":"Project brief and requirements","projects.form.placeholders.type":"Choose a project type","projects.form.placeholders.clientCompany":"Auto-filled from client record","projects.form.placeholders.startDate":"Select the start date","projects.form.placeholders.startTime":"Select the start time","projects.form.placeholders.endDate":"Select the end date (optional)","projects.form.placeholders.endTime":"Select the end time (optional)","projects.form.placeholders.client":"Type the client name...","projects.form.placeholders.expenseLabel":"Example: Location permit or extra gear","projects.form.linkedReservation.title":"Create Linked Reservation","projects.form.linkedReservation.description":"Create a reservation for this project and we'll pre-fill the matching details.","projects.form.linkedReservation.button":"â• Create Linked Reservation","projects.form.linkedReservation.missingClient":"âš ï¸ Please select the client before creating the linked reservation.","projects.form.linkedReservation.missingSchedule":"âš ï¸ Please provide both start and end date/time before creating the linked reservation.","projects.form.linkedReservation.empty":"No linked reservations yet.","projects.form.linkedReservation.pendingItem":"This reservation will be linked automatically once the project is saved.","projects.form.linkedReservation.buttonDisabled":"A linked reservation was created. Manage further changes from the reservation itself.","projects.form.linkedReservation.meta.equipment":"Equipment count: {count}","projects.form.linkedReservation.meta.crew":"Crew count: {count}","projects.form.linkedReservation.meta.crewNames":"Crew names: {names}","projects.form.linkedReservation.meta.total":"Reservation total: {amount}","projects.form.labels.discount":"Discount","projects.form.labels.companyShare":"Company share & VAT","projects.form.labels.applyTax":"Apply VAT 15%","projects.form.discount.percent":"% Percent","projects.form.discount.amount":"ğŸ’µ Amount","projects.form.companyShareToggle":"Include company share (10%)","projects.form.selectClient":"Select client","projects.form.selectTechnician":"Select crew member","projects.form.selectEquipment":"Select equipment","projects.form.types.commercial":"Commercial shoot","projects.form.types.coverage":"Event coverage","projects.form.types.photography":"Photography","projects.form.types.social":"Social media content","projects.form.types.unknown":"Unspecified type","projects.form.buttons.addTechnician":"â• Add to Crew","projects.form.buttons.addEquipment":"â• Add to Project","projects.form.buttons.addExpense":"â• Add Expense","projects.form.buttons.save":"ğŸ†• Create Project","projects.form.buttons.update":"ğŸ” Update Project","projects.form.taxLabel":"Include VAT (15%)","projects.form.paymentStatus.paid":"Paid","projects.form.paymentStatus.unpaid":"Unpaid","projects.form.paymentStatus.partial":"Partially Paid","projects.form.paymentProgress.label":"ğŸ’° Received Payment","projects.form.paymentProgress.amount":"ğŸ’µ Amount","projects.form.paymentProgress.percent":"% Percent","projects.form.paymentProgress.placeholder":"0","projects.form.paymentProgress.hint":"Enter the amount or percentage received from the project total","projects.paymentStatus.paid":"Paid","projects.paymentStatus.unpaid":"Unpaid","projects.paymentStatus.partial":"Partially Paid","projects.selected.emptyTechnicians":"No crew members selected yet","projects.selected.emptyEquipment":"No equipment selected","projects.selected.emptyExpenses":"No expenses recorded","projects.summary.title":"Quick Overview","projects.summary.totalProjects":"Total Projects","projects.summary.upcoming":"Upcoming Projects","projects.summary.expenses":"Total Expenses","projects.summary.budget":"Estimated Value (with VAT)","projects.focus.title":"ğŸ“Œ Focus Projects","projects.focus.legend":"Tap a card to review details or jump to editing.","projects.focus.today":"Today's Projects","projects.focus.thisWeek":"This Week","projects.focus.upcoming":"Upcoming Projects","projects.focus.recent":"Latest Projects","projects.focus.empty":"No projects scheduled for today or this week.","projects.focus.view":"View details","projects.focus.edit":"Edit","projects.focus.actions.confirm":"âœ”ï¸ Confirm project","projects.focus.confirmed":"âœ… Project confirmed","projects.focus.summary.project":"Project summary","projects.focus.summary.reservations":"Linked reservations","projects.focus.summary.payment":"Financial summary","projects.focus.summary.range":"Date range","projects.focus.summary.time":"Time","projects.focus.toastNotFound":"âš ï¸ Could not find this project in the list","projects.toast.linkReservationFailed":"âš ï¸ Unable to link some reservations to the project. Please review them manually.","projects.toast.companyShareRequiresTax":"âš ï¸ Company share requires VAT to be enabled first.","projects.timeline.title":"Projects Timeline","projects.timeline.legend":"The bar shows project start and end, with colors reflecting status.","projects.timeline.legend.upcoming":"Upcoming","projects.timeline.legend.ongoing":"In Progress","projects.timeline.legend.completed":"Completed","projects.timeline.legend.conflict":"Conflict","projects.timeline.empty":"No projects with valid schedule to display.","projects.timeline.conflict":"Scheduling conflict","projects.timeline.range":"{start} â†’ {end}","projects.search.title":"Quick Search","projects.search.placeholder":"Search by project name or client","projects.subtabs.create":"Create Project","projects.subtabs.list":"My Projects","projects.subtabs.reports":"Project Reports","projects.subtabs.expenses":"Project Expenses","projects.subtabs.templates":"Templates","projects.templates.title":"Templates (A4)","projects.templates.subtitle":"Bind a project/reservation, edit fields, and print PDF.","projects.templates.labels.project":"ğŸ“ Project","projects.templates.labels.reservation":"ğŸ”— Reservation (optional)","projects.templates.labels.type":"ğŸ“„ Template type","projects.templates.types.expenses":"Expenses Sheet (A4 Portrait)","projects.templates.types.callsheet":"Call Sheet (A4 Landscape)","projects.templates.types.shotlist":"Shot List (A4 Landscape)","projects.templates.actions.refresh":"Refresh","projects.templates.actions.print":"ğŸ–¨ï¸ Print PDF","projects.templates.actions.toggle":"â‹¯ Actions","projects.templates.actions.save":"ğŸ’¾ Save","projects.templates.actions.saveCopy":"ğŸ“ Save as copy","projects.templates.actions.fromReservation":"ğŸ“… From reservation","projects.templates.actions.rename":"âœï¸ Rename","projects.templates.actions.delete":"ğŸ—‘ï¸ Delete","projects.templates.actions.export":"â¬‡ï¸ Export","projects.templates.actions.exportExcel":"â¬‡ï¸ Export Excel","projects.templates.actions.import":"â¬†ï¸ Import","projects.templates.noReservation":"â€” None â€”","projects.templates.empty":"Select a project to start building templates.","projects.templates.expenses.title":"Expenses Sheet","projects.templates.callsheet.title":"Call Sheet","projects.templates.callsheet.contacts":"Key Contacts","projects.templates.callsheet.schedule":"Day Schedule","projects.templates.shotlist.title":"Shot List","projects.table.title":"Projects List","projects.table.count":"{count} project","projects.table.reservationsCount":"{count} reservations","projects.table.headers.project":"Project","projects.table.headers.client":"Client","projects.table.headers.period":"Schedule","projects.table.headers.crew":"Crew","projects.table.headers.equipment":"Equipment","projects.table.headers.total":"Total (with VAT)","projects.table.headers.expenses":"Expenses (SR)","projects.table.emptyInitial":"No projects have been created yet.","projects.table.emptyFiltered":"No matching projects found.","projects.modal.title":"Project Details","projects.details.overview.heading":"Project Information","projects.details.labels.clientPhone":"Client phone","projects.details.labels.clientEmail":"Email","projects.details.client.noPhone":"No phone available","projects.details.client.noEmail":"No email available","projects.reports.pageTitle":"Project Reports - Rental System","projects.reports.title":"Project Reporting Dashboard","projects.reports.subtitle":"Detailed analytics for project performance, deadlines, and completion rates.","projects.reports.filters.search":"Search","projects.reports.filters.searchPlaceholder":"Search by project or client name","projects.reports.filters.status":"Project status","projects.reports.filters.payment":"Payment status","projects.reports.filters.paymentAll":"All payments","projects.reports.filters.paymentPaid":"Paid","projects.reports.filters.paymentPartial":"Partially paid","projects.reports.filters.paymentUnpaid":"Unpaid","projects.reports.filters.dateRange":"Date range","projects.reports.filters.range.all":"All time","projects.reports.filters.range.30":"Last 30 days","projects.reports.filters.range.90":"Last 90 days","projects.reports.filters.range.365":"Last year","projects.reports.filters.range.custom":"Custom range","projects.reports.filters.start":"From","projects.reports.filters.end":"To","projects.reports.filters.refresh":"Refresh","projects.reports.charts.status":"Status distribution","projects.reports.charts.statusHint":"Share of projects per execution status","projects.reports.charts.timeline":"Revenue over time","projects.reports.charts.timelineHint":"Total project value by month","projects.reports.charts.expenses":"Expenses vs. value","projects.reports.charts.expensesHint":"Compare spend against total project value","projects.reports.charts.clients":"Top clients","projects.reports.charts.clientsHint":"Highest clients by project value","projects.reports.noData":"No data available","projects.reports.loading.chart":"Refreshing chartâ€¦","projects.reports.table.title":"Project list","projects.reports.table.columns.project":"Project","projects.reports.table.columns.client":"Client","projects.reports.table.columns.status":"Status","projects.reports.table.columns.period":"Period","projects.reports.table.columns.value":"Value","projects.reports.table.columns.payment":"Payment","projects.reports.table.sortable":"Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØ±Ø²","projects.reports.table.sort.asc":"ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ","projects.reports.table.sort.desc":"ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ","projects.reports.filters.confirmed.label":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯","projects.reports.filters.confirmed.all":"Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯: Ø§Ù„ÙƒÙ„","projects.reports.filters.confirmed.yes":"Ù…Ø¤ÙƒØ¯","projects.reports.filters.confirmed.no":"ØºÙŠØ± Ù…Ø¤ÙƒØ¯","projects.reports.table.columns.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.actions.exportExcel":"ØªØµØ¯ÙŠØ± Excel","projects.reports.kpi.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.kpi.marginMeta":"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ã· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©","projects.reports.kpi.netProfitMeta":"Ù…Ø¬Ù…ÙˆØ¹ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©","projects.reports.kpi.totalValue":"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ","projects.reports.kpi.unpaidValue":"Ù‚ÙŠÙ…Ø© ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©","projects.reports.kpi.expenses":"ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.servicesProfit":"Ø±Ø¨Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©","projects.reports.kpi.revenue.details.margin":"Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­","projects.reports.table.empty":"No projects match the current filters.","projects.reports.table.meta":"Showing {count} of {total} projects","projects.reports.kpi.totalProjects":"Total projects","projects.reports.kpi.totalProjectsMeta":"After applying the current filters","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.totalValueMeta":"Includes projects, linked reservations, and VAT","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.unpaidValueMeta":"Projects not fully paid yet","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.expensesMeta":"Expenses for included projects","projects.reports.datasets.value":"Total value","projects.reports.datasets.expenses":"Expenses","projects.expenses.pageTitle":"Project Expenses - Rental System","projects.expenses.title":"Manage Project Expenses","projects.expenses.subtitle":"Track expenses linked to bookings and projects with full invoicing visibility.","projects.expenses.placeholder":"A dedicated board for linking project expenses to bookings is coming soon.","projects.expenses.placeholderHint":"Prepare invoices and categories now to accelerate the upcoming release.","projects.expenses.actions.addExpense":"â• Add expense","projects.expenses.actions.importInvoice":"ğŸ§¾ Upload invoice","projects.expenses.actions.export":"â¬‡ï¸ Export","projects.expenses.kpi.total":"Total expenses","projects.expenses.kpi.total.meta":"Expenses recorded during the current period","projects.expenses.kpi.pending":"Pending approval","projects.expenses.kpi.pending.meta":"Expenses awaiting financial manager approval","projects.expenses.kpi.approved":"Approved","projects.expenses.kpi.approved.meta":"Latest expenses that were approved","projects.expenses.kpi.average":"Average per project","projects.expenses.kpi.average.meta":"Estimated value based on active projects","projects.expenses.breakdown.title":"Expenses by category","projects.expenses.breakdown.hint":"Track spend on equipment, crew, and logistics.","projects.expenses.breakdown.empty":"No categorized expenses recorded yet.","projects.expenses.timeline.title":"Expenses over time","projects.expenses.timeline.hint":"Review spend across recent months to spot trends.","projects.expenses.timeline.empty":"Add expenses to unlock the interactive timeline.","projects.expenses.table.title":"Detailed expense ledger","projects.expenses.table.hint":"Review project expenses together with approval status.","projects.expenses.table.columns.project":"Project","projects.expenses.table.columns.category":"Category","projects.expenses.table.columns.description":"Description","projects.expenses.table.columns.amount":"Amount","projects.expenses.table.columns.status":"Status","projects.expenses.table.columns.date":"Logged on","projects.expenses.table.empty":"Registered expenses will appear here as soon as you add them.","projects.toast.selectTechnician":"âš ï¸ Please select a crew member","projects.toast.technicianAlreadyAdded":"âš ï¸ Crew member already added","projects.toast.technicianAdded":"âœ… Crew member added","projects.toast.selectEquipment":"âš ï¸ Please select equipment","projects.toast.equipmentAdded":"âœ… Equipment added to project","projects.toast.missingExpenseLabel":"âš ï¸ Please enter an expense description","projects.toast.invalidExpenseAmount":"âš ï¸ Please enter a valid amount","projects.toast.customerNotFound":"âš ï¸ Client name not found. Please select an existing client.","projects.toast.missingRequiredFields":"âš ï¸ Please fill in the required fields","projects.toast.invalidDateRange":"âš ï¸ End date must be after the start date","projects.toast.saved":"âœ… Project saved successfully","projects.toast.editReady":"âœï¸ Project loaded for editing. Update the fields, then save.","projects.toast.updated":"âœ… Project updated successfully","projects.toast.editMissing":"âš ï¸ Unable to find the project you tried to edit","projects.toast.confirmed":"âœ… Project confirmed","projects.toast.alreadyConfirmed":"â„¹ï¸ Project already confirmed","projects.toast.deleted":"ğŸ—‘ï¸ Project deleted","projects.confirm.delete":"Are you sure you want to delete this project?","projects.fallback.unknownClient":"Unknown client","projects.fallback.unknownEquipment":"Equipment","projects.fallback.noDescription":"No description","projects.fallback.untitled":"Untitled project","projects.fallback.emptyList":"None","projects.fallback.technicianName":"Member {id}","projects.status.upcoming":"Upcoming","projects.status.ongoing":"In Progress","projects.status.completed":"Completed","projects.status.conflict":"Conflict","projects.status.cancelled":"Cancelled","projects.tag.closed":"Closed","projects.form.labels.cancelled":"Cancel project","projects.form.hints.cancelled":"Marks the project as cancelled and updates all linked reservations to cancelled.","projects.close.noteLabel":"Close note","projectCards.filters.search":"ğŸ” Search by project name or description...","projectCards.filters.status.all":"âš™ï¸ All statuses","projectCards.filters.status.upcoming":"ğŸ“… Upcoming projects","projectCards.filters.status.ongoing":"âš™ï¸ In-progress projects","projectCards.filters.status.completed":"âœ… Completed projects","projectCards.stats.crew":"ğŸ‘¥ Crew members: {count}","projectCards.stats.reservations":"ğŸ”— Reservations: {count}","projectCards.stats.client":"ğŸ‘¤ Client: {name}","projectCards.stats.type":"ğŸ·ï¸ Type: {label}","projectCards.stats.budget":"ğŸ’° Estimated budget (with VAT): {amount}","projectCards.stats.expenses":"ğŸ’¸ Expenses: {amount}","projectCards.stats.crewShort":"Crew","projectCards.stats.reservationsShort":"Reservations","projectCards.stats.budgetShort":"Project budget","projectCards.stats.expensesShort":"Total expenses","projectCards.stats.paymentStatus":"Payment status","projectCards.stats.equipmentCount":"Equipment count","projectCards.stats.crewCount":"Crew count","projectCards.stats.reservationValue":"Reservation total","projectCards.stats.servicesClientPrice":"Production services","projectCards.stats.expensesTotal":"Expenses total","projectCards.stats.reservationTotal":"Linked reservation total","projectCards.stats.taxTotal":"VAT","projectCards.stats.overallTotal":"Grand total","projectCards.groups.meta":"Project info","projectCards.groups.reservations":"Reservation snapshot","projectCards.groups.payment":"Payment summary","projectCards.meta.code":"Project ID","projectCards.meta.client":"Client","projectCards.meta.company":"Client company","projectCards.meta.type":"Project type","projectCards.meta.startDate":"Start date","projectCards.meta.endDate":"End date","projects.details.type":"Project type","projects.details.company":"Client company","projects.details.client":"Client","projects.details.crew":"Crew ({count})","projects.details.equipment":"Equipment ({count})","projects.details.expenses":"Expenses ({amount})","projects.details.subtotal":"Subtotal before tax:","projects.details.tax":"VAT 15%:","projects.details.total":"Total with VAT:","projects.details.labels.projectTitle":"Project Name","projects.details.labels.code":"Project ID","projects.details.summary.projectSubtotal":"Project total","projects.details.summary.paymentStatus":"Payment status","projects.details.summary.projectTax":"Project VAT (15%)","projects.details.summary.projectTotal":"Project total (after VAT)","projects.details.summary.reservationsTotal":"Equipment / crew total","projects.details.summary.combinedTax":"Total VAT on combined amount (15%)","projects.details.summary.reservationsCount":"{count} linked reservations","projects.details.summary.overallTotal":"Overall total","projects.details.expensesTotal":"Production services cost","projects.details.reservationsTotal":"Total reservations","projects.details.summary.equipmentTotal":"Equipment total","projects.details.summary.crewTotal":"Crew total","projects.details.summary.crewCostTotal":"Crew cost","projects.details.summary.expensesTotal":"Production services cost","projects.details.summary.servicesClientPrice":"Production services","projects.details.summary.gross":"Gross","projects.details.summary.discount":"Discount","projects.details.summary.companyShare":"Company share","projects.details.summary.tax":"VAT (15%)","projects.details.summary.grossAfterDiscount":"Total after discount","projects.details.summary.netProfit":"Net profit","projects.details.summary.finalTotal":"Final total","projects.details.labels.start":"Start date","projects.details.labels.end":"End date","projects.details.summary.title":"Financial summary","projects.details.description":"Project description","projects.details.paymentOverview.total":"Overall total","projects.details.paymentOverview.paid":"Paid","projects.details.paymentOverview.percent":"Paid %","projects.details.paymentOverview.remaining":"Remaining","projects.closeModal.title":"ğŸ”’ Close Project","projects.closeModal.subtitle":"Please add a closing note (optional).","projects.closeModal.noteLabel":"ğŸ“ Closing notes","projects.closeModal.notePlaceholder":"e.g., Project successfully completed...","projects.closeModal.cancel":"Cancel","projects.closeModal.confirm":"ğŸ”’ Close Project","projects.details.labels.days":"Days","projects.details.labels.crewCount":"Crew count","projects.details.labels.equipmentCount":"Equipment quantity","projects.details.labels.reservationsCount":"Reservations count","projects.details.labels.notes":"Project notes","projects.details.chips.vatOn":"VAT enabled 15%","projects.details.chips.vatOff":"VAT disabled","projects.details.chips.reservations":"{count} reservations","projects.details.chips.linkedReservation":"Linked to reservation","projects.details.chips.notLinkedReservation":"Not linked to reservation","projects.details.noItems":"None","projects.details.quantity":"{qty} pcs","projects.details.reservations.title":"Linked reservations","projects.details.reservations.empty":"No reservations linked to this project yet.","projects.details.reservations.create":"â• Create linked reservation","projects.details.reservations.view":"View reservation","projects.details.actions.edit":"âœï¸ Edit Project","projects.details.actions.delete":"ğŸ—‘ï¸ Delete Project","projects.details.actions.exportExpenses":"ğŸ“Š Export Expenses (Excel)","projects.details.actions.exportShotList":"ğŸ¬ Export Shot List","projects.details.actions.exportCallSheet":"ğŸ“ Export Call Sheet","projects.details.actions.exportPdf":"Quote","projects.details.reservations.count":"{count} reservations","projects.details.reservations.itemsCount":"{count} item(s)","projects.details.reservations.crewCount":"{count} crew member(s)","projects.details.edit.heading":"Edit Project","projects.details.edit.subheading":"Update the project details, then save your changes.","projects.details.edit.save":"ğŸ’¾ Save Changes","projects.details.edit.cancel":"Cancel","projects.quote.sections.customer":"Customer info","projects.quote.sections.project":"Project info","projects.quote.sections.expenses":"Production services","projects.quote.sections.crew":"Crew","projects.quote.sections.financial":"Financial summary","projects.quote.sections.equipment":"Equipment","projects.quote.sections.notes":"Project notes"}});Mt({en:{"projects.reports.filters.confirmed.label":"Confirmation","projects.reports.filters.confirmed.all":"Confirmation: All","projects.reports.filters.confirmed.yes":"Confirmed","projects.reports.filters.confirmed.no":"Unconfirmed","projects.reports.table.columns.margin":"Profit margin","projects.reports.actions.exportExcel":"Export Excel","projects.reports.kpi.margin":"Profit margin","projects.reports.kpi.marginMeta":"Net profit Ã· revenue (excl. VAT)","projects.reports.kpi.netProfitMeta":"Sum of net profit for selected projects","projects.reports.kpi.totalValue":"Gross revenue","projects.reports.kpi.unpaidValue":"Outstanding value","projects.reports.kpi.expenses":"Total expenses","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.servicesProfit":"Services profit","projects.reports.kpi.revenue.details.margin":"Profit margin","projects.reports.kpi.revenue.details.projectExpenses":"Project expenses","projects.reports.table.sortable":"Sortable","projects.reports.table.sort.asc":"Ascending","projects.reports.table.sort.desc":"Descending"}});function Es(){if(!Array.isArray(u.projects)||u.projects.length===0)return;let e=!1;const s=u.projects.map(r=>{if(r.projectCode)return r;const a=Bt();return e=!0,{...r,projectCode:a}});e&&(u.projects=s)}function Pr(){const{customers:e,technicians:s,equipment:r}=$e();u.customers=Array.isArray(e)?e:[],u.technicians=Array.isArray(s)?s:[],u.equipment=Array.isArray(r)?r:[],u.reservations=M(),u.projects=we(),Es()}function Ar(){if(Ns(),t.technicianSelect){const e=t.technicianSelect.value,s=i(o("projects.form.selectTechnician","Ø§Ø®ØªØ± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));t.technicianSelect.innerHTML=`<option value="">${s}</option>`+u.technicians.map(r=>{const a=o("projects.fallback.technicianName","Ø¹Ø¶Ùˆ {id}"),n=r.name||a.replace("{id}",h(String(r.id||"")));return`<option value="${r.id}">${i(n)}</option>`}).join(""),e&&(t.technicianSelect.value=e)}if(t.equipmentSelect){const e=t.equipmentSelect.value,s=i(o("projects.form.selectEquipment","Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¹Ø¯Ø©"));t.equipmentSelect.innerHTML=`<option value="">${s}</option>`+u.equipment.map(r=>{const a=r.desc||r.description||r.name||o("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©");return`<option value="${i(r.barcode||"")}">${i(a)}</option>`}).join(""),e&&(t.equipmentSelect.value=e)}}function Re(e){if(!t.clientCompany)return;const s=e?.companyName||e?.company||"";t.clientCompany.value=s}function Ns(){if(!t.client)return;Is();const e=t.client.dataset?.customerId;if(e){const s=u.customers.find(r=>String(r.id)===String(e));s?Re(s):(t.client.dataset.customerId="",Re(null))}else Re(null);document.activeElement===t.client&&gt()}function Is(){!t.client||!t.clientSuggestions||t.client.dataset.autocompleteAttached!=="true"&&(t.client.addEventListener("input",()=>{t.client.dataset.customerId="",gt(),Re(null)}),t.client.addEventListener("focus",()=>{gt()}),t.client.addEventListener("blur",()=>{window.setTimeout(()=>Ye(),150)}),t.client.dataset.autocompleteAttached="true")}function Ye(){t.clientSuggestions&&(t.clientSuggestions.classList.remove("is-visible"),t.clientSuggestions.hidden=!0,t.clientSuggestions.innerHTML="")}function gt(){if(!t.client||!t.clientSuggestions)return;if(!Array.isArray(u.customers)||u.customers.length===0){const a=$e();Array.isArray(a?.customers)&&a.customers.length&&(u.customers=a.customers)}const e=$s(),s=Me(t.client.value||""),r=s?e.filter(a=>{const n=Me(a.name).includes(s),c=Me(a.company||"").includes(s);return n||c}).slice(0,10):e.slice(0,10);if(!r.length){Ye();return}t.clientSuggestions.innerHTML=r.map(a=>{const n=a.company?`<div class="suggestion-item__meta">${i(a.company)}</div>`:"";return`
        <div class="suggestion-item" data-id="${i(String(a.id))}" data-name="${i(a.name)}" data-company="${i(a.company||"")}">
          <div class="suggestion-item__primary">${i(a.name)}</div>
          ${n}
        </div>
      `}).join(""),t.clientSuggestions.hidden=!1,t.clientSuggestions.classList.add("is-visible"),t.clientSuggestions.scrollTop=0,t.clientSuggestions.querySelectorAll(".suggestion-item").forEach(a=>{a.addEventListener("mousedown",n=>{n.preventDefault();const{id:c,name:l}=n.currentTarget.dataset;t.client&&(t.client.value=l||"",t.client.dataset.customerId=c||"");const p=n.currentTarget.dataset.company||"";Re({companyName:p}),Ye()})})}function $s(){return Array.isArray(u.customers)?u.customers.map(e=>{const s=(e.customerName||e.name||"").trim();return s?{id:e.id,name:s,company:(e.companyName||e.company||"").trim()}:null}).filter(Boolean):[]}function Ls(e,s=""){if(!Array.isArray(u.customers)||u.customers.length===0)return null;if(s){const n=u.customers.find(c=>String(c.id)===String(s));if(n)return n}const r=Me(e||"");if(!r)return null;const a=u.customers.find(n=>Me(n.customerName||n.name||"")===r);return a||u.customers.find(n=>Me(n.customerName||n.name||"").includes(r))||null}function qs(){return typeof window<"u"&&typeof window.flatpickr=="function"?window.flatpickr.bind(window):typeof globalThis<"u"&&typeof globalThis.flatpickr=="function"?globalThis.flatpickr.bind(globalThis):null}function Tr(){t.form=document.getElementById("project-form"),t.title=document.getElementById("project-title"),t.type=document.getElementById("project-type"),t.client=document.getElementById("project-client"),t.clientSuggestions=document.getElementById("project-customer-suggestions"),t.clientCompany=document.getElementById("project-client-company"),t.paymentStatus=document.getElementById("project-payment-status"),t.startDate=document.getElementById("project-start-date"),t.startTime=document.getElementById("project-start-time"),t.endDate=document.getElementById("project-end-date"),t.endTime=document.getElementById("project-end-time"),t.description=document.getElementById("project-description"),t.technicianSelect=document.getElementById("project-technician-select"),t.addTechnicianBtn=document.getElementById("add-technician-btn"),t.technicianList=document.getElementById("project-technician-list"),t.equipmentSelect=document.getElementById("project-equipment-select"),t.equipmentQty=document.getElementById("project-equipment-qty"),t.addEquipmentBtn=document.getElementById("add-equipment-btn"),t.equipmentList=document.getElementById("project-equipment-list"),t.expenseLabel=document.getElementById("project-expense-label"),t.expenseAmount=document.getElementById("project-expense-amount"),t.expenseNote=document.getElementById("project-expense-note"),t.addExpenseBtn=document.getElementById("add-expense-btn"),t.expenseList=document.getElementById("project-expense-list"),t.servicesClientTotalIndicator=document.getElementById("project-services-client-total-indicator"),t.servicesClientTotalValue=document.getElementById("project-services-client-total-value"),t.discountType=document.getElementById("project-discount-type"),t.discountValue=document.getElementById("project-discount"),t.servicesClientPrice=document.getElementById("project-services-client-price"),t.paymentAddButton=document.getElementById("project-payment-add"),t.paymentHistory=document.getElementById("project-payment-history"),t.companyShare=document.getElementById("project-company-share"),t.paymentProgressType=document.getElementById("project-payment-progress-type"),t.paymentProgressValue=document.getElementById("project-payment-progress-value"),t.taxCheckbox=document.getElementById("project-tax"),t.linkedReservationBtn=document.getElementById("project-linked-reservation-btn"),t.submitBtn=t.form?.querySelector('[type="submit"]'),t.projectsTableBody=document.getElementById("project-table-body"),t.projectsCount=document.getElementById("projects-count"),t.projectsUpcoming=document.getElementById("projects-upcoming"),t.projectsExpenses=document.getElementById("projects-expenses"),t.projectsBudget=document.getElementById("projects-budget"),t.tableCount=document.getElementById("project-table-count"),t.search=document.getElementById("project-search"),t.detailsModalEl=document.getElementById("projectDetailsModal"),t.detailsBody=document.getElementById("project-details-body"),t.tabButtons=Array.from(document.querySelectorAll(".tab-button[data-tab-target]")),t.tabPanes=Array.from(document.querySelectorAll("[data-tab-pane]")),t.projectSubTabButtons=Array.from(document.querySelectorAll(".sub-tab-button[data-project-subtab-target]")),t.projectSubTabPanes=Array.from(document.querySelectorAll("[data-project-subtab]")),t.timeline=document.getElementById("project-timeline"),t.focusCards=document.getElementById("project-focus-cards"),t.detailsModalEl&&!t.detailsModalEl.dataset.projectListenerAttached&&(t.detailsModalEl.addEventListener("hidden.bs.modal",()=>{t.detailsBody&&(t.detailsBody.dataset.projectId="")}),t.detailsModalEl.dataset.projectListenerAttached="true")}function Cr(){const e=qs();if(!e)return;["#project-start-date","#project-end-date","#project-start-time","#project-end-time"].forEach(l=>{const p=document.querySelector(l);if(p){try{p.setAttribute("autocomplete","off")}catch{}try{p.setAttribute("autocapitalize","off")}catch{}try{p.setAttribute("autocorrect","off")}catch{}try{p.setAttribute("spellcheck","false")}catch{}}});const s=[["#project-start-date",{dateFormat:"Y-m-d",allowInput:!0}],["#project-end-date",{dateFormat:"Y-m-d",allowInput:!0}]],r=[["#project-start-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}],["#project-end-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}]];[...s,...r].forEach(([l,p])=>{const d=document.querySelector(l);d&&e(d,p)});const a=l=>{if(l==null)return"";const p=["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"],d=["Û°","Û±","Û²","Û³","Û´","Ûµ","Û¶","Û·","Û¸","Û¹"],b=["0","1","2","3","4","5","6","7","8","9"];return String(l).split("").map(m=>{const y=p.indexOf(m);if(y>-1)return b[y];const S=d.indexOf(m);return S>-1?b[S]:m}).join("")},n=l=>{if(!l||l.dataset.normalizedDigits==="true")return;const p=()=>{const d=l.value||"",b=a(d);if(b!==d){const m=l.selectionStart,y=l.selectionEnd;l.value=b;try{if(typeof m=="number"&&typeof y=="number"){const S=b.length-d.length;l.setSelectionRange(Math.max(0,m+S),Math.max(0,y+S))}}catch{}}};l.addEventListener("input",p),l.addEventListener("blur",p);try{l.setAttribute("inputmode","numeric")}catch{}l.dataset.normalizedDigits="true"};n(t.startDate),n(t.endDate),n(t.startTime),n(t.endTime),t.startTime&&t.startTime._flatpickr?.altInput&&n(t.startTime._flatpickr.altInput),t.endTime&&t.endTime._flatpickr?.altInput&&n(t.endTime._flatpickr.altInput);const c=l=>{if(!l)return;const p=l._flatpickr,d=()=>{try{if(!p)return;const b=p.altInput&&typeof p.altInput.value=="string"?p.altInput.value.trim():"",m=typeof l.value=="string"?l.value.trim():"",y=b||m;if(!y)return;const S=b?p.config.altFormat:p.config.dateFormat,$=p.parseDate(y,S)||p.parseDate(y);$&&p.setDate($,!0)}catch{}};l.addEventListener("blur",d),p?.altInput&&p.altInput.addEventListener("blur",d)};c(t.startTime),c(t.endTime)}function Ot(){["startDate","startTime","endDate","endTime"].forEach(e=>{const s=t[e];s&&(s._flatpickr?s._flatpickr.clear():s.value="")})}function wr(){const e=document.getElementById("logout-btn");e&&!e.dataset.listenerAttached&&(e.addEventListener("click",()=>ls()),e.dataset.listenerAttached="true")}async function Ut(e){if(u.projects.findIndex(n=>String(n.id)===String(e))===-1)return;let r=0;try{r=(M()||[]).filter(c=>String(c.projectId)===String(e)).length}catch{}const a=r>0?o("projects.confirm.deleteCascade",`âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡ (${r}). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`):o("projects.confirm.delete","Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ");if(window.confirm(a))try{try{const c=(M()||[]).filter(l=>String(l.projectId)===String(e));for(const l of c){const p=l.id??l.reservationId??l.reservation_code;if(p)try{await fs(p)}catch(d){console.warn("âš ï¸ failed to delete linked reservation",p,d)}}}catch{}await us(e),await Pt(),await Ct(),u.projects=we(),u.reservations=M(),fe(),ke(),Ie(),document.dispatchEvent(new CustomEvent("projects:changed")),document.dispatchEvent(new CustomEvent("reservations:changed")),g(o("projects.toast.deleted","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡"))}catch(n){console.error("âŒ [projects] removeProject failed",n);const c=at(n)?n.message:o("projects.toast.deleteFailed","ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(c,"error")}}async function Rs(e,{start:s=null,end:r=null}={}){if(!e)return!1;const n=M().filter(p=>String(p.projectId)===String(e));if(!n.length)return!1;let c=!1,l=0;for(const p of n){const d=p.id??p.reservationId;if(!d)continue;const b=String(p.status||"").toLowerCase();if(b==="completed"||b==="cancelled"||b==="canceled")continue;const m={};if(s&&(m.start_datetime=s),r&&(m.end_datetime=r),Object.keys(m).length!==0)try{await De(d,m),c=!0,l+=1}catch(y){console.warn("[projects] failed to update linked reservation schedule",d,y)}}if(c){u.reservations=M();try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const p=o("projects.toast.linkedReservationsScheduleUpdated","ØªÙ… ØªØ­Ø¯ÙŠØ« ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© ({count})","Updated linked reservations timing ({count})").replace("{count}",String(l));g(p)}catch{}}return c}async function Ds(e,s){if(!e)return!1;const a=M().filter(d=>String(d.projectId)===String(e));if(!a.length)return!1;const n=typeof s=="string"?s.toLowerCase():"unpaid",c=n==="paid",l=c?"paid":n==="partial"?"partial":"unpaid";let p=!1;for(const d of a){const b=d.id??d.reservationId;if(!b)continue;const m=d.paid===!0||d.paid==="paid",y=d.paidStatus||d.paymentStatus||(m?"paid":"unpaid");m===c&&y===l||(await De(b,{paid_status:l,paid:c}),p=!0)}return p&&(u.reservations=M()),p}async function _s(e){if(!e)return!1;const s=M(),r=u.projects.find(c=>String(c.id)===String(e))||($e().projects||[]).find?.(c=>String(c.id)===String(e))||null,a=s.filter(c=>String(c.projectId)===String(e));if(!a.length)return!1;let n=!1;for(const c of a){const l=c.id??c.reservationId;if(!l)continue;const p=ys({...c,projectId:e},r);if(p.effectiveConfirmed)continue;const d=r?.status??p.projectStatus??"confirmed";await De(l,{confirmed:!0,status:d}),n=!0}return n&&(u.reservations=M()),n}async function xt(e,s){if(!e)return!1;const r=await Ds(e,s);return r&&document.dispatchEvent(new CustomEvent("reservations:changed")),r}async function Fs(e){if(!e)return!1;const r=M().filter(n=>String(n.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const n of r){const c=n.id??n.reservationId;if(c)try{await De(c,{status:"cancelled",cancelled:!0}),a=!0}catch(l){console.warn("[projects] failed to cancel linked reservation",c,l)}}return a&&(u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}async function kt(e){if(!e)return!1;const r=M().filter(n=>String(n.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const n of r){const c=n.id??n.reservationId;if(c)try{await De(c,{status:"completed",confirmed:!0}),a=!0}catch(l){console.warn("[projects] failed to close linked reservation",c,l)}}return a&&(u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}async function Ms(e){if(!e)return!1;const r=M().filter(n=>String(n.projectId)===String(e));if(!r.length)return!1;let a=!1;for(const n of r){const c=n.id??n.reservationId;if(c)try{const l=String(n.status||"").toLowerCase();if(l==="cancelled"||l==="canceled")continue;await De(c,{status:"confirmed",confirmed:!0}),a=!0}catch(l){console.warn("[projects] failed to reopen linked reservation",c,l)}}return a&&(u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))),a}async function kr(){const e=we();if(!Array.isArray(e)||e.length===0)return!1;const s=new Date;let r=!1,a=0;for(const n of e)try{const c=String(n?.status||"").toLowerCase();if(c==="completed"||c==="closed"||c==="cancelled"||c==="canceled")continue;const l=n?.end?new Date(n.end):null;if(!l||Number.isNaN(l.getTime())||l>=s)continue;const p=o("projects.autoClose.note","Ø¥ØºÙ„Ø§Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),d=await At(n.projectId??n.id,p),b=d?.projectId??d?.id??n.id;await kt(b),r=!0,a+=1}catch(c){console.warn("[projects] autoCloseExpiredProjects failed for",n?.id,c)}if(r){try{await Pt()}catch{}try{await Ct()}catch{}try{document.dispatchEvent(new CustomEvent("projects:changed"))}catch{}try{document.dispatchEvent(new CustomEvent("reservations:changed"))}catch{}try{const n=o("projects.toast.autoClosed","ØªÙ… Ø¥ØºÙ„Ø§Ù‚ {count} Ù…Ø´Ø±ÙˆØ¹ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª").replace("{count}",String(a));g(n)}catch{}}return r}let bt=!1;const nt="projects:create:draft",Bs="projects.html#projects-section";let et=!1,Ce=[];function zt(e){return e?e instanceof HTMLElement?e:typeof e=="string"?document.getElementById(e):null:null}function Vs(e=t.companyShare){const s=zt(e);if(!s||s.checked!==!0)return null;const r=s.dataset.companyShare??s.value??ye,a=h(String(r).replace("%","").trim()),n=Number.parseFloat(a);return!Number.isFinite(n)||n<=0?ye:n}function Ke(e=t.companyShare,s=ye){const r=zt(e);if(!r)return;const a=r.dataset.companyShare??r.value??s,n=h(String(a).replace("%","").trim());let c=Number.parseFloat(n);(!Number.isFinite(c)||c<=0)&&(c=s),r.dataset.companyShare=String(c),r.checked=!0}function Je(e){const s=t.taxCheckbox,r=t.companyShare;if(!s||!r||et)return;et=!0;const a=()=>{g(o("projects.toast.companyShareRequiresTax","âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©"))};if(e==="share")if(r.checked){if(s.disabled){r.checked=!1,a(),et=!1;return}s.checked||(s.checked=!0),Ke(r)}else s.checked&&!s.disabled&&(s.checked=!1);else e==="tax"&&(s.checked?Ke(r):r.checked&&(r.checked=!1));et=!1}function Wt({equipmentEstimate:e=0,expensesTotal:s=0,servicesClientPrice:r=0,discountValue:a=0,discountType:n="percent",applyTax:c=!1,companyShareEnabled:l=!1,companySharePercent:p=null}={}){const d=Number(e)+Number(r),b=Number.isFinite(Number(a))?Number(a):0;let m=0;n==="amount"?m=b:m=d*(b/100),(!Number.isFinite(m)||m<0)&&(m=0),m>d&&(m=d);const y=Math.max(0,d-m),S=l&&c&&Number.isFinite(Number(p))&&Number(p)>0?Number(p):0,$=S>0?Number((y*(S/100)).toFixed(2)):0,E=y+$;let N=c?E*We:0;(!Number.isFinite(N)||N<0)&&(N=0),N=Number(N.toFixed(2));const L=Number((E+N).toFixed(2));return{baseSubtotal:d,discountAmount:m,subtotalAfterDiscount:y,companyShareAmount:$,taxableAmount:E,taxAmount:N,totalWithTax:L}}function Er(){t.form&&!t.form.dataset.listenerAttached&&(t.form.addEventListener("submit",Gs),t.form.dataset.listenerAttached="true"),t.form&&!t.form.dataset.resetListenerAttached&&(t.form.addEventListener("reset",()=>{t.client&&(t.client.dataset.customerId=""),Ye(),Ot(),t.type&&(t.type.value=""),Re(null),Zt(),Kt()}),t.form.dataset.resetListenerAttached="true"),Hs(),Os(),t.search&&!t.search.dataset.listenerAttached&&(t.search.addEventListener("input",()=>{u.filters.search=h(t.search.value||"").trim().toLowerCase(),fe()}),t.search.dataset.listenerAttached="true")}function Kt(){Ps(),u.editingProjectId=null,t.form&&(delete t.form.dataset.editingId,t.form.dataset.mode="create"),Be(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=""),u.servicesClientPriceTotal=0,t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.taxCheckbox&&(t.taxCheckbox.checked=!1),t.discountType&&(t.discountType.value="percent"),t.discountValue&&(t.discountValue.value=""),t.companyShare&&(t.companyShare.checked=!1,t.companyShare.dataset.companyShare=String(ye)),t.paymentStatus&&(t.paymentStatus.value="unpaid"),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected,t.paymentProgressType&&(t.paymentProgressType.value="percent"),t.paymentProgressValue&&(t.paymentProgressValue.value=""),Ce=[],t.paymentHistory&&(t.paymentHistory.innerHTML=""),Xt(),Qe(),Je("tax"),Ve()}function Nr(){t.addTechnicianBtn&&t.addTechnicianBtn.dataset.listenerAttached!=="true"&&(t.addTechnicianBtn.addEventListener("click",Us),t.addTechnicianBtn.dataset.listenerAttached="true"),t.addEquipmentBtn&&t.addEquipmentBtn.dataset.listenerAttached!=="true"&&(t.addEquipmentBtn.addEventListener("click",zs),t.addEquipmentBtn.dataset.listenerAttached="true")}function Ir(){vt(t.technicianList,e=>{if(e.matches('[data-action="remove-technician"]')){const s=e.dataset.id;u.selectedTechnicians=u.selectedTechnicians.filter(r=>r!==s),Jt()}}),vt(t.equipmentList,e=>{if(e.matches('[data-action="remove-equipment"]')){const s=e.dataset.id;u.selectedEquipment=u.selectedEquipment.filter(r=>r.barcode!==s),Yt()}}),vt(t.expenseList,e=>{if(e.matches('[data-action="remove-expense"]')){const s=e.dataset.id;u.expenses=u.expenses.filter(r=>String(r.id)!==String(s)),Qt(),ke(),es(),Ve()}})}function Hs(){t.discountValue&&t.discountValue.dataset.listenerAttached!=="true"&&(t.discountValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=h(s.value||""))}),t.discountValue.dataset.listenerAttached="true"),t.companyShare&&t.companyShare.dataset.listenerAttached!=="true"&&(t.companyShare.addEventListener("change",()=>{Je("share")}),t.companyShare.dataset.listenerAttached="true"),t.taxCheckbox&&t.taxCheckbox.dataset.projectListenerAttached!=="true"&&(t.taxCheckbox.addEventListener("change",()=>{Je("tax")}),t.taxCheckbox.dataset.projectListenerAttached="true"),t.paymentStatus&&t.paymentStatus.dataset.billingListenerAttached!=="true"&&(t.paymentStatus.addEventListener("change",()=>{t.paymentStatus.dataset.userSelected="true"}),t.paymentStatus.dataset.billingListenerAttached="true"),t.paymentProgressValue&&t.paymentProgressValue.dataset.listenerAttached!=="true"&&(t.paymentProgressValue.addEventListener("input",e=>{const s=e.target;s instanceof HTMLInputElement&&(s.value=h(s.value||""))}),t.paymentProgressValue.dataset.listenerAttached="true"),t.servicesClientPrice&&t.servicesClientPrice.dataset.normalizeAttached!=="true"&&(t.servicesClientPrice.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const r=s.selectionStart,a=h(s.value||"");if(s.value=a,r!=null){const n=Math.min(a.length,r);s.setSelectionRange(n,n)}}),t.servicesClientPrice.dataset.normalizeAttached="true"),Je(t.companyShare?.checked?"share":"tax"),Ve()}function qt(){const e=t.paymentHistory;if(!e)return;const s=Array.isArray(Ce)?Ce:[];if(!s.length){e.innerHTML=`<div class="reservation-payment-history__empty">${i(o("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;return}const r=s.map((a,n)=>{const c=Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?w(Number(a.amount)):"â€”",l=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${h(Number(a.percentage).toFixed(2))}%`:"â€”",p=a?.recordedAt?h(ot(a.recordedAt)):"â€”",d=a?.type==="percent"?o("reservations.paymentHistory.type.percent","Ùª Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):o("reservations.paymentHistory.type.amount","ğŸ’µ Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©");return`
      <tr>
        <td>${i(d)}</td>
        <td>${i(c)}</td>
        <td>${i(l)}</td>
        <td>${i(p)}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${n}" aria-label="${i(o("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}">ğŸ—‘ï¸</button>
        </td>
      </tr>`}).join("");e.innerHTML=`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${i(o("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>`}function Os(){t.paymentAddButton&&t.paymentAddButton.dataset.listenerAttached!=="true"&&(t.paymentAddButton.addEventListener("click",e=>{e.preventDefault();const s=t.paymentProgressType?.value==="amount"?"amount":"percent",r=h(t.paymentProgressValue?.value||"").replace("%","").trim(),a=Number.parseFloat(r);if(!Number.isFinite(a)||a<=0){g(o("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©"));return}Ce.push({type:s,value:a,recordedAt:new Date().toISOString()}),t.paymentProgressValue&&(t.paymentProgressValue.value=""),qt()}),t.paymentAddButton.dataset.listenerAttached="true"),t.paymentHistory&&t.paymentHistory.dataset.listenerAttached!=="true"&&(t.paymentHistory.addEventListener("click",e=>{const s=e.target.closest('[data-action="remove-payment"]');if(!s)return;const r=Number.parseInt(s.dataset.index||"-1",10);!Number.isInteger(r)||r<0||(Ce.splice(r,1),qt())}),t.paymentHistory.dataset.listenerAttached="true")}function $r(){t.addExpenseBtn&&t.addExpenseBtn.dataset.listenerAttached!=="true"&&(t.addExpenseBtn.addEventListener("click",Ws),t.addExpenseBtn.dataset.listenerAttached="true"),t.expenseAmount&&t.expenseAmount.dataset.normalizeAttached!=="true"&&(t.expenseAmount.addEventListener("input",e=>{const s=e.target;if(!(s instanceof HTMLInputElement))return;const r=s.selectionStart,a=h(s.value||"");if(s.value=a,r!=null){const n=Math.min(a.length,r);s.setSelectionRange(n,n)}}),t.expenseAmount.dataset.normalizeAttached="true")}function vt(e,s){!e||e.dataset.listenerAttached==="true"||(e.addEventListener("click",r=>{const a=r.target;a instanceof HTMLElement&&s(a)}),e.dataset.listenerAttached="true")}function Lr({onViewDetails:e}){!t.projectsTableBody||t.projectsTableBody.dataset.listenerAttached==="true"||(t.projectsTableBody.addEventListener("click",s=>{const r=s.target;if(r instanceof HTMLElement){if(r.matches('[data-action="view-details"]')){const a=r.dataset.id;e?.(a);return}if(r.matches('[data-action="delete-project"]')){if(!ps()){ds();return}const a=r.dataset.id;Ut(a)}}}),t.projectsTableBody.dataset.listenerAttached="true")}function qr(){const{customers:e}=$e();u.customers=Array.isArray(e)?e:[],Be(),fe(),Ie()}function Rr(){const{technicians:e}=$e();u.technicians=Array.isArray(e)?e:[],Be(),fe(),Ie()}function Dr(e){const{reservations:s}=$e();u.reservations=Array.isArray(s)?s:[],fe();const r=t.detailsModalEl&&t.detailsModalEl.classList.contains("show"),a=t.detailsBody?.dataset.projectId;r&&a&&u.projects.find(c=>String(c.id)===String(a))&&e?.(a)}function Us(){const e=t.technicianSelect?.value;if(!e){g(o("projects.toast.selectTechnician","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"));return}if(u.selectedTechnicians.includes(e)){g(o("projects.toast.technicianAlreadyAdded","âš ï¸ Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¶Ø§Ù Ø¨Ø§Ù„ÙØ¹Ù„"));return}u.selectedTechnicians.push(e),Be(),g(o("projects.toast.technicianAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø§Ù„Ø·Ø§Ù‚Ù…"))}function zs(){const e=t.equipmentSelect?.value;if(!e){g(o("projects.toast.selectEquipment","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø©"));return}const s=Math.max(1,parseInt(t.equipmentQty?.value||"1",10)||1),r=u.selectedEquipment.find(a=>a.barcode===e);r?r.qty+=s:u.selectedEquipment.push({barcode:e,qty:s}),Be(),g(o("projects.toast.equipmentAdded","âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹"))}function Ws(){const e=(t.expenseLabel?.value||"").trim(),s=h(t.expenseAmount?.value||"0"),r=Number(s),a=h(t.servicesClientPrice?.value||"0"),n=Number.parseFloat(a)||0,c=(t.expenseNote?.value||"").trim();if(!e){g(o("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ"));return}if(!Number.isFinite(r)||r<0){g(o("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­"));return}u.expenses.push({id:Date.now(),label:e,amount:r,salePrice:n,note:c}),es(),t.expenseLabel&&(t.expenseLabel.value=""),t.expenseAmount&&(t.expenseAmount.value=h(String(s))),t.servicesClientPrice&&(t.servicesClientPrice.value=""),t.expenseNote&&(t.expenseNote.value=""),Be(),ke(),Ve()}function Be(){Jt(),Yt(),Qt(),Xt(),Ve()}function Jt(){t.technicianList&&Gt(t.technicianList,u.selectedTechnicians,e=>{const r=u.technicians.find(a=>String(a.id)===String(e))?.name||o("projects.fallback.technicianName","Ø¹Ø¶Ùˆ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…");return`
      <span class="chip">
        ${i(r)}
        <button type="button" class="chip__remove" data-action="remove-technician" data-id="${i(String(e))}" aria-label="${i(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function Yt(){t.equipmentList&&Gt(t.equipmentList,u.selectedEquipment,e=>{const s=u.equipment.find(n=>String(n.barcode||"")===String(e.barcode)),r=s?.desc||s?.description||s?.name||o("projects.fallback.unknownEquipment","Ù…Ø¹Ø¯Ø©"),a=h(String(e.qty||1));return`
      <span class="chip">
        ${i(r)} (x${a})
        <button type="button" class="chip__remove" data-action="remove-equipment" data-id="${i(String(e.barcode))}" aria-label="${i(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©"))}">âœ–</button>
      </span>
    `})}function Qt(){if(!t.expenseList)return;const e=Array.isArray(u.expenses)?u.expenses:[];if(!e.length){const r=i(Ht(t.expenseList));t.expenseList.innerHTML=`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${i(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${i(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${i(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${i(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${i(o("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${r}</td></tr>
          </tbody>
        </table>
      </div>`;return}const s=e.map(r=>{const a=i(r.label||""),n=w(Number(r.amount)||0),c=w(Number(r.salePrice)||0),l=i(r.note||""),p=i(String(r.id)),d=i(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©"));return`
      <tr>
        <td>${a}</td>
        <td>${i(n)}</td>
        <td>${i(c)}</td>
        <td>${l||i(o("common.placeholder.empty","â€”"))}</td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${p}" aria-label="${d}">âœ–</button>
        </td>
      </tr>`}).join("");t.expenseList.innerHTML=`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
            <tr>
              <th>${i(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${i(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${i(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${i(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
              <th>${i(o("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"))}</th>
            </tr>
        </thead>
        <tbody>${s}</tbody>
      </table>
    </div>`}function Gt(e,s,r){if(e){if(!s||s.length===0){const a=i(Ht(e));e.innerHTML=`<span class="text-muted">${a}</span>`;return}e.innerHTML=s.map(a=>r(a)).join("")}}function Xt(){if(!t.submitBtn)return;const e=!!u.editingProjectId,s=e?"projects.form.buttons.update":"projects.form.buttons.save",r=e?"ğŸ” ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹":"ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹";t.submitBtn.textContent=o(s,r)}function Ks(){return u.expenses.reduce((e,s)=>e+(Number(s.amount)||0),0)}function Rt(e){return h(String(e||"")).trim().toLowerCase()}function Js(){if(!Array.isArray(u.selectedEquipment)||u.selectedEquipment.length===0)return{items:[],missing:[]};const e=new Map((u.equipment||[]).map(a=>[Rt(a?.barcode),a])),s=[],r=[];return u.selectedEquipment.forEach(a=>{const n=Rt(a?.barcode);if(!n){s.push(a?.barcode||"");return}const c=e.get(n);if(!c||c.id==null){s.push(a?.barcode||n);return}const l=Number.parseInt(String(a?.qty??0),10);r.push({equipmentId:c.id,qty:Number.isInteger(l)&&l>0?l:1})}),{items:r,missing:s}}function Ys(e){return!e||!Array.isArray(e.equipment)?[]:e.equipment.map(s=>{const r=s?.equipmentId??s?.equipment_id??s?.id??null,a=Number.parseInt(String(s?.qty??s?.quantity??0),10);return r?{equipmentId:r,qty:Number.isInteger(a)&&a>0?a:1}:null}).filter(Boolean)}function Qs(){return u.selectedEquipment.reduce((e,s)=>{const r=u.equipment.find(n=>String(n.barcode||"")===String(s.barcode)),a=Number(r?.price||r?.daily_rate||r?.dailyRate||0);return e+a*(s.qty||1)},0)}async function Gs(e){if(e.preventDefault(),bt)return;const s=t.title?.value.trim(),r=t.type?.value||"",a=t.client?.value?.trim()||"",n=t.client?.dataset?.customerId||"",c=t.startDate?.value?.trim()||"",l=t.startTime?.value?.trim()||"";if(!s||!r||!c){g(o("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"));return}const p=Ls(a,n);if(!p){g(o("projects.toast.customerNotFound","âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„")),t.client?.focus();return}const d=String(p.id);t.client&&(t.client.dataset.customerId=d,t.client.value=p.customerName||p.name||t.client.value),Re(p);const b=t.endDate?.value?.trim()||"",m=t.endTime?.value?.trim()||"",y=st(c,l),S=b?st(b,m):"",$=new Date(y),E=S?new Date(S):null;if(E&&$>E){g(o("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"));return}t.expenseAmount&&(t.expenseAmount.value=h(t.expenseAmount.value||""));const N=Ks(),L=Qs(),W=h(t.servicesClientPrice?.value||"");let U=u.servicesClientPriceTotal||Number.parseFloat(W);(!Number.isFinite(U)||U<0)&&(U=0);const G=t.taxCheckbox?.checked===!0,R=t.discountType?.value==="amount"?"amount":"percent",Z=h(t.discountValue?.value||"0");let z=Number.parseFloat(Z);(!Number.isFinite(z)||z<0)&&(z=0);const ge=t.companyShare,xe=ge?.checked===!0;let he=xe?Number.parseFloat(h(String(ge.dataset.companyShare??ge.value??ye))):null;(!Number.isFinite(he)||he<=0)&&(he=xe?ye:null);const ce=Wt({equipmentEstimate:L,expensesTotal:N,servicesClientPrice:U,discountValue:z,discountType:R,applyTax:G,companyShareEnabled:xe,companySharePercent:he}),Se=t.paymentProgressType?.value==="amount"?"amount":"percent",le=h(t.paymentProgressValue?.value||""),Ee=le?Number.parseFloat(le):null,ne=ze({totalAmount:ce.totalWithTax,progressType:Se,progressValue:Ee,history:Array.isArray(Ce)?[...Ce]:[]}),Pe=t.paymentStatus?.dataset?.userSelected==="true",_e=(t.paymentStatus?.value||"unpaid").toLowerCase(),se=["paid","partial"].includes(_e)?_e:"unpaid",re=tt({manualStatus:Pe?se:null,paidAmount:ne.paidAmount,paidPercent:ne.paidPercent,totalAmount:ce.totalWithTax}),pe=Pe?se:re;!Pe&&t.paymentStatus&&(t.paymentStatus.value=pe),t.paymentStatus?.dataset&&delete t.paymentStatus.dataset.userSelected;const{items:de,missing:Le}=Js();if(Le.length){g(o("projects.toast.equipmentMissing","âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),"error");return}const be=!!u.editingProjectId,ue=be?u.projects.find(_=>String(_.id)===String(u.editingProjectId)):null;if(be&&!ue){g(o("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const K=p.companyName||p.company||"",J=t.description?.value.trim()||"",ae=Vt({projectCode:ue?.projectCode||(be?null:Bt()),title:s,type:r,clientId:d,clientCompany:K,description:J,start:y,end:S||null,applyTax:G,paymentStatus:pe,equipmentEstimate:L,expenses:u.expenses.map(_=>({id:_.id,label:_.label,amount:_.amount,salePrice:_.salePrice,note:_.note||void 0})),servicesClientPrice:U,discount:z,discountType:R,companyShareEnabled:xe&&G,companySharePercent:xe&&G?he:null,companyShareAmount:ce.companyShareAmount,taxAmount:ce.taxAmount,totalWithTax:ce.totalWithTax,confirmed:ue?.confirmed??!1,technicians:u.selectedTechnicians,equipment:de,paidAmount:ne.paidAmount,paidPercentage:ne.paidPercent,paymentProgressType:ne.paymentProgressType,paymentProgressValue:ne.paymentProgressValue,payments:Array.isArray(Ce)?Ce:[]});bt=!0;try{let _=ue?.projectId??ue?.id??null;if(be){const f=await Tt(_??u.editingProjectId,ae);_=f?.projectId??f?.id??_,await xt(_,pe),g(o("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"))}else{const f=await ms(ae);_=f?.projectId??f?.id??null,await xt(_,pe),g(o("projects.toast.saved","âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­"));try{St({projectsTab:"projects-section",projectsSubTab:"projects-list-tab"}).catch(()=>{});const v=document.querySelector('.tab-button[data-tab-target="projects-section"]');v&&typeof v.click=="function"&&v.click();const x=document.querySelector('.sub-tab-button[data-project-subtab-target="projects-list-tab"]');x&&typeof x.click=="function"&&setTimeout(()=>x.click(),0)}catch{}}await tr(_)||Zt(),u.editingProjectId=null,t.form.reset(),Kt(),Ot(),Ye(),t.client&&(t.client.dataset.customerId=""),t.type&&(t.type.value="");try{await Pt()}catch{}u.projects=we(),u.reservations=M(),fe(),ke(),document.dispatchEvent(new CustomEvent("projects:changed"))}catch(_){console.error("âŒ [projects] handleSubmitProject failed",_);const j=at(_)?_.message:o("projects.toast.saveFailed","ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(j,"error")}finally{bt=!1}}function st(e,s){if(!e)return"";const r=s&&/\d{1,2}:\d{2}/.test(s)?s:"00:00",[a="00",n="00"]=r.split(":"),c=a.padStart(2,"0"),l=n.padStart(2,"0");return`${e}T${c}:${l}`}function it(){if(typeof window>"u"||!window.sessionStorage)return null;const e=window.sessionStorage.getItem(nt);if(!e)return null;try{const s=JSON.parse(e);return s&&typeof s=="object"?s:null}catch(s){return console.warn("âš ï¸ [projects] Failed to parse project form draft",s),null}}function Et(e){if(!(typeof window>"u"||!window.sessionStorage))try{window.sessionStorage.setItem(nt,JSON.stringify(e))}catch(s){console.warn("âš ï¸ [projects] Unable to persist project form draft",s)}}function Zt(){typeof window>"u"||!window.sessionStorage||(window.sessionStorage.removeItem(nt),Qe())}function Xs(){const e=it()||{};return{...e,type:t.type?.value||"",title:t.title?.value||"",client:t.client?.value||"",customerId:t.client?.dataset.customerId||"",clientCompany:t.clientCompany?.value||"",paymentStatus:t.paymentStatus?.value||"unpaid",taxChecked:t.taxCheckbox?.checked===!0,discountType:t.discountType?.value||"percent",discountValue:t.discountValue?.value||"",companyShareEnabled:t.companyShare?.checked===!0,companySharePercent:t.companyShare?.dataset.companyShare||t.companyShare?.value||String(ye),paymentProgressType:t.paymentProgressType?.value||"percent",paymentProgressValue:t.paymentProgressValue?.value||"",startDate:t.startDate?.value||"",startTime:t.startTime?.value||"",endDate:t.endDate?.value||"",endTime:t.endTime?.value||"",description:t.description?.value||"",expenses:Array.isArray(u.expenses)?u.expenses.map(s=>({...s})):[],servicesClientPriceTotal:Number.isFinite(Number(u.servicesClientPriceTotal))?u.servicesClientPriceTotal:0,technicians:Array.isArray(u.selectedTechnicians)?[...u.selectedTechnicians]:[],equipment:Array.isArray(u.selectedEquipment)?u.selectedEquipment.map(s=>({...s})):[],linkedReservationIds:Array.isArray(e.linkedReservationIds)?[...e.linkedReservationIds]:[],savedAt:Date.now()}}function _r(){const e=it();return e?(t.type&&(t.type.value=e.type||""),t.title&&(t.title.value=e.title||""),t.client&&(t.client.value=e.client||"",t.client.dataset.customerId=e.customerId||""),t.clientCompany&&(t.clientCompany.value=e.clientCompany||""),t.paymentStatus&&e.paymentStatus&&(t.paymentStatus.value=e.paymentStatus),t.taxCheckbox&&(t.taxCheckbox.checked=e.taxChecked===!0),t.discountType&&e.discountType&&(t.discountType.value=e.discountType),t.discountValue&&(t.discountValue.value=e.discountValue||""),t.companyShare&&(e.companySharePercent?t.companyShare.dataset.companyShare=String(e.companySharePercent):t.companyShare.dataset.companyShare=String(ye),t.companyShare.checked=e.companyShareEnabled===!0),t.paymentProgressType&&e.paymentProgressType&&(t.paymentProgressType.value=e.paymentProgressType),t.paymentProgressValue&&(t.paymentProgressValue.value=e.paymentProgressValue||""),u.servicesClientPriceTotal=Number.isFinite(Number(e.servicesClientPriceTotal))?Number(e.servicesClientPriceTotal):0,t.startDate&&(t.startDate.value=e.startDate||""),t.startTime&&(t.startTime.value=e.startTime||""),t.endDate&&(t.endDate.value=e.endDate||""),t.endTime&&(t.endTime.value=e.endTime||""),t.description&&(t.description.value=e.description||""),u.expenses=Array.isArray(e.expenses)?e.expenses.map(s=>({...s})):[],u.selectedTechnicians=Array.isArray(e.technicians)?[...e.technicians]:[],u.selectedEquipment=Array.isArray(e.equipment)?e.equipment.map(s=>({...s})):[],Je("tax"),Qe(),Ve(),!0):(Qe(),!1)}function Fr(){!t.linkedReservationBtn||t.linkedReservationBtn.dataset.listenerAttached==="true"||(t.linkedReservationBtn.addEventListener("click",Zs),t.linkedReservationBtn.dataset.listenerAttached="true")}function Zs(e){e.preventDefault();const s=e.currentTarget;if(s?.classList?.contains("btn-disabled")||s?.getAttribute("aria-disabled")==="true"){g(o("projects.form.linkedReservation.buttonDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"));return}const a=Xs();if(!(a.customerId&&a.customerId!==""||a.client&&a.client.trim())){g(o("projects.form.linkedReservation.missingClient","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}const c=a.startDate&&a.startTime,l=a.endDate&&a.endTime;if(!c||!l){g(o("projects.form.linkedReservation.missingSchedule","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²"));return}Et(a);const p=er(a);let d="";try{d=encodeURIComponent(JSON.stringify(p))}catch(m){console.warn("âš ï¸ [projects] Unable to encode reservation context",m)}St({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(m=>{console.warn("âš ï¸ [projects] Failed to persist dashboard preference before redirect",m)});const b=d?`?reservationProjectContext=${d}`:"";window.location.href=`dashboard.html${b}#reservations`}function er(e){const s=st(e.startDate,e.startTime)||null,r=st(e.endDate,e.endTime)||null;return{fromProjectForm:!0,draftStorageKey:nt,returnUrl:Bs,start:s,end:r,customerId:e.customerId||null,customerName:e.client||"",clientCompany:e.clientCompany||"",projectTitle:e.title||"",projectType:e.type||"",description:e.description||""}}async function tr(e){if(!e)return;const s=it(),r=Array.isArray(s?.linkedReservationIds)?s.linkedReservationIds:[];if(!r.length)return;const a=[];let n=!1;for(const l of r){const p=l!=null?String(l):"";if(p)try{await De(p,{project_id:e}),n=!0}catch(d){console.error("âŒ [projects] Failed to link reservation to project",p,d),a.push(p)}}if(n)try{await Ct(),u.reservations=M(),document.dispatchEvent(new CustomEvent("reservations:changed"))}catch(l){console.warn("âš ï¸ [projects] Failed to refresh reservations after linking",l)}const c={linkedReservationIds:a,savedAt:Date.now()};return Et(c),a.length&&g(o("projects.toast.linkReservationFailed","âš ï¸ ØªØ¹Ø°Ø± Ø±Ø¨Ø· Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§"),"error"),Qe(),a.length}function sr(){const e=new Map,s=a=>{if(!a)return;[a.id,a.reservationId,a.reservation_id,a.reservation_code].map(c=>c!=null?String(c):"").filter(Boolean).forEach(c=>{e.has(c)||e.set(c,a)})};Array.isArray(u.reservations)&&u.reservations.forEach(s);const r=$e();return Array.isArray(r?.reservations)&&r.reservations.forEach(s),e}function rr(e){if(!e||typeof e!="object")return"";const s=[e.name,e.full_name,e.fullName,e.technician_name,e.technicianName,e.label,e.displayName];for(const r of s)if(typeof r=="string"&&r.trim())return r.trim();return""}function ar(e){if(!e)return[];const s=new Set;(Array.isArray(e.techniciansDetails)?e.techniciansDetails:[]).forEach(n=>{const c=rr(n);c&&s.add(c)});const a=Array.isArray(e.technicians)?e.technicians:[];if(a.length){const n=Array.isArray(u.technicians)?u.technicians:[];a.forEach(c=>{const l=n.find(d=>String(d?.id)===String(c)),p=l?.name||l?.full_name||"";p&&s.add(String(p).trim())})}return Array.from(s)}function Qe(){const e=document.getElementById("project-linked-reservation-summary");if(!e)return;const s=it(),r=t.linkedReservationBtn;let a=Array.isArray(s?.linkedReservationIds)?Array.from(new Set(s.linkedReservationIds.map(p=>String(p)).filter(Boolean))):[];const n=sr(),c=a.filter(p=>n.has(p));if(c.length!==a.length){a=c;const p={...s||{},linkedReservationIds:a,savedAt:Date.now()};Et(p)}if(!a.length){e.dataset.state="empty",e.innerHTML=`<p class="project-linked-reservation__summary-empty">${i(o("projects.form.linkedReservation.empty","Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬ÙˆØ²Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¹Ø¯."))}</p>`,r&&(r.disabled=!1,r.classList.remove("btn-disabled"),r.removeAttribute("aria-disabled"),r.title="");return}const l=a.map(p=>{const d=n.get(p);if(!d)return`
        <li class="project-linked-reservation__summary-item">
          <div class="project-linked-reservation__summary-item-title">#${i(h(p))}</div>
          <div class="project-linked-reservation__summary-item-meta">
            <span>${i(o("projects.form.linkedReservation.pendingItem","ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ ÙˆØ³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."))}</span>
          </div>
        </li>`;const b=d.reservation_code||d.reservationId||d.id||p,m=`#${h(String(b))}`,y=Array.isArray(d.items)?d.items:[],S=y.reduce((R,Z)=>R+(Number(Z?.qty)||0),0)||y.length||0,$=ar(d),N=(Array.isArray(d.technicians)?d.technicians:[]).length||$.length||0,L=As(d),W=[],U=o("projects.form.linkedReservation.meta.equipment","Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: {count}").replace("{count}",h(String(S)));W.push(U);const G=o("projects.form.linkedReservation.meta.crew","Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚: {count}").replace("{count}",h(String(N)));if(W.push(G),$.length){const R=typeof It=="function"&&It()==="en"?", ":"ØŒ ",Z=o("projects.form.linkedReservation.meta.crewNames","Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚: {names}").replace("{names}",$.join(R));W.push(Z)}if(Number.isFinite(L)){const R=o("projects.form.linkedReservation.meta.total","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬Ø²: {amount}").replace("{amount}",w(L));W.push(R)}return`
      <li class="project-linked-reservation__summary-item">
        <div class="project-linked-reservation__summary-item-title">${i(m)}</div>
        <div class="project-linked-reservation__summary-item-meta">
          ${W.map(R=>`<span>${i(R)}</span>`).join("")}
        </div>
      </li>`}).join("");e.dataset.state="has-linked",e.innerHTML=`<ul class="project-linked-reservation__summary-list">${l}</ul>`,r&&(r.disabled=!1,r.classList.add("btn-disabled"),r.setAttribute("aria-disabled","true"),r.setAttribute("data-allow-click","true"),r.title=o("projects.form.linkedReservation.buttonDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))}function es(){const e=Array.isArray(u.expenses)?u.expenses.reduce((s,r)=>s+(Number(r?.salePrice)||0),0):0;u.servicesClientPriceTotal=Math.round(e*100)/100}function Ve(){t.servicesClientTotalIndicator||document.getElementById("project-services-client-total-indicator");const e=t.servicesClientTotalValue||document.getElementById("project-services-client-total-value");if(!e)return;const s=Number(u.servicesClientPriceTotal)||0;e.textContent=w(s)}function Ue(e){const s=u.projects.find(A=>String(A.id)===String(e));if(!s||!t.detailsBody)return;t.detailsBody.dataset.mode="view",t.detailsBody.dataset.projectId=String(s.id);const a=(u.customers.length?u.customers:$e().customers||[]).find(A=>String(A.id)===String(s.clientId)),n=rs(s.type),l=s.description?.trim()||o("projects.fallback.noDescription","Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ"),p=a?.customerName||o("projects.fallback.unknownClient","Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"),d=a?.phone??a?.customerPhone??s.clientPhone??s.customerPhone??"",b=d?h(String(d).trim()):o("projects.details.client.noPhone","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ØªØ§Ø­"),m=a?.email??s.clientEmail??s.customerEmail??"",y=m?String(m).trim():o("projects.details.client.noEmail","Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯ Ù…ØªØ§Ø­"),S=(s.clientCompany||a?.companyName||"").trim(),$=s.projectCode||`PRJ-${h(String(s.id))}`,E=h($),N=wt(s.id),L=N.reduce((A,k)=>A+as(k),0),W=Number(L.toFixed(2)),U=N.length,{subtotal:G,applyTax:R,expensesTotal:Z}=Ts(s),z=Number(s?.servicesClientPrice??s?.services_client_price??0),ge=G,xe=R?Number(((ge+W)*We).toFixed(2)):0,he=Number((ge+W+xe).toFixed(2)),ce=Cs(s),Se=s?.cancelled===!0||s?.status==="cancelled"||s?.status==="canceled"?"cancelled":ce,le=o(`projects.status.${Se}`,ws[Se]||Se),ne=(()=>{try{const A=s.start?new Date(s.start):null,k=s.end?new Date(s.end):A?new Date(A.getTime()+3600*1e3):null;return!A||!k||Number.isNaN(A.getTime())||Number.isNaN(k.getTime())?!1:u.projects.some(D=>{if(!D||String(D.id)===String(s.id))return!1;const Y=D.start?new Date(D.start):null,H=D.end?new Date(D.end):Y?new Date(Y.getTime()+3600*1e3):null;if(!Y||!H||Number.isNaN(Y.getTime())||Number.isNaN(H.getTime()))return!1;const V=Math.max(A.getTime(),Y.getTime()),oe=Math.min(k.getTime(),H.getTime());return V<oe})}catch{return!1}})()&&(Se==="upcoming"||Se==="ongoing")?"conflict":Se,_e={upcoming:o("projects.status.upcoming","Ù‚Ø§Ø¯Ù…"),ongoing:o("projects.status.ongoing","Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"),completed:o("projects.status.completed","Ù…ÙƒØªÙ…Ù„"),conflict:o("projects.status.conflict","ØªØ¹Ø§Ø±Ø¶")}[ne]||le,re={upcoming:"timeline-status-badge timeline-status-badge--upcoming",ongoing:"timeline-status-badge timeline-status-badge--ongoing",completed:"timeline-status-badge timeline-status-badge--completed",conflict:"timeline-status-badge timeline-status-badge--conflict",cancelled:"timeline-status-badge timeline-status-badge--cancelled"}[ne]||"timeline-status-badge timeline-status-badge--upcoming",pe=typeof s.paymentStatus=="string"?s.paymentStatus.toLowerCase():"",de=jr(s),Le=de.length>0,be=Le?0:Number(s.paidAmount)||0,ue=Le?0:Number(s.paidPercent)||0;let K=he,J,ae,_,j,f,v,x,C,P,I,q="";const B=o("projects.focus.confirmed","âœ… Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒØ¯"),X=s.confirmed===!0||s.confirmed==="true"?`<span class="reservation-chip status-confirmed">${i(B)}</span>`:"";let T=[];if(U>0){const A=N.reduce((Ze,je)=>{const ns=Array.isArray(je.items)?je.items:[],Nt=Array.isArray(je.crewAssignments)?je.crewAssignments:[],Ne=Nt.length?Nt:Array.isArray(je.technicians)?je.technicians:[],is=Array.isArray(Ne)&&Ne.length&&typeof Ne[0]=="object",cs=Array.isArray(Ne)&&Ne.length&&typeof Ne[0]!="object",ht=hs({items:ns,technicianIds:cs?Ne:[],crewAssignments:is?Ne:[],discount:je.discount??0,discountType:je.discountType||"percent",applyTax:!1,start:je.start,end:je.end,companySharePercent:null,groupingSource:je});return Ze.equipment+=Number(ht.equipmentTotal||0),Ze.crew+=Number(ht.crewTotal||0),Ze.crewCost+=Number(ht.crewCostTotal||0),Ze},{equipment:0,crew:0,crewCost:0}),k=Number(Z||0),D=Number((A.equipment+A.crew+z).toFixed(2)),Y=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let V=(s?.discountType==="amount"?"amount":"percent")==="amount"?Y:D*(Y/100);(!Number.isFinite(V)||V<0)&&(V=0),V>D&&(V=D);const oe=R===!0,ve=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",O=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,ie=ve&&oe&&O>0?O:0,F=Math.max(0,D-V),te=Number((F*(ie/100)).toFixed(2)),Q=oe?Number(((F+te)*We).toFixed(2)):0,Te=Number((F+te+Q).toFixed(2)),os=Number((Te-te-Q-k-A.crewCost).toFixed(2));A.equipment>0&&T.push({icon:"ğŸ›ï¸",label:o("projects.details.summary.equipmentTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª"),value:w(A.equipment)}),A.crew>0&&T.push({icon:"ğŸ˜",label:o("projects.details.summary.crewTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚"),value:w(A.crew)}),A.crewCost>0&&T.push({icon:"ğŸ§¾",label:o("projects.details.summary.crewCostTotal","ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ÙŠÙ‚"),value:w(A.crewCost)}),z>0&&T.push({icon:"ğŸ’¼",label:o("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:w(z)}),k>0&&T.push({icon:"ğŸ§¾",label:o("projects.details.summary.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:w(k)}),V>0&&T.push({icon:"ğŸ·ï¸",label:o("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${w(V)}`}),T.push({icon:"ğŸ§®",label:o("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:w(F)}),te>0&&T.push({icon:"ğŸ¦",label:o("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${w(te)}`}),Q>0&&T.push({icon:"ğŸ’¸",label:o("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${w(Q)}`}),T.push({icon:"ğŸ’µ",label:o("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:w(os)}),T.push({icon:"ğŸ’°",label:o("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:w(Te)}),K=Te}else{const A=Number(Z||0),k=Math.max(0,Number(z)||0),D=Number.parseFloat(s?.discount??s?.discountValue??0)||0;let H=(s?.discountType==="amount"?"amount":"percent")==="amount"?D:k*(D/100);(!Number.isFinite(H)||H<0)&&(H=0),H>k&&(H=k);const V=Math.max(0,k-H),oe=R===!0,ve=s?.companyShareEnabled===!0||s?.companyShareEnabled==="true"||s?.company_share_enabled===!0||s?.company_share_enabled==="true",O=Number.parseFloat(s?.companySharePercent??s?.company_share_percent??s?.companyShare??s?.company_share??0)||0,ie=ve&&oe&&O>0?O:0,F=Number((V*(ie/100)).toFixed(2)),te=oe?Number(((V+F)*We).toFixed(2)):0,Q=Number((V+F+te).toFixed(2)),Te=Number((Q-F-te-A).toFixed(2));T=[],T.push({icon:"ğŸ’¼",label:o("projects.details.summary.servicesClientPrice","Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),value:w(k)}),H>0&&T.push({icon:"ğŸ·ï¸",label:o("projects.details.summary.discount","Ø§Ù„Ø®ØµÙ…"),value:`âˆ’${w(H)}`}),T.push({icon:"ğŸ§®",label:o("projects.details.summary.grossAfterDiscount","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"),value:w(V)}),F>0&&T.push({icon:"ğŸ¦",label:o("projects.details.summary.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ©"),value:`âˆ’${w(F)}`}),te>0&&T.push({icon:"ğŸ’¸",label:o("projects.details.summary.tax","Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"),value:`âˆ’${w(te)}`}),T.push({icon:"ğŸ’µ",label:o("projects.details.summary.netProfit","ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"),value:w(Te)}),T.push({icon:"ğŸ’°",label:o("projects.details.summary.finalTotal","Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"),value:w(Q)}),K=Q}J=ze({totalAmount:K,paidAmount:be,paidPercent:ue,history:de}),ae=tt({manualStatus:Le?"unpaid":pe||"unpaid",paidAmount:J.paidAmount,paidPercent:J.paidPercent,totalAmount:K}),_=o(`projects.paymentStatus.${ae}`,ae==="paid"?"Paid":ae==="partial"?"Partial":"Unpaid"),j=ae==="paid"?"status-paid":ae==="partial"?"status-partial":"status-unpaid",f=Number.isFinite(Number(J.paidAmount))?Number(J.paidAmount):0,v=Number.isFinite(Number(J.paidPercent))?Number(J.paidPercent):0,x=Math.max(0,Number((K-f).toFixed(2))),C=w(f),P=`${h(v.toFixed(2))}%`,I=w(x);try{q=_t(de,{total:K})}catch{q=_t(de,{total:he})}const ct=T.map(({icon:A,label:k,value:D})=>`
    <div class="summary-details-row">
      <span class="summary-details-label">${A} ${i(k)}</span>
      <span class="summary-details-value">${i(D)}</span>
    </div>
  `).join(""),Fe=o("projects.details.labels.code","Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),qe=`
    <div class="project-details-code-badge" title="${i(Fe)}">
      <span class="project-details-code-badge__label">
        <span class="project-details-code-badge__icon" aria-hidden="true">ğŸ—‚ï¸</span>
        ${i(Fe)}
      </span>
      <span class="project-details-code-badge__value">${i(E)}</span>
    </div>
  `,lt=bs(s.start,s.end),Ge=Ft("start",s.start),He=Ft("end",s.end),pt=He?{...He,meta:(He.meta?`${He.meta} â€” `:"")+`${o("projects.details.labels.days","Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…")}: ${h(String(lt))}`}:null,dt=[{icon:"ğŸ‘¤",label:o("projects.details.client","Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:p},{icon:"ğŸ“",label:o("projects.details.labels.clientPhone","Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:b},{icon:"âœ‰ï¸",label:o("projects.details.labels.clientEmail","Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"),value:y},S?{icon:"ğŸ¢",label:o("projects.details.company","Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù…ÙŠÙ„"),value:S}:null,{icon:"ğŸ·ï¸",label:o("projects.details.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),value:`<span class="project-type-chip project-type-chip--${s.type||"default"}">${i(n)}</span>`},Ge,pt].filter(Boolean),ut=o("projects.details.overview.heading","Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),mt=`
    <div class="project-details-outline">
      <h6 class="project-details-outline__title">${i(ut)}</h6>
      <ul class="project-details-outline__list">
        ${dt.map(({icon:A,label:k,value:D,meta:Y})=>{const H=String(D??""),oe=H.trim().startsWith("<")?H:i(H),ve=String(Y??""),O=ve?i(ve):"";return`
          <li>
            <span class="project-details-outline__label">${i(A)} ${i(k)}</span>
            <span class="project-details-outline__value-group">
              <span class="project-details-outline__value">${oe}</span>
              ${Y?`<span class="project-details-outline__meta">${O}</span>`:""}
            </span>
          </li>
          `}).join("")}
      </ul>
    </div>
  `,jt=U>0?o("projects.details.chips.linkedReservation","Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"):o("projects.details.chips.notLinkedReservation","ØºÙŠØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø²"),Oe=U>0?"reservation-chip status-confirmed":"reservation-chip status-info",Xe=[`<span class="${re}">${i(_e)}</span>`,`<span class="${Oe}">${i(jt)}</span>`,`<span class="reservation-chip ${j}">${i(_)}</span>`,X].filter(Boolean).join("");o("projects.details.expensesTotal","ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©"),o("projects.details.reservationsTotal","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª");const ft=o("projects.details.expenses","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ© ({amount})").replace("{amount}",w(Z)),ee=or(Array.isArray(s.expenses)?s.expenses:[]),yt={...s,paymentStatus:ae};t.detailsBody.innerHTML=`
    <section class="project-details-primary">
      <header class="project-details-header">
        <div class="project-details-header__info">
          <div class="project-details-chips">${Xe}</div>
        </div>
        <div class="project-details-header__code">
          ${qe}
          <h4 class="project-details-title">${i(s.title)}</h4>
        </div>
      </header>
      <div class="project-summary">
        <div class="project-summary-left">
          ${mt}
        </div>
        <div class="project-summary-right">
          <div class="project-summary-card project-details-outline">
            <h6>${i(o("projects.details.summary.title","Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ"))}</h6>
            ${ct}
          </div>
        </div>
      </div>
    </section>
    <section class="project-details-section">
      <h5>${i(o("projects.details.description","ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</h5>
      <p class="project-details-description">${i(l)}</p>
    </section>
    <section class="project-details-section">
      <h5>${i(ft)}</h5>
      ${ee}
    </section>
    
    <section class="project-details-section">
      <h5>${i(o("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h5>
      <div class="project-details-grid">
        <div class="project-details-grid-item">
          <span>${i(o("projects.details.paymentOverview.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"))}</span>
          <strong>${i(w(K))}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${i(o("projects.details.paymentOverview.paid","Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${i(C)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${i(o("projects.details.paymentOverview.percent","Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹"))}</span>
          <strong>${i(P)}</strong>
        </div>
        <div class="project-details-grid-item">
          <span>${i(o("projects.details.paymentOverview.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"))}</span>
          <strong>${i(I)}</strong>
        </div>
      </div>
      <div class="reservation-payment-history-modal mt-3">
        ${q}
      </div>
    </section>
    ${ks(yt)}
    <div class="project-details-footer">
      <button type="button" class="modal-action-btn modal-action-btn--primary" data-action="create-reservation">
        ${i(o("projects.details.reservations.create","â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ù…Ø±ØªØ¨Ø·"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-action="edit-project">
        ${i(o("projects.details.actions.edit","âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--danger" data-action="delete-project">
        ${i(o("projects.details.actions.delete","ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" id="project-details-export-btn">
        ${i(o("projects.details.actions.exportPdf","Ø¹Ø±Ø¶ Ø³Ø¹Ø±"))}
      </button>
      <button type="button" class="modal-action-btn modal-action-btn--ghost" data-bs-dismiss="modal">
        ${i(o("actions.close","Ø¥ØºÙ„Ø§Ù‚"))}
      </button>
    </div>
  `,ir(s);const Ae=t.detailsBody.querySelector("#project-details-export-btn");Ae&&Ae.addEventListener("click",async A=>{if(A.preventDefault(),Ae.blur(),!Ae.disabled){Ae.disabled=!0;try{await Ss({project:s})}catch(k){console.error("âŒ [projects/details] export project PDF failed",k),g(o("projects.details.exportFailed","âš ï¸ ØªØ¹Ø°Ø± ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¥Ù„Ù‰ PDF"),"error")}finally{Ae.disabled=!1}}}),t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl).show()}function or(e=[]){if(!(Array.isArray(e)&&e.length>0)){const a=i(o("projects.expenses.table.empty","Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù‡Ù†Ø§ ÙÙˆØ± Ø¥Ø¶Ø§ÙØªÙ‡Ø§."));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${i(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
              <th>${i(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
              <th>${i(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
              <th>${i(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4" class="text-center text-muted">${a}</td></tr>
          </tbody>
        </table>
      </div>
    `}const r=e.map(a=>{const n=i(a?.label||""),c=w(Number(a?.amount)||0),l=w(Number(a?.sale_price??a?.salePrice??0)),p=a?.note!=null?String(a.note):a?.notes!=null?String(a.notes):"";return`
      <tr>
        <td>${n}</td>
        <td>${i(c)}</td>
        <td>${i(l)}</td>
        <td>${i(p||o("common.placeholder.empty","â€”"))}</td>
      </tr>`}).join("");return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${i(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©"))}</th>
            <th>${i(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)"))}</th>
            <th>${i(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)"))}</th>
            <th>${i(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>
  `}function Mr({onOpenProject:e}){!t.focusCards||t.focusCards.dataset.listenerAttached==="true"||(t.focusCards.addEventListener("click",async s=>{const r=s.target.closest("[data-action]");if(r){const{action:n,id:c}=r.dataset;if(n==="confirm-project"){s.preventDefault(),s.stopPropagation(),pr(c);return}if(n==="close-project"){s.preventDefault(),s.stopPropagation();try{const l=document.getElementById("closeProjectModal"),p=document.getElementById("close-project-notes"),d=document.getElementById("close-project-submit");if(p&&(p.value=""),d&&d.__tmpCloseProjectListener&&(d.removeEventListener("click",d.__tmpCloseProjectListener),d.__tmpCloseProjectListener=null),d){const b=async()=>{const m=p?.value||"";try{const y=await At(c,m);await kt(y?.projectId??y?.id??c),u.projects=we(),u.reservations=M(),fe(),Ie(),ke(),g(o("projects.toast.closed","âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(y){console.error("âŒ [projects] close-project (card) failed",y),g(o("projects.toast.closeFailed","ØªØ¹Ø°Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),"error")}finally{try{((window.bootstrap?.Modal||bootstrap?.Modal)?.getInstance?.(l)||(window.bootstrap?.Modal||bootstrap?.Modal)?.getOrCreateInstance?.(l))?.hide?.()}catch{}}};d.__tmpCloseProjectListener=b,d.addEventListener("click",b,{once:!0})}l&&(window.bootstrap?.Modal||typeof bootstrap<"u"&&bootstrap?.Modal)&&(window.bootstrap?.Modal||bootstrap.Modal).getOrCreateInstance(l).show()}catch(l){console.warn("âš ï¸ [projects] unable to open close modal from card",l)}return}n==="view"?e?.(c):n==="highlight"&&nr(c);return}const a=s.target.closest(".project-focus-card");a?.dataset.projectId&&e?.(a.dataset.projectId)}),t.focusCards.dataset.listenerAttached="true")}function nr(e){if(!t.projectsTableBody)return;const s=`tr[data-project-id="${CSS.escape(String(e))}"]`,r=t.projectsTableBody.querySelector(s);if(!r){g(o("projects.focus.toastNotFound","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"));return}r.classList.add("project-row-highlight"),r.scrollIntoView({behavior:"smooth",block:"center"}),window.setTimeout(()=>{r.classList.remove("project-row-highlight")},2200)}function ir(e){if(!t.detailsBody)return;const s=t.detailsBody.querySelector('[data-action="create-reservation"]'),r=t.detailsBody.querySelector('[data-action="edit-project"]'),a=t.detailsBody.querySelector('[data-action="delete-project"]'),n=t.detailsBody.querySelector(".project-reservations-list");if(s&&e)try{(wt(e.id)||[]).some(p=>{const d=String(p?.status||p?.reservationStatus||"").toLowerCase();return d!=="cancelled"&&d!=="canceled"})?(s.classList?.add("disabled"),s.setAttribute?.("aria-disabled","true"),s.title=o("projects.details.reservations.createDisabled","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"),s.addEventListener("click",p=>{p.preventDefault(),g(o("projects.details.reservations.createDisabledToast","âš ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ø­Ø¬Ø² Ù…Ø³Ø¨Ù‚Ø§Ù‹"))})):(s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",p=>{p.preventDefault(),Dt(e)}))}catch{s.disabled=!1,s.classList?.remove("disabled"),s.classList?.remove("btn-disabled"),s.removeAttribute?.("aria-disabled"),s.removeAttribute?.("title"),s.addEventListener("click",l=>{l.preventDefault(),Dt(e)})}if(r&&e&&r.addEventListener("click",c=>{c.preventDefault(),cr(e)}),a&&e&&a.addEventListener("click",async c=>{c.preventDefault();const l=c.currentTarget;l.disabled=!0;try{await Ut(e.id),!u.projects.some(d=>String(d.id)===String(e.id))&&t.detailsModalEl&&window.bootstrap?.Modal.getInstance(t.detailsModalEl)?.hide()}finally{u.projects.some(d=>String(d.id)===String(e.id))&&(l.disabled=!1)}}),n){const c=async l=>{if(!Number.isInteger(l)||l<0)return!1;const p=gs("showReservationDetails");if(typeof p=="function")return p(l),!0;try{const d=await xs("showReservationDetails");if(typeof d=="function")return d(l),!0}catch(d){console.warn("âš ï¸ [projects/projectDetails] Unable to resolve reservation UI handler",d)}return!1};n.addEventListener("click",async l=>{const p=l.target.closest('[data-action="view-reservation"]');if(!p)return;const d=p.dataset.index||p.dataset.reservationIndex,b=Number.parseInt(d||"-1",10);if(!Number.isInteger(b)||b<0)return;await c(b)||(window.location.href="dashboard.html#reservations")}),n.addEventListener("keydown",l=>{if(!["Enter"," "].includes(l.key))return;const p=l.target.closest('[data-action="view-reservation"]');p&&(l.preventDefault(),p.click())})}}function cr(e){if(!e||!t.detailsBody)return;const s=u.projects.find(m=>String(m.id)===String(e.id));if(!s)return;const r=u.customers.find(m=>String(m.id)===String(s.clientId));r?.customerName||r?.name||s.clientName||s.customerName,s.clientCompany||r?.companyName||r?.company;const a=Array.isArray(s.expenses)?s.expenses.map((m,y)=>({id:m?.id||`expense-${s.id}-${y}-${Date.now()}`,label:m?.label||"",amount:Number(m?.amount)||0,salePrice:Number.isFinite(Number(m?.sale_price??m?.salePrice))?Number(m?.sale_price??m?.salePrice):0,note:m?.note!=null?String(m.note):m?.notes!=null?String(m.notes):""})):[];let n=Array.isArray(s.paymentHistory)?s.paymentHistory.map((m,y)=>({type:m?.type==="percent"?"percent":"amount",amount:Number.isFinite(Number(m?.amount))?Number(m.amount):null,percentage:Number.isFinite(Number(m?.percentage))?Number(m.percentage):null,value:Number.isFinite(Number(m?.value))?Number(m.value):null,note:m?.note??null,recordedAt:m?.recordedAt??m?.recorded_at??new Date().toISOString(),key:`payment-${s.id}-${y}`})):[],c=n.reduce((m,y)=>m+(Number(y?.amount)||0),0),l=n.reduce((m,y)=>m+(Number(y?.percentage)||0),0),p=Number.isFinite(Number(s.paidAmount))?Number(s.paidAmount):0,d=Number.isFinite(Number(s.paidPercent))?Number(s.paidPercent):0;if(!n.length&&(p>0||d>0)){const m=s.updatedAt??s.createdAt??new Date().toISOString();d>0?n=[{type:"percent",amount:Number.isFinite(p)&&p>0?p:null,percentage:d,value:d,note:null,recordedAt:m,key:`legacy-payment-${s.id}-percent`}]:p>0&&(n=[{type:"amount",amount:p,percentage:null,value:p,note:null,recordedAt:m,key:`legacy-payment-${s.id}-amount`}]),c=n.reduce((y,S)=>y+(Number(S?.amount)||0),0),l=n.reduce((y,S)=>y+(Number(S?.percentage)||0),0),p=0,d=0}c>0&&Math.abs(p-c)<.01&&(p=0),l>0&&Math.abs(d-l)<.01&&(d=0);const b={expenses:a,payments:n,basePaidAmount:p,basePaidPercent:d};t.detailsBody.dataset.mode="edit",t.detailsBody.innerHTML=dr(s,b),lr(s,b)}function lr(e,s={expenses:[]}){const r=t.detailsBody?.querySelector("#project-details-edit-form");if(!r)return;const a=r.querySelector('[data-action="cancel-edit"]');a&&a.addEventListener("click",j=>{j.preventDefault(),Ue(e.id)});const n=r.querySelector("#project-edit-expense-label"),c=r.querySelector("#project-edit-expense-amount"),l=r.querySelector("#project-edit-expense-sale"),p=r.querySelector("#project-edit-expense-note"),d=r.querySelector('[data-action="add-expense"]'),b=r.querySelector("#project-edit-expense-list"),m=r.querySelector('[name="project-start-date"]'),y=r.querySelector('[name="project-start-time"]'),S=r.querySelector('[name="project-end-date"]'),$=r.querySelector('[name="project-end-time"]'),E=r.querySelector('[name="project-payment-status"]'),N=r.querySelector("#project-edit-tax"),L=r.querySelector("#project-edit-company-share"),W=r.querySelector("#project-edit-discount"),U=r.querySelector("#project-edit-discount-type"),G=r.querySelector("#project-edit-payment-progress-type"),R=r.querySelector("#project-edit-payment-progress-value"),Z=r.querySelector("#project-edit-payment-add"),z=r.querySelector("#project-edit-payment-history"),ge=r.querySelector("#project-edit-payment-summary"),xe=o("reservations.create.summary.currency","SR"),he=r.querySelector("#project-cancelled");let ce=!1;(()=>{const j=(typeof window<"u"?window.flatpickr:null)||(typeof globalThis<"u"?globalThis.flatpickr:null);j&&(m&&j(m,{dateFormat:"Y-m-d",allowInput:!0}),S&&j(S,{dateFormat:"Y-m-d",allowInput:!0}),y&&j(y,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}),$&&j($,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",altInput:!0,altFormat:"h:i K",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,disableMobile:!0,allowInput:!0,altInputClass:"flatpickr-alt-input form-control"}))})();const le=j=>{if(!j||j.dataset.normalizedDigits==="true")return;const f=()=>{const v=j.value||"",x=h(v);if(x!==v){const C=j.selectionStart,P=j.selectionEnd;j.value=x;try{if(typeof C=="number"&&typeof P=="number"){const I=x.length-v.length;j.setSelectionRange(Math.max(0,C+I),Math.max(0,P+I))}}catch{}}};j.addEventListener("input",f),j.addEventListener("blur",f);try{j.setAttribute("inputmode","numeric")}catch{}j.dataset.normalizedDigits="true"};le(m),le(y),le(S),le($),y&&y._flatpickr?.altInput&&le(y._flatpickr.altInput),$&&$._flatpickr?.altInput&&le($._flatpickr.altInput);const Ee=()=>(Array.isArray(s.payments)||(s.payments=[]),s.payments),ne=()=>{const j=Number(e.equipmentEstimate)||0,f=Array.isArray(s.expenses)?s.expenses.reduce((T,me)=>T+(Number(me.amount)||0),0):0,v=Array.isArray(s.expenses)?Math.max(0,Math.round(s.expenses.reduce((T,me)=>T+Number(me?.salePrice??0),0)*100)/100):Math.max(0,Number(e?.servicesClientPrice??0)),x=U?.value==="amount"?"amount":"percent",C=h(W?.value||"0");let P=Number.parseFloat(C);(!Number.isFinite(P)||P<0)&&(P=0);const I=N?.checked===!0,q=L?.checked===!0;let B=q?Vs(L):null;(!Number.isFinite(B)||B<=0)&&(B=q?ye:null);const X=Wt({equipmentEstimate:j,expensesTotal:f,servicesClientPrice:v,discountValue:P,discountType:x,applyTax:I,companyShareEnabled:q,companySharePercent:B});return{equipmentEstimate:j,expensesTotal:f,discountValue:P,discountTypeValue:x,applyTax:I,companyShareEnabled:q,companySharePercent:B,servicesClientPrice:v,finance:X}},Pe=()=>{const j=ne(),f=Ee(),x=(wt(e.id)||[]).reduce((B,X)=>B+(Number(X?.totalAmount)||as(X)||0),0),C=Number(j.finance?.taxableAmount||0),P=j.applyTax?Number(((C+x)*We).toFixed(2)):0,I=Number((C+x+P).toFixed(2)),q=ze({totalAmount:I,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:f});try{const X=(new URL(window.location.href).searchParams.get("paymentDebug")||"").toLowerCase();(X==="1"||X==="true"||X==="yes")&&console.debug("[PaymentDebug][modal]",{projectId:e?.id,projectTaxableBase:C,reservationsTotal:x,combinedTax:P,combinedTotalWithTax:I,paidAmount:q.paidAmount,paidPercent:q.paidPercent})}catch{}return{...j,combinedTotalWithTax:I,payments:f,progress:q}},_e=()=>{if(!z)return;const{combinedTotalWithTax:j}=Pe();z.innerHTML=mr(Ee(),{total:j})},se=()=>{if(!ge)return;const{combinedTotalWithTax:j,progress:f}=Pe(),v=Number.isFinite(Number(j))?Number(j):0,x=Number.isFinite(Number(f.paidAmount))?Number(f.paidAmount):0,C=Number.isFinite(Number(f.paidPercent))?Number(f.paidPercent):0,P=Math.max(0,Math.round((v-x)*100)/100),I=[{label:o("projects.form.paymentSummary.total","Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"),value:w(v)},{label:o("projects.form.paymentSummary.paidAmount","Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"),value:w(x)},{label:o("projects.form.paymentSummary.paidPercent","Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹Ø§Øª"),value:`${h(C.toFixed(2))}%`},{label:o("projects.form.paymentSummary.remaining","Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"),value:w(P)}];ge.innerHTML=I.map(({label:q,value:B})=>`
        <div class="project-details-grid-item">
          <span>${i(q)}</span>
          <strong>${i(B)}</strong>
        </div>
      `).join("")},re=(j="auto")=>{if(!E)return;const f=E.dataset?.userSelected==="true";if(j==="auto"&&f)return;const{finance:v,progress:x}=Pe(),C=tt({manualStatus:f?E.value:e.paymentStatus||"unpaid",paidAmount:x.paidAmount,paidPercent:x.paidPercent,totalAmount:v.totalWithTax});f||(E.value=C)},pe=()=>{_e(),se(),re("auto")},de=1e-4,Le=()=>{const j=G?.value==="amount"?"amount":"percent",f=h(R?.value||"").replace("%","").trim();let v=Number.parseFloat(f);if(!Number.isFinite(v)||v<=0){g(o("projects.toast.paymentInvalid","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© Ø¯ÙØ¹Ø© ØµØ­ÙŠØ­Ø©")),R?.focus();return}const x=Pe(),C=Number.isFinite(Number(x.finance.totalWithTax))?Number(x.finance.totalWithTax):0;if(C<=0){g(o("projects.toast.paymentTotalMissing","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"));return}const P=Number(x.progress.paidAmount)||0,I=Number(x.progress.paidPercent)||0;let q=null,B=null;if(j==="percent"){const T=Math.max(0,100-I);if(T<=de){g(o("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(v>T){v=T;const me=h(v.toFixed(2));g(o("projects.toast.paymentCappedPercent","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {value}% Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ 100%").replace("{value}",me))}B=Math.round(v*100)/100,C>0&&(q=Math.round(B/100*C*100)/100)}else{const T=Math.max(0,C-P);if(T<=de){g(o("projects.toast.paymentNoRemainingBalance","âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©"));return}if(v>T){v=T;const me=`${h(v.toFixed(2))} ${xe}`;g(o("projects.toast.paymentCappedAmount","â„¹ï¸ ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ø¯ÙØ¹Ø© Ø¥Ù„Ù‰ {amount} Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ").replace("{amount}",me))}q=Math.round(v*100)/100,C>0&&(B=Math.round(q/C*100*100)/100)}const X={type:j,amount:q??null,percentage:B??null,value:j==="amount"?q:B,note:null,recordedAt:new Date().toISOString()};s.payments=[...Ee(),X],R&&(R.value=""),G&&(G.value="percent"),pe(),g(o("projects.toast.paymentAdded","âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©"))},be=j=>{!N||!L||ce||(ce=!0,j==="share"?L.checked?(N.checked||(N.checked=!0),Ke(L)):N.checked&&(N.checked=!1):j==="tax"&&(N.checked?Ke(L):L.checked&&(L.checked=!1)),ce=!1)};function ue(){b&&(b.innerHTML=ts(s.expenses))}ue(),pe();const K=r.querySelector("#project-edit-close-btn"),J=r.querySelector("#project-edit-reopen-btn"),ae=String(e?.status||"").toLowerCase()==="completed";K&&(K.disabled=ae),J&&(J.disabled=!ae);const _=()=>{const j=document.getElementById("closeProjectModal"),f=document.getElementById("close-project-notes"),v=document.getElementById("close-project-submit");if(f&&(f.value=""),v&&v.__tmpCloseProjectListener&&(v.removeEventListener("click",v.__tmpCloseProjectListener),v.__tmpCloseProjectListener=null),v){const x=async()=>{const C=f?.value||"";try{const P=await At(e.projectId??e.id,C);await kt(P?.projectId??P?.id??e.id),u.projects=we(),u.reservations=M(),g(o("projects.toast.closed","âœ… ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),fe(),Ie(),ke(),Ue(P?.id??e.id)}catch(P){console.error("âŒ [projects] closeProject failed",P),g(o("projects.toast.closeFailed","ØªØ¹Ø°Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"),"error")}finally{try{((window.bootstrap?.Modal||bootstrap?.Modal)?.getInstance?.(j)||(window.bootstrap?.Modal||bootstrap?.Modal)?.getOrCreateInstance?.(j))?.hide?.()}catch{}}};v.__tmpCloseProjectListener=x,v.addEventListener("click",x,{once:!0})}j&&(window.bootstrap?.Modal||typeof bootstrap<"u"&&bootstrap?.Modal)&&(window.bootstrap?.Modal||bootstrap.Modal).getOrCreateInstance(j).show()};K&&!K.dataset.listenerAttached&&(K.addEventListener("click",j=>{j.preventDefault(),_()}),K.dataset.listenerAttached="true"),J&&!J.dataset.listenerAttached&&(J.addEventListener("click",async j=>{j.preventDefault();try{const f=await js(e.projectId??e.id);await Ms(f?.projectId??f?.id??e.id),u.projects=we(),u.reservations=M(),g(o("projects.toast.reopened","â†©ï¸ ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")),fe(),Ie(),ke(),Ue(f?.id??e.id)}catch(f){console.error("âŒ [projects] reopenProject failed",f),g(o("projects.toast.reopenFailed","ØªØ¹Ø°Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"),"error")}}),J.dataset.listenerAttached="true"),W&&!W.dataset.listenerAttached&&(W.addEventListener("input",j=>{const f=j.target;f instanceof HTMLInputElement&&(f.value=h(f.value||""),se(),re("auto"))}),W.dataset.listenerAttached="true"),l&&!l.dataset.listenerAttached&&(l.addEventListener("input",j=>{const f=j.target;f instanceof HTMLInputElement&&(f.value=h(f.value||""))}),l.dataset.listenerAttached="true"),U&&!U.dataset.listenerAttached&&(U.addEventListener("change",()=>{se(),re("auto")}),U.dataset.listenerAttached="true"),R&&!R.dataset.listenerAttached&&(R.addEventListener("input",j=>{const f=j.target;f instanceof HTMLInputElement&&(f.value=h(f.value||""))}),R.dataset.listenerAttached="true"),E&&!E.dataset.listenerAttached&&(E.addEventListener("change",()=>{E.dataset.userSelected="true"}),E.dataset.listenerAttached="true"),c&&!c.dataset.listenerAttached&&(c.addEventListener("input",j=>{const f=j.target;f instanceof HTMLInputElement&&(f.value=h(f.value||""))}),c.dataset.listenerAttached="true"),L&&!L.dataset.listenerAttached&&(L.addEventListener("change",()=>{be("share"),se(),re("auto")}),L.dataset.listenerAttached="true"),N&&!N.dataset.listenerAttached&&(N.addEventListener("change",()=>{be("tax"),se(),re("auto")}),N.dataset.listenerAttached="true"),L?.checked&&Ke(L),be(L?.checked?"share":"tax"),se(),re("auto"),d&&d.addEventListener("click",j=>{j.preventDefault();const f=n?.value.trim()||"",v=h(c?.value||"0"),x=Number(v),C=h(l?.value||"0"),P=Number(C),I=(p?.value||"").trim();if(!f){g(o("projects.toast.missingExpenseLabel","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ")),n?.focus();return}if(!Number.isFinite(x)||x<=0){g(o("projects.toast.invalidExpenseAmount","âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­")),c?.focus();return}s.expenses.push({id:`expense-${e.id}-${Date.now()}`,label:f,amount:x,salePrice:Number.isFinite(P)&&P>0?P:0,note:I||""}),n&&(n.value=""),c&&(c.value=""),l&&(l.value=""),p&&(p.value=""),ue(),se(),re("auto")}),b&&(b.addEventListener("click",j=>{const f=j.target.closest('[data-action="remove-expense"]');if(!f)return;const{id:v}=f.dataset;s.expenses=s.expenses.filter(x=>String(x.id)!==String(v)),ue(),se(),re("auto")}),b.addEventListener("input",j=>{const f=j.target;if(!(f instanceof HTMLInputElement))return;const v=f.dataset.expenseId,x=f.dataset.expenseField;if(!v||!x)return;const C=s.expenses.findIndex(I=>String(I.id)===String(v));if(C===-1)return;let P=f.value;if(x==="amount"||x==="salePrice"){const I=h(P||""),q=Number.parseFloat(I);Number.isFinite(q)&&q>=0?s.expenses[C][x]=q:(P===""||I==="")&&(s.expenses[C][x]=0),se(),re("auto")}else(x==="label"||x==="note")&&(s.expenses[C][x]=P)})),Z&&!Z.dataset.listenerAttached&&(Z.addEventListener("click",j=>{j.preventDefault(),Le()}),Z.dataset.listenerAttached="true"),z&&!z.dataset.listenerAttached&&(z.addEventListener("click",j=>{const f=j.target.closest('[data-action="remove-payment"]');if(!f)return;const v=Number.parseInt(f.dataset.index||"-1",10);if(!Number.isInteger(v)||v<0)return;const x=Ee();if(v>=x.length)return;const C=x.filter((P,I)=>I!==v);s.payments=C,pe(),g(o("projects.toast.paymentRemoved","ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"))}),z.dataset.listenerAttached="true"),r.addEventListener("submit",async j=>{if(j.preventDefault(),r.dataset.submitting==="true")return;const f=r.querySelector('[name="project-title"]'),v=r.querySelector('[name="project-type"]'),x=r.querySelector('[name="project-description"]'),C=f?.value.trim()||"",P=v?.value||"",I=h(m?.value.trim()||""),q=h(y?.value.trim()||""),B=x?.value.trim()||"",X=(E?.value||"unpaid").toLowerCase(),T=["paid","partial"].includes(X)?X:"unpaid";if(!C||!P||!I){g(o("projects.toast.missingRequiredFields","âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")),f?.focus();return}const me=h(S?.value.trim()||""),ct=h($?.value.trim()||""),Fe=Lt(I,q),qe=me?Lt(me,ct):"",lt=new Date(Fe),Ge=qe?new Date(qe):null;if(Ge&&lt>Ge){g(o("projects.toast.invalidDateRange","âš ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©")),S?.focus();return}if(u.projects.findIndex(O=>String(O.id)===String(e.id))===-1){g(o("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}const pt=ne(),{equipmentEstimate:dt,servicesClientPrice:ut,discountValue:mt,discountTypeValue:jt,applyTax:Oe,companyShareEnabled:Xe,companySharePercent:ft,finance:ee}=pt,yt=G?.value==="amount"?"amount":"percent",Ae=h(R?.value||"");let A=Ae?Number.parseFloat(Ae):null,k=[...Ee()];if(Number.isFinite(A)&&A>0&&Number.isFinite(Number(ee.totalWithTax))){const O=ze({totalAmount:ee.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:k}),ie=new Date().toISOString();if(yt==="percent"){const F=Math.max(0,100-(O.paidPercent||0));if(F>de){const te=Math.min(A,F),Q=Math.round(te*100)/100,Te=ee.totalWithTax>0?Math.round(Q/100*ee.totalWithTax*100)/100:null;k=[...k,{type:"percent",amount:Te,percentage:Q,value:Q,note:null,recordedAt:ie}]}}else{const F=Math.max(0,ee.totalWithTax-(O.paidAmount||0));if(F>de){const te=Math.min(A,F),Q=Math.round(te*100)/100,Te=ee.totalWithTax>0?Math.round(Q/ee.totalWithTax*100*100)/100:null;k=[...k,{type:"amount",amount:Q,percentage:Te,value:Q,note:null,recordedAt:ie}]}}k!==s.payments&&(s.payments=k,pe()),R&&(R.value=""),G&&(G.value="percent"),A=null}const D=ze({totalAmount:ee.totalWithTax,paidAmount:s.basePaidAmount||0,paidPercent:s.basePaidPercent||0,history:k}),Y=E?.dataset?.userSelected==="true",H=tt({manualStatus:Y?T:e.paymentStatus||T,paidAmount:D.paidAmount,paidPercent:D.paidPercent,totalAmount:ee.totalWithTax}),V=Y?T:H;!Y&&E&&(E.value=V),E?.dataset&&delete E.dataset.userSelected,s.payments=k;const oe=Vt({projectCode:e.projectCode,title:C,type:P,clientId:e.clientId,clientCompany:e.clientCompany,description:B,start:Fe,end:qe||null,applyTax:Oe,paymentStatus:V,equipmentEstimate:dt,expenses:s.expenses,servicesClientPrice:ut,discount:mt,discountType:jt,companyShareEnabled:Xe&&Oe,companySharePercent:Xe&&Oe?ft:null,companyShareAmount:ee.companyShareAmount,taxAmount:ee.taxAmount,totalWithTax:ee.totalWithTax,confirmed:e.confirmed,technicians:Array.isArray(e.technicians)?e.technicians:[],equipment:Ys(e),paidAmount:D.paidAmount,paidPercentage:D.paidPercent,paymentProgressType:D.paymentProgressType,paymentProgressValue:D.paymentProgressValue,payments:k}),ve=he?.checked===!0;ve&&(oe.status="cancelled",oe.cancelled=!0),r.dataset.submitting="true";try{const O=await Tt(e.projectId??e.id,oe),ie=O?.projectId??O?.id??e.id;if(!ve)try{const F={start:Fe};qe&&(F.end=qe),await Rs(ie,F)}catch(F){console.warn("âš ï¸ failed to sync linked reservations schedule",F)}if(await xt(ie,V),ve)try{await Fs(ie)}catch(F){console.warn("âš ï¸ failed to cancel linked reservations",F)}u.projects=we(),u.reservations=M(),g(o("projects.toast.updated","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­")),fe(),Ie(),ke(),Ue(e.id)}catch(O){console.error("âŒ [projects] Failed to update project from details view",O);const ie=at(O)?O.message:o("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(ie,"error")}finally{delete r.dataset.submitting}})}function Dt(e){if(!e)return;const s={projectId:e.id,customerId:e.clientId||null,start:e.start||null,end:e.end||null,forceNotes:!!e.description,fromProjectForm:!0,draftStorageKey:"projects:create:draft",returnUrl:`projects.html?project=${encodeURIComponent(e.id)}&linked=1#projects-section`};St({dashboardTab:"reservations-tab",dashboardSubTab:"create-tab"}).catch(n=>{console.warn("âš ï¸ [projects] Failed to persist dashboard tab preference",n)});let r="";try{r=encodeURIComponent(JSON.stringify(s))}catch(n){console.warn("âš ï¸ [projects] Unable to encode reservation context",n)}t.detailsModalEl&&window.bootstrap?.Modal&&window.bootstrap.Modal.getOrCreateInstance(t.detailsModalEl)?.hide();const a=r?`?reservationProjectContext=${r}`:"";window.location.href=`dashboard.html${a}#reservations`}async function pr(e){if(!e)return;const s=u.projects.find(r=>String(r.id)===String(e));if(!s){g(o("projects.toast.editMissing","âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ¹Ø¯ÙŠÙ„Ù‡"));return}if(s.confirmed===!0||s.confirmed==="true"){g(o("projects.toast.alreadyConfirmed","â„¹ï¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¤ÙƒÙ‘Ø¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§"));return}try{await Tt(s.projectId??s.id,{confirmed:!0});const r=await _s(e);u.projects=we(),u.reservations=M(),fe(),Ie(),ke(),t.detailsModalEl&&t.detailsModalEl.classList.contains("show")&&t.detailsBody?.dataset.projectId===String(e)&&Ue(e),document.dispatchEvent(new CustomEvent("projects:changed")),r&&document.dispatchEvent(new CustomEvent("reservations:changed")),g(o("projects.toast.confirmed","âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}catch(r){console.error("âŒ [projects] confirmProject failed",r);const a=at(r)?r.message:o("projects.toast.updateFailed","ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");g(a,"error")}}function dr(e,s={clientName:"",clientCompany:"",expenses:[]}){const{date:r,time:a}=$t(e.start||""),{date:n,time:c}=$t(e.end||""),l=e.applyTax===!0||e.applyTax==="true";typeof e.paymentStatus=="string"&&e.paymentStatus.toLowerCase();const p=e.discountType==="amount"?"amount":"percent",d=h(String(e.discount??e.discountValue??0));h(String(e.servicesClientPrice??e.services_client_price??0));const b=e.companySharePercent??e.company_share_percent??e.companyShare??e.company_share??e.companyShareAmountPercent??ye,m=Number.parseFloat(h(String(b))),y=Number.isFinite(m)&&m>0?m:ye,S=e.companyShareEnabled===!0||e.companyShareEnabled==="true"||e.company_share_enabled===!0||e.company_share_enabled==="true"||l&&Number.isFinite(m)&&m>0,$="",E=e?.cancelled===!0||e?.cancelled==="true"||String(e?.status||"").toLowerCase()==="cancelled"||String(e?.status||"").toLowerCase()==="canceled";return`
    <form id="project-details-edit-form" class="project-edit-form">
      <div class="row g-3">
        <div class="col-12 col-xl-8">
          <label class="form-label">${i(o("projects.form.labels.title","Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <input type="text" class="form-control project-edit-input-wide" name="project-title" value="${i(e.title||"")}" required>
        </div>
        <div class="col-12 col-sm-6 col-xl-4 d-flex flex-column">
          <label class="form-label">${i(o("projects.form.labels.type","Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          <select class="form-select project-edit-select-lg" name="project-type" required>
            ${ur(e.type)}
          </select>
        </div>
        <div class="col-12">
          <div class="project-edit-inline-group project-edit-inline-group--dates">
            <div class="project-edit-inline-field">
              <label class="form-label">${i(o("projects.form.labels.startDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="date" class="form-control" name="project-start-date" value="${i(r)}" required>
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${i(o("projects.form.labels.endDate","ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="date" class="form-control" name="project-end-date" value="${i(n)}">
            </div>
          </div>
          <div class="project-edit-inline-group project-edit-inline-group--times mt-2">
            <div class="project-edit-inline-field">
              <label class="form-label">${i(o("projects.form.labels.startTime","ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡"))}</label>
              <input type="time" class="form-control" name="project-start-time" value="${i(a)}">
            </div>
            <div class="project-edit-inline-field">
              <label class="form-label">${i(o("projects.form.labels.endTime","ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"))}</label>
              <input type="time" class="form-control" name="project-end-time" value="${i(c)}">
            </div>
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">${i(o("projects.form.labels.description","Ø§Ù„ÙˆØµÙ"))}</label>
          <textarea class="form-control project-edit-textarea" name="project-description" rows="5">${i(e.description||"")}</textarea>
        </div>
        <div class="col-12">
          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="project-cancelled" name="project-cancelled" ${E?"checked":""}>
            <label class="form-check-label" for="project-cancelled">${i(o("projects.form.labels.cancelled","Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</label>
          </div>
          <div class="form-text">${i(o("projects.form.hints.cancelled","Ø³ÙŠØªÙ… ÙˆØ³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙƒÙ…Ù„ØºÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¥Ù„Ù‰ Ù…Ù„ØºÙŠ."))}</div>
        </div>
        <!-- Payment status select removed: status is inferred automatically from payments -->
      </div>

      <!-- Services block placed directly under project description -->
      <section class="project-edit-expenses mt-4">
        <h6 class="mb-2">${i(o("projects.form.labels.expenseLabel","Ø®Ø¯Ù…Ø§Øª Ø¥Ù†ØªØ§Ø¬ÙŠØ©"))}</h6>
        <div class="project-edit-expense-form">
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-label" placeholder="${i(o("projects.form.placeholders.expenseLabel","ÙˆØµÙ Ø§Ù„Ù…ØªØ·Ù„Ø¨"))}">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-amount" placeholder="${i(o("projects.form.placeholders.expenseAmount","Ø§Ù„Ù…Ø¨Ù„Øº"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-amount-col">
            <input type="text" class="form-control project-edit-input-xs" id="project-edit-expense-sale" placeholder="${i(o("projects.form.placeholders.salePrice","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"))}" inputmode="decimal">
          </div>
          <div class="project-edit-expense-label-col">
            <input type="text" class="form-control project-edit-input-wide" id="project-edit-expense-note" placeholder="${i(o("projects.form.placeholders.expenseNote","ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"))}">
          </div>
          <div class="project-edit-expense-action-col">
            <button type="button" class="modal-action-btn modal-action-btn--warning project-edit-add-btn" data-action="add-expense">${i(o("projects.form.buttons.addExpense","â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©"))}</button>
          </div>
        </div>
        <div id="project-edit-expense-list" class="project-edit-expense-list mt-3">
          ${ts(s.expenses)}
        </div>
      </section>

      <!-- Services block placed directly under project description -->
      
      
      <div class="row g-3 align-items-start mt-1">
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-discount">${i(o("projects.form.labels.discount","Ø§Ù„Ø®ØµÙ…"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-discount-type" name="project-discount-type" class="form-select project-edit-select-xs">
              <option value="percent" ${p==="percent"?"selected":""}>${i(o("projects.form.discount.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
              <option value="amount" ${p==="amount"?"selected":""}>${i(o("projects.form.discount.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
            </select>
            <input type="text" id="project-edit-discount" name="project-discount" class="form-control project-edit-input-xs" value="${i(d)}" placeholder="0" inputmode="decimal">
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label d-block" for="project-edit-company-share">${i(o("projects.form.labels.companyShare","Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨Ø©"))}</label>
          <div class="d-flex flex-column gap-2">
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-company-share" name="project-company-share" data-company-share="${i(String(y))}" ${S?"checked":""}>
              <label class="form-check-label" for="project-edit-company-share">${i(o("projects.form.companyShareToggle","Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ© (10Ùª)"))}</label>
            </div>
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" role="switch" id="project-edit-tax" name="project-apply-tax" ${l?"checked":""}>
              <label class="form-check-label" for="project-edit-tax">${i(o("projects.form.taxLabel","Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (15Ùª)"))}</label>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3">
          <label class="form-label" for="project-edit-payment-progress-value">${i(o("projects.form.paymentProgress.label","ğŸ’° Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©"))}</label>
          <div class="input-group project-edit-input-group">
            <select id="project-edit-payment-progress-type" name="project-payment-progress-type" class="form-select project-edit-select-xs">
              <option value="amount" >${i(o("projects.form.paymentProgress.amount","ğŸ’µ Ù…Ø¨Ù„Øº"))}</option>
              <option value="percent" selected>${i(o("projects.form.paymentProgress.percent","Ùª Ù†Ø³Ø¨Ø©"))}</option>
            </select>
            <input type="text" id="project-edit-payment-progress-value" name="project-payment-progress-value" class="form-control project-edit-input-xs" value="${i($)}" placeholder="0" inputmode="decimal">
          </div>
          <button type="button" class="modal-action-btn modal-action-btn--ghost project-edit-add-btn mt-2" id="project-edit-payment-add">${i(o("reservations.paymentHistory.actions.add","â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©"))}</button>
        </div>
      </div>

      <section class="project-edit-payment-history mt-4">
        <div id="project-edit-payment-summary" class="project-details-grid mb-3"></div>
        <div class="reservation-payment-history-block">
          <div class="reservation-payment-history__header">
            <h6 class="reservation-payment-history__title">${i(o("reservations.paymentHistory.title","Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª"))}</h6>
          </div>
          <div id="project-edit-payment-history" class="reservation-payment-history"></div>
        </div>
      </section>


      <div class="project-edit-actions mt-4 d-flex justify-content-between">
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-warning" id="project-edit-close-btn">${i(o("projects.actions.close","ğŸ”’ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
          <button type="button" class="btn btn-outline-secondary" id="project-edit-reopen-btn">${i(o("projects.actions.reopen","â†©ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"))}</button>
        </div>
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary">${i(o("projects.form.buttons.update","ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"))}</button>
          <button type="button" class="btn btn-outline-secondary" data-action="cancel-edit">${i(o("actions.cancel","Ø¥Ù„ØºØ§Ø¡"))}</button>
        </div>
      </div>
    </form>
  `}function ur(e){return["commercial","coverage","photography","social"].map(r=>{const a=rs(r),n=r===e?"selected":"";return`<option value="${i(r)}" ${n}>${i(a)}</option>`}).join("")}function ts(e=[]){const s=i(o("actions.remove","Ø¥Ø²Ø§Ù„Ø©")),r=i(o("projects.expenses.table.headers.service","Ø§Ù„Ø®Ø¯Ù…Ø©")),a=i(o("projects.expenses.table.headers.cost","Ø§Ù„ØªÙƒÙ„ÙØ© (SR)")),n=i(o("projects.expenses.table.headers.sale","Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ (SR)")),c=i(o("projects.expenses.table.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª")),l=i(o("projects.expenses.table.headers.actions","Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"));if(!Array.isArray(e)||e.length===0){const y=i(o("projects.selected.emptyExpenses","Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…ØµØ±ÙˆÙ"));return`
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle project-services-table">
          <thead class="table-light">
            <tr>
              <th>${r}</th>
              <th>${a}</th>
              <th>${n}</th>
              <th>${c}</th>
              <th>${l}</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="5" class="text-center text-muted">${y}</td></tr>
          </tbody>
        </table>
      </div>`}const p=e.map(y=>{const S=i(String(y?.id||"")),$=i(String(y?.label||"")),E=Number(y?.amount)||0,N=Number(y?.salePrice??y?.sale_price??0)||0,L=i(String((y?.note??y?.notes)||""));return`
      <tr>
        <td>
          <input type="text" class="form-control form-control-sm" value="${$}" data-expense-id="${S}" data-expense-field="label" placeholder="${i(o("projects.form.placeholders.expenseLabel","Ø§Ù„ÙˆØµÙ"))}">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${i(String(E))}" data-expense-id="${S}" data-expense-field="amount" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${i(String(N))}" data-expense-id="${S}" data-expense-field="salePrice" inputmode="decimal" placeholder="0">
        </td>
        <td>
          <input type="text" class="form-control form-control-sm" value="${L}" data-expense-id="${S}" data-expense-field="note" placeholder="${i(o("projects.form.placeholders.expenseNote","ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"))}">
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-link text-danger" data-action="remove-expense" data-id="${S}" aria-label="${s}">âœ–</button>
        </td>
      </tr>
    `}).join(""),d=e.reduce((y,S)=>y+(Number(S?.salePrice??S?.sale_price)||0),0),b=i(w(d)),m=i(o("projects.expenses.table.totalSale","Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"));return`
    <div class="table-responsive">
      <table class="table table-sm table-hover align-middle project-services-table">
        <thead class="table-light">
          <tr>
            <th>${r}</th>
            <th>${a}</th>
            <th>${n}</th>
            <th>${c}</th>
            <th>${l}</th>
          </tr>
        </thead>
        <tbody>${p}</tbody>
        <tfoot>
          <tr>
            <th colspan="2" class="text-end">${m}</th>
            <th>${b}</th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  `}function _t(e=[],{total:s=null}={}){return!Array.isArray(e)||e.length===0?`<div class="reservation-payment-history-empty">${i(o("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`:`<ul class="reservation-payment-history-list">${e.map(r=>{const a=r?.type==="percent"?o("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):r?.type==="amount"?o("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"):o("reservations.paymentHistory.type.unknown","Ø¯ÙØ¹Ø©"),n=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?Number(r.percentage):null,c=n!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(n/100)*100)/100:null,l=r?.type==="percent"&&c!=null?c:Number.isFinite(Number(r?.amount))&&Number(r.amount)>0?Number(r.amount):null,p=l!=null?i(w(l)):"â€”",d=Number.isFinite(Number(r?.percentage))&&Number(r.percentage)>0?`${h(Number(r.percentage).toFixed(2))}%`:"â€”",b=r?.recordedAt?h(ot(r.recordedAt)):"â€”",m=r?.note?`<div class="payment-history-note">${i(h(r.note))}</div>`:"";return`
      <li>
        <div class="payment-history-entry">
          <span class="payment-history-entry__type">${i(a)}</span>
          <span class="payment-history-entry__amount">${p}</span>
          <span class="payment-history-entry__percent">${d}</span>
          <span class="payment-history-entry__date">${b}</span>
        </div>
        ${m}
      </li>
    `}).join("")}</ul>`}function mr(e=[],{total:s=null}={}){if(!Array.isArray(e)||e.length===0)return`<div class="reservation-payment-history__empty">${i(o("reservations.paymentHistory.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"))}</div>`;const r=e.map((a,n)=>{const c=a?.type==="percent"?o("reservations.paymentHistory.type.percent","Ø¯ÙØ¹Ø© Ù†Ø³Ø¨Ø©"):o("reservations.paymentHistory.type.amount","Ø¯ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ©"),l=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?Number(a.percentage):null,p=l!=null&&Number.isFinite(Number(s))&&Number(s)>0?Math.round(Number(s)*(l/100)*100)/100:null,d=a?.type==="percent"&&p!=null?p:Number.isFinite(Number(a?.amount))&&Number(a.amount)>0?Number(a.amount):null,b=d!=null?i(w(d)):"â€”",m=Number.isFinite(Number(a?.percentage))&&Number(a.percentage)>0?`${h(Number(a.percentage).toFixed(2))}%`:"â€”",y=a?.recordedAt?h(ot(a.recordedAt)):"â€”",S=a?.note?i(h(a.note)):"",$=i(o("reservations.paymentHistory.actions.delete","Ø­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©"));return`
      <tr>
        <td>${i(c)}</td>
        <td>${b}</td>
        <td>${m}</td>
        <td>${y}</td>
        <td>${S}</td>
        <td class="reservation-payment-history__actions">
          <button type="button" class="btn btn-link btn-sm reservation-payment-history__remove" data-action="remove-payment" data-index="${n}" aria-label="${$}">ğŸ—‘ï¸</button>
        </td>
      </tr>
    `}).join("");return`
    <div class="reservation-payment-history__table-wrapper">
      <table class="table table-sm reservation-payment-history__table">
        <thead>
          <tr>
            <th>${i(o("reservations.paymentHistory.headers.method","Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹Ø©"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.amount","Ø§Ù„Ù…Ø¨Ù„Øº"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.percent","Ø§Ù„Ù†Ø³Ø¨Ø©"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.date","Ø§Ù„ØªØ§Ø±ÙŠØ®"))}</th>
            <th>${i(o("reservations.paymentHistory.headers.note","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"))}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>${r}</tbody>
      </table>
    </div>
  `}function jr(e={}){const r=(Array.isArray(e.paymentHistory)?e.paymentHistory:Array.isArray(e.payment_history)?e.payment_history:[]).map(fr).filter(Boolean);if(r.length>0)return r;const a=rt(e.paidPercent??e.paid_percent),n=rt(e.paidAmount??e.paid_amount),c=e.updatedAt??e.updated_at??e.createdAt??e.created_at??null,l=ss(c);return a!=null&&a>0?[{type:"percent",amount:n!=null&&n>0?n:null,percentage:a,value:a,note:null,recordedAt:l}]:n!=null&&n>0?[{type:"amount",amount:n,percentage:null,value:n,note:null,recordedAt:l}]:[]}function fr(e){if(!e||typeof e!="object")return null;const s=e.type??e.payment_type??e.paymentType??null;let r=typeof s=="string"?s.toLowerCase().trim():null;r!=="percent"&&(r="amount");const a=rt(e.amount??(r==="amount"?e.value:null)),n=rt(e.percentage??(r==="percent"?e.value:null)),c=r==="percent"?n??null:a??null,l=e.note??e.memo??null,p=ss(e.recordedAt??e.recorded_at??e.date??e.created_at??null);return r==="amount"&&a==null||r==="percent"&&n==null?null:{type:r,amount:a??null,percentage:n??null,value:c,note:l&&String(l).trim().length?String(l).trim():null,recordedAt:p}}function rt(e){if(e==null||e==="")return null;const s=h(String(e)).replace(/%/g,"").trim();if(!s)return null;const r=Number.parseFloat(s);return Number.isFinite(r)?r:null}function ss(e){if(!e)return new Date().toISOString();const s=new Date(e);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function Ft(e,s){if(!s)return null;const{date:r,time:a}=yr(ot(s)),n=e==="start",c=n?"â±ï¸":"âŒ›",l=n?o("projects.details.labels.start","Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"):o("projects.details.labels.end","Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹");return{icon:c,label:l,value:r,meta:a}}function yr(e){if(!e||e==="â€”")return{date:"â€”",time:""};const s=e.split(" ").filter(Boolean),r=s.shift()||"â€”",a=s.join(" ");return{date:r,time:a}}function rs(e){if(!e)return o("projects.form.types.unknown","Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯");const s={commercial:"projects.form.types.commercial",coverage:"projects.form.types.coverage",photography:"projects.form.types.photography",social:"projects.form.types.social"}[e]||"projects.form.types.unknown";return o(s,e)}function as(e){if(!e)return 0;const s=Array.isArray(e.items)?e.items:[],r=e.discount??0,a=Number(h(String(r)))||0,n=e.discountType||"percent",c=Array.isArray(e.crewAssignments)?e.crewAssignments:[],l=c.length?c:Array.isArray(e.technicians)?e.technicians:[],p=vs(s,a,n,!1,l,{start:e.start,end:e.end});if(Number.isFinite(p))return p;const d=Number(h(String(e.cost??0)));return Number.isFinite(d)?Math.round(d):0}export{Er as a,wr as b,Tr as c,Nr as d,Ir as e,$r as f,Fr as g,Lr as h,Cr as i,Mr as j,Ns as k,Dr as l,Pr as m,Be as n,Ue as o,kr as p,Ar as q,Xt as r,cr as s,_r as t,qr as u,Rr as v};
