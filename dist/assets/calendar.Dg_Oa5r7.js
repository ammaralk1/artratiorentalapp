import{s as ee,k as ve}from"./state.DnWIUPO4.js";import{t as l,p as $,d as Z}from"./auth.B4XUmSYg.js";import{e as Se}from"./reservationsActions.B0-uMTYt.js";import{w as Ce,g as te,c as ne,d as ae,a as Ee}from"./reservationsService.DZ-N01gk.js";import{b as re}from"./details.H30V87QE.js";import{e as Le}from"./view.DnRD_31g.js";import"./equipment.9WuoT98d.js";const xe={limit:200};let u=null,se=!1,ie=!1,oe=!1,le=null,z=null,de=!1,G=null,O=null,U=!1,A="",H=null;const K=new Map;function _(e=""){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function J(){const e=document.getElementById("calendar"),n=document.getElementById("calendar-panel")||e?.parentElement||null,r=document.getElementById("calendar-status");return{calendarEl:e,panelEl:n,statusEl:r}}function ce(){try{if(typeof FullCalendar<"u")return FullCalendar}catch{}return typeof window<"u"&&window.FullCalendar?window.FullCalendar:typeof global<"u"&&global.FullCalendar?global.FullCalendar:typeof globalThis<"u"&&globalThis.FullCalendar?globalThis.FullCalendar:null}async function Ae(){const e=ce();return e||H||(H=new Promise(n=>{try{const r="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js",a=document.createElement("script");a.src=r,a.async=!0,a.onload=()=>n(ce()),a.onerror=()=>n(null),document.head.appendChild(a)}catch{n(null)}}),H)}function _e(){if(typeof window>"u")return null;const e=window.tui?.Calendar||window.toastui?.Calendar||window.Calendar;return typeof e=="function"?e:null}function ke(e){return K.has(e)||K.set(e,new Intl.DateTimeFormat(e,{hour:"2-digit",minute:"2-digit"})),K.get(e)}function Q(e,n,r=!1){if(r){const p=($?.()==="en"?"en":"ar")==="en"?"All day":"Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ…";return l("calendar.labels.allDay",p)}if(!e)return"";const a=new Date(e);if(Number.isNaN(a.getTime()))return"";const s=$?.()==="en"?"en-US":"ar-SA-u-ca-gregory-nu-latn",d=ke(s),t=d.format(a);if(!n)return t;const o=new Date(n);if(Number.isNaN(o.getTime()))return t;const f=d.format(o);return t===f?t:`${t} â€“ ${f}`}function Te({paidStatus:e,confirmed:n,completed:r,cancelled:a}){const s=["calendar-event"];return(r===!0||r==="true")&&s.push("calendar-event--completed"),(a===!0||a==="true")&&s.push("calendar-event--cancelled"),n===!0||n==="true"?s.push("calendar-event--confirmed"):s.push("calendar-event--pending"),e==="paid"?s.push("calendar-event--paid"):e==="partial"?s.push("calendar-event--partial"):s.push("calendar-event--unpaid"),s}function Me(e){try{const{event:n}=e||{},r=n?.extendedProps||{},a=Q(n?.startStr,n?.endStr,n?.allDay),s=r?.reservationId?String(r.reservationId):n?.id!=null?String(n.id):"â€”",d=r?.customerName||l("calendar.labels.unknownCustomer","ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"),t=r?.confirmed===!0||r?.confirmed==="true",o=typeof r?.paidStatus=="string"?r.paidStatus:r?.paid===!0||r?.paid==="paid"?"paid":"unpaid",f=o==="paid",g=r?.completed===!0||r?.completed==="true",p=(S,M)=>`<span class="calendar-chip ${S}">${_(M)}</span>`,c=t?l("calendar.badges.confirmed","Ù…Ø¤ÙƒØ¯"):l("calendar.badges.pending","ØºÙŠØ± Ù…Ø¤ÙƒØ¯"),k=o==="paid"?l("calendar.badges.paid","Ù…Ø¯ÙÙˆØ¹"):o==="partial"?l("calendar.badges.partial","Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹","Partially paid"):l("calendar.badges.unpaid","ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹"),v=r?.cancelled===!0||r?.cancelled==="true";let y=[];if(v)y=[p("status-cancelled",l("calendar.badges.cancelled","Ù…Ù„ØºÙŠ"))];else{const S=o==="paid"?"status-paid":o==="partial"?"status-partial":"status-unpaid";y=[p(t?"status-confirmed":"status-pending",c),p(S,k)],g&&y.push(p("status-completed",l("calendar.badges.completed","Ù…Ù†ØªÙ‡ÙŠ")))}return{html:`
      <div class="calendar-event-wrapper">
        <div class="calendar-event-card">
          <div class="calendar-event-card__head">
            <span class="calendar-event-card__time">${_(a||"")}</span>
            <span class="calendar-event-card__id">${_(s)}</span>
          </div>
          <div class="calendar-event-card__customer">${_(d)}</div>
          <div class="calendar-event-card__chips">${y.join("")}</div>
        </div>
      </div>`}}catch{return{html:""}}}function Ie(){const{calendarEl:e}=J();if(!e)return;const n=e.querySelector(".fc-header-toolbar");if(!n)return;n.classList.add("calendar-toolbar"),n.querySelectorAll(".fc-toolbar-chunk").forEach(a=>{a.classList.add("calendar-toolbar__chunk")});const r=n.querySelector(".fc-toolbar-title");r&&r.classList.add("calendar-toolbar__title"),n.querySelectorAll(".fc-button").forEach(a=>{a.classList.add("calendar-toolbar__button")})}function I({loading:e=!1,error:n="",empty:r=!1}={}){const{panelEl:a,statusEl:s}=J();if(!a||!s)return;const d=typeof n=="string"?n.trim().length>0:!!n,t=!e&&!d&&!!r,o=e||d||t;if(a.classList.toggle("is-loading",e),a.classList.toggle("has-error",d),a.classList.toggle("is-empty",t),s.dataset.initialized||(s.classList.add("calendar-status-card","shadow-2xl","bg-base-100/95","border","border-base-200/80","rounded-3xl","text-base-content","px-8","py-8","flex","flex-col","items-center","justify-center","gap-4"),s.dataset.initialized="true"),s.classList.remove("calendar-status-card--loading","calendar-status-card--error","calendar-status-card--empty"),s.classList.toggle("hidden",!o),!o){s.innerHTML="",s.removeAttribute("data-status");return}let f="";e?f=l("calendar.status.loading","â³ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª..."):d?f=typeof n=="string"&&n.trim().length>0?n:l("calendar.status.error","ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹."):t&&(f=l("calendar.status.empty","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©."));const g=e?"loading":d?"error":"empty";if(s.setAttribute("data-status",g),s.classList.add(`calendar-status-card--${g}`),s.innerHTML="",e){const c=document.createElement("span");c.className="loading loading-spinner loading-md text-primary",c.setAttribute("aria-hidden","true"),s.appendChild(c)}else{const c=document.createElement("span");c.className="calendar-status-card__icon",c.setAttribute("aria-hidden","true"),c.textContent=d?"âš ï¸":"ğŸ—“ï¸",s.appendChild(c)}const p=document.createElement("span");p.className="calendar-status-card__message text-center text-sm font-semibold",p.textContent=f,s.appendChild(p)}function fe(e,n=null){if(!e||typeof e!="object")return null;const r=e.start??e.startDatetime??e.start_datetime??null,a=e.end??e.endDatetime??e.end_datetime??r;if(!r)return null;const s=String(e.status??e.reservationStatus??"").toLowerCase(),d=Number(e.totalAmount??e.cost??0)||0,t=e.paymentHistory||e.payment_history||[],o=ne({totalAmount:d,paidAmount:t.length?0:e.paidAmount,paidPercent:t.length?0:e.paidPercent,history:t});let f=ae({manualStatus:null,paidAmount:o.paidAmount,paidPercent:o.paidPercent,totalAmount:d});if(n)try{const y=Le(n)||{},T=Number(y.totalWithTax||0),S=n.paymentHistory||n.payments||[],M=ne({totalAmount:T,paidAmount:S.length?0:n.paidAmount,paidPercent:S.length?0:n.paidPercent,history:S}),x=ae({manualStatus:null,paidAmount:M.paidAmount,paidPercent:M.paidPercent,totalAmount:T});x&&(f=x)}catch{}const g=f==="paid",{effectiveConfirmed:p}=Ee(e,n),c=e.reservationId??e.reservationCode??e.reservation_code??e.id??r,k=e.customerName??e.customer_name??"";let v=!!e.completed;if(!v&&a){const y=new Date(a);Number.isNaN(y.getTime())||(v=y<new Date)}return{id:e.id??c??r,start:r,end:a||r,paid:g,paidStatus:f,confirmed:p,completed:v,cancelled:s==="cancelled"||s==="canceled",reservationId:c??"",customerName:k,raw:e}}function Re(e=[]){const{projects:n=[]}=Z(),r=new Map(n.map(a=>[String(a.id),a]));return e.map(a=>{const s=a?.projectId??a?.project_id??null,d=s!=null&&s!==""&&r.get(String(s))||null,t=fe(a,d);if(!t)return null;const o=Te({paidStatus:t.paidStatus,confirmed:t.confirmed,completed:t.completed,cancelled:t.cancelled});return{id:t.id,title:"",start:t.start,end:t.end,display:"block",backgroundColor:"transparent",borderColor:"transparent",textColor:"",classNames:o,extendedProps:{...a,raw:a,paid:t.paid,paidStatus:t.paidStatus,confirmed:t.confirmed,completed:t.completed,cancelled:t.cancelled,reservationId:t.reservationId,customerName:t.customerName}}}).filter(Boolean)}async function ue(){if(U)return te();U=!0,A="";try{await Se({suppressError:!1,params:xe})}catch(e){console.error("âŒ [calendar] Failed to load reservations for calendar view",e),A=Ce(e)?e.message:e instanceof Error&&e.message||""}finally{U=!1}return te()}function D(){if(u){try{typeof u.destroy=="function"&&u.destroy()}catch{}u=null}}function pe(e){const n={events:e};typeof window<"u"&&typeof window.dispatchEvent=="function"?window.dispatchEvent(new CustomEvent("calendar:updated",{detail:n})):typeof dispatchEvent=="function"&&dispatchEvent(new CustomEvent("calendar:updated",{detail:n}))}function ge(){ye()}function je(){se||(document.addEventListener("language:changed",()=>{u&&u.setOption("locale",$()),ye()}),se=!0),ie||(document.addEventListener("reservations:changed",()=>{ge()}),ie=!0)}function X(e){return e<=480?"xs":e<=768?"sm":"lg"}function he(){if(typeof window>"u")return"month";const e=window.innerWidth||1024,n=X(e);return n==="xs"?"day":n==="sm"?"week":"month"}function P(){if(!u)return;const e=typeof window<"u"&&window.innerWidth||1024,n=X(e),r=u.__isFullCalendar?be():he();le!==n&&typeof u.changeView=="function"&&(le=n,u.changeView(r,!0))}function Ne(){oe||typeof window>"u"||(window.addEventListener("resize",()=>{z&&clearTimeout(z),z=setTimeout(()=>{P()},160)},{passive:!0}),oe=!0)}function Fe(){if(de||typeof MutationObserver>"u"||typeof document>"u")return;const e=()=>{O&&clearTimeout(O),O=setTimeout(()=>{ge()},80)};G=new MutationObserver(e),G.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),document.body&&G.observe(document.body,{attributes:!0,attributeFilter:["class"]}),de=!0}function me(e){const n=document.getElementById("calendar-reservation-details");if(!n){alert(l("calendar.alerts.cannotShowDetails","Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²"));return}const r=Z()||{},{reservations:a=[],customers:s=[],projects:d=[],technicians:t=[]}=r,o=e?.raw&&typeof e.raw=="object"?{...e.raw,...e}:{...e},f=[o.id,o.reservationId,o.reservation_id,o.reservationCode,o.reservation_code].map(i=>i==null?"":String(i)).filter(i=>i.length>0);let g=-1,p=null;f.length>0&&(g=a.findIndex(i=>{const h=[i?.id,i?.reservationId,i?.reservation_id,i?.reservationCode,i?.reservation_code].map(m=>m==null?"":String(m)).filter(m=>m.length>0);return h.length===0?!1:h.some(m=>f.includes(m))}),g>=0&&(p=a[g]));let c;p?(c={...o,...p},Array.isArray(p.items)&&p.items.length&&(c.items=p.items),Array.isArray(p.packages)&&p.packages.length&&(c.packages=p.packages)):c=o;const k=c.projectId??c.project_id??null,v=k!=null&&d.find(i=>String(i.id)===String(k))||null,y=c.customerId??c.customer_id,T=s.find(i=>String(i.id)===String(y)),S=ee(),M=[...Array.isArray(S)?S:[],...Array.isArray(t)?t:[]],x=new Map;M.forEach(i=>{if(!i||i.id==null)return;const h=String(i.id),m=x.get(h)||{};x.set(h,{...m,...i})});const V=Array.from(x.values());let B="";try{B=re(c,T,V,g>=0?g:0,v)}catch(i){console.error("âŒ [calendar] Failed to build reservation details for calendar modal",i),n.innerHTML=`<p class="text-sm text-error">${_(l("calendar.alerts.cannotShowDetails","Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²"))}</p>`;return}n.innerHTML=B,n.classList.add("calendar-reservation-details");try{const i=n.querySelector("[data-tech-slider]");if(i){const h=i.querySelector("[data-slider-track]"),m=i.querySelector("[data-slider-prev]"),b=i.querySelector("[data-slider-next]");if(h&&(m||b)){const j=document.documentElement.getAttribute("dir")==="rtl"||document.body.getAttribute("dir")==="rtl",N=()=>{const E=h.querySelector(".reservation-technician-card"),C=E&&E.getBoundingClientRect().width||220,w=12,L=Math.max(1,Math.floor(h.clientWidth/(C+w)));return Math.max(C+w,Math.floor(L*(C+w)*.9))},F=()=>{const E=Math.max(0,h.scrollWidth-h.clientWidth-2),C=h.scrollLeft<=1,w=h.scrollLeft>=E;m&&(m.disabled=C),b&&(b.disabled=w)},q=E=>{const C=N()*E,w=j?-C:C;h.scrollBy({left:w,behavior:"smooth"})};m?.addEventListener("click",()=>q(-1)),b?.addEventListener("click",()=>q(1)),h.addEventListener("scroll",F,{passive:!0}),window.addEventListener("resize",F,{passive:!0}),setTimeout(F,0)}}}catch{}try{ve()?.then(()=>{try{const i=Array.from(new Map((ee()||[]).map(m=>[String(m.id),m])).values()),h=re(c,T,i,g>=0?g:0,v);n.innerHTML=h,n.classList.add("calendar-reservation-details");try{const m=n.querySelector("[data-tech-slider]");if(m){const b=m.querySelector("[data-slider-track]"),j=m.querySelector("[data-slider-prev]"),N=m.querySelector("[data-slider-next]");if(b&&(j||N)){const F=document.documentElement.getAttribute("dir")==="rtl"||document.body.getAttribute("dir")==="rtl",q=()=>{const w=b.querySelector(".reservation-technician-card"),L=w&&w.getBoundingClientRect().width||220,R=12,we=Math.max(1,Math.floor(b.clientWidth/(L+R)));return Math.max(L+R,Math.floor(we*(L+R)*.9))},E=()=>{const w=Math.max(0,b.scrollWidth-b.clientWidth-2),L=b.scrollLeft<=1,R=b.scrollLeft>=w;j&&(j.disabled=L),N&&(N.disabled=R)},C=w=>{const L=q()*w,R=F?-L:L;b.scrollBy({left:R,behavior:"smooth"})};j?.addEventListener("click",()=>C(-1)),N?.addEventListener("click",()=>C(1)),b.addEventListener("scroll",E,{passive:!0}),window.addEventListener("resize",E,{passive:!0}),setTimeout(E,0)}}}catch{}}catch{}}).catch(()=>{})}catch{}n.querySelector(".reservation-modal-actions")?.remove(),n.querySelectorAll(".reservation-qty-btn, .reservation-remove-button").forEach(i=>{i instanceof HTMLElement&&(i.setAttribute("disabled","true"),i.setAttribute("aria-disabled","true"),i.setAttribute("tabindex","-1"))});const W=n.querySelector('[data-action="open-project"]');W&&(v?W.addEventListener("click",()=>{const i=v?.id!=null?String(v.id):"",h=i?`projects.html?project=${encodeURIComponent(i)}`:"projects.html";window.location.href=h}):W instanceof HTMLElement&&W.setAttribute("disabled","true"));const Y=document.getElementById("calendarReservationModal");Y&&window.bootstrap?.Modal?window.bootstrap.Modal.getOrCreateInstance(Y).show():alert(l("calendar.alerts.cannotOpenModal","Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„"))}function ye(){je(),Ne(),Fe();const{calendarEl:e}=J();if(!e)return;const n=_e();if(!n){(async()=>{const r=await Ae();if(!r||typeof r.Calendar!="function"){const d=l("calendar.status.missingLibrary","ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ…. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.");I({error:d}),D();return}I({loading:!0});const a=await ue();if(A){const d=l("calendar.status.error","ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹.");I({loading:!1,error:A||d}),D();return}const s=Re(a);u?u.batchRendering?.(()=>{u.removeAllEvents(),u.addEventSource(s)}):(u=new r.Calendar(e,{initialView:be(),locale:$(),timeZone:"local",expandRows:!0,height:"auto",contentHeight:"auto",slotMinTime:"06:00:00",slotMaxTime:"24:00:00",slotDuration:"00:30:00",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},dayMaxEventRows:2,fixedWeekCount:!0,showNonCurrentDates:!0,views:{dayGridMonth:{dayMaxEventRows:2,fixedWeekCount:!0}},moreLinkClick:"popover",lazyFetching:!1,noEventsContent(){return l("calendar.noEvents","Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø·Ø§Ù‚")},buttonText:{today:l("calendar.buttons.today","Ø§Ù„ÙŠÙˆÙ…"),month:l("calendar.buttons.month","Ø´Ù‡Ø±"),week:l("calendar.buttons.week","Ø£Ø³Ø¨ÙˆØ¹"),day:l("calendar.buttons.day","ÙŠÙˆÙ…")},events:s,eventContent:Me,eventClick(d){me(d.event.extendedProps)},windowResize:P,datesSet(){Ie()}}),u.render(),u.__isFullCalendar=!0),P(),pe(s),I({loading:!1,error:"",empty:s.length===0})})();return}(async()=>{I({loading:!0});const r=await ue();if(A){const t=l("calendar.status.error","ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹.");I({loading:!1,error:A||t}),D();return}const a=De(r);D();const s=he();u=new n("#calendar",{defaultView:s,usageStatistics:!1,isReadOnly:!0,week:{taskView:!1,hourStart:6,hourEnd:24},month:{visibleWeeksCount:0,startDayOfWeek:0,isAlways6Weeks:!0,maxVisibleEventCount:6,moreLayerSize:420},template:{time(t){const o=typeof t?.raw?.paidStatus=="string"?t.raw.paidStatus:t?.raw?.paid===!0||t?.raw?.paid==="paid"?"paid":"unpaid",f=t?.raw?.confirmed===!0||t?.raw?.confirmed==="true",g=t?.raw?.completed===!0||t?.raw?.completed==="true",p=l("calendar.labels.unknownCustomer","ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"),c=Q(t.start?.toString?.()||t.start,t.end?.toString?.()||t.end,t.isAllDay),k=t?.raw?.reservationId?String(t.raw.reservationId):"â€”",v=t?.raw?.customerName||p,y=(V,B)=>`<span class="badge ${V} badge-sm">${_(B)}</span>`,T=f?l("calendar.badges.confirmed","Ù…Ø¤ÙƒØ¯"):l("calendar.badges.pending","ØºÙŠØ± Ù…Ø¤ÙƒØ¯"),S=o==="paid"?l("calendar.badges.paid","Ù…Ø¯ÙÙˆØ¹"):o==="partial"?l("calendar.badges.partial","Ù…Ø¯ÙÙˆØ¹ Ø¬Ø²Ø¦ÙŠØ§Ù‹"):l("calendar.badges.unpaid","ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹"),M=o==="paid"?"badge-info":o==="partial"?"badge-warning":"badge-error",x=[y(f?"badge-success":"badge-warning",T),y(M,S)];return g&&x.push(y("badge-neutral",l("calendar.badges.completed","Ù…Ù†ØªÙ‡ÙŠ"))),`
            <div class="card bg-base-100/90 border border-base-200 shadow-sm rounded-xl p-2">
              <div class="flex items-baseline justify-between text-[0.8rem]">
                <span class="font-bold">${_(c||"")}</span>
                <span class="font-semibold">${_(k)}</span>
              </div>
              <div class="mt-1 font-semibold text-sm truncate">${_(v)}</div>
              <div class="mt-1 flex gap-1 flex-wrap">${x.join("")}</div>
            </div>
          `}}}),u.__isTui=!0;const d=t=>{if(t)try{me(t)}catch{}};typeof u.on=="function"&&(u.on("clickSchedule",t=>d(t?.schedule?.raw||t?.schedule)),u.on("clickEvent",t=>d(t?.event?.raw||t?.event)));try{typeof u.createSchedules=="function"?u.createSchedules(a):typeof u.createEvents=="function"&&u.createEvents(a)}catch{}P(),pe(a),I({loading:!1,error:"",empty:a.length===0}),setTimeout(()=>{P()},120)})().catch(r=>{console.error("âŒ [calendar] renderCalendar failed",r),A=r instanceof Error&&r.message||A||"";const a=l("calendar.status.error","ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹.");I({loading:!1,error:A||a}),D()})}function De(e=[]){const{projects:n=[]}=Z(),r=new Map(n.map(a=>[String(a.id),a]));return e.map(a=>{const s=a?.projectId??a?.project_id??null,d=s!=null&&r.get(String(s))||null,t=fe(a,d);if(!t)return null;const o=Q(t.start,t.end,!1),f=t.customerName||"",g=[o,f].filter(Boolean).join(" Â· ");return{id:String(t.id),calendarId:"default",title:g,category:"time",isAllDay:!1,isAllday:!1,start:t.start,end:t.end,raw:{...a,paid:t.paid,paidStatus:t.paidStatus,confirmed:t.confirmed,completed:t.completed,reservationId:t.reservationId,customerName:t.customerName}}}).filter(Boolean)}function be(){if(typeof window>"u")return"dayGridMonth";const e=window.innerWidth||1024,n=X(e);return n==="xs"?"timeGridDay":n==="sm"?"timeGridWeek":"dayGridMonth"}export{ye as renderCalendar};
