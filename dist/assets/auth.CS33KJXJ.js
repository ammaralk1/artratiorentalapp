(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const Ye={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://127.0.0.1:8000/api"},ge="/backend/api",$=new Map;let G=0,C=0;const Xe=5e3,Je=3e4,Qe=12e3;class k extends Error{constructor(t,{status:r,payload:o}={}){super(t),this.name="ApiError",this.status=r??null,this.payload=o??null}}function Ze(){const e=typeof import.meta<"u"&&Ye&&"http://127.0.0.1:8000/api",t=typeof window<"u"?window.APP_API_BASE:null;let r=e||t||ge;try{const o=typeof r=="string"&&/^(https?:)?\/\/(localhost|127\.|\[::1\])\b/i.test(r),n=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="[::1]");o&&!n&&(r=ge)}catch{}return String(r).replace(/\/$/,"")}async function B(e,{method:t="GET",headers:r={},body:o,signal:n,credentials:a="include",timeout:s=Qe}={}){let i=e;try{if(typeof URL<"u"&&e instanceof URL)i=e.href;else if(typeof Request<"u"&&e instanceof Request)i=e.url;else if(e&&typeof e=="object"){const g=e.path||e.url||e.endpoint||null;i=String(g||e)}}catch{}typeof i!="string"&&(i=String(i||""));const d=/^https?:\/\//i.test(i),c=d||i.charAt(0)==="/"?i:`/${i}`,l=d?c:`${Ze()}${c}`;try{if(typeof navigator<"u"&&navigator&&navigator.onLine===!1){const g=new k("Network offline",{status:0});throw g.offline=!0,g}}catch{}const p=Date.now(),A=Math.min(Je,Xe*Math.max(1,Math.pow(2,Math.max(0,C-1))));if(C>0&&p-G<A){const g=new k("Network cooldown after failures",{status:0});throw g.cooldown=!0,g}const m={Accept:"application/json",...r};if(!m["X-Request-Id"])try{const g=`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`;m["X-Request-Id"]=g}catch{}const u={method:t,headers:m,signal:n,credentials:a};o!==void 0&&(o instanceof FormData?(delete m["Content-Type"],u.body=o):typeof o=="string"?(m["Content-Type"]=m["Content-Type"]||"application/json",u.body=o):(m["Content-Type"]=m["Content-Type"]||"application/json",u.body=JSON.stringify(o)));const w=`${t} ${l}`;if($.has(w))return $.get(w);const le=(async()=>{const g=typeof AbortController<"u"?new AbortController:null,Q=g&&Number.isFinite(s)&&s>0?setTimeout(()=>{try{g.abort()}catch{}},s):null,Ve=g?n?new We([n,g.signal]):g.signal:n,Z=Date.now();function We(y){const de=new AbortController,ue=()=>{try{de.abort()}catch{}};return y.filter(Boolean).forEach(ee=>{try{ee.aborted?ue():ee.addEventListener("abort",ue,{once:!0})}catch{}}),de.signal}try{const y=await fetch(l,{...u,signal:Ve});return C=0,G=0,y}catch(y){throw C=Math.min(10,C+1),G=Date.now(),y?.name==="AbortError"?console.warn("‚è±Ô∏è [api] request aborted",{method:t,url:l,timeout:s,durationMs:Date.now()-Z}):console.warn("‚ö†Ô∏è [api] request failed",{method:t,url:l,durationMs:Date.now()-Z,error:y}),y}finally{Q&&clearTimeout(Q);const y=Date.now()-Z;y>5e3&&console.warn("üê¢ [api] slow request",{method:t,url:l,durationMs:y,timeout:s})}})().finally(()=>{$.delete(w)});$.set(w,le);const L=await le,Ke=L.headers.get("content-type")||"";let b=null,x="";try{x=await L.text()}catch{x=""}if(Ke.includes("application/json"))try{b=x?JSON.parse(x):null}catch{b=x?{raw:x}:null}else if(x){const g=x.trim();if(g.startsWith("{")||g.startsWith("["))try{b=JSON.parse(g)}catch{b={raw:x}}else b={raw:x}}else b=null;if(!L.ok){const g=b?.error||`Request failed with status ${L.status}`;try{L.status>=500&&(C=Math.min(10,C+1),G=Date.now())}catch{}throw new k(g,{status:L.status,payload:b})}if(b&&typeof b=="object"&&b.ok===!1){const g=b.error||"API returned an error response";throw new k(g,{status:L.status,payload:b})}return b}const T=Object.freeze({language:"ar",theme:"light",dashboardTab:null,dashboardSubTab:null,projectsTab:null,projectsSubTab:null});let E=null,K=null;const oe=new Set,Ae="__ART_RATIO_SKIP_PREF_FETCH__",ve="__ART_RATIO_PREFERENCES__";function _e(){try{return typeof window>"u"?!1:!!window[Ae]}catch{return!1}}function et(){try{typeof window<"u"&&delete window[Ae]}catch{}}function j(e={}){const t=e.language==="en"?"en":"ar",r=e.theme==="dark"?"dark":"light",o=typeof e.dashboardTab=="string"?V(e.dashboardTab):null,n=typeof e.dashboardSubTab=="string"?V(e.dashboardSubTab):null,a=typeof e.projectsTab=="string"?V(e.projectsTab):null,s=typeof e.projectsSubTab=="string"?V(e.projectsSubTab):null;return{language:t,theme:r,dashboardTab:o,dashboardSubTab:n,projectsTab:a,projectsSubTab:s}}function V(e){const t=String(e||"").trim();return t&&/^[a-z0-9\-]+$/i.test(t)?t:null}function tt(){try{if(typeof window>"u"||!window.localStorage)return null;const e=window.localStorage.getItem(ve);if(!e)return null;const t=JSON.parse(e);return j(t)}catch(e){return console.warn("‚ö†Ô∏è [preferencesService] Failed to read cached preferences",e),null}}function rt(e){try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.setItem(ve,JSON.stringify(e))}catch(t){console.warn("‚ö†Ô∏è [preferencesService] Failed to persist preferences",t)}}const me=tt();me&&(E=me);function nt(){const e=h();oe.forEach(t=>{try{t(e)}catch(r){console.error("‚ö†Ô∏è [preferencesService] listener failed",r)}})}function P(e){const r={...E?{...E}:{...T},...e};E=j(r),rt(E),nt()}function h(){return E?{...E}:null}function Se(e){if(typeof e!="function")return()=>{};if(oe.add(e),E)try{e(h())}catch(t){console.error("‚ö†Ô∏è [preferencesService] listener failed",t)}return()=>{oe.delete(e)}}function Le({refresh:e=!1}={}){if(_e()){const t=h()||{...T};return Promise.resolve(t)}return!e&&E?Promise.resolve(h()):(K||(K=B("/preferences/").then(t=>{const r=t?.data??T;return P(r),h()}).catch(t=>t instanceof k&&t.status===401?(E=null,T):(console.warn("‚ö†Ô∏è [preferencesService] Failed to load preferences",t),P(T),T)).finally(()=>{K=null})),K)}function ot(e=null){if(!e){const t=h();return j(t||T)}return j(e)}async function ie(e={}){if(_e())return P(e),h()||{...T};e.language!==void 0&&e.language,e.theme!==void 0&&e.theme,e.dashboardTab!==void 0&&e.dashboardTab,e.dashboardSubTab!==void 0&&e.dashboardSubTab,e.projectsTab!==void 0&&e.projectsTab,e.projectsSubTab!==void 0&&e.projectsSubTab;const t=ot(),r={...t,...e},o=j(r),n={},a={};["language","theme","dashboardTab","dashboardSubTab","projectsTab","projectsSubTab"].forEach(c=>{if(e[c]===void 0)return;const l=o[c],p=t[c];l!==p&&(n[c]=l,(c==="language"||c==="theme")&&(a[c]=l))});const i=Object.keys(n).length>0,d=Object.keys(a).length>0;if(!d&&!i)return h();if(!d&&i)return P(o),h();try{const c=await B("/preferences/",{method:"PATCH",body:a});return P(c?.data??T),i&&P({...h(),...n}),h()}catch(c){if(c instanceof k&&c.status===422)return console.warn("‚ö†Ô∏è [preferencesService] Server rejected preference update (no changes)."),P(o),h();throw c}}const at="__ART_RATIO_SKIP_PREF_FETCH__";function it(){try{return typeof window<"u"&&!!window[at]}catch{return!1}}const S="ar",st="ar",ct="language-loading",fe="language-ready",Ce=["Placeholder","Title","AriaLabel","AriaDescription","Value"],q={ar:Object.create(null),en:Object.create(null)};let D=S,U=!1,W=null;function M(e){return e==="en"?"en":"ar"}function Pe(){if(!W){const e=h();if(e?.language){const t=M(e.language);I(t,{persist:!1,dispatch:!1})}if(it()){const t=e?.language?M(e.language):S;I(t,{persist:!1}),U=!0,W=Promise.resolve(t)}else W=Le().then(t=>{const r=M(t?.language??S);return I(r,{persist:!1}),U=!0,r}).catch(t=>(console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑŸÑÿ∫ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ",t),I(S,{persist:!1}),U=!0,S))}return W}function lt(e){if(e.dataset.i18nCached==="true")return;e.dataset.i18nHtml==="true"?e.dataset.arHtml===void 0&&(e.dataset.arHtml=e.innerHTML):e.dataset.ar===void 0&&(e.dataset.ar=e.textContent),Ce.forEach(r=>{const o=r.charAt(0).toLowerCase()+r.slice(1),n=e.getAttribute(o);n!=null&&e.dataset[`ar${r}`]===void 0&&(e.dataset[`ar${r}`]=n)}),e.dataset.i18nCached="true"}function be(e,t){if(!t)return;const r=q[e]??(q[e]=Object.create(null));Object.entries(t).forEach(([o,n])=>{typeof o=="string"&&(r[o]=n)})}function he(e,t){if(!t)return;const r=q[e];return r?r[t]:void 0}function dt(e,t){lt(e);const r=e.dataset.i18nHtml==="true",o=e.dataset.i18nKey,n=he(t,o);n!==void 0?r?e.innerHTML=n:e.textContent=n:t==="en"?r?e.dataset.enHtml!==void 0&&(e.innerHTML=e.dataset.enHtml):e.dataset.en!==void 0&&(e.textContent=e.dataset.en):r?e.innerHTML=e.dataset.arHtml??e.innerHTML:e.textContent=e.dataset.ar??e.textContent,Ce.forEach(a=>{const s=a.charAt(0).toLowerCase()+a.slice(1),i=e.dataset[`i18n${a}Key`],d=he(t,i);if(d!==void 0){e.setAttribute(s,d);return}const c=t==="en"?`en${a}`:`ar${a}`,l=e.dataset[c];l!==void 0&&e.setAttribute(s,l)})}function Re(e){document.querySelectorAll("[data-i18n]").forEach(r=>dt(r,e))}function ut(e){const t=document.documentElement,r=document.body,o=e===st?"rtl":"ltr";t.setAttribute("lang",e),t.setAttribute("dir",o),r&&(r.setAttribute("dir",o),r.dataset.lang=e)}function gt(){const e=document.documentElement;e&&(e.classList.contains(fe)||(e.classList.remove(ct),e.classList.add(fe)))}function De(e){document.querySelectorAll(".language-toggle-btn").forEach(t=>{const r=t.dataset.labelAr||"üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",o=t.dataset.labelEn||"üá¨üáß English";t.textContent=e==="en"?r:o,t.setAttribute("aria-pressed",e==="en"?"true":"false")})}function I(e,{persist:t=!1,dispatch:r=!0}={}){const o=M(e);D===o&&U&&!t||(D=o,U=!0,ut(o),Re(o),De(o),gt(),r&&document.dispatchEvent(new CustomEvent("language:changed",{detail:{language:o}})),t&&ie({language:o}).catch(n=>{console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑŸÑÿ∫ÿ© ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ",n)}))}function mt(){ft(D==="ar"?"en":"ar")}function Ie(){document.querySelectorAll(".language-toggle-btn").forEach(t=>{t.dataset.listenerAttached||(t.addEventListener("click",()=>{mt()}),t.dataset.listenerAttached="true")}),De(D)}function Ne(e={}){be("ar",e.ar),be("en",e.en);const t=ae();Re(t),document.dispatchEvent(new CustomEvent("language:translationsReady",{detail:{language:t}}))}function _(e,t=""){if(!e)return t;const r=D||S,o=q[r];if(o&&o[e]!==void 0)return o[e];const a=q[r==="en"?"ar":"en"];return a&&a[e]!==void 0?a[e]:t}function ft(e){const t=M(e);I(t,{persist:!0})}function $t(){Pe().catch(()=>S).finally(()=>{Ie()})}function ae(){return D}function pe(){Pe().catch(()=>S),Ie()}Se(e=>{e&&e.language&&M(e.language)!==D&&I(e.language,{persist:!1})});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",pe,{once:!0}):pe();Ne({ar:{"actions.logout":"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨","actions.toggleTheme":"üåô ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä","theme.toggle.toLight":"‚òÄÔ∏è ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä","theme.toggle.toDark":"üåô ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä","theme.toggle.titleLight":"ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä","theme.toggle.titleDark":"ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä","theme.toggle.ariaLight":"ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä ŸÖŸÅÿπŸÑ","theme.toggle.ariaDark":"ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä ŸÖŸÅÿπŸÑ","common.boolean.yes":"ŸÜÿπŸÖ","common.boolean.no":"ŸÑÿß","language.toggle.labelAr":"üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©","language.toggle.labelEn":"üá¨üáß English","login.pageTitle":"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ","login.header.title":"üîê ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ","login.header.subtitle":"ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ.","login.form.username":"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ","login.form.username.placeholder":"ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ","login.form.password":"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.password.placeholder":"ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.password.toggleShow":"ÿ•ÿ∏Ÿáÿßÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.password.toggleHide":"ÿ•ÿÆŸÅÿßÿ° ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±","login.form.submit":"ÿØÿÆŸàŸÑ","login.errors.invalidCredentials":"‚ùå ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©","login.errors.network":"üåê ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.","login.errors.generic":"‚ö†Ô∏è ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.","login.footer.note":"ŸÖÿ≠ŸÖŸä ŸÑÿ£ÿπÿ∂ÿßÿ° ŸÅÿ±ŸäŸÇ Art Ratio. ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿ•ÿ∞ÿß Ÿàÿßÿ¨Ÿáÿ™ ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ.","actions.clearFilters":"üîÑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿµŸÅŸäÿ©","actions.view":"üëÅÔ∏è ÿπÿ±ÿ∂","actions.delete":"üóëÔ∏è ÿ≠ÿ∞ŸÅ","actions.remove":"ÿ•ÿ≤ÿßŸÑÿ©","auth.permissions.denied":"‚ö†Ô∏è ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑÿ™ŸÜŸÅŸäÿ∞ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°","home.nav.brand":"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ","home.hero.title":"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ","home.hero.subtitle":"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿ≥ÿßÿ± ÿßŸÑŸÖŸÜÿßÿ≥ÿ® ŸÑÿ•ÿØÿßÿ±ÿ© ÿ£ÿπŸÖÿßŸÑŸÉ.","home.hero.greetingUser":"ŸÖÿ±ÿ≠ÿ®ÿßŸã {name}","home.bookings.title":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ¨Ÿàÿ≤ÿßÿ™","home.bookings.description":"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÉÿßŸÖŸÑÿ© ŸÑÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ¨Ÿàÿ≤ÿßÿ™ÿå ÿßŸÑŸÖÿπÿØÿßÿ™ÿå ÿßŸÑÿµŸäÿßŸÜÿ©ÿå ŸàÿßŸÑÿ∑ÿßŸÇŸÖ.","home.bookings.button":"ÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ","home.projects.title":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ","home.projects.description":"ÿ•ŸÜÿ¥ÿßÿ° ŸàŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπÿå ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿ∑ÿßŸÇŸÖ ŸàÿßŸÑŸÖÿπÿØÿßÿ™ÿå Ÿàÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ÿ© ÿ®ŸÉŸÑ ŸÖÿ¥ÿ±Ÿàÿπ.","home.projects.button":"ŸÅÿ™ÿ≠ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ","home.users.title":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ","home.users.description":"ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜÿå ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿßÿ™ÿå ŸàÿßŸÑÿßÿ∑ŸÑÿßÿπ ÿπŸÑŸâ ÿ≥ÿ¨ŸÑÿßÿ™ ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™ ŸàÿßŸÑŸÜÿ¥ÿßÿ∑.","home.users.button":"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ","actions.refresh":"üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™","home.summary.title":"üìä ŸÖŸÑÿÆÿµ ÿ≥ÿ±Ÿäÿπ","home.summary.subtitle":"ÿ£ÿ±ŸÇÿßŸÖ ŸÖÿÆÿ™ÿµÿ±ÿ© ÿ™ÿ≥ÿßÿπÿØŸÉ ÿπŸÑŸâ ÿßÿ™ÿÆÿßÿ∞ ÿßŸÑŸÇÿ±ÿßÿ± ÿ®ÿ≥ÿ±ÿπÿ©.","home.summary.loading":"‚è≥ ÿ¨ÿßÿ±Ÿç ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ...","home.summary.error":"ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖÿå ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã","home.summary.empty":"ŸÑÿß ÿ™ÿ™ŸàŸÅÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿπÿØ. ÿßÿ®ÿØÿ£ ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ¨ŸÑÿßÿ™.","home.summary.customers":"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπŸÖŸÑÿßÿ°","home.summary.reservationsToday":"ÿ≠ÿ¨Ÿàÿ≤ÿßÿ™ ÿßŸÑŸäŸàŸÖ","home.summary.reservationsUpcoming":"ÿ≠ÿ¨Ÿàÿ≤ÿßÿ™ ŸÇÿßÿØŸÖÿ©","home.summary.projectsActive":"ŸÖÿ¥ÿßÿ±Ÿäÿπ ŸÜÿ¥ÿ∑ÿ©","home.summary.equipmentMaintenance":"ŸÖÿπÿØÿßÿ™ ŸÇŸäÿØ ÿßŸÑÿµŸäÿßŸÜÿ©","home.summary.maintenanceHigh":"ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿµŸäÿßŸÜÿ© ÿπÿßÿ¨ŸÑÿ©","home.summary.techniciansBusy":"ÿ£ÿπÿ∂ÿßÿ° ÿ∑ÿßŸÇŸÖ ŸÖÿ¥ÿ∫ŸàŸÑŸàŸÜ","common.range.from":"ŸÖŸÜ","common.range.to":"ÿ•ŸÑŸâ"},en:{"actions.logout":"üö™ Log Out","actions.toggleTheme":"üåô Dark Mode","theme.toggle.toLight":"‚òÄÔ∏è Light Mode","theme.toggle.toDark":"üåô Dark Mode","theme.toggle.titleLight":"Switch to Light Mode","theme.toggle.titleDark":"Switch to Dark Mode","theme.toggle.ariaLight":"Light mode enabled","theme.toggle.ariaDark":"Dark mode enabled","common.boolean.yes":"Yes","common.boolean.no":"No","language.toggle.labelAr":"üá∏üá¶ Arabic","language.toggle.labelEn":"üá¨üáß English","login.pageTitle":"Log In","login.header.title":"üîê Log In","login.header.subtitle":"Enter your account credentials to access the dashboard.","login.form.username":"Username","login.form.username.placeholder":"Enter username","login.form.password":"Password","login.form.password.placeholder":"Enter password","login.form.password.toggleShow":"Show password","login.form.password.toggleHide":"Hide password","login.form.submit":"Sign In","login.errors.invalidCredentials":"‚ùå Incorrect username or password","login.errors.network":"üåê Unable to reach the server. Please try again.","login.errors.generic":"‚ö†Ô∏è Something went wrong. Please try again.","login.footer.note":"Restricted to Art Ratio team members. Contact us if you run into any login issues.","actions.clearFilters":"üîÑ Reset filters","actions.view":"üëÅÔ∏è View","actions.delete":"üóëÔ∏è Delete","actions.remove":"Remove","auth.permissions.denied":"‚ö†Ô∏è You do not have permission to perform this action","home.nav.brand":"Control Panel","home.hero.title":"Welcome","home.hero.subtitle":"Choose the best path to manage your operations.","home.hero.greetingUser":"Welcome {name}","home.bookings.title":"Bookings Management","home.bookings.description":"Access the full dashboard for bookings, equipment, maintenance, and crew.","home.bookings.button":"Open Dashboard","home.projects.title":"Projects Management","home.projects.description":"Create and follow up on projects, assign crew and equipment, and track expenses.","home.projects.button":"Open Projects Hub","home.users.title":"User Management","home.users.description":"Create accounts, adjust roles, and review session and activity logs.","home.users.button":"Manage Users","actions.refresh":"üîÑ Refresh data","home.summary.title":"üìä Quick Snapshot","home.summary.subtitle":"Key metrics that keep you informed at a glance.","home.summary.loading":"‚è≥ Fetching system metrics...","home.summary.error":"Unable to load system metrics. Please try again later.","home.summary.empty":"No data yet. Start by adding your first records.","home.summary.customers":"Total Customers","home.summary.reservationsToday":"Reservations Today","home.summary.reservationsUpcoming":"Upcoming Reservations","home.summary.projectsActive":"Active Projects","home.summary.equipmentMaintenance":"Equipment in Maintenance","home.summary.maintenanceHigh":"Urgent Maintenance Tickets","home.summary.techniciansBusy":"Crew Members Busy","common.range.from":"From","common.range.to":"to"}});Ne({ar:{"common.placeholder.empty":"‚Äî","equipment.packages.selection.addToPackage":"‚ûï ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿ≤ŸÖÿ©","reservations.create.equipment.selector.addToReservation":"‚ûï ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿ¨ÿ≤"},en:{"common.placeholder.empty":"‚Äî","equipment.packages.selection.addToPackage":"‚ûï Add to package","reservations.create.equipment.selector.addToReservation":"‚ûï Add to reservation"}});const N="dark-mode",Y=new WeakSet,ye="theme-loading",je="art-ratio:session-theme";let we=!1;function Me(){return Array.from(document.querySelectorAll("[data-theme-toggle], .theme-toggle-btn"))}function Oe(e){return e==="dark"?"dark":"light"}function bt(e){try{window.sessionStorage?.setItem(je,Oe(e))}catch{}}function ht(){try{const e=window.sessionStorage?.getItem(je);return e==="dark"?"dark":e==="light"?"light":null}catch{return null}}function pt(){document.documentElement.classList.remove(ye);const e=document.body;e&&e.classList.remove(ye)}function X(e,{persist:t=!0}={}){const r=Oe(e),o=document.documentElement,n=document.body;r==="dark"?(o.classList.add(N,"dark"),n&&n.classList.add(N,"dark")):(o.classList.remove(N,"dark"),n&&n.classList.remove(N,"dark"));const a=r==="dark"?"dark":"light";o.setAttribute("data-theme",a),n&&n.setAttribute("data-theme",a),bt(r),se(r);try{document.dispatchEvent(new CustomEvent("theme:changed",{detail:{theme:r}}))}catch(s){console.warn("‚ö†Ô∏è [theme.js] Failed to dispatch theme change event",s)}t&&ie({theme:r}).catch(s=>{console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑÿ≥ŸÖÿ© ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ",s)})}function H(){const e=document.body;return e&&e.classList.contains(N)||document.documentElement.classList.contains(N)?"dark":"light"}function te(){const e=H()==="dark"?"light":"dark";X(e,{persist:!0})}function yt(e,t){if(!e)return;const r=t==="dark",o=_("theme.toggle.toLight","‚òÄÔ∏è ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä"),n=_("theme.toggle.toDark","üåô ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä"),a=_("theme.toggle.ariaLight","ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä ŸÖŸÅÿπŸÑ"),s=_("theme.toggle.ariaDark","ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä ŸÖŸÅÿπŸÑ"),i=_("theme.toggle.titleLight","ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿπÿßÿØŸä"),d=_("theme.toggle.titleDark","ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä");if(e.matches("[data-theme-toggle]")){const c=e.matches("input")?e:e.querySelector('input[type="checkbox"]'),l=r?o:n,p=r?a:s,A=r?i:d;c&&(c.checked=r,c.setAttribute("aria-label",l),c.setAttribute("aria-checked",String(r))),e.setAttribute("title",A),e.setAttribute("aria-label",p),e.setAttribute("data-theme-state",r?"dark":"light");const m=e.querySelector("[data-theme-label]");m&&(m.textContent=l)}else e.textContent=r?o:n,e.setAttribute("aria-pressed",String(r)),e.setAttribute("title",r?i:d),e.setAttribute("aria-label",r?a:s)}function se(e){Me().forEach(t=>yt(t,e)),pt()}function wt(){const e=Me();se(H()),e.forEach(t=>{if(!(!t||Y.has(t))){if(t.matches("[data-theme-toggle]")){const r=t.matches("input")?t:t.querySelector('input[type="checkbox"]'),o=()=>{te()};r&&!Y.has(r)?(r.addEventListener("change",o),Y.add(r)):r||t.addEventListener("click",n=>{n.preventDefault(),te()})}else t.getAttribute("type")||t.setAttribute("type","button"),t.addEventListener("click",r=>{r.preventDefault(),te()});Y.add(t)}})}function Gt({skipRemote:e=!1}={}){const t=h(),n=(t?.theme==="dark"?"dark":t?.theme==="light"?"light":null)||ht()||xt();X(n,{persist:!1}),kt({skipRemote:e})}function xt(){try{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch{}return"light"}function kt({skipRemote:e=!1}={}){we||(we=!0,!e&&Le().then(t=>{const r=t?.theme==="dark"?"dark":t?.theme==="light"?"light":null;r&&X(r,{persist:!1})}).catch(t=>{console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑÿ≥ŸÖÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ",t)}))}document.addEventListener("language:changed",()=>{se(H()),wt()});Se(e=>{const t=e?.theme==="dark"?"dark":e?.theme==="light"?"light":null;t&&t!==H()&&X(t,{persist:!1})});function Et(){try{if(document.getElementById("sidebar-inline-styles"))return;const e=`
/* Backdrop and drawer */
.sidebar-backdrop { position: fixed; inset: 0; z-index: 40; display: none; background-color: rgba(0,0,0,0.35); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); }
.sidebar-backdrop.open { display: block; }
.sidebar-drawer { position: fixed; top: 0; bottom: 0; inset-inline-start: 0; z-index: 50; width: 18rem; max-width: 100%; transform: translateX(100%); transition: transform .3s ease-in-out; opacity: 0; visibility: hidden; pointer-events: none; background: transparent; box-shadow: 0 25px 50px rgba(0,0,0,.25); }
[dir='ltr'] .sidebar-drawer { transform: translateX(-100%); }
@media (min-width: 1024px) { .sidebar-drawer { width: 20rem; } }
.sidebar-drawer.open { transform: translateX(0); opacity: 1; visibility: visible; pointer-events: auto; }

/* Sidebar surface */
.sidebar-shell { display: flex; flex-direction: column; gap: 1rem; padding: 1.5rem; width: 18rem; height: calc(100vh - 1.5rem); overflow-y: auto; scrollbar-width: thin; border-inline-start: 1px solid rgba(148,163,184,0.35); background: linear-gradient(180deg, rgba(248, 250, 255, 0.96) 0%, rgba(238, 242, 255, 0.9) 100%); }
@media (min-width: 1280px) { .sidebar-shell { width: 20rem; } }
html.dark .sidebar-shell, body.dark .sidebar-shell { background: linear-gradient(180deg, rgba(9, 14, 28, 0.97) 0%, rgba(8, 18, 40, 0.92) 100%); border-color: rgba(63, 93, 245, 0.28); box-shadow: 0 32px 55px rgba(4, 9, 22, 0.65); }
.sidebar-shell::-webkit-scrollbar { width: 6px; }
.sidebar-shell::-webkit-scrollbar-thumb { background: rgba(148, 197, 255, 0.35); border-radius: 999px; }
html.dark .sidebar-shell::-webkit-scrollbar-thumb, body.dark .sidebar-shell::-webkit-scrollbar-thumb { background: rgba(63,93,245,.45); }

/* Panels */
.sidebar-panel { background: linear-gradient(140deg, rgba(248, 250, 255, 0.96) 0%, rgba(238, 242, 255, 0.9) 100%); -webkit-backdrop-filter: blur(18px); backdrop-filter: blur(18px); box-shadow: 0 18px 35px rgba(15, 23, 42, 0.08); border: 1px solid rgba(148,163,184,.35); border-radius: 1.5rem; padding: 1.25rem; }
.sidebar-panel + .sidebar-panel { margin-top: 1rem; }
html.dark .sidebar-panel, body.dark .sidebar-panel { background: linear-gradient(140deg, rgba(14, 24, 48, 0.96) 0%, rgba(9, 17, 36, 0.9) 100%); border-color: rgba(63, 93, 245, 0.32); box-shadow: inset 0 0 0 1px rgba(63, 93, 245, 0.16), 0 26px 48px rgba(4, 9, 22, 0.68); }
.sidebar-menu { display: flex; flex-direction: column; gap: .5rem; }
.sidebar-heading { font-size: .875rem; font-weight: 600; line-height: 1.35; letter-spacing: .02em; color: hsl(var(--bc) / 0.68); }
html.dark .sidebar-heading, body.dark .sidebar-heading { color: rgba(203, 213, 225, 0.75); }

/* Links */
.sidebar-link { display: flex; width: 100%; align-items: center; gap: .75rem; border: 1px solid rgba(148,163,184,.35); border-radius: 1rem; padding: .75rem 1rem; font-size: .875rem; font-weight: 600; color: hsl(var(--bc)); background: linear-gradient(135deg, rgba(248, 250, 255, 0.96), rgba(238, 242, 255, 0.9)); box-shadow: 0 14px 28px rgba(15, 23, 42, 0.08); transition: transform .2s ease, box-shadow .2s ease, background .2s ease, color .2s ease; text-decoration: none; }
.sidebar-link:hover { transform: translateY(-2px); box-shadow: 0 20px 38px rgba(15,23,42,.12); background: linear-gradient(135deg, rgba(234, 240, 255, 0.98), rgba(228, 236, 255, 0.92)); }
html.dark .sidebar-link, body.dark .sidebar-link { background: linear-gradient(135deg, rgba(24, 33, 59, 0.95), rgba(18, 28, 52, 0.88)); border-color: rgba(63, 93, 245, 0.32); box-shadow: 0 18px 36px rgba(3, 8, 26, 0.58); color: rgba(226, 232, 240, 0.9); }
html.dark .sidebar-link:hover, body.dark .sidebar-link:hover { background: linear-gradient(135deg, rgba(47, 71, 120, 0.95), rgba(37, 58, 102, 0.88)); box-shadow: 0 24px 44px rgba(3, 8, 26, 0.78); color: #f8fafc; }
.sidebar-link-active { display: flex; width: 100%; align-items: center; gap: .75rem; border: 1px solid transparent; border-radius: 1rem; padding: .75rem 1rem; font-size: .875rem; font-weight: 700; color: var(--p-content, #fff); background: linear-gradient(135deg, rgba(76, 110, 245, 0.95), rgba(90, 141, 255, 0.92)); box-shadow: 0 24px 46px rgba(76,110,245,.28); }

/* Stats */
.sidebar-stats { display: flex; flex-direction: column; gap: .75rem; }
.sidebar-stats-row { display: flex; align-items: center; justify-content: space-between; gap: .75rem; border: 1px solid rgba(148,163,184,.35); border-radius: 1rem; padding: .75rem 1rem; font-size: .875rem; font-weight: 700; color: hsl(var(--bc)); background: linear-gradient(135deg, rgba(248, 250, 255, 0.96), rgba(238, 242, 255, 0.9)); box-shadow: 0 14px 28px rgba(15, 23, 42, 0.08); }
.sidebar-stats-row:hover { transform: translateY(-2px); box-shadow: 0 20px 38px rgba(15,23,42,.12); background: linear-gradient(135deg, rgba(234, 240, 255, 0.98), rgba(228, 236, 255, 0.92)); }

/* Badges */
.badge-soft { display: inline-flex; align-items: center; justify-content: center; min-width: 3.2rem; padding: .25rem .75rem; border-radius: 999px; border: 1px solid hsl(var(--p) / 0.4); color: hsl(var(--p)); font-variant-numeric: tabular-nums; font-feature-settings: 'tnum' 1, 'kern' 1; direction: ltr; text-align: center; }

/* Hamburger */
.mobile-sidebar-toggle { display: inline-flex; align-items: center; justify-content: center; width: 2.85rem; height: 2.85rem; min-height: 2.85rem; padding: 0; border-radius: .95rem; border: 1px solid rgba(148,163,184,.35); background: linear-gradient(180deg, rgba(22, 32, 54, 0.95), rgba(16, 24, 42, 0.9)); color: #f8fafc; box-shadow: 0 14px 32px rgba(15, 23, 42, 0.28); transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease; cursor: pointer; position: relative; }
.mobile-sidebar-toggle::after { content: ""; position: absolute; inset: 0; border-radius: inherit; background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.18), transparent 65%); opacity: .75; pointer-events: none; }
.mobile-sidebar-toggle__icon { position: relative; display: block; width: 1.2rem; height: .85rem; }
.mobile-sidebar-toggle__line { position: absolute; inset-inline: 0; height: 1.5px; border-radius: 999px; background: rgba(248, 250, 255, 0.92); transition: background-color .2s ease; }
.mobile-sidebar-toggle__line--top { top: 0; }
.mobile-sidebar-toggle__line--middle { top: 50%; transform: translateY(-50%); }
.mobile-sidebar-toggle__line--bottom { bottom: 0; }
.mobile-sidebar-toggle:hover { transform: translateY(-1px); box-shadow: 0 18px 36px rgba(15, 23, 42, 0.36); border-color: rgba(148, 163, 255, 0.55); background: linear-gradient(180deg, rgba(24, 36, 58, 0.98), rgba(18, 28, 48, 0.92)); }
.mobile-sidebar-toggle:focus-visible { outline: 2px solid rgba(129, 140, 248, 0.75); outline-offset: 2px; }
@media (min-width: 1024px) { html:not(.dark) .mobile-sidebar-toggle, body:not(.dark) .mobile-sidebar-toggle { background: linear-gradient(180deg, rgba(30, 42, 68, 0.95), rgba(22, 34, 58, 0.9)); border-color: rgba(148, 163, 184, 0.4); color: #f8fafc; } }
html.dark .mobile-sidebar-toggle, body.dark .mobile-sidebar-toggle { background: linear-gradient(180deg, rgba(12, 21, 40, 0.95), rgba(8, 15, 32, 0.9)); border-color: rgba(129, 140, 248, 0.45); color: rgba(248, 250, 252, 0.98); box-shadow: 0 18px 40px rgba(5, 12, 30, 0.55); }
html.dark .mobile-sidebar-toggle:hover, body.dark .mobile-sidebar-toggle:hover { border-color: rgba(148, 163, 255, 0.62); background: linear-gradient(180deg, rgba(16, 28, 52, 0.98), rgba(11, 20, 38, 0.94)); }

/* Minimal fallback styles for primary-nav buttons on Customer/Technician pages */
/* Outer container ‚Äì soft card look */
.dashboard-tabbar { max-width: min(100%, 72rem); width: min(100%, 96vw); padding: .75rem 1rem; border-radius: 2rem; border: 1px solid rgba(76,110,245,.18); background: linear-gradient(135deg, rgba(248,250,255,.9), rgba(232,240,255,.82)); box-shadow: 0 22px 48px rgba(15,23,42,.12); margin-inline: auto; }
/* Inner rounded bar */
.dashboard-tabbar .tab-buttons { display: flex; flex-wrap: nowrap; gap: .6rem; align-items: center; justify-content: center; padding: .35rem .8rem; border-radius: 999px; border: 1px solid rgba(76,110,245,.12); background: linear-gradient(135deg, rgba(255,255,255,.88), rgba(236,243,255,.82)); box-shadow: inset 0 0 0 1px rgba(255,255,255,.35), 0 12px 24px rgba(76,110,245,.08); overflow-x: auto; scrollbar-width: none; }
.dashboard-tabbar .tab-buttons::-webkit-scrollbar { display: none; }
.dashboard-tabbar .tab-button { display: inline-flex; align-items: center; justify-content: center; gap: .5rem; padding: .55rem 1rem; border-radius: 999px; border: 1px solid rgba(148,163,184,.35); font-weight: 700; text-decoration: none; cursor: pointer; transition: box-shadow .2s ease, transform .2s ease, background .2s ease, color .2s ease; }
.dashboard-tabbar .tab-button:hover, .dashboard-tabbar .tab-button:focus-visible { transform: translateY(-1px); box-shadow: 0 12px 28px rgba(15,23,42,.12); outline: none; }
html.dark .dashboard-tabbar { background: linear-gradient(135deg, rgba(26,35,62,.92), rgba(18,28,52,.88)); border-color: rgba(63,93,245,.32); box-shadow: 0 26px 52px rgba(3,8,26,.58); }
html.dark .dashboard-tabbar .tab-buttons { background: linear-gradient(135deg, rgba(32,47,82,.88), rgba(26,39,70,.82)); border-color: rgba(99,102,241,.22); box-shadow: inset 0 0 0 1px rgba(59,130,246,.18), 0 14px 28px rgba(3,8,26,.6); }
html.dark .dashboard-tabbar .tab-button, body.dark .dashboard-tabbar .tab-button { border-color: rgba(63, 93, 245, 0.28); }

/* Customer primary nav pills */
.customer-page .customer-primary-nav .tab-button { background: linear-gradient(135deg, rgba(248, 250, 255, 0.96), rgba(238, 242, 255, 0.9)); color: hsl(var(--bc)); }
html.dark .customer-page .customer-primary-nav .tab-button, body.dark .customer-page .customer-primary-nav .tab-button { background: linear-gradient(135deg, rgba(24, 33, 59, 0.95), rgba(18, 28, 52, 0.88)); color: rgba(226, 232, 240, 0.92); }

/* Ensure RTL/LTR spacing remains consistent */
body[dir='rtl'] .dashboard-tabbar .tab-buttons { direction: rtl; }
body[dir='ltr'] .dashboard-tabbar .tab-buttons { direction: ltr; }
`,t=document.createElement("style");t.id="sidebar-inline-styles",t.textContent=e,document.head.appendChild(t)}catch{}}Et();function ce(){const e=typeof window<"u"?window:globalThis;return e.__APP_DATA_STORE__||(e.__APP_DATA_STORE__={customers:[],reservations:[],equipment:[],technicians:[],maintenance:[],projects:[],technicianPayouts:[],packages:[]}),e.__APP_DATA_STORE__}function v(e,t,r){r!=null&&(e[t]=Array.isArray(r)?[...r]:r)}function Tt(){const e=ce();return{customers:[...e.customers],reservations:[...e.reservations],equipment:[...e.equipment],technicians:[...e.technicians],maintenance:[...e.maintenance],projects:[...e.projects],technicianPayouts:[...e.technicianPayouts],packages:[...e.packages]}}function Kt(e={}){const t=ce();v(t,"customers",e.customers),v(t,"reservations",e.reservations),v(t,"equipment",e.equipment),v(t,"technicians",e.technicians),v(t,"maintenance",e.maintenance),v(t,"projects",e.projects),v(t,"technicianPayouts",e.technicianPayouts),v(t,"packages",e.packages)}let re=!1;function Vt(e=null){if(re)return;const t=e||(typeof window<"u"?window.__LEGACY_DATA__:null);if(!t||typeof t!="object"){re=!0;return}const r=ce();if(["customers","reservations","equipment","technicians","maintenance","projects","technicianPayouts","packages"].forEach(n=>{const a=t[n];Array.isArray(a)&&a.length>0&&(r[n]=[...a])}),re=!0,!e&&typeof window<"u")try{delete window.__LEGACY_DATA__}catch{}}var At={};function Fe(){let e=document.getElementById("toast-container");e||(e=document.createElement("div"),e.id="toast-container",document.body.appendChild(e));try{e.classList.remove("toast-container","fixed","bottom-6","start-6","z-50")}catch{}try{e.parentElement&&e.parentElement!==document.body&&document.body.appendChild(e)}catch{}const t=(r,o)=>{try{e.style.setProperty(r,o,"important")}catch{e.style[r]=o}};return t("position","fixed"),t("top","20px"),t("bottom","auto"),t("left","0"),t("right","0"),t("transform","none"),t("margin","0 auto"),t("z-index","2147483647"),t("display","flex"),t("flex-direction","column"),t("align-items","center"),t("width","min(92vw, 380px)"),t("pointer-events","none"),e}function Ue(e){const t=(r,o)=>{try{e.style.setProperty(r,o,"important")}catch{e.style[r]=o}};t("background","#333"),t("color","#fff"),t("padding","10px 18px"),t("margin-top","10px"),t("border-radius","10px"),t("box-shadow","0 8px 24px rgba(15, 23, 42, 0.32)"),t("opacity","0"),t("transition","opacity 0.3s ease"),t("font-size","0.875rem"),t("line-height","1.4"),t("pointer-events","auto"),t("backdrop-filter","blur(4px)"),t("position","relative"),t("z-index","2147483647")}function qe(e){requestAnimationFrame(()=>{try{e.style.setProperty("opacity","1","important")}catch{e.style.opacity="1"}})}function Be(e,t){let r=null;const o=()=>{r&&(clearTimeout(r),r=null),e.style.opacity="0",setTimeout(()=>e.remove(),320)};if(t===-1){const n=()=>{try{document.removeEventListener("click",n,{capture:!0})}catch{}o()};return setTimeout(()=>{try{document.addEventListener("click",n,{once:!0,capture:!0})}catch{}},1200),{hide:o,timeoutId:r}}return r=setTimeout(o,Math.max(0,t)),{hide:o,timeoutId:r}}function J(e,t=3e3,r){try{console.debug("[toast]",e)}catch{}const o=Fe(),n=document.createElement("div");n.className="toast-message",n.textContent=e;const a=new Set(["success","error","info","warning"]);let s="info",i=3e3;typeof t=="number"&&Number.isFinite(t)?i=Math.max(0,t):typeof t=="string"&&a.has(t)&&(s=t,typeof r=="number"&&Number.isFinite(r)&&(i=Math.max(0,r))),Ue(n);const d={success:{bg:"#14532d",border:"rgba(34,197,94,0.35)",glow:"rgba(34,197,94,0.35)"},error:{bg:"#7f1d1d",border:"rgba(239,68,68,0.35)",glow:"rgba(239,68,68,0.35)"},info:{bg:"#1e3a8a",border:"rgba(59,130,246,0.35)",glow:"rgba(59,130,246,0.35)"},warning:{bg:"#7c2d12",border:"rgba(245,158,11,0.35)",glow:"rgba(245,158,11,0.35)"}},{bg:c,border:l,glow:p}=d[s]||d.info;n.style.background=c,n.style.border=`1px solid ${l}`,n.style.boxShadow=`0 8px 24px rgba(15, 23, 42, 0.32), 0 0 0 4px ${p}`,o.appendChild(n),qe(n),setTimeout(()=>{if(!(typeof process<"u"&&At?.VITEST))try{const m=n.getBoundingClientRect(),u=m.height<8||m.width<8||m.top<-10||m.top>window.innerHeight+10,w=window.getComputedStyle(n),z=w.display==="none"||w.visibility==="hidden"||Number(w.opacity||"1")<.05;(u||z)&&(n.style.position="fixed",n.style.top="20px",n.style.bottom="auto",n.style.left="50%",n.style.right="auto",n.style.transform="translateX(-50%)",n.style.zIndex="2147483647",document.body.appendChild(n))}catch{}},30);const{hide:A}=Be(n,i);n.addEventListener("click",A)}function vt({message:e,duration:t=6e3,actionLabel:r,onAction:o,linkLabel:n,linkHref:a}={}){const s=Fe(),i=document.createElement("div");i.className="toast-message",Ue(i);const d=document.createElement("div");d.style.display="flex",d.style.flexDirection="column",d.style.gap="8px";const c=document.createElement("span");c.textContent=e,d.appendChild(c);const l=document.createElement("div");l.style.display="flex",l.style.flexWrap="wrap",l.style.gap="8px";let p=!1,A=()=>{};if(n&&a){const u=document.createElement("a");u.href=a,u.textContent=n,u.target="_blank",u.rel="noopener noreferrer",u.style.color="#bfdbfe",u.style.textDecoration="underline",u.style.fontWeight="500",u.style.pointerEvents="auto",l.appendChild(u),p=!0}if(r&&typeof o=="function"){const u=document.createElement("button");u.type="button",u.textContent=r,u.style.border="1px solid rgba(255,255,255,0.4)",u.style.background="rgba(15, 23, 42, 0.2)",u.style.color="#fff",u.style.borderRadius="999px",u.style.padding="6px 14px",u.style.fontSize="0.78rem",u.style.cursor="pointer",u.addEventListener("click",w=>{w.preventDefault();try{o()}catch(z){console.error("‚ö†Ô∏è [toast] action callback failed",z)}finally{A()}}),l.appendChild(u),p=!0}p&&d.appendChild(l),i.appendChild(d),s.appendChild(i),qe(i);const{hide:m}=Be(i,t);A=m,i.addEventListener("click",m)}try{typeof window<"u"&&(typeof window.showToast!="function"&&(window.showToast=J),typeof window.showToastWithAction!="function"&&(window.showToastWithAction=vt))}catch{}const xe="RSV",ke="PRJ",_t=4,O=(()=>{try{const e=typeof globalThis<"u"?globalThis:window;return e.__APP_SEQUENCE_STATE__=e.__APP_SEQUENCE_STATE__||{reservation:0,project:0},e.__APP_SEQUENCE_STATE__}catch{return{reservation:0,project:0}}})();function St(){return Number.isFinite(O.reservation)?O.reservation:0}function Lt(e){O.reservation=Math.max(0,Number.parseInt(e,10)||0)}function Ct(){return Number.isFinite(O.project)?O.project:0}function Pt(e){O.project=Math.max(0,Number.parseInt(e,10)||0)}function He(){try{const e=Tt();return{reservations:Array.isArray(e?.reservations)?e.reservations:[],projects:Array.isArray(e?.projects)?e.projects:[]}}catch(e){return console.warn("‚ö†Ô∏è [utils] Failed to load data snapshot for code generation",e),{reservations:[],projects:[]}}}function Rt(e,t){if(e==null)return 0;if(typeof e=="number")return Number.isFinite(e)?Math.max(0,Math.trunc(e)):0;const r=String(e).trim();if(!r)return 0;const o=`${t.toUpperCase()}-`,n=r.toUpperCase();let a=r;n.startsWith(o)&&(a=r.slice(o.length));const s=a.match(/(\d+)$/);if(s){const d=Number.parseInt(s[1],10);return Number.isFinite(d)?Math.max(0,d):0}const i=Number.parseInt(r,10);return Number.isFinite(i)?Math.max(0,i):0}function Dt(e){return Array.isArray(e)?e:[e]}function ze(e,t,r){return!Array.isArray(e)||e.length===0?0:e.reduce((o,n)=>{const a=r(n),i=Dt(a).reduce((d,c)=>{const l=Rt(c,t);return l>d?l:d},0);return i>o?i:o},0)}function $e(e,t){const r=Math.max(0,Number.parseInt(t,10)||0);return`${e}-${String(r).padStart(_t,"0")}`}function Wt(){const{reservations:e}=He(),t=ze(e,xe,o=>[o?.reservationCode,o?.reservation_code,o?.reservationId,o?.reservation_id,o?.id]),r=Math.max(t,St())+1;return Lt(r),$e(xe,r)}function Yt(){const{projects:e}=He(),t=ze(e,ke,o=>[o?.projectCode,o?.project_code,o?.code,o?.id]),r=Math.max(t,Ct())+1;return Pt(r),$e(ke,r)}function Xt(e,t={}){if(!e)return"-";const r=new Date(e);if(Number.isNaN(r.getTime()))return"-";const o=document?.documentElement?.getAttribute("lang")||(typeof ae=="function"?ae():null)||"ar",a=String(o).toLowerCase().startsWith("ar")?"ar-SA-u-ca-gregory-nu-latn":"en-US",i=new Intl.DateTimeFormat(a,{dateStyle:"short",timeStyle:"short",hour12:!0,calendar:"gregory",...t}).formatToParts(r),d=r.getHours()>=12?"PM":"AM",c=i.map(l=>l.type==="dayPeriod"?d:l.value).join("").replace(/\u200f/g,"");return It(c)}function It(e){if(e==null)return"";e=String(e);const t=["Ÿ†","Ÿ°","Ÿ¢","Ÿ£","Ÿ§","Ÿ•","Ÿ¶","Ÿß","Ÿ®","Ÿ©"],r=["€∞","€±","€≤","€≥","€¥","€µ","€∂","€∑","€∏","€π"],o=["0","1","2","3","4","5","6","7","8","9"];return Array.from(e).map(n=>{const a=t.indexOf(n);if(a>-1)return o[a];const s=r.indexOf(n);return s>-1?o[s]:n}).join("")}const Ee={INVALID:{key:"login.errors.invalidCredentials",fallback:"‚ùå ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©"},NETWORK:{key:"login.errors.network",fallback:"üåê ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."},GENERIC:{key:"login.errors.generic",fallback:"‚ö†Ô∏è ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."}};let f=null;const Nt={USER_UPDATED:"auth:user-updated"};let ne=!1;function Te(){if(!ne){ne=!0;try{window.location.href="login.html"}finally{setTimeout(()=>{ne=!1},2e3)}}}function jt(){try{const e=window?.location?.hostname||"";return e==="localhost"||e==="127.0.0.1"||e===""||e==="::1"}catch{return!1}}function Ge(){try{if(!jt())return!1;const e=new URL(window.location.href),t=(e.searchParams.get("bypassAuth")||e.searchParams.get("dev")||e.searchParams.get("debug")||"").toLowerCase();return window.__BYPASS_AUTH__===!0||t==="1"||t==="true"}catch{return!1}}function Mt(e){if(typeof document>"u")return;const t=document.documentElement;t&&(e?t.dataset.userRole=e:delete t.dataset.userRole)}function Ot(){typeof document>"u"||document.dispatchEvent(new CustomEvent(Nt.USER_UPDATED,{detail:f?{...f}:null}))}function R(e){if(e&&typeof e=="object"){const t=typeof e.role=="string"?e.role.trim().toLowerCase():null;f={id:Number.isFinite(e.id)?Number(e.id):null,username:String(e.username||""),loginAt:e.loginAt??null,role:t}}else f=null;Mt(f?.role||""),Ot()}function Ft(e="INVALID",t){if(t&&typeof t=="string")return t;const r=Ee[e]||Ee.INVALID;return _(r.key,r.fallback)}function Ut(){const e=document.getElementById("login-error");e&&(e.textContent="",e.classList.add("hidden"))}function F(e="INVALID",t){const r=Ft(e,t);J(r);const o=document.getElementById("login-error");o&&(o.textContent=r,o.classList.remove("hidden"))}async function qt({username:e,password:t,form:r}){if(!(!e||!t))try{if(typeof window>"u"||typeof navigator>"u"||!window.isSecureContext||!navigator.credentials||typeof navigator.credentials.store!="function")return;const o=(()=>{try{const a=document.querySelector('link[rel~="icon"]');return a?a.href:void 0}catch{return}})();let n=null;if(r&&r instanceof HTMLFormElement&&typeof window.PasswordCredential<"u")try{n=new window.PasswordCredential(r)}catch(a){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿπÿ™ŸÖÿßÿØ ŸÖŸÜ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨",a)}if(!n&&typeof window.PasswordCredential<"u")try{n=new window.PasswordCredential({id:e,name:e,password:t,iconURL:o})}catch(a){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° PasswordCredential ŸÖÿ®ÿßÿ¥ÿ±",a)}!n&&typeof navigator.credentials.create=="function"&&(n=await navigator.credentials.create({password:{id:e,name:e,password:t,iconURL:o}})),n&&await navigator.credentials.store(n)}catch(o){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿπÿ™ŸÖÿßÿØ ŸÅŸä ÿßŸÑŸÖÿ™ÿµŸÅÿ≠",o)}}async function Jt(e,t,{form:r}={}){const o=(e||"").trim(),n=t||"";if(Ut(),!o||!n)return F("INVALID"),!1;try{const a=await B("/auth/",{method:"POST",body:{username:o,password:n}});R(a?.data??null);try{await ie({theme:H()})}catch(s){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑ ÿßŸÑÿ≥ŸÖÿ© ÿ®ÿπÿØ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",s)}return et(),await qt({username:o,password:n,form:r}),window.location.href="home.html",!0}catch(a){if(console.error("‚ùå ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",a),R(null),a instanceof k)if(a.status===401||a.status===403)F("INVALID");else if(a.status>=500)F("GENERIC");else{const i=typeof a.message=="string"&&!/^request failed with status/i.test(a.message)?a.message:null;F("GENERIC",i)}else F("NETWORK");return!1}}async function Qt(){try{await B("/auth/",{method:"DELETE"})}catch(e){console.warn("‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ",e)}finally{R(null),J("üö™ ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨"),window.location.href="login.html"}}async function Bt({refresh:e=!1}={}){if(Ge())return f||R({id:0,username:"dev-local",loginAt:new Date().toISOString(),role:"admin"}),f;if(!e&&f)return f;try{const t=await B("/auth/"),r=t&&typeof t=="object"?Object.prototype.hasOwnProperty.call(t,"data")?t.data:t:null;return R(r??null),f}catch(t){if(t instanceof k&&t.status===401)throw R(null),t;return console.warn("‚ö†Ô∏è getCurrentUser: non-auth error, preserving session",t),f}}function Zt({redirect:e=!0,retries:t=1,retryDelay:r=300}={}){if(Ge())return f||R({id:0,username:"dev-local",loginAt:new Date().toISOString(),role:"admin"}),Promise.resolve(f);const o=n=>Bt({refresh:!0}).then(a=>(!a&&e&&Te(),a)).catch(a=>a instanceof k&&a.status===401&&n>0?new Promise(s=>setTimeout(s,Math.max(0,r))).then(()=>o(n-1)):a instanceof k&&a.status===401?(e&&Te(),null):(console.warn("‚ö†Ô∏è checkAuth: network/server issue, skipping redirect",a),f));return o(Math.max(0,Number.isFinite(t)?t:1))}function Ht(){return f?.role||null}function er(){return Ht()==="admin"}function tr(){J(_("auth.permissions.denied","‚ö†Ô∏è ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑÿ™ŸÜŸÅŸäÿ∞ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°"),"error")}export{k as A,vt as B,Wt as C,Gt as a,B as b,Zt as c,Tt as d,h as e,Le as f,Bt as g,Kt as h,wt as i,J as j,$t as k,Qt as l,Vt as m,It as n,Jt as o,ae as p,Nt as q,Ne as r,Se as s,_ as t,ie as u,er as v,tr as w,Yt as x,Xt as y,ft as z};
