@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    font-feature-settings: 'kern';
    scroll-behavior: smooth;
  }

  html {
    @apply font-tajawal;
  }

  body {
    @apply bg-base-200 text-base-content min-h-screen antialiased;
  }

  [dir='rtl'] {
    font-family: 'Tajawal', ui-sans-serif, system-ui, sans-serif;
  }
}

@layer components {
  .page-shell {
    @apply min-h-screen bg-base-200 text-base-content;
  }

  .page-grid {
    @apply flex flex-col min-h-screen bg-gradient-to-br from-brand-50 via-base-200 to-transparent dark:from-base-200 dark:via-base-200 dark:to-transparent;
  }

  .dashboard-header {
    @apply sticky top-0 z-40 backdrop-blur border-b border-base-200 bg-base-100 shadow-sm;
    background-color: hsl(var(--b1) / 0.92);
  }

  .dashboard-header-nav {
    @apply container mx-auto flex items-center justify-between gap-4 px-4 py-4;
  }

  .sidebar-shell {
    @apply flex flex-col gap-4 bg-base-100 backdrop-blur border-l border-base-200 shadow-soft p-6 w-72 xl:w-80;
    background-color: hsl(var(--b1) / 0.9);
  }

  .sidebar-menu {
    @apply flex flex-col gap-2;
  }

  .sidebar-heading {
    @apply text-xs font-semibold uppercase tracking-widest;
    color: hsl(var(--bc) / 0.6);
  }

  .sidebar-link {
    @apply btn btn-ghost justify-start gap-3 rounded-2xl hover:text-base-content;
    color: hsl(var(--bc) / 0.8);
  }

  .sidebar-link:hover {
    background-color: hsl(var(--p) / 0.1);
  }

  .sidebar-link-active {
    @apply btn btn-primary justify-start gap-3 rounded-2xl text-primary-content shadow-soft;
  }

  .dashboard-main {
    @apply flex-1;
  }

  .dashboard-main-inner {
    @apply container mx-auto px-4 py-6 lg:py-8;
  }

  .stats-cards {
    @apply grid gap-4 sm:grid-cols-2 xl:grid-cols-4;
  }

  .card-surface {
    @apply bg-base-100 rounded-3xl border border-base-200 shadow-soft p-6 space-y-4;
  }

  .glass-card {
    @apply bg-base-100 shadow-soft border border-base-200 backdrop-blur-sm rounded-3xl p-6;
    background-color: hsl(var(--b1) / 0.88);
  }

  .tab-buttons {
    @apply flex flex-wrap items-center gap-3 bg-base-100 border border-base-200 rounded-3xl p-2 shadow-sm;
    background-color: hsl(var(--b1) / 0.92);
  }

  .tab-button {
    @apply btn btn-sm lg:btn-md btn-ghost rounded-3xl px-4 transition;
  }

  .tab-button.active {
    @apply btn-active btn-primary text-primary-content shadow-lg;
  }

  .tab-buttons-vertical {
    @apply flex-col items-stretch gap-2;
  }

  .tab-buttons-vertical .tab-button {
    @apply justify-between text-start;
  }

  .tab-buttons-horizontal {
    @apply flex items-center gap-2 overflow-x-auto;
  }

  .tab-buttons-horizontal .tab-button {
    @apply flex-shrink-0 whitespace-nowrap;
  }

  .tab-content-wrapper {
    @apply space-y-8;
  }

  .tab {
    @apply hidden;
  }

  .tab.active {
    @apply block;
  }

  .sub-tab-buttons {
    @apply flex flex-wrap gap-2 rounded-full bg-base-100 border border-base-200 p-1 shadow-sm;
    background-color: hsl(var(--b1) / 0.92);
  }

  .sub-tab-button {
    @apply btn btn-xs sm:btn-sm md:btn-md btn-ghost rounded-full px-4;
  }

  .sub-tab-button.active {
    @apply btn-active btn-primary text-primary-content shadow;
  }

  .management-form-box {
    @apply glass-card;
  }

  .management-form-header {
    @apply flex flex-wrap items-start justify-between gap-4;
  }

  .management-form-icon {
    @apply text-4xl w-14 h-14 flex items-center justify-center rounded-2xl bg-primary text-primary;
    background-color: hsl(var(--p) / 0.12);
  }

  .management-form-hint {
    @apply text-sm;
    color: hsl(var(--bc) / 0.6);
  }

  .management-form {
    @apply space-y-6;
  }

  .management-form-grid {
    @apply grid gap-4 sm:grid-cols-2 lg:grid-cols-3;
  }

  .form-field {
    @apply flex flex-col gap-2;
  }

  .form-field-notes {
    @apply sm:col-span-2 lg:col-span-3;
  }

  .form-label {
    @apply text-sm font-semibold;
    color: hsl(var(--bc) / 0.7);
  }

  .form-control,
  input.form-control,
  textarea.form-control,
  select.form-select,
  .form-select,
  .form-textarea {
    @apply w-full rounded-2xl border border-base-300 bg-base-100 px-4 py-3 text-base-content focus:border-primary focus:ring-2 focus:ring-primary transition;
  }

  .form-select {
    @apply appearance-none bg-no-repeat bg-[length:1rem_1rem] bg-[right_1rem_center];
    background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%236366f1"%3E%3Cpath fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z" clip-rule="evenodd"/%3E%3C/svg%3E');
  }

  .form-control::placeholder,
  .form-textarea::placeholder {
    color: hsl(var(--bc) / 0.45);
  }

  .form-control[type='file'] {
    @apply cursor-pointer;
  }

  .form-control[type='datetime-local'] {
    @apply pe-12;
  }

  .form-control:disabled,
  .form-select:disabled {
    @apply cursor-not-allowed opacity-70 bg-base-200;
  }

  .management-form-actions {
    @apply flex flex-wrap justify-end gap-3;
  }

  .table-wrapper {
    @apply glass-card overflow-hidden p-0;
  }

  .table thead {
    @apply bg-base-200 text-base-content;
    background-color: hsl(var(--b2) / 0.85);
    color: hsl(var(--bc) / 0.7);
  }

  .table tbody tr td {
    @apply align-middle whitespace-nowrap;
  }

  .table-actions-head {
    @apply text-center;
  }

  .table-dark {
    @apply bg-base-200 text-base-content;
  }

  .table-light {
    @apply bg-base-100 text-base-content;
  }

  .text-muted {
    color: hsl(var(--bc) / 0.6);
  }

  .stats {
    display: grid;
    gap: 1rem;
  }

  @screen sm {
    .stats {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @screen xl {
    .stats {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
  }

  .stat {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    border-radius: 1.5rem;
    border: 1px solid hsl(var(--b2) / 0.6);
    background-color: hsl(var(--b1) / 0.92);
    box-shadow: 0 18px 34px -20px rgba(15, 23, 42, 0.35);
    padding: 1.5rem;
  }

  .stat-figure {
    font-size: 0;
  }

  .stat-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: hsl(var(--bc) / 0.6);
  }

  .stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: hsl(var(--bc));
  }

  .stat-desc {
    font-size: 0.75rem;
    color: hsl(var(--bc) / 0.45);
  }

  .toast-container {
    @apply space-y-2;
  }

  .mobile-sidebar-toggle {
    @apply lg:hidden btn btn-circle btn-ghost border border-base-300;
  }

  .sidebar-backdrop {
    @apply fixed inset-0 bg-black backdrop-blur-sm z-40 hidden;
    background-color: rgb(0 0 0 / 0.35);
  }

  .sidebar-drawer {
    @apply fixed inset-y-0 start-0 z-50 w-72 max-w-full translate-x-full bg-base-100 shadow-2xl transition-transform duration-300 ease-in-out lg:static lg:translate-x-0 lg:shadow-none lg:border-l lg:border-base-200 lg:bg-transparent lg:w-72 lg:max-w-none;
  }

  .sidebar-drawer.open {
    @apply translate-x-0;
  }

  .sidebar-backdrop.open {
    @apply block;
  }

  .language-toggle-btn,
  .theme-toggle-btn,
  #logout-btn {
    @apply btn btn-sm md:btn-md btn-ghost rounded-full border border-base-300;
    border-color: hsl(var(--bc) / 0.35);
  }

  .language-toggle-btn:hover,
  .theme-toggle-btn:hover {
    border-color: hsl(var(--p) / 0.45);
  }

  #logout-btn {
    @apply btn-error text-error-content border-none hover:brightness-105;
  }

  .theme-toggle-btn {
    @apply btn-ghost;
  }

  .language-toggle-btn {
    @apply btn-ghost;
  }

  .add-project-btn {
    @apply btn btn-primary btn-lg rounded-full shadow-soft gap-2;
  }

  .reservation-filter-card,
  .kpi-card,
  .calendar-card {
    @apply glass-card;
  }

  .badge-soft {
    @apply badge badge-outline badge-lg px-4 rounded-full text-primary;
    border-color: hsl(var(--p) / 0.4);
  }

  .empty-state {
    @apply flex flex-col items-center justify-center gap-3 py-16 text-center;
    color: hsl(var(--bc) / 0.6);
  }

  .alert {
    @apply rounded-2xl border px-4 py-3 text-sm;
  }

  .alert-info {
    @apply text-primary;
    border-color: hsl(var(--p) / 0.35);
    background-color: hsl(var(--p) / 0.12);
  }

  .table-responsive {
    @apply overflow-x-auto rounded-3xl border border-base-200 bg-base-100 shadow-soft;
  }

  .table-responsive > table {
    @apply min-w-full;
  }

  .btn-close {
    @apply relative inline-flex h-9 w-9 items-center justify-center rounded-full border border-transparent transition-colors duration-150 ease-in-out hover:bg-base-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary;
    background: none;
    color: hsl(var(--bc) / 0.6);
  }

  .btn-close::before {
    content: 'âœ•';
    font-size: 1rem;
    line-height: 1;
  }

  .modal {
    @apply fixed inset-0 z-50 hidden overflow-y-auto p-4;
  }

  .modal.show {
    @apply flex;
  }

  .modal-dialog {
    @apply relative mx-auto my-auto w-full max-w-3xl;
  }

  .modal-lg {
    @apply max-w-4xl;
  }

  .modal-content {
    @apply bg-base-100 text-base-content rounded-3xl border border-base-200 shadow-soft overflow-hidden;
  }

  .modal-header,
  .modal-footer {
    @apply flex items-center justify-between gap-4 px-6 py-4;
  }

  .modal-header {
    @apply border-b border-base-200;
  }

  .modal-footer {
    @apply border-t border-base-200 justify-end;
  }

  .modal-body {
    @apply px-6 py-5 space-y-4;
  }

  .modal-backdrop.show {
    @apply fixed inset-0 z-40 bg-slate-900 backdrop-blur-sm;
    background-color: rgb(15 23 42 / 0.45);
  }

  .row {
    @apply flex flex-wrap -mx-2 gap-y-3;
  }

  .row.g-2 {
    @apply gap-2;
  }

  .row.g-3 {
    @apply gap-3;
  }

  .row.g-4 {
    @apply gap-4;
  }

  .row > [class*='col-'] {
    @apply w-full px-2;
  }

  @screen sm {
    .col-sm-6 {
      @apply w-1/2;
    }
  }

  @screen md {
    .col-md-4 {
      @apply w-1/3;
    }

    .col-md-6 {
      @apply w-1/2;
    }

    .col-md-8 {
      @apply w-2/3;
    }

    .col-md-12 {
      @apply w-full;
    }
  }

  @screen lg {
    .col-lg-3 {
      @apply w-1/4;
    }

    .col-lg-4 {
      @apply w-1/3;
    }

    .col-lg-6 {
      @apply w-1/2;
    }

    .col-lg-8 {
      @apply w-2/3;
    }
  }
}
